{
    "id": "C-84",
    "original_text": "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach. We refer to this as the selfish caching problem. In our model, nodes incur either cost for replicating resources or cost for access to a remote replica. We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination. The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds. With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate. Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1. INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years. Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems. However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server. In reality, servers may behave selfishly - seeking to maximize their own benefit. For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains. They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior. It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior. In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations. We model selfish caching as a non-cooperative game. In the basic model, the servers have two possible actions for each object. If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica. On the other hand, if all replicas are located too far away, the server is better off caching the object itself. Decisions about caching the replicas locally are arrived at locally, taking into account only local costs. We also define a more elaborate payment model, in which each server bids for having an object replicated at another site. Each site now has the option of replicating an object and collecting the related bids. Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers. Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28]. Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee. In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted. With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum. This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21]. The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum. The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own. However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium. This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum. In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments? Will the Nash equilibria be improved? We show that pure strategy Nash equilibria always exist in the caching game. The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply. Under certain topologies, the price of anarchy does have tighter bounds. For complete graphs and stars, it is O(1). For D-dimensional grids, it is O(n D D+1 ). Even the optimistic price of anarchy can be O(n). In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one. Our simulation results show several interesting phases. As the placement cost increases from zero, the price of anarchy increases. When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems. As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy. The rest of the paper is organized as follows. In Section 2 we discuss related work. Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy. In Section 4 we discuss the payment game and analyze its price of anarchy. In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed. We discuss extensions of the game and directions for future work in Section 6. 2. RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16]. Most of these systems use caching for performance, availability, and reliability. The caching protocols assume obedience to the protocol and ignore participants incentives. Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly. The placement of replicas in the caching problem is the most important issue. There is much work on the placement of web replicas, instrumentation servers, and replicated resources. All protocols assume obedience and ignore participants incentives. In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems. Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20]. Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4]. Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8]. RaDar is a system that replicates and migrates objects for an Internet hosting service [31]. Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34]. Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30]. The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27]. Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26]. Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers. There is little research in non-cooperative facility location games, as far as we know. Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility). In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost. Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations. Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location. On the other hand, the significant problems in our game are undersupply and misplacement. In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12]. As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria. However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items. Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29]. Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13]. P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29]. Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3. BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost). Figure 1 shows examples of caching among four servers. In network (a), A stores an object. Suppose B wants to access the object. If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b). In network (c), C wants to access the object. If C is far from A, C caches the object instead of accessing the object from A. It is possible that in an optimal configuration it would be better to place replicas in A and B. Understanding the placement of replicas by selfish servers is the focus of our study. The caching problem is abstracted as follows. There is a set N of n servers and a set M of m objects. The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching. There are four servers labeled A, B, C, and D. The rectangles are object replicas. In (a), A stores an object. If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b). If the distance cost is too high, the server caches the object itself, as C does in (c). This figure is an example of our caching game model. from server i to server j). D models an underlying network topology. For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik). Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j). When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j). In this study, we assume that servers have no capacity limit. As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately. Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1. A configuration X for some object O is the set of servers replicating this object. The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers. We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache. In the game, each server chooses a pure strategy that minimizes its cost. Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game. It should be emphasized that we consider only pure strategy Nash equilibria in this paper. The cost model is an important part of the game. Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i. Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object. The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period. We see tradeoffs between different parameters in this equation. For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases. However, note that by varying αij itself we can capture the full range of behaviors in the game. For our analysis, we use only αij . Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game. Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9]. A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games. Therefore, we can focus on the single object game in the rest of this paper. For single object selfish caching, each server i has two strategies - to cache or not to cache. The object under consideration is j. We define Si to be 1 when server i caches j and 0 otherwise. The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game. The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost. Game theory is interested in stable solutions called Nash equilibria. A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy. A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1. Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost. For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i. If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers. The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost. The dark nodes replicate the object. Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object. Network (b) shows the social optimum where two replicas, one for each cluster, are placed. The price of anarchy is O(n) and even the optimistic price of anarchy is O(n). This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers. Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed. Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object. Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache. If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1. The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost. The social optimum cost will serve as an important base case against which to measure the cost of selfish caching. We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles. Note that in the basic game, this means varying configuration X over all possible configurations. In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another. The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11]. To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise. The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server. The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria. We discuss the price of anarchy in general and then on specific underlying topologies. In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers. In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1). THEOREM 1. Pure strategy Nash equilibria exist in the basic game. PROOF. We show a constructive proof. First, initialize the set V to N. Then, remove all nodes with zero demand from V . Each node x defines βx, where βx = α wxj . Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z. Pick a node y ∈ V such that βy ≤ βx for all x ∈ V . Place a replica at y and then remove y and all z ∈ Z(y) from V . No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost. Iterate this process of placing replicas until V is empty. Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process. The resulting configuration is a pure-strategy Nash equilibrium of the basic game. The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3]. The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum. We show general bounds on the price of anarchy. Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) . The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition. Formally, we can define C(SW ) as follows. C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations. Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α. Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij . We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum. When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely. However, the social optimum may still place multiple replicas. Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α . Note that depending on the underlying topology, even the lower bound of PoA can be O(n). Finally, there is a transition when α > maxj∈N Èi dij. In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2. Figure 2 shows an example of the inefficiency of a Nash equilibrium. In the network there are two clusters of servers whose size is n 2 . The distance between two clusters is α − 1 where α is the placement cost. Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object. In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica. However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b). Therefore, C(SO) = 2α. PoA = α+(α−1) n 2 2α , which is O(n). This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers. Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n). In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid. In these topologies, we set the distance between directly connected nodes to one. We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1. A summary of the results is shown in Table 1. 4. PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object. The cost of replication is shared among the nodes paying the server that replicates the object. The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object. In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj). A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold. Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise. We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi. If j does not replicate the object, i does not pay j. Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}. Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i. To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game. By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself. Its net payment is biIvi − RiIi. The total cost incurred by each node is the sum of its placement cost, access cost, and net payment. It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game. We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium. We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game. In this analysis we use α to represent αij . THEOREM 2. Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game. Therefore, the price of anarchy of the payment game is at least that of the basic game. PROOF. Consider any Nash equilibrium configuration in the basic game. For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α. Also, for all i, bi = 0. A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache. Therefore it is better off keeping its threshold and bid at 0 and replicating the object. A node that is not replicating the object can access the object remotely at a cost less than or equal to α. Lowering its threshold does not decrease its cost, since all bi are zero. The payment necessary for another server to place a replica is at least α. No player has incentive to deviate, so the current configuration is a Nash equilibrium. In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology. Now let us look at what happens to the example shown in Figure 2 in the best case. Suppose node Bs neighbors each decide to pay node B an amount 2/n. B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost. The same argument holds for A because of symmetry in the graph. Since no one has an incentive to deviate, the configuration is a Nash equilibrium. Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b). Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium. We first present the following observation, which is used in the proof, about thresholds in the payment game. OBSERVATION 1. If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij). Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3. In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration. The optimistic price of anarchy in the payment game is therefore always one. PROOF. Consider the socially optimal configuration φopt. Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes. Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself. In the socially optimal configuration, dij ≤ α for all j in Qi. We want to find a set of payments and thresholds that makes this configuration implementable. The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i. For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i. It is clear that δj ≥ 0. CLAIM 1. For each i ∈ No, let be the nearest node to i in No. Then, Èj∈Qi δj ≥ α − di . PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di . Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}). In addition, we still place replicas at each node in No − {i}. It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt. We set bids as follows. For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi. For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration. Next, we verify that the strategies stipulated constitute a Nash equilibrium. Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy. By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ). Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at . We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution. We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines. Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object. Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost. It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj . No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5. SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1]. We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)). The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs. Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order. The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments. As we vary the placement cost α, we directly influence the tradeoff between caching and not caching. In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one. We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25]. For these topologies, we generate an underlying physical graph of 3050 physical nodes. Both topologies have similar minimum, average, and maximum physical node distances. The average distance is 0.42. We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology. In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game. We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game. We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies. We observe two phases. As α increases the PoA rises quickly to a peak at 100. After 100, there is a gradual decline. OPoA and Ratio show behavior similar to PoA. These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions. We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average. For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one. The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica. The optimal solution, however, places multiple replicas to decrease the high global cost of access. As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology. The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply. In Figure 5(a) we examine an overlay graph on the power-law topology. We observe several interesting differences between the power-law and transit-stub results. First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8). After the peak, PoA and Ratio decrease more slowly as α increases. OPoA is close to one for the whole range of α values. This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph. Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one. The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution. The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs). We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph. We observe that as demand falls, so does expected PoA. As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little. Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies. Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition. We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria. The results are presented in Figure 4(b) and Figure 5(b). As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations). The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria. We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without. We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case. The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6. DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions. One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects. Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games. As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria. In our analyses, we assume that all nodes have the same demand. However, nodes could have different demand depending on objects. We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically. We also want to look at the following aggregation effect. Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica. All nodes have demands of one. In that case, the price of anarchy is O(n). However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object. Such aggregation can reduce the inefficiency of Nash equilibria. We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics. We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy. In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases. Another extension is to consider server congestion. Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica. Then, when α > γ, it can be shown that PoA is bounded by α γ . As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers. While exploring the caching problem, we made several observations that seem counterintuitive. First, the PoA in the payment game can be worse than the PoA in the basic game. Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments. For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends. However, the social optimum may place one replica at the center. We leave the investigation of more examples as an open issue. 7. CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination. We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems. With specific topologies, we show that the price of anarchy can have tighter bounds. More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one. Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8. ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9. REFERENCES [1] http://www.mosek.com. [2] A. Adya et al. FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment. In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler. Near-optimal Network Design with Selfish Agents. In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz. SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network. In Proc. of Intl. Conf. on Pervasive Computing, 2002. [5] F. Dabek et al. Wide-area Cooperative Storage with CFS. In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig. NetCache Architecture and Deploment. In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani. Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games. In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer. Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System. In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar. The Complexity of Pure Nash Equilibria. In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A. Z. Broder. Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol. IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson. Computers and Intractability: A Guide to the Theory of NP-Completeness. W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan. Market Sharing Games Applied to Content Distribution in ad-hoc Networks. In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella. Cooperative Facility Location Games. In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al. What Can Databases Do for Peer-to-Peer? In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al. Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload. In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel. Squirrel: A Decentralized Peer-to-Peer Web Cache. In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani. Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems. In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al. On the Placement of Internet Instrumentation. In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al. Constrained Mirror Placement on the Internet. In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J. Ko and D. Rubenstein. A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks. In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou. Worst-Case Equilibria. In STACS, 1999. [22] J. Kubiatowicz et al. OceanStore: An Architecture for Global-scale Persistent Storage. In Proc. of ACM ASPLOS. ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng. On the Optimal Placement of Web Proxies in the Internet. In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang. Improved Approximation Algorithms for Metric Facility Location Problems. In Proc. of Intl. Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers. BRITE: Universal Topology Generation from a Users Perspective. Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton. The Online Median Problem. In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis. Discrete Location Theory. Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein. A Course in Game Theory. MIT Press, 1994. [29] M. Pal and E. Tardos. Group Strategyproof Mechanisms via Primal-Dual Algorithms. In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker. On the Placement of Web Server Replicas. In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal. A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service. In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel. Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility. In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam. Taming Aggressive Replication in the Pangaea Wide-Area File System. In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson. Coordinated En-route Web Caching. In IEEE Trans. Computers, 2002. [35] A. Vetta. Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions. In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee. How to Model an Internetwork. In Proc. of IEEE INFOCOM, 1996. APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds. We look at complete graph, star, line, and Ddimensional grid. In all these topologies, we set the distance between two directly connected nodes to one. We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1. A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game. The unlabeled distances between the nodes in the cluster are all 1. The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4. The two dark nodes replicate the object in this payment game Nash equilibrium. For a complete graph, PoA = 1, and for a star, PoA ≤ 2. For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1. For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes. However, the social optimum places one replica at the center node. Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2. When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center. PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2. For a line, the price of anarchy is O( √ n). When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object. The social optimum places replicas at least every √ 2α. The placement of replicas for the social optimum is as follows. Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α. The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α. Therefore, the distance between replicas in the social optimum is at most √ 2α. C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn). C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α . C(SO) = Ω( √ αn). Therefore, PoA = O( √ α). When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 . However, the social optimum still places replicas every √ 2α. If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n). When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2. This result holds for the ring and it can be generalized to the D-dimensional grid. As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas. Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ). B. PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3. Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right. It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B. This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds. Initially the order of player actions is chosen randomly. In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order. When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached. In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1. After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i). This procedure chooses greedily between replication and non-replication. It is not hard to see that this Nash dynamics protocol converges in two rounds. In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0. In addition, we initialize a second random subset of servers to replicate the object with payments from other servers. The details are shown in Algorithm 3. After the initialization, each player runs the move selection procedure described in Algorithm 4. This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively. In the protocol, each node increases its threshold value by incr if it does not replicate the object. By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache. If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer. If incr is large, the protocol converges quickly, but it may miss efficient equilibria. In the simulations we set incr to 0.1. Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game. Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics. The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game. We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition. The graph is represented by a shortest path metric on the network shown in Figure 7. In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so. The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3. It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition. The Nash dynamics protocol for the payment game needs further investigation. The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol. Finding a self-stabilizing dynamics protocol is an interesting problem. In addition, a fixed value of incr cannot adapt to changing environments. A small value of incr can lead to efficient equilibria, but it can take long time to converge. An important area for future research is looking at adaptively changing incr. 30",
    "original_translation": "El almacenamiento en caché egoísta en los sistemas distribuidos: un análisis teórico del juego porgung-gon chun ∗ bgchun@cs.berkeley.edu kamalika chaudhuri † kamalika@cs.berkeley.edu hoeteck wee ‡ hoeteck@cs.berkeley.edu marco barreno § barreno@cs.Berkeley.edu Christos H. Papadimitriou † Christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu División de Ciencias de la Computación Universidad de California, Berkeley Resumen. Analizamos la replicación de los recursos por nodos de servidores que actúan egoísta, usando un juego-enfoque teórico. Nos referimos a esto como el problema de almacenamiento egoísta. En nuestro modelo, los nodos incurren en el costo de replicar los recursos o el costo de acceso a una réplica remota. Mostramos la existencia de pura estrategia Nash Equilibrios e investigamos el precio de la anarquía, que es el costo relativo de la falta de coordinación. El precio de la anarquía puede ser alto debido a los problemas de suboficial, pero con ciertas topologías de red tiene mejores límites. Con un esquema de pago, el juego siempre puede implementar el óptimo social en el mejor de los casos dando a los servidores incentivos para replicar. Categorías y descriptores de sujetos c.2.4 [Redes de comunicación por computadora]: Sistemas distribuidos Algoritmos de términos generales, economía, teoría, rendimiento 1. INTRODUCCIÓN Los sistemas de archivos entre pares de área amplia [2,5,22,32,33], cachés de pares [15, 16] y cachés web [6, 10] se han vuelto populares en los últimos pocosaños. Caching1 de los archivos en servidores seleccionados se usa ampliamente para mejorar el rendimiento, la disponibilidad y la confiabilidad de estos sistemas. Sin embargo, la mayoría de estos sistemas suponen que los servidores cooperan entre sí siguiendo protocolos optimizados para el rendimiento general del sistema, independientemente de los costos incurridos por cada servidor. En realidad, los servidores pueden comportarse egoístamente, buscando maximizar su propio beneficio. Por ejemplo, las partes en diferentes dominios administrativos utilizan sus recursos locales (servidores) para apoyar mejor a los clientes en sus propios dominios. Tienen incentivos obvios para almacenar en caché de objetos2 que maximizan el beneficio en sus dominios, posiblemente a expensas del comportamiento globalmente óptimo. Ha sido una pregunta abierta si estos escenarios y protocolos de almacenamiento en caché mantienen sus propiedades globales deseables (bajo costo social total, por ejemplo) frente al comportamiento egoísta. En este artículo, adoptamos un enfoque teórico del juego para analizar el problema del almacenamiento en caché en las redes de servidores egoístas a través de análisis y simulaciones teóricas. Modelamos el almacenamiento en caché egoísta como un juego no cooperativo. En el modelo básico, los servidores tienen dos acciones posibles para cada objeto. Si una réplica de un objeto solicitado se encuentra en un nodo cercano, el servidor puede ser mejor acceder a la réplica remota. Por otro lado, si todas las réplicas se encuentran demasiado lejos, el servidor está mejor en caché del objeto en sí. Las decisiones sobre el almacenamiento en caché de las réplicas localmente se llegan localmente, teniendo en cuenta solo los costos locales. También definimos un modelo de pago más elaborado, en el que cada servidor oferta por tener un objeto replicado en otro sitio. Cada sitio ahora tiene la opción de replicar un objeto y recopilar las ofertas relacionadas. Una vez que todos los servidores han elegido una estrategia, cada juego especifica una configuración, es decir, el conjunto de servidores que replican el objeto y los costos correspondientes para todos los servidores. La teoría del juego predice que tal situación terminará en un equilibrio de Nash, es decir, un conjunto de estrategias (posiblemente aleatorias) con la propiedad que ningún jugador puede beneficiar al cambiar su estrategia, mientras que los otros jugadores mantienen sus estrategias sin cambios [28]. A pesar de las consideraciones fundamentales, no es fácil aceptar estrategias aleatorias como el comportamiento de los agentes racionales en un sistema distribuido (ver [28] para una discusión extensa), pero esto es lo que la teoría clásica de los juegos puede garantizar. Sin embargo, en ciertas situaciones muy afortunadas (ver [9]), se puede predecir la existencia de equilibrios de Nash puro (es decir, determinista). Sin embargo, con o sin aleatorización, la falta de coordinación inherente a la toma de decisiones egoístas puede incurrir en costos mucho más allá de lo que sería globalmente óptimo. Esta pérdida de eficiencia es 1 Utilizaremos el almacenamiento en caché y la replicación indistintamente.2 Usamos el objeto de término como una entidad abstracta que representa archivos y otros objetos de datos.21 Cuantificado por el precio de la anarquía [21]. El precio de la anarquía es la proporción del costo social (total) del peor equilibrio de Nash posible al costo del óptimo social. El precio de la anarquía limita el peor comportamiento posible de un sistema egoísta, cuando se deja completamente solo. Sin embargo, en realidad hay formas en que el sistema puede guiarse, a través de la siembra o incentivos, a un equilibrio de Nash preseleccionado. Esta versión optimista del precio de la anarquía [3] es capturada por la relación más pequeña entre un equilibrio de Nash y el óptimo social. En este documento abordamos las siguientes preguntas: • ¿Existen los equilibrios de Nash de estrategia pura en el juego de almacenamiento en caché?• Si existen equilibrios de Nash de estrategia pura, ¿cuán eficientes son (en términos del precio de la anarquía, o su contraparte optimista) bajo diferentes costos de colocación, topologías de red y distribuciones de demanda?• ¿Cuál es el efecto de adoptar pagos? ¿Se mejorará los equilibrios Nash? Mostramos que la estrategia pura Equilibrios de Nash siempre existen en el juego de almacenamiento en caché. El precio de la anarquía del modelo de juego básico puede ser o (n), donde n es el número de servidores;La razón intuitiva es la subida. Bajo ciertas topologías, el precio de la anarquía tiene límites más estrictos. Para gráficos y estrellas completos, es O (1). Para las cuadrículas D-dimensionales, es O (N D D+1). Incluso el precio optimista de la anarquía puede ser o (n). Sin embargo, en el modelo de pago, el juego siempre puede implementar un equilibrio de Nash que sea el mismo que el óptimo social, por lo que el precio optimista de la anarquía es uno. Nuestros resultados de simulación muestran varias fases interesantes. A medida que el costo de colocación aumenta de cero, el precio de la anarquía aumenta. Cuando el costo de colocación excede por primera vez la distancia máxima entre los servidores, el precio de la anarquía está en su punto más alto debido a los problemas de suboficial. A medida que aumenta aún más el costo de la colocación, el precio de la anarquía disminuye y el efecto de la réplica extravagante domina el precio de la anarquía. El resto del documento está organizado de la siguiente manera. En la Sección 2 discutimos el trabajo relacionado. La Sección 3 analiza los detalles del juego básico y analiza los límites del precio de la anarquía. En la Sección 4 discutimos el juego de pago y analizamos su precio de la anarquía. En la Sección 5 describimos nuestra metodología de simulación y estudiamos las propiedades de los equilibrios NASH observados. Discutimos las extensiones del juego y las direcciones para el trabajo futuro en la Sección 6. 2. Trabajo relacionado ha habido una investigación considerable sobre sistemas de archivos entre pares de área de amplio área como OceanStore [22], CFS [5], Pasado [32], Farsite [2] y Pangea [33], caché web, comoNetCache [6] y ResumenCache [10], y cachés entre pares como Squirrel [16]. La mayoría de estos sistemas usan almacenamiento en caché para el rendimiento, la disponibilidad y la confiabilidad. Los protocolos de almacenamiento en caché asumen obediencia al protocolo e ignoran los incentivos de los participantes. Nuestro trabajo comienza desde la suposición de que los servidores son egoístas y cuantifican el costo de la falta de coordinación cuando los servidores se comportan egoístamente. La colocación de réplicas en el problema del almacenamiento en caché es el tema más importante. Hay mucho trabajo en la colocación de réplicas web, servidores de instrumentación y recursos replicados. Todos los protocolos asumen la obediencia e ignoran los incentivos de los participantes. En [14], Gribble et al.Discuta el problema de colocación de datos en sistemas entre pares. Ko y Rubenstein proponen un algoritmo de coloración de gráficos distribuido y autoestabilizado para la colocación de recursos replicados [20]. Chen, Katz y Kubiatowicz proponen un algoritmo de colocación de réplica dinámica que explota tablas de hash distribuidas subyacentes [4]. Douceur y Wattenhofer describen un algoritmo de escalada para intercambiar réplicas por fiabilidad en la farsa [8]. Radar es un sistema que replica y migra objetos para un servicio de alojamiento de Internet [31]. Tang y Chanson proponen un almacenamiento web coordinado en ruta en ruta que almacena objetos a lo largo de la ruta de enrutamiento [34]. Los algoritmos centralizados para la colocación de objetos, proxies web, espejos y servidores de instrumentación en Internet se han estudiado ampliamente [18,19,23,30]. El problema de ubicación de la instalación se ha estudiado ampliamente como un problema de optimización centralizado en la investigación teórica de informática y operaciones de operaciones [27]. Dado que el problema es NP-HARD, se han explorado algoritmos de aproximación basados en técnicas primarias-duales, algoritmos codiciosos y búsqueda local [17, 24, 26]. Nuestro juego de almacenamiento en caché es diferente de todo esto, ya que el proceso de optimización se realiza entre los servidores egoístas distribuidos. Hay poca investigación en los juegos de ubicación de las instalaciones no cooperativas, hasta donde sabemos. Vetta [35] considera una clase de problemas en los que la utilidad social es submodular (la submodularidad significa disminución de la utilidad marginal). En el caso de la ubicación de las instalaciones competitivas entre las corporaciones, demuestra que cualquier equilibrio de Nash ofrece una utilidad social esperada dentro de un factor de 2 de óptimo más un término aditivo que depende del costo de apertura de la instalación. Sin embargo, sus resultados no son directamente aplicables a nuestro problema, ya que consideramos que cada servidor está vinculado a una ubicación particular, mientras que en su modelo un agente puede abrir instalaciones en múltiples ubicaciones. Tenga en cuenta que en ese documento el aumento del precio de la anarquía proviene de problemas de exceso de oferta debido al hecho de que las corporaciones competidoras pueden abrir instalaciones en el mismo lugar. Por otro lado, los problemas importantes en nuestro juego son la subida y la falta de colocación. En un artículo reciente, Goemans et al.Analice la distribución de contenido en redes inalámbricas ad-hoc utilizando un enfoque teórico del juego [12]. Al igual que en nuestro trabajo, proporcionan incentivos monetarios a los usuarios móviles para almacenar en caché de elementos de datos, y proporcionan límites ajustados sobre el precio de la anarquía y la velocidad de convergencia a los equilibrios (aproximados) Nash. Sin embargo, sus resultados son incomparables para los nuestros porque sus funciones de pago descuidan las latencias de red entre los usuarios, consideran múltiples elementos de datos (mercados), y cada nodo tiene un presupuesto limitado para almacenar en caché. El problema de la ubicación de la instalación se ha estudiado utilizando la teoría de juegos cooperativos [7, 13, 29]. Goemans y Skutella muestran fuertes conexiones entre las asignaciones de costos justos y las relajaciones de programación lineal para los problemas de ubicación de las instalaciones [13]. P´Al y Tardos desarrollan un método para el intercambio de costos compartidos que es aproximadamente el presupuesto equilibrado y a prueba de estrategias grupales y muestran que el método recupera 1/3 del costo total para el juego de ubicación de la instalación [29]. Devanur, Mihail y Vazirani ofrecen una asignación de costos a prueba de estrategias para el problema de ubicación de la instalación, pero no pueden lograr la prueba de estrategia grupal [7].3. Juego básico El problema de almacenamiento en caché que estudiamos es encontrar una configuración que cumpla con ciertos objetivos (por ejemplo, costo total mínimo). La Figura 1 muestra ejemplos de almacenamiento en caché entre cuatro servidores. En la red (a), un almacena un objeto. Supongamos que B quiere acceder al objeto. Si es más barato acceder a la réplica remota que en caché, B accede a la réplica remota como se muestra en la red (b). En la red (c), C quiere acceder al objeto. Si C está lejos de A, C almacena el objeto en lugar de acceder al objeto desde A. Es posible que en una configuración óptima sea mejor colocar réplicas en A y B. Comprender la colocación de réplicas por servidores egoístas es el foco de nuestro estudio. El problema del almacenamiento en caché se abstrae de la siguiente manera. Hay un conjunto de N de N servidores y un conjunto M de objetos M. La distancia entre los servidores se puede representar como una matriz de distancia D (es decir, DIJ es el servidor de servidor del servidor de servidor de distancia 22 A B C D (A) Server del servidor del servidor de servidor A B C D (B) Server del servidor del servidor de servidor A B C D (C) Figura 1: almacenamiento en caché. Hay cuatro servidores etiquetados A, B, C y D. Los rectángulos son réplicas de objetos. En (a), un almacena un objeto. Si B incurra a menos acceso a costos como réplica de lo que almacenaría en caché el objeto en sí, accede al objeto desde A como en (b). Si el costo de distancia es demasiado alto, el servidor almacena en caché el objeto en sí, como C lo hace en (c). Esta figura es un ejemplo de nuestro modelo de juego de almacenamiento en caché.Desde el servidor I al servidor j). D modela una topología de red subyacente. Para nuestro análisis, suponemos que las distancias son simétricas y la desigualdad del triángulo se mantiene en las distancias (para todos los servidores I, J, K: DIJ + DJK ≥ DIK). Cada servidor tiene la demanda de los clientes representados por una matriz de demanda w (es decir, WIJ es la demanda del servidor I para el objeto j). Cuando un servidor se pone en caché los objetos, el servidor incurre en algún costo de colocación representado por una matriz α (es decir, αij es un costo de colocación del servidor I para el objeto j). En este estudio, suponemos que los servidores no tienen límite de capacidad. Como discutimos en la siguiente sección, este hecho significa que el comportamiento de almacenamiento en caché con respecto a cada objeto puede examinarse por separado. En consecuencia, podemos hablar sobre las configuraciones del sistema con respecto a un objeto dado: Definición 1. Una configuración x para algún objeto o es el conjunto de servidores que replica este objeto. El objetivo del juego básico es encontrar configuraciones que se logren cuando los servidores optimizan sus funciones de costo localmente.3.1 Modelo de juego Tomamos un enfoque teórico del juego para analizar el problema de almacenamiento en caché no capacitado entre los servidores egoístas en red. Modelamos el problema de almacenamiento egoísta como un juego no cooperativo con N jugadores (servidores/nodos) cuyas estrategias son conjuntos de objetos para caché. En el juego, cada servidor elige una estrategia pura que minimiza su costo. Nuestro enfoque es investigar la configuración resultante, que es el equilibrio NASH del juego. Debe enfatizarse que consideramos solo la estrategia pura Equilibrios de Nash en este documento. El modelo de costos es una parte importante del juego. Deje que Ai sea el conjunto de estrategias factibles para el servidor I, y deje Si ∈ Ai sea la estrategia elegida por el servidor i. Dado un perfil de estrategia S = (S1, S2, ..., Sn), el costo incurrido por el servidor I se define como: CI (S) = j∈Si αij + j /∈Si wij di (i, j).(1) donde αij es el costo de colocación del objeto J, wij es la demanda que el servidor que tiene para el objeto J, (i, j) es el servidor más cercano a i que almacena el objeto J, y DIK es la distancia entre I y K.Cuando ningún servidor almacena en caché el objeto, definimos el costo de distancia di (i, j) para ser lo suficientemente grande como para que al menos un servidor elija almacenar en caché el objeto. El costo de colocación se puede dividir en el costo de instalación y el costo de mantenimiento por primera vez: αij = K1i + K2I actualizadas por objetojejej 1 t pj k wkj, (2) donde k1i es el costo de instalación, k2i es el peso relativo entre el costo de mantenimiento y el mantenimientoEl costo de instalación, PJ es la relación de la cantidad de escrituras sobre el número de lecturas y escrituras, UpdateSizej es el tamaño de una actualización, ObjectSizej es el tamaño del objeto y T es el período de actualización. Vemos compensaciones entre diferentes parámetros en esta ecuación. Por ejemplo, colocar réplicas se vuelve más costosa a medida que aumenta las actualizaciones, aumenta PJ o T disminuye. Sin embargo, tenga en cuenta que al variar αIJ en sí podemos capturar el rango completo de comportamientos en el juego. Para nuestro análisis, usamos solo αij. Dado que no hay límite de capacidad en los servidores, podemos ver cada objeto como un juego separado y combinar los equilibrios de estrategia pura de estos juegos para obtener un equilibrio de estrategia pura del juego de objetos múltiples. Fabrikant, Papadimitriou y Talwar discuten este argumento de existencia: si se sabe que dos juegos tienen equilibrios puros, y sus funciones de costo son intermonotónicas, entonces también se garantiza que su unión tenga equilibrios de nash puros, mediante un argumento de continuidad [9]. Un equilibrio de Nash para el juego de objetos múltiples es el producto cruzado de los equilibrios NASH para los juegos de un solo objeto. Por lo tanto, podemos centrarnos en el juego de un solo objeto en el resto de este documento. Para el almacenamiento egoísta de un solo objeto, cada servidor I tiene dos estrategias: caché o no para cachear. El objeto bajo consideración es j. Definimos que SI sea 1 cuando el servidor i cachome j y 0 de lo contrario. El costo incurrido por el servidor I es CI (S) = αIJ Si + WIJ DI (I, J) (1 - Si).(3) Nos referimos a este juego como el juego básico. La medida en que CI (s) representa el costo real incurrido por el servidor I está más allá del alcance de este documento;Asumiremos que se puede definir una función de costo apropiada de la forma de la ecuación 3.3.2 Soluciones de equilibrio de Nash En principio, podemos comenzar con una configuración aleatoria y dejar que esta configuración evolucione a medida que cada servidor altera su estrategia e intenta minimizar su costo. La teoría del juego está interesada en soluciones estables llamadas Equilibrios Nash. Se alcanza una estrategia pura que se alcanza el equilibrio de Nash cuando ningún servidor puede beneficiarse cambiando unilateralmente su estrategia. Un equilibrio NASH3 (s ∗ i, s ∗ −i) para el juego básico especifica una configuración x tal que ∀i ∈ N, i ∈ X ⇔ s ∗ i = 1. Por lo tanto, podemos considerar un conjunto E de todas las configuraciones de equilibrio de Nash de estrategia pura: x ∈ E ⇔ ∀i ∈ N, ∀si ∈ Ai, Ci (S ∗ I, S ∗ −i) ≤ Ci (Si, S ∗ −i) (4) Según esta definición, ningún servidor tiene un incentivo para desviarse en las configuraciones, ya que no puede reducir su costo. Para el juego básico, podemos ver fácilmente que: x ∈ E ⇔ ∀i ∈ N, ∃j ∈ X S.T.DJI ≤ α y ∀j ∈ X, ¬∃K ∈ X S.T.DKJ <α (5) La primera condición garantiza que hay un servidor que coloca la réplica dentro de la distancia α de cada servidor i. Si la réplica no se coloca 3, la notación para el perfil de estrategia (S ∗ I, S ∗ −i) separa la estrategia del nodo I (S ∗ I) de las estrategias de otros nodos (S ∗ −i).23 A B1 - α 0 0 0 0 0 0 0 0 0 0 0 2 N Nodos 2 N Nodos (a) A B1 - α 0 0 0 0 0 0 0 0 0 0 0 2 N Nodos 2 N Nodos (B) A B1−α 2 N ganglios 2 N ganglios N2 N2 N2 N2 N2 N2 N2 N2 N2 N2 N2 (C) Figura 2: ineficiencia potencial de equilibrios NASH ilustrados por dos grupos de servidores N 2. Las distancias intra-clúster son todas cero y la distancia entre los grupos es α-1, donde α es el costo de colocación. Los nodos oscuros replican el objeto. La red (a) muestra un equilibrio NASH en el juego básico, donde un servidor en un clúster almacena en caché el objeto. La red (b) muestra el óptimo social donde se colocan dos réplicas, una para cada clúster. El precio de la anarquía es o (n) e incluso el precio optimista de la anarquía es o (n). Este alto precio de la anarquía proviene de la subida de las réplicas debido a la naturaleza egoísta de los servidores. La red (c) muestra un equilibrio de Nash en el juego de pago, donde se colocan dos réplicas, una para cada clúster. Cada nodo de luz en cada clúster paga 2/n al nodo oscuro, y el nodo oscuro replica el objeto. Aquí, el precio optimista de la anarquía es uno.En I, luego se coloca en otro servidor a la distancia α de I, por lo que no tengo ningún incentivo para el almacenamiento en caché. Si la réplica se coloca en I, la segunda condición asegura que no haya incentivo para soltar la réplica porque no hay dos servidores separados por una distancia inferior a α ambas réplicas.3.3 Social Optimum El costo social de un perfil de estrategia determinado se define como el costo total incurrido por todos los servidores, a saber: c (s) = n - 1 i = 0 CI (s) (6) donde CI (s) es el costoincurrido por el servidor I dada por la ecuación 1. El costo óptimo social, denominado C (SO) para el resto del documento, es el costo social mínimo. El costo óptimo social servirá como un caso base importante contra el cual medir el costo del almacenamiento en caché egoísta. Definimos C (SO) AS: C (SO) = Min S C (S) (7) donde S varía sobre todos los perfiles de estrategia posibles. Tenga en cuenta que en el juego básico, esto significa una configuración variable X sobre todas las configuraciones posibles. En cierto sentido, C (SO) representa el mejor comportamiento de almacenamiento en caché posible, si solo los nodos pudieran ser convencidos de cooperar entre sí. La configuración Social Optimum es una solución de un problema de ubicación de la instalación de mini suma, que es NP-Hard [11]. Para encontrar tales configuraciones, formulamos un problema de programación entero: minimizar èi èj ¢ αij xij + èk wij dikyijk £ sujeto a ∀i, j èk yijk = i (wij) ∀i, j, k xij - ykji ≥ 0 ∀i,,j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Aquí, xij es 1 si el servidor i replica el objeto j y 0 de lo contrario;Yijk es 1 si el servidor i accesa el objeto J desde el servidor k y 0 de lo contrario;I (W) Devuelve 1 si W no es cero y 0 de lo contrario. La primera restricción especifica que si el servidor tengo demanda de objeto j, entonces debe acceder a J desde exactamente un servidor. La segunda restricción asegura que el servidor I replique el objeto J si cualquier otro servidor accede a J desde i.3.4 Análisis Para analizar el juego básico, primero damos una prueba de la existencia de pura estrategia Nash Equilibrios. Discutimos el precio de la anarquía en general y luego en topologías subyacentes específicas. En este análisis usamos simplemente α en lugar de αIJ, ya que tratamos con un solo objeto y suponemos que el costo de colocación es el mismo para todos los servidores. Además, cuando calculamos el precio de la anarquía, suponemos que todos los nodos tienen la misma demanda (es decir, ∀i ∈ N wij = 1). Teorema 1. La estrategia pura Equilibrios de Nash existe en el juego básico. PRUEBA. Mostramos una prueba constructiva. Primero, inicialice el conjunto V a N. Luego, elimine todos los nodos con cero demanda de v. Cada nodo X define βx, donde βx = α wxj. Además, deje z (y) = {z: dzy ≤ βz, z ∈ V};Z (y) representa todos los nodos z para los cuales Y se encuentra dentro de βz de z. Elija un nodo y ∈ V tal que βy ≤ βx para todos x ∈ V. Coloque una réplica en y y luego elimine y y todas z ∈ Z (y) de v. Ninguna Z puede tener un incentivo para replicar el objeto porque puede acceder a la réplica de YS a un costo inferior (o igual). Iterar este proceso de colocar réplicas hasta que V esté vacío. Debido a que en cada iteración y es el nodo restante con β mínimo, no se colocará una réplica dentro de la distancia βy de tal y por este proceso. La configuración resultante es un equilibrio NASH de estrategia pura del juego básico. El precio de la anarquía (POA): para cuantificar el costo de la falta de coordinación, utilizamos el precio de la anarquía [21] y el precio optimista de la anarquía [3]. El precio de la anarquía es la proporción de los costos sociales del peor equilibrio de Nash y el óptimo social, y el precio optimista de la anarquía es la relación de los costos sociales del mejor equilibrio de Nash y el óptimo social. Mostramos límites generales sobre el precio de la anarquía. A lo largo de nuestra discusión, usamos C (SW) para representar el costo del peor de los casos Nash Equilibrium, C (SO) para representar el costo del óptimo social y POA para representar el precio de la anarquía, que es C (SW) C (SO SO). El peor de los casos de equilibrio de Nash maximiza el costo total bajo la restricción de que la configuración cumple con la condición Nash. Formalmente, podemos definir C (SW) de la siguiente manera. C (sw) = max x∈E (α | x | + i min j∈X dij) (9) donde minj∈X dij es la distancia a la réplica más cercana (incluida la misma) del nodo I y x varía a través de NashConfiguraciones de equilibrio. Límites sobre el precio de la anarquía: mostramos límites del precio de la anarquía que varía α. Deje dmin = min (i, j) ∈N × n, i = j dij y dmax = max (i, j) ∈N × n dij. Vemos que si α ≤ dmin, POA = 1 24 Topología POA Gráfico completo 1 estrella ≤ 2 línea O (√ n) D-dimensional D-dimensional O (n d d+1) Tabla 1: POA en el juego básico para topologías específicas de manera trivialmente, dado que cada servidor almacena el objeto tanto para el equilibrio de Nash como para el óptimo social. Cuando α> dmax, hay una transición en los equilibrios de Nash: dado que el costo de colocación es mayor que cualquier costo de distancia, solo un servidor almacena el objeto y otros servidores acceden de forma remota. Sin embargo, el óptimo social aún puede colocar múltiples réplicas. Dado que α ≤ c (so) ≤ α+minj∈N èi dij cuando α> dmax, obtenemos α+maxj∈N èi dij α+minj∈N èi dij ≤ poa ≤ α+maxj∈N èi dij α. Tenga en cuenta que dependiendo de la topología subyacente, incluso el límite inferior de POA puede ser o (n). Finalmente, hay una transición cuando α> maxj∈N èi dij. En este caso, poa = α+maxj∈N èi dij α+minj∈N èi dij y está limitado superior por 2. La Figura 2 muestra un ejemplo de la ineficiencia de un equilibrio de Nash. En la red hay dos grupos de servidores cuyo tamaño es n 2. La distancia entre dos grupos es α - 1, donde α es el costo de colocación. La Figura 2 (a) muestra un equilibrio de Nash donde un servidor en un clúster almacena en caché del objeto. En este caso, C (SW) = α + (α - 1) n 2, ya que todos los servidores en el otro clúster acceden a la réplica remota. Sin embargo, el óptimo social coloca dos réplicas, una para cada grupo, como se muestra en la Figura 2 (b). Por lo tanto, C (SO) = 2α. POA = α+(α - 1) n 2 2α, que es O (N). Este mal precio de la anarquía proviene de una suministra de réplicas debido a la naturaleza egoísta de los servidores. Tenga en cuenta que todos los equilibrios de Nash tienen el mismo costo;Por lo tanto, incluso el precio optimista de la anarquía es o (n). En el Apéndice A, analizamos el precio de la anarquía con topologías subyacentes específicas y mostramos que POA puede tener límites más ajustados que O (N) para el gráfico completo, la estrella, la línea y la cuadrícula D-dimensional. En estas topologías, establecemos la distancia entre nodos directamente conectados a uno. Describimos el caso donde α> 1, ya que POA = 1 trivialmente cuando α ≤ 1. Un resumen de los resultados se muestra en la Tabla 1. 4. Juego de pago En esta sección, presentamos una extensión al juego básico con pagos y analizamos el precio de la anarquía y el precio optimista de la anarquía del juego.4.1 Modelo del juego El nuevo juego, al que referimos el juego de pago, permite a cada jugador ofrecer un pago a otro jugador para dar este último incentivo para replicar el objeto. El costo de la replicación se comparte entre los nodos que pagan el servidor que replica el objeto. La estrategia para cada jugador I se especifica mediante un triplete (vi, bi, ti) ∈ {n, ê+, ê+}.VI especifica al jugador a quien hago una oferta, BI ≥ 0 es el valor de la oferta, y ti ≥ 0 denota un umbral para pagos más allá de los cuales replicaré el objeto. Además, usamos RI para denotar la cantidad total de ofertas recibidas por un nodo I (ri = èj: vj = i bj). Un nodo I replica el objeto si y solo si ri ≥ ti, es decir, la cantidad de ofertas que recibe es mayor o igual a su umbral. Deje que II denote la variable indicadora correspondiente, es decir, II es igual a 1 si I replica el objeto, y 0 de lo contrario. Hacemos la regla de que si es un nodo, hace una oferta a otro nodo j y j replica el objeto, entonces debo pagar la cantidad bi. Si J no replica el objeto, no pago j. Dado un perfil de estrategia, el resultado del juego es el conjunto de tuplas {(ii, vi, bi, ri)}. II nos dice si el jugador I replica el objeto o no, BI es el jugador de pago que ha hecho al Jugador VI, y RI es la cantidad total de ofertas recibidas por el jugador I. Para calcular los pagos dado el resultado, ahora debemos tener en cuenta los pagos que realiza un nodo, además de los costos de colocación y los costos de acceso del juego básico. Según nuestras reglas, un nodo del servidor i paga BI al nodo VI si VI replica el objeto, y recibe un pago de RI si replica el objeto en sí. Su pago neto es biivi - riii. El costo total incurrido por cada nodo es la suma de su costo de colocación, costo de acceso y pago neto. Se define como CI (S) = αij II + WIJ di (I, J) (1 - II) + Biivi - RIII.(10) El costo de las óptimas sociales para el juego de pago es el mismo que para el juego básico, ya que los pagos netos se cancelaron.4.2 Análisis En el análisis del modelo de pago, primero mostramos que un equilibrio de Nash en el juego básico también es un equilibrio de Nash en el juego de pago. Luego presentamos un resultado positivo importante: en el juego de pago, la configuración socialmente óptima siempre puede ser implementada mediante un equilibrio NASH. Sabemos por el contraejemplo en la Figura 2 que esto no está garantizado en el juego básico. En este análisis usamos α para representar αij. Teorema 2. Cualquier configuración que sea una estrategia pura Equilibrio de Nash en el juego básico también es un equilibrio de NASH de estrategia pura en el juego de pago. Por lo tanto, el precio de la anarquía del juego de pago es al menos el del juego básico. PRUEBA. Considere cualquier configuración de equilibrio de Nash en el juego básico. Para cada nodo que replica el objeto, establezca su umbral Ti en 0;Todos los demás tienen umbral α. Además, para todos i, bi = 0. Un nodo que replica el objeto no tiene incentivo para cambiar su estrategia: cambiar el umbral no disminuye su costo, y tendría que pagar al menos α para acceder a una réplica remota o incentivar un nodo cercano a la memoria caché. Por lo tanto, es mejor mantener su umbral y ofertar en 0 y replicar el objeto. Un nodo que no replica el objeto puede acceder al objeto de forma remota a un costo menor o igual a α. Bajar su umbral no disminuye su costo, ya que todos los BI son cero. El pago necesario para que otro servidor coloque una réplica es al menos α. Ningún jugador tiene un incentivo para desviarse, por lo que la configuración actual es un equilibrio de Nash. De hecho, el Apéndice B muestra que el POA del juego de pago puede ser más que el del juego básico en una topología dada. Ahora veamos lo que sucede con el ejemplo que se muestra en la Figura 2 en el mejor caso. Supongamos que los vecinos de Node BS deciden pagar el nodo B una cantidad 2/n. B no tiene un incentivo para desviarse, ya que acceder a la réplica remota no disminuye su costo. El mismo argumento es válido para A debido a la simetría en el gráfico. Como nadie tiene un incentivo para desviarse, la configuración es un equilibrio de Nash. Su costo total es 2α, lo mismo que en la configuración socialmente óptima que se muestra en la Figura 2 (b). A continuación, demostramos que, de hecho, el juego de pago siempre tiene un perfil de estrategia que implementa la configuración socialmente óptima como un equilibrio de Nash. Primero presentamos la siguiente observación, que se usa en la prueba, sobre los umbrales en el juego de pago. Observación 1. Si el nodo I replica el objeto, J es el nodo más cercano a I entre los otros nodos que replican el objeto, y dij <α en un equilibrio de Nash, entonces debería tener un umbral al 25 mínimo (α - dij). De lo contrario, no puede recaudar suficiente pago para compensar el costo de replicar el objeto y es mejor acceder a la réplica en j.Teorema 3. En el juego de pago, siempre hay una estrategia pura Equilibrio Nash que implementa la configuración social óptima. El precio optimista de la anarquía en el juego de pago es, por lo tanto, siempre uno. PRUEBA. Considere la configuración socialmente óptima φopt. No sea el conjunto de nodos que replican el objeto y nc = n - no ser el resto de los nodos. Además, para cada i en no, deje que Qi denote el conjunto de nodos que acceden al objeto desde i, sin incluirlo en sí. En la configuración socialmente óptima, DIJ ≤ α para todos J en Qi. Queremos encontrar un conjunto de pagos y umbrales que haga que esta configuración sea implementable. La idea es mirar cada nodo I en No y distribuir el pago mínimo necesario para hacer que replicar el objeto entre los nodos que acceden al objeto desde i. Para cada i en no, y para cada j en qi, definimos ΔJ = min {α, min k∈No− {i} djk} - dji (11) Tenga en cuenta que ΔJ es la diferencia entre el costo JS para acceder a la réplica enYo y JS la siguiente mejor opción entre replicar el objeto y acceder a alguna réplica que no sea yo. Está claro que ΔJ ≥ 0. Reclamación 1. Para cada uno i ∈ No, sea el nodo más cercano a I en No. Entonces, èj∈Qi ΔJ ≥ α - Di. PRUEBA.(de afirmación) Suponga lo contrario, es decir, èj∈Qi ΔJ <α - di. Considere la nueva configuración φnew en la que no se replica y cada nodo en Qi elige su siguiente mejor estrategia (replicando o accediendo a la réplica en algún nodo en No - {i}). Además, todavía colocamos réplicas en cada nodo en No - {i}. Es fácil ver que el costo de φopt menos el costo de φnew es al menos: (α + j∈Qi diJ) - (di + j∈Qi min {α, min k∈No− {i} dik}) = α -−di - j∈Qi ΔJ> 0, que contradice la optimización de φopt. Establecimos ofertas de la siguiente manera. Para cada i en no, bi = 0 y para cada j en qi, j oferta a i (es decir, vj = i) la cantidad: bj = max {0, ΔJ - i/(| qi | + 1)}, j∈ Qi (12) donde i = èj∈Qi ΔJ - α + DI ≥ 0 y | Qi |es la cardinalidad de Qi. Para los umbrales, tenemos: ti = α si i ∈ Nc; èj∈Qi bj Si i ∈ No. (13) Esto especifica completamente el perfil de estrategia de los nodos, y es fácil ver que el resultado es de hecho el socialmente el socialmenteConfiguración óptima. A continuación, verificamos que las estrategias estipuladas constituyan un equilibrio de Nash. Haber establecido Ti en α para I en NC significa que cualquier nodo en N está al menos tan bien reduciendo su umbral y replicando como una oferta α a algún nodo en NC para replicarlo, por lo que podemos ignorar este último como una estrategia rentable. Mediante la observación 1, para asegurar que cada i en NO no se desvíe, requerimos que si es el nodo más cercano a i en no, entonces èj∈Qi bj es al menos (α - di). De lo contrario, elevaré Ti por encima de èj∈Qi bj para que no se replique y, en su lugar, acceda a la réplica en. Podemos verificar fácilmente que j∈Qi bj ≥ j∈Qi ΔJ - | qi |i | qi |+ 1 = α - di + i | qi |+ 1 ≥ α - Di.1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C (NE)/C (SO) Averagenumberofreplicas Alpha PoA Relation Opoa Replica (SO) Réplica (NE) Figura 3: nosotrosPresente los resultados de P OA, Ratio y Op OA para el juego básico, variando α en una topología de la línea de 100 nodos, y mostramos el número de réplicas colocadas por los equilibrios NASH y por la solución óptima. Vemos picos grandes en p oa y op oa en α = 100, donde una transición de fase provoca una transición abrupta en las líneas. Por lo tanto, cada nodo I ∈ No no tiene incentivo para cambiar TI ya que pierde sus pagos recibidos o no hay cambios, y no tengo incentivo a BI ya que replica el objeto. Cada nodo J en NC no tiene incentivos para cambiar TJ ya que cambiar TJ no reduce su costo. Tampoco tiene incentivos para reducir BJ ya que el nodo donde J accesos no se replica y J tiene que replicar el objeto o acceder a la siguiente réplica más cercana, que cuesta al menos lo mismo de la definición de BJ. Ningún jugador tiene un incentivo para desviarse, por lo que este perfil de estrategia es un equilibrio de Nash.5. Simulación Ejecutamos simulaciones para comparar los equilibrios NASH para el juego de almacenamiento en caché de un solo objeto con el óptimo social calculado resolviendo el programa lineal entero descrito en la Ecuación 8 usando Mosek [1]. Examinamos el precio de la anarquía (POA), el precio optimista de la anarquía (OPOA) y la relación promedio de los costos de los equilibrios NASH y el Optima Social (relación), y cuando es relevante también mostramos el número promedio de réplicas colocadas por el equilibrio NASH(Réplica (NE)) y el óptimo social (réplica (SO)). El POA y OPOA están tomados de los peores y mejores equilibrios de Nash, respectivamente, que observamos sobre las carreras. Cada punto de datos en nuestras cifras se basa en 1000 ejecuciones, variando aleatoriamente el perfil de estrategia inicial y el orden de los reproductores. Los detalles de las simulaciones, incluidos los protocolos y una discusión de la convergencia, se presentan en el Apéndice C. En nuestra evaluación, estudiamos los efectos de la variación en cuatro categorías: costo de colocación, topología subyacente, distribución de la demanda y pagos. A medida que variamos el costo de colocación α, influyimos directamente en la compensación entre el almacenamiento en caché y no el almacenamiento en caché. Para obtener una imagen clara de la dependencia de POA en α en un caso simple, primero analizamos el juego básico con una topología de línea de 100 nodos cuya distancia de borde es una. También exploramos las topologías de stub de tránsito generadas utilizando la biblioteca GTITM [36] y las topologías de la ley de potencia (modelo Barabasialbert a nivel de enrutador) generadas utilizando el generador de topología de Brite [25]. Para estas topologías, generamos un gráfico físico subyacente de 3050 nodos físicos. Ambas topologías tienen distancias de nodo físicas mínimas, promedio y máximas similares. La distancia promedio es 0.42. Creamos una superposición de 100 nodos del servidor y usamos la misma superposición para todos los experimentos con la topología dada. En el juego, cada servidor tiene una demanda cuya distribución es Bernoulli (P), donde P es la probabilidad de tener demanda del objeto;El valor predeterminado a menos que se especifique lo contrario es p = 1.0.26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C (NE)/C (SO) AverageNumberOfReplicas Alpha POA Ratio OpoA Replica (SO) Réplica (NE) ((NE) ((a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C (NE)/C (SO) AverageNumberOfReplicas Alpha PoA Ratio OpoA Replica (SO) Replica (NE)(b) Figura 4: Topología de tránsito: (a) Juego básico, (b) Juego de pago. Mostramos el P oA, la relación, OP OA y el número de réplicas colocadas mientras variamos α entre 0 y 2 con 100 servidores en una topología de stub de tránsito de nodo 3050-fisical.0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C (NE)/C (SO) AverageNumberofreplicas Alpha PoA Relation Opoa Réplica (SO) Réplica (NE) (A) 0.8 1 1 11.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C (ne)/c (SO) AveraGenumberofreplicas Alpha PoA Relation OpoA Réplica (SO) REPLICA (NE) (B) Figura 5: Figura 5:-Law Topology: (a) Juego básico, (b) juego de pago. Mostramos el P oA, la relación, Op OA y el número de réplicas colocadas mientras variamos α entre 0 y 2 con 100 servidores en una topología de la ley de potencia de nodo 3050-nodo.5.1 Costo de colocación variable La Figura 3 muestra POA, OPOA y relación, así como el número de réplicas colocadas, para la topología de la línea a medida que α varía. Observamos dos fases. A medida que α aumenta, el POA aumenta rápidamente a un pico en 100. Después de 100, hay una disminución gradual. OPOA y el comportamiento de la relación muestran similar al POA. Estos comportamientos pueden explicarse examinando el número de réplicas colocadas por los equilibrios NASH y por soluciones óptimas. Vemos que cuando α está por encima de uno, las soluciones de equilibrio de Nash colocan menos réplicas que óptimas en promedio. Por ejemplo, cuando α es 100, el óptimo social coloca cuatro réplicas, pero el equilibrio de Nash coloca solo una. El pico en POA en α = 100 ocurre en el punto para una línea de 100 nodos donde el peor costo de acceder a una réplica remota es ligeramente menor que el costo de colocar una nueva réplica, por lo que los servidores egoístas nunca colocarán una segunda réplica. Sin embargo, la solución óptima coloca múltiples réplicas para disminuir el alto costo global de acceso. A medida que α continúa aumentando, el problema de la suboficial disminuye a medida que la solución óptima coloca menos réplicas.5.2 Diferentes topologías subyacentes en la Figura 4 (a) Examinamos un gráfico de superposición en la topología más realista de tránsito. Las tendencias para el POA, OPOA y la relación son similares a los resultados de la topología de la línea, con un pico en POA a α = 0.8 debido a la subida máxima. En la Figura 5 (a) examinamos un gráfico de superposición en la topología de la ley de potencia. Observamos varias diferencias interesantes entre los resultados de la ley de potencia y el tránsito. Primero, el POA alcanza su punto máximo en un nivel más bajo en el gráfico de la ley de potencia, alrededor de 2.3 (en α = 0.9), mientras que el POA máximo en la topología de tránsito es casi 3.0 (en α = 0.8). Después del pico, el POA y la relación disminuyen más lentamente a medida que aumenta α. OPOA está cerca de uno para todo el rango de valores α. Esto puede explicarse por la observación en la Figura 5 (a) que no hay un problema significativo de suboficial aquí como lo había en el gráfico de tránsito. De hecho, el alto POA se debe principalmente a problemas de exclusión cuando α es de 0.7 a 2.0, ya que hay poca disminución en POA cuando el número de réplicas en óptimo social cambia de dos a uno. El OPOA es igual a uno en la figura cuando se colocan el mismo número de réplicas.5.3 Distribución de demanda variable Ahora examinamos los efectos de variar la distribución de la demanda. El conjunto de servidores con demanda es aleatorio para p <1, por lo que calculamos el POA esperado promediando más de 5 ensayos (cada punto de datos se basa en 5000 ejecuciones). Ejecutamos simulaciones para los niveles de demanda de p ∈ {0.2, 0.6, 1.0} a medida que α varía en los 100 servidores en la parte superior del gráfico de stub de tránsito. Observamos que a medida que cae la demanda, también lo hace el POA esperado. A medida que disminuye P, el número de réplicas colocadas en el óptimo social disminuye, pero el número en los equilibrios de Nash cambia poco. Además, cuando α excede el diámetro de superposición, el número en los equilibrios de Nash permanece constante cuando P varía. Por lo tanto, la P más baja conduce a un problema menor de suboficial, de acuerdo con la intuición. No presentamos el gráfico debido a limitaciones de espacio y redundancia;El POA para P = 1.0 es idéntico a POA en la Figura 4 (a), y las líneas para p = 0.6 y p = 0.2 son similares pero más bajas y más plana.27 5.4 Efectos del pago Finalmente, discutimos los efectos de los pagos sobre la eficiencia de los equilibrios de Nash. Los resultados se presentan en la Figura 4 (b) y la Figura 5 (b). Como se muestra en el análisis, las simulaciones logran OPOA cerca de uno (no es exactamente uno debido a la aleatoriedad en las simulaciones). La relación para el juego de pago es mucho más baja que la relación para el juego básico, ya que el protocolo para el juego de pago tiende a explorar buenas regiones en el espacio de los equilibrios de Nash. Observamos en la Figura 4 que para α ≥ 0.4, el número promedio de réplicas de los equilibrios de Nash se acerca más con los pagos a los del óptimo social que lo hace sin. Observamos en la Figura 5 que se colocan más réplicas con pagos que sin cuando α está entre 0.7 y 1.3, el único rango de suboficial significativo en el caso de la ley de potencia. Los resultados confirman que los pagos dan a los servidores incentivos para replicar el objeto y esto conduce a mejores equilibrios.6. Discusión y trabajo futuro Sugerimos varias extensiones y direcciones interesantes. Una extensión es considerar múltiples objetos en el juego de almacenamiento en caché capacitado, en el que los servidores tienen límites de capacidad al colocar objetos. Dado que el almacenamiento en caché de un objeto afecta la capacidad de almacenar en caché a otro, no hay separabilidad de un juego de objetos múltiples en múltiples juegos de objetos individuales. Como se estudió en [12], una forma de formular este problema es encontrar la mejor respuesta de un servidor resolviendo un problema de mochila y calcular los equilibrios de Nash. En nuestros análisis, suponemos que todos los nodos tienen la misma demanda. Sin embargo, los nodos podrían tener una demanda diferente según los objetos. Tenemos la intención de examinar los efectos de las demandas heterogéneas (o costos de colocación heterogéneos) analíticamente. También queremos ver el siguiente efecto de agregación. Suponga que hay nodos agrupados N - 1 con una distancia de α - 1 desde un nodo que aloja una réplica. Todos los nodos tienen demandas de uno. En ese caso, el precio de la anarquía es o (n). Sin embargo, si agregamos los nodos N - 1 en un nodo con la demanda N - 1, el precio de la anarquía se convierte en O (1), ya que α debería ser mayor que (N - 1) (α - 1) para replicar solo un objeto. Dicha agregación puede reducir la ineficiencia de los equilibrios de NASH. Tenemos la intención de calcular los límites del precio de la anarquía bajo diferentes topologías subyacentes, como gráficos aleatorios o métricas Growrestledict. Queremos investigar si hay ciertas limitaciones de distancia que garantizan o (1) precio de la anarquía. Además, queremos ejecutar simulaciones a gran escala para observar el cambio en el precio de la anarquía a medida que aumenta el tamaño de la red. Otra extensión es considerar la congestión del servidor. Suponga que la distancia es la distancia de red más γ × (número de accesos) donde γ es un retraso adicional cuando un servidor adicional accede a la réplica. Luego, cuando α> γ, se puede demostrar que POA está limitado por α γ. A medida que aumenta γ, el precio del límite de la anarquía disminuye, ya que la carga de accesos se equilibra entre los servidores. Mientras exploramos el problema del almacenamiento en caché, hicimos varias observaciones que parecen contradictorio. Primero, el POA en el juego de pago puede ser peor que el POA en el juego básico. Otra observación que hicimos fue que el número de réplicas en un equilibrio de Nash puede ser más que el número de réplicas en el óptimo social incluso sin pagos. Por ejemplo, un gráfico con diámetro ligeramente más que α puede tener una configuración de equilibrio NASH con dos réplicas en los dos extremos. Sin embargo, el óptimo social puede colocar una réplica en el centro. Dejamos la investigación de más ejemplos como un problema abierto.7. Conclusiones En este trabajo presentamos un nuevo modelo de juego no cooperativo para caracterizar el problema de almacenamiento en caché entre los servidores egoístas sin ninguna coordinación central. Mostramos que los equilibrios de estrategia pura Nash existen en el juego y que el precio de la anarquía puede ser o (n) en general, donde n es el número de servidores, debido a problemas de subida. Con topologías específicas, mostramos que el precio de la anarquía puede tener límites más estrictos. Más importante aún, con los pagos, los servidores están incentivados para replicarse y el precio optimista de la anarquía siempre es uno. El almacenamiento en caché no cooperativo es un modelo más realista que el almacenamiento en caché cooperativo en Internet competitivo, por lo tanto, este trabajo es un paso importante hacia los sistemas de caché federados viables.8. Agradecimientos Agradecemos a Kunal Talwar por la iluminación de discusiones sobre este trabajo.9. Referencias [1] http://www.mosek.com.[2] A. Adya et al. Lejano: almacenamiento federado, disponible y confiable para un entorno de confianza incompleta. En Proc.de Usenix Osdi, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos y T. Wexler. Diseño de red casi óptimo con agentes egoístas. En Proc.de ACM Stoc, 2003. [4] Y. Chen, R. H. Katz y J. D. Kubiatowicz. Escaneo: una red de distribución de contenido dinámico, escalable y eficiente. En Proc.de intl. Conferencia.Sobre la computación generalizada, 2002. [5] F. Dabek et al. Almacenamiento cooperativo de área de amplio área con CFS. En Proc.de ACM Sosp, octubre de 2001. [6] P. B. Danzig. Arquitectura e implementación de NetCache. En Networks e ISDN Systems, 1998. [7] N. Devanur, M. Mihail y V. Vazirani. Mecanismos de intercambio de costos a prueba de estrategias para juegos de cubierta y ubicación de la instalación. En Proc.de ACM EC, 2003. [8] J. R. Douceur y R. P. Wattenhofer. Simulación a gran escala de algoritmos de colocación de réplicas para un sistema de archivos distribuidos sin servidor. En Proc.de Mascots, 2001. [9] A. Fabrikant, C. H. Papadimitriou y K. Talwar. La complejidad de los equilibrios puros de Nash. En Proc.de ACM Stoc, 2004. [10] L. Fan, P. Cao, J. Almeida y A. Z. Broder. Resumen de caché: un protocolo escalable de intercambio de caché web de área ancha. IEEE/ACM Trans.En Networking, 8 (3): 281-293, 2000. [11] M. R. Garey y D. S. Johnson. Computadoras e intratabilidad: una guía de la teoría de la completitud de NP. W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni y M. Thottan. Juegos para compartir el mercado aplicados a la distribución de contenido en redes ad-hoc. En Proc.de ACM Mobihoc, 2004. [13] M. X. Goemans y M. Skutella. Juegos de ubicación de la instalación cooperativa. En Proc.de ACM-Siam Soda, 2000. [14] S. Gribble et al. ¿Qué pueden hacer las bases de datos para igual a igual? En el taller de WebDB en bases de datos y la web, junio de 2001. [15] K. P. Gummadi et al. Medición, modelado y análisis de una carga de trabajo de intercambio de archivos entre pares. En Proc.de ACM Sosp, octubre de 2003. [16] S. Iyer, A. Rowstron y P. Druschel. Squirrel: un caché web de pares descentralizado. En Proc.de ACM Podc, 2002. [17] K. Jain y V. V. Vazirani. Algoritmos de aproximación primaria para la ubicación de la instalación métrica y problemas de K-mediano. En Proc.de IEEE FOCS, 1999. 28 [18] S. Jamin et al. Sobre la colocación de la instrumentación de Internet. En Proc.de IEEE Infocom, páginas 295-304, 2000. [19] S. Jamin et al. Colocación de espejo restringida en Internet. En Proc.de IEEE Infocom, páginas 31-40, 2001. [20] B.-J. Ko y D. Rubenstein. Un protocolo distribuido y autoestabilizador para la colocación de recursos replicados en redes emergentes. En Proc.de IEEE ICNP, 2003. [21] E. Koutsoupias y C. Papadimitriou. Los peores equilibrios. En Stacs, 1999. [22] J. Kubiatowicz et al. Oceanstore: una arquitectura para el almacenamiento persistente a escala global. En Proc.de ACM asplos. ACM, noviembre de 2000. [23] B. Li, M. J. Golin, G. F. Italiano y X. Deng. Sobre la colocación óptima de los proxies web en Internet. En Proc.de IEEE Infocom, 1999. [24] M. Mahdian, Y. Ye y J. Zhang. Algoritmos de aproximación mejorados para problemas de ubicación de la instalación métrica. En Proc.de intl. Taller sobre algoritmos de aproximación para problemas de optimización combinatoria, 2002. [25] A. Medina, A. Lakhina, I. Matta y J. Byers. Brite: Generación de topología universal desde la perspectiva de los usuarios. Informe técnico 2001-003, 1 2001. [26] R. R. Mettu y C. G. Plaxton. El problema mediano en línea. En Proc.de IEEE FOCS, 2000. [27] P. B. Mirchandani y R. L. Francis. Teoría de la ubicación discreta. Serie Wiley-Interscience en Matemáticas y Optimización discreta, 1990. [28] M. J. Osborne y A. Rubinstein. Un curso de teoría de juegos. MIT Press, 1994. [29] M. Pal y E. Tardos. Mecanismos de grupos a prueba de estrategias a través de algoritmos Primal-Dual. En Proc.de IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan y G. M. Voelker. Sobre la colocación de réplicas del servidor web. En Proc.de IEEE Infocom, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman y A. Aggarwal. Un protocolo dinámico de replicación y migración de objetos para un servicio de alojamiento de Internet. En Proc.de IEEE ICDCS, 1999. [32] A. Rowstron y P. Druschel. Gestión de almacenamiento y almacenamiento en caché en el pasado, una utilidad de almacenamiento de pares a gran escala y a gran escala. En Proc.de ACM Sosp, octubre de 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson y M. Mahalingam. Domesticar la replicación agresiva en el sistema de archivos de área ancha de Pangea. En Proc.de Usenix Osdi, 2002. [34] X. Tang y S. T. Chanson. Enfermano web en ruta coordinado. En IEEE trans. Computadoras, 2002. [35] A. Vetta. Equilibrios de NASH en sociedades competitivas, con aplicaciones a la ubicación de las instalaciones, el enrutamiento de tráfico y las subastas. En Proc.de IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert y S. Bhattacharjee. Cómo modelar un internetwork. En Proc.de IEEE Infocom, 1996. Apéndice A. Análisis de topologías específicas Ahora analizamos el precio de la anarquía (POA) para el juego básico con topologías subyacentes específicas y mostramos que POA puede tener mejores límites. Miramos el gráfico completo, la estrella, la línea y la cuadrícula ddimensional. En todas estas topologías, establecemos la distancia entre dos nodos directamente conectados a uno. Describimos el caso donde α> 1, ya que POA = 1 trivialmente cuando α ≤ 1. A BC D3 α 3 α 4 3α 4 α 4 α Figura 6: Ejemplo donde el juego de pago tiene un equilibrio NASH que es peor que cualquier equilibrio de Nash en el juego básico. Las distancias no etiquetadas entre los nodos en el clúster son todas 1. Los umbrales de los nodos blancos son todos α y los umbrales de los nodos oscuros son todos α/4. Los dos nodos oscuros replican el objeto en este juego de pago Nash Equilibrio. Para un gráfico completo, PoA = 1, y para una estrella, POA ≤ 2. Para un gráfico completo, cuando α> 1, tanto Nash Equilibria como Social Optima colocan una réplica en un servidor, por lo que PoA = 1. Para Star, cuando 1 <α <2, el peor de los casos de equilibrio Nash coloca réplicas en todos los nodos de hoja. Sin embargo, el óptimo social coloca una réplica en el nodo central. Por lo tanto, POA = (N - 1) α+1 α+(N - 1) ≤ 2 (N - 1) +1 1+ (N - 1) ≤ 2. Cuando α> 2, el peor de los casos de equilibrio de Nash coloca una réplica en un nodo de hoja y los otros nodos acceden a la réplica remota, y la óptima social coloca una réplica en el centro. POA = α+1+2 (n - 2) α+(n - 1) = 1+n α+(n - 1) ≤ 2. Para una línea, el precio de la anarquía es o (√ n). Cuando 1 <α <n, el peor de los casos de equilibrio de Nash coloca réplicas cada 2α para que no haya superposición entre las áreas cubiertas por dos servidores adyacentes que almacenan en caché el objeto. El óptimo social coloca réplicas al menos cada √ 2α. La colocación de réplicas para el óptimo social es la siguiente. Supongamos que hay dos réplicas separadas por la distancia d.Al colocar una réplica adicional en el medio, queremos que la reducción de la distancia sea al menos α. La reducción de la distancia es d/2 + 2 {((d/2 - 1) - 1) + ((d/2 - 2) - 2) + ... + ((d/2 - d/4) - D/4)} ≥ D2 /8.D debería ser como máximo 2 √ 2α. Por lo tanto, la distancia entre las réplicas en el óptimo social es como máximo √ 2α. C (SW) = α (N - 1) 2α + α (α + 1) 2 (N - 1) 2α = θ (αN). C (SO) ≥ α N - 1√ 2α + 2 √ 2α/2 (√ 2α/2 + 1) 2 N - 1√ 2α. C (SO) = ω (√ αn). Por lo tanto, poa = o (√ α). Cuando α> N - 1, el peor de los casos de equilibrio de Nash coloca una réplica en un nodo de hoja y C (SW) = α + (N - 1) n 2. Sin embargo, el óptimo social todavía coloca réplicas cada √ 2α. Si vemos POA como una función continua de α y calculamos un derivado de POA, la derivada se convierte en 0 cuando α es θ (N2), lo que significa que la función disminuye a medida que α aumenta de n.Por lo tanto, el POA es máximo cuando α es n, y poa = θ (n2) Ω (√ nn) = o (√ n). Cuando α> (n - 1) n 2, el óptimo social también coloca solo una réplica, y POA está limitada trivialmente por 2. Este resultado se cumple para el anillo y se puede generalizar a la cuadrícula D-dimensional. A medida que aumenta la dimensión en la cuadrícula, la reducción de la distancia de la colocación de réplicas adicionales se convierte en Ω (DD+1) donde D es la distancia entre dos réplicas adyacentes. Por lo tanto, poa = θ (n2) ω (n 1 d+1 n) = o (n d d+1). B. El pago puede ser peor Considere la red en la Figura 6 donde α> 1+α/3. Cualquier equilibrio de Nash en el modelo de juego básico tendría exactamente dos réplicas: una en el clúster izquierdo y otra en la derecha. Es fácil verificar que la peor colocación (en términos de costo social) de dos réplicas ocurra cuando se colocan en los nodos A y B. Esta colocación se puede lograr como un equilibrio de Nash en el juego de pago, pero no en el juego básico, ya que A y B son una distancia de 3α/4 aparte.29 Algoritmo 1 Inicialización para el juego básico L1 = un subconjunto aleatorio de servidores para cada nodo I en n si i ∈ L1 entonces si = 1;Replicar el objeto más si = 0 Algoritmo 2 Mueve la selección de I para el juego básico Costo1 = α Costo2 = Minj∈X− {i} Dij;X es la configuración actual Costmin = min {cost1, cost2} si costnow> costmin entonces si costmin == cost1 entonces si = 1 else si = 0 C. Protocolos de dinámica nash El simulador inicializa el juego de acuerdo con los parámetros dados y una inicial aleatoria y una inicial aleatoriaPerfil de estrategia y luego itera a través de rondas. Inicialmente, el orden de las acciones del jugador se elige al azar. En cada ronda, cada servidor realiza el protocolo Nash Dynamics que ajusta sus estrategias con avidez en el orden elegido. Cuando una ronda pasa sin que ningún servidor cambie su estrategia, la simulación termina y se alcanza un equilibrio de Nash. En el juego básico, elegimos un subconjunto inicial aleatorio de servidores para replicar el objeto como se muestra en el algoritmo 1. Después de la inicialización, cada jugador ejecuta el procedimiento de selección de movimiento descrito en el algoritmo 2 (en los algoritmos 2 y 4, CostNow representa el costo actual para el nodo I). Este procedimiento elige codiciosamente entre la replicación y la no replicación. No es difícil ver que este protocolo de dinámica Nash converge en dos rondas. En el juego de pago, elegimos un subconjunto inicial aleatorio de servidores para replicar el objeto estableciendo sus umbrales en 0. Además, inicializamos un segundo subconjunto aleatorio de servidores para replicar el objeto con pagos de otros servidores. Los detalles se muestran en el Algoritmo 3. Después de la inicialización, cada jugador ejecuta el procedimiento de selección de movimiento descrito en el algoritmo 4. Este procedimiento elige con avidez entre la replicación y el acceso a una réplica remota, con las posibilidades de recibir y hacer pagos, respectivamente. En el protocolo, cada nodo aumenta su valor umbral al aumentar si no replica el objeto. Mediante este procedimiento de aumento, el costo de replicar un objeto se comparte de manera justa entre los nodos que acceden a una réplica desde un servidor que hace caché. Si INC es pequeño, el costo se comparte de manera más justa, y el juego tiende a alcanzar equilibrios que alientan a más servidores a almacenar réplicas, aunque la convergencia lleva más tiempo. Si INV es grande, el protocolo converge rápidamente, pero puede perder equilibrios eficientes. En las simulaciones establecemos Aver en 0.1. La mayoría de nuestro a b c a b c α/3+1 2α/3−1 2α/3 Figura 7: Un ejemplo en el que el protocolo de dinámica Nash no converge en el juego de pago. Algoritmo 3 Inicialización para el juego de pago L1 = un subconjunto aleatorio de servidores para cada nodo i en n do bi = 0 si i ∈ L1 entonces ti = 0;Replique el objeto más ti = α l2 = {} para cada nodo i en n do si monedas de moneda == head entonces mi = {j: d (j, i) <mink∈L1∪l2 d (j)} siMi! = ∅ Entonces para cada nodo j ∈ Mi do bj = max {α+ èk∈Mi d (i, k) | mi |- d (i, j), 0} l2 = l2 ∪ {i} algoritmo 4 Selección de movimiento de I para el juego de pago Costo1 = α - ri cost2 = minj∈N− {i} {tj - rj + dij} costmin =min {cost1, costo2} si costnow> costmin entonces si costmin == cost1 entonces ti = ri else ti = ri + incr vi = argMinj {tj - rj + dij} bi = tvi - rvi simulación se converge, pero hubo muyPocos casos en los que la simulación no convergió debido a los ciclos de la dinámica. El protocolo no garantiza la convergencia dentro de un cierto número de rondas como el protocolo para el juego básico. Proporcionamos un gráfico de ejemplo y una condición inicial de tal manera que el protocolo Nash Dynamics no converja en el juego de pago si se inicia desde esta condición inicial. El gráfico está representado por una métrica de ruta más corta en la red que se muestra en la Figura 7. En la configuración inicial, solo un replica el objeto, y A le paga una cantidad α/3 para hacerlo. Los umbrales para A, B y C son α/3 cada uno, y los umbrales para A, B y C son 2α/3. No es difícil verificar que el Protocolo de Dinámica Nash nunca convergerá si comenzamos con esta condición. El Protocolo Nash Dynamics para el juego de pago necesita más investigación. El protocolo de dinámica para el juego de pago debe evitar ciclos de acciones para lograr la estabilización del protocolo. Encontrar un protocolo de dinámica autoestabilizador es un problema interesante. Además, un valor fijo de incrementos no puede adaptarse a entornos cambiantes. Un pequeño valor de ENUR puede conducir a equilibrios eficientes, pero puede llevar mucho tiempo converger. Un área importante para futuras investigaciones es analizar el cambio de forma adaptativa.30",
    "original_sentences": [
        "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
        "We refer to this as the selfish caching problem.",
        "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
        "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
        "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
        "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
        "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
        "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
        "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
        "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
        "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
        "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
        "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
        "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
        "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
        "We model selfish caching as a non-cooperative game.",
        "In the basic model, the servers have two possible actions for each object.",
        "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
        "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
        "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
        "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
        "Each site now has the option of replicating an object and collecting the related bids.",
        "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
        "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
        "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
        "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
        "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
        "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
        "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
        "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
        "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
        "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
        "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
        "Will the Nash equilibria be improved?",
        "We show that pure strategy Nash equilibria always exist in the caching game.",
        "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
        "Under certain topologies, the price of anarchy does have tighter bounds.",
        "For complete graphs and stars, it is O(1).",
        "For D-dimensional grids, it is O(n D D+1 ).",
        "Even the optimistic price of anarchy can be O(n).",
        "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
        "Our simulation results show several interesting phases.",
        "As the placement cost increases from zero, the price of anarchy increases.",
        "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
        "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
        "The rest of the paper is organized as follows.",
        "In Section 2 we discuss related work.",
        "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
        "In Section 4 we discuss the payment game and analyze its price of anarchy.",
        "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
        "We discuss extensions of the game and directions for future work in Section 6. 2.",
        "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
        "Most of these systems use caching for performance, availability, and reliability.",
        "The caching protocols assume obedience to the protocol and ignore participants incentives.",
        "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
        "The placement of replicas in the caching problem is the most important issue.",
        "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
        "All protocols assume obedience and ignore participants incentives.",
        "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
        "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
        "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
        "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
        "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
        "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
        "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
        "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
        "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
        "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
        "There is little research in non-cooperative facility location games, as far as we know.",
        "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
        "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
        "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
        "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
        "On the other hand, the significant problems in our game are undersupply and misplacement.",
        "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
        "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
        "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
        "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
        "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
        "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
        "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
        "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
        "Figure 1 shows examples of caching among four servers.",
        "In network (a), A stores an object.",
        "Suppose B wants to access the object.",
        "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
        "In network (c), C wants to access the object.",
        "If C is far from A, C caches the object instead of accessing the object from A.",
        "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
        "Understanding the placement of replicas by selfish servers is the focus of our study.",
        "The caching problem is abstracted as follows.",
        "There is a set N of n servers and a set M of m objects.",
        "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
        "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
        "In (a), A stores an object.",
        "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
        "If the distance cost is too high, the server caches the object itself, as C does in (c).",
        "This figure is an example of our caching game model. from server i to server j).",
        "D models an underlying network topology.",
        "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
        "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
        "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
        "In this study, we assume that servers have no capacity limit.",
        "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
        "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
        "A configuration X for some object O is the set of servers replicating this object.",
        "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
        "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
        "In the game, each server chooses a pure strategy that minimizes its cost.",
        "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
        "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
        "The cost model is an important part of the game.",
        "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
        "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
        "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
        "We see tradeoffs between different parameters in this equation.",
        "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
        "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
        "For our analysis, we use only αij .",
        "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
        "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
        "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
        "Therefore, we can focus on the single object game in the rest of this paper.",
        "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
        "The object under consideration is j.",
        "We define Si to be 1 when server i caches j and 0 otherwise.",
        "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
        "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
        "Game theory is interested in stable solutions called Nash equilibria.",
        "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
        "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
        "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
        "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
        "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
        "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
        "The dark nodes replicate the object.",
        "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
        "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
        "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
        "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
        "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
        "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
        "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
        "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
        "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
        "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
        "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
        "Note that in the basic game, this means varying configuration X over all possible configurations.",
        "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
        "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
        "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
        "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
        "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
        "We discuss the price of anarchy in general and then on specific underlying topologies.",
        "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
        "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
        "THEOREM 1.",
        "Pure strategy Nash equilibria exist in the basic game.",
        "PROOF.",
        "We show a constructive proof.",
        "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
        "Each node x defines βx, where βx = α wxj .",
        "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
        "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
        "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
        "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
        "Iterate this process of placing replicas until V is empty.",
        "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
        "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
        "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
        "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
        "We show general bounds on the price of anarchy.",
        "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
        "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
        "Formally, we can define C(SW ) as follows.",
        "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
        "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
        "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
        "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
        "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
        "However, the social optimum may still place multiple replicas.",
        "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
        "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
        "Finally, there is a transition when α > maxj∈N Èi dij.",
        "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
        "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
        "In the network there are two clusters of servers whose size is n 2 .",
        "The distance between two clusters is α − 1 where α is the placement cost.",
        "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
        "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
        "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
        "Therefore, C(SO) = 2α.",
        "PoA = α+(α−1) n 2 2α , which is O(n).",
        "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
        "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
        "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
        "In these topologies, we set the distance between directly connected nodes to one.",
        "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
        "A summary of the results is shown in Table 1. 4.",
        "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
        "The cost of replication is shared among the nodes paying the server that replicates the object.",
        "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
        "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
        "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
        "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
        "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
        "If j does not replicate the object, i does not pay j.",
        "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
        "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
        "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
        "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
        "Its net payment is biIvi − RiIi.",
        "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
        "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
        "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
        "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
        "In this analysis we use α to represent αij .",
        "THEOREM 2.",
        "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
        "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
        "PROOF.",
        "Consider any Nash equilibrium configuration in the basic game.",
        "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
        "Also, for all i, bi = 0.",
        "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
        "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
        "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
        "Lowering its threshold does not decrease its cost, since all bi are zero.",
        "The payment necessary for another server to place a replica is at least α.",
        "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
        "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
        "Now let us look at what happens to the example shown in Figure 2 in the best case.",
        "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
        "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
        "The same argument holds for A because of symmetry in the graph.",
        "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
        "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
        "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
        "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
        "OBSERVATION 1.",
        "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
        "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
        "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
        "The optimistic price of anarchy in the payment game is therefore always one.",
        "PROOF.",
        "Consider the socially optimal configuration φopt.",
        "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
        "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
        "In the socially optimal configuration, dij ≤ α for all j in Qi.",
        "We want to find a set of payments and thresholds that makes this configuration implementable.",
        "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
        "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
        "It is clear that δj ≥ 0.",
        "CLAIM 1.",
        "For each i ∈ No, let be the nearest node to i in No.",
        "Then, Èj∈Qi δj ≥ α − di .",
        "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
        "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
        "In addition, we still place replicas at each node in No − {i}.",
        "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
        "We set bids as follows.",
        "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
        "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
        "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
        "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
        "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
        "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
        "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
        "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
        "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
        "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
        "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
        "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
        "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
        "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
        "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
        "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
        "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
        "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
        "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
        "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
        "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
        "Both topologies have similar minimum, average, and maximum physical node distances.",
        "The average distance is 0.42.",
        "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
        "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
        "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
        "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
        "We observe two phases.",
        "As α increases the PoA rises quickly to a peak at 100.",
        "After 100, there is a gradual decline.",
        "OPoA and Ratio show behavior similar to PoA.",
        "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
        "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
        "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
        "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
        "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
        "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
        "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
        "In Figure 5(a) we examine an overlay graph on the power-law topology.",
        "We observe several interesting differences between the power-law and transit-stub results.",
        "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
        "After the peak, PoA and Ratio decrease more slowly as α increases.",
        "OPoA is close to one for the whole range of α values.",
        "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
        "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
        "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
        "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
        "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
        "We observe that as demand falls, so does expected PoA.",
        "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
        "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
        "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
        "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
        "The results are presented in Figure 4(b) and Figure 5(b).",
        "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
        "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
        "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
        "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
        "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
        "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
        "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
        "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
        "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
        "In our analyses, we assume that all nodes have the same demand.",
        "However, nodes could have different demand depending on objects.",
        "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
        "We also want to look at the following aggregation effect.",
        "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
        "All nodes have demands of one.",
        "In that case, the price of anarchy is O(n).",
        "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
        "Such aggregation can reduce the inefficiency of Nash equilibria.",
        "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
        "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
        "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
        "Another extension is to consider server congestion.",
        "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
        "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
        "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
        "While exploring the caching problem, we made several observations that seem counterintuitive.",
        "First, the PoA in the payment game can be worse than the PoA in the basic game.",
        "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
        "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
        "However, the social optimum may place one replica at the center.",
        "We leave the investigation of more examples as an open issue. 7.",
        "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
        "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
        "With specific topologies, we show that the price of anarchy can have tighter bounds.",
        "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
        "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
        "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
        "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
        "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
        "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
        "Near-optimal Network Design with Selfish Agents.",
        "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
        "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
        "In Proc. of Intl.",
        "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
        "Wide-area Cooperative Storage with CFS.",
        "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
        "NetCache Architecture and Deploment.",
        "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
        "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
        "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
        "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
        "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
        "The Complexity of Pure Nash Equilibria.",
        "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
        "Z. Broder.",
        "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
        "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
        "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
        "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
        "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
        "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
        "Cooperative Facility Location Games.",
        "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
        "What Can Databases Do for Peer-to-Peer?",
        "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
        "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
        "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
        "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
        "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
        "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
        "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
        "On the Placement of Internet Instrumentation.",
        "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
        "Constrained Mirror Placement on the Internet.",
        "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
        "Ko and D. Rubenstein.",
        "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
        "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
        "Worst-Case Equilibria.",
        "In STACS, 1999. [22] J. Kubiatowicz et al.",
        "OceanStore: An Architecture for Global-scale Persistent Storage.",
        "In Proc. of ACM ASPLOS.",
        "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
        "On the Optimal Placement of Web Proxies in the Internet.",
        "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
        "Improved Approximation Algorithms for Metric Facility Location Problems.",
        "In Proc. of Intl.",
        "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
        "BRITE: Universal Topology Generation from a Users Perspective.",
        "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
        "The Online Median Problem.",
        "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
        "Discrete Location Theory.",
        "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
        "A Course in Game Theory.",
        "MIT Press, 1994. [29] M. Pal and E. Tardos.",
        "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
        "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
        "On the Placement of Web Server Replicas.",
        "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
        "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
        "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
        "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
        "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
        "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
        "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
        "Coordinated En-route Web Caching.",
        "In IEEE Trans.",
        "Computers, 2002. [35] A. Vetta.",
        "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
        "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
        "How to Model an Internetwork.",
        "In Proc. of IEEE INFOCOM, 1996.",
        "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
        "We look at complete graph, star, line, and Ddimensional grid.",
        "In all these topologies, we set the distance between two directly connected nodes to one.",
        "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
        "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
        "The unlabeled distances between the nodes in the cluster are all 1.",
        "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
        "The two dark nodes replicate the object in this payment game Nash equilibrium.",
        "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
        "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
        "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
        "However, the social optimum places one replica at the center node.",
        "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
        "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
        "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
        "For a line, the price of anarchy is O( √ n).",
        "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
        "The social optimum places replicas at least every √ 2α.",
        "The placement of replicas for the social optimum is as follows.",
        "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
        "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
        "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
        "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
        "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
        "C(SO) = Ω( √ αn).",
        "Therefore, PoA = O( √ α).",
        "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
        "However, the social optimum still places replicas every √ 2α.",
        "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
        "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
        "This result holds for the ring and it can be generalized to the D-dimensional grid.",
        "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
        "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
        "B.",
        "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
        "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
        "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
        "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
        "Initially the order of player actions is chosen randomly.",
        "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
        "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
        "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
        "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
        "This procedure chooses greedily between replication and non-replication.",
        "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
        "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
        "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
        "The details are shown in Algorithm 3.",
        "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
        "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
        "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
        "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
        "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
        "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
        "In the simulations we set incr to 0.1.",
        "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
        "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
        "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
        "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
        "The graph is represented by a shortest path metric on the network shown in Figure 7.",
        "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
        "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
        "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
        "The Nash dynamics protocol for the payment game needs further investigation.",
        "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
        "Finding a self-stabilizing dynamics protocol is an interesting problem.",
        "In addition, a fixed value of incr cannot adapt to changing environments.",
        "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
        "An important area for future research is looking at adaptively changing incr. 30"
    ],
    "error_count": 0,
    "keys": {
        "game-theoretic approach": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a <br>game-theoretic approach</br>.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a <br>game-theoretic approach</br> to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a <br>game-theoretic approach</br> [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a <br>game-theoretic approach</br> to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El almacenamiento en caché egoísta en los sistemas distribuidos: un análisis teórico del juego porgung-gon chun ∗ bgchun@cs.berkeley.edu kamalika chaudhuri † kamalika@cs.berkeley.edu hoeteck wee ‡ hoeteck@cs.berkeley.edu marco barreno § barreno@cs.Berkeley.edu Christos H. Papadimitriou † Christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu División de Informática Universidad de California, Resumen de Berkeley. Analizamos la replicación de los recursos por nodos de servidores que actúan egoísta, usando un \"juego-proacho teórico \".enfoque teórico del juego",
                "En este artículo, adoptamos un \"enfoque teórico del juego\" para analizar el problema del almacenamiento en caché en las redes de servidores egoístas a través de análisis y simulaciones teóricas.enfoque teórico del juego",
                "En un artículo reciente, Goemans et al.Analice la distribución de contenido en redes inalámbricas ad-hoc utilizando un \"enfoque teórico del juego\" [12].enfoque teórico del juego",
                "El objetivo del juego básico es encontrar configuraciones que se logren cuando los servidores optimizan sus funciones de costo localmente.3.1 Modelo de juego Tomamos un \"enfoque teórico del juego\" para analizar el problema de almacenamiento en caché no capacitado entre los servidores egoístas en red.enfoque teórico del juego"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "caching problem": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish <br>caching problem</br>.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the <br>caching problem</br> is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The <br>caching problem</br> we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The <br>caching problem</br> is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated <br>caching problem</br> among networked selfish servers.",
                "We model the selfish <br>caching problem</br> as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the <br>caching problem</br>, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the <br>caching problem</br> among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Nos referimos a esto como el \"problema de caché\" egoísta.problema de almacenamiento en caché",
                "La colocación de réplicas en el \"problema de almacenamiento en caché\" es el tema más importante.problema de almacenamiento en caché",
                "Juego básico El \"problema de almacenamiento en caché\" que estudiamos es encontrar una configuración que cumpla con ciertos objetivos (por ejemplo, costo total mínimo).problema de almacenamiento en caché",
                "El \"problema de almacenamiento en caché\" se abstrae de la siguiente manera.problema de almacenamiento en caché",
                "El objetivo del juego básico es encontrar configuraciones que se logren cuando los servidores optimizan sus funciones de costo localmente.3.1 Modelo de juego Tomamos un enfoque teórico del juego para analizar el \"problema de almacenamiento de caché\" no capacitado entre los servidores egoístas en red.problema de almacenamiento en caché",
                "Modelamos el \"problema de caché\" egoísta como un juego no cooperativo con N jugadores (servidores/nodos) cuyas estrategias son conjuntos de objetos para caché.problema de almacenamiento en caché",
                "Mientras exploramos el \"problema de almacenamiento en caché\", hicimos varias observaciones que parecen contradictorio.problema de almacenamiento en caché",
                "Conclusiones En este trabajo presentamos un nuevo modelo de juego no cooperativo para caracterizar el \"problema de almacenamiento en caché\" entre los servidores egoístas sin ninguna coordinación central.problema de almacenamiento en caché"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "nash equilibrium": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a <br>nash equilibrium</br>, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible <br>nash equilibrium</br> to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected <br>nash equilibrium</br>.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a <br>nash equilibrium</br> and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a <br>nash equilibrium</br> that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any <br>nash equilibrium</br> gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the <br>nash equilibrium</br> of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A <br>nash equilibrium</br> for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 <br>nash equilibrium</br> Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy <br>nash equilibrium</br> is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy <br>nash equilibrium</br> configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a <br>nash equilibrium</br> in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a <br>nash equilibrium</br> in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy <br>nash equilibrium</br> of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case <br>nash equilibrium</br> and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case <br>nash equilibrium</br> and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case <br>nash equilibrium</br>, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case <br>nash equilibrium</br> maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through <br>nash equilibrium</br> configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both <br>nash equilibrium</br> and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a <br>nash equilibrium</br>.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a <br>nash equilibrium</br> where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a <br>nash equilibrium</br> in the basic game is also a <br>nash equilibrium</br> in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a <br>nash equilibrium</br>.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy <br>nash equilibrium</br> in the basic game is also a pure strategy <br>nash equilibrium</br> in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any <br>nash equilibrium</br> configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a <br>nash equilibrium</br>.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a <br>nash equilibrium</br>.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a <br>nash equilibrium</br>.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a <br>nash equilibrium</br>, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy <br>nash equilibrium</br> that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a <br>nash equilibrium</br>.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a <br>nash equilibrium</br>. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the <br>nash equilibrium</br> (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, <br>nash equilibrium</br> solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the <br>nash equilibrium</br> places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a <br>nash equilibrium</br> can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a <br>nash equilibrium</br> configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a <br>nash equilibrium</br> which is worse than any <br>nash equilibrium</br> in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game <br>nash equilibrium</br>.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case <br>nash equilibrium</br> places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case <br>nash equilibrium</br> places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case <br>nash equilibrium</br> places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case <br>nash equilibrium</br> places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any <br>nash equilibrium</br> in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a <br>nash equilibrium</br> in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a <br>nash equilibrium</br> is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "La teoría del juego predice que tal situación terminará en un \"equilibrio de Nash\", es decir, un conjunto de estrategias (posiblemente aleatorizadas) con la propiedad que ningún jugador puede beneficiar al cambiar su estrategia, mientras que los otros jugadores mantienen sus estrategias sin cambios [28]equilibrio de Nash",
                "El precio de la anarquía es la proporción del costo social (total) del peor \"equilibrio de Nash\" posible al costo del óptimo social.equilibrio de Nash",
                "Sin embargo, en realidad hay formas en que el sistema puede guiarse, a través de la siembra o incentivos, a un \"equilibrio NASH\" preseleccionado.equilibrio de Nash",
                "Esta versión optimista del precio de la anarquía [3] es capturada por la relación más pequeña entre un \"equilibrio Nash\" y el óptimo social.equilibrio de Nash",
                "Sin embargo, en el modelo de pago, el juego siempre puede implementar un \"equilibrio de Nash\" que sea el mismo que el óptimo social, por lo que el precio optimista de la anarquía es uno.equilibrio de Nash",
                "En el caso de la ubicación de las instalaciones competitivas entre las corporaciones, prueba que cualquier \"equilibrio de Nash\" ofrece una utilidad social esperada dentro de un factor de 2 de óptimo más un término aditivo que depende del costo de apertura de la instalación.equilibrio de Nash",
                "Nuestro enfoque es investigar la configuración resultante, que es el \"equilibrio Nash\" del juego.equilibrio de Nash",
                "Un \"equilibrio de Nash\" para el juego de múltiples objetos es el producto cruzado de los equilibrios NASH para los juegos de objeto único.equilibrio de Nash",
                "La medida en que CI (s) representa el costo real incurrido por el servidor I está más allá del alcance de este documento;Asumiremos que se puede definir una función de costo apropiada de la forma de la ecuación 3.3.2 Soluciones de \"equilibrio de Nash\" En principio, podemos comenzar con una configuración aleatoria y dejar que esta configuración evolucione a medida que cada servidor altera su estrategia e intenta minimizar su costo.equilibrio de Nash",
                "Se alcanza una estrategia pura \"equilibrio NASH\" cuando ningún servidor puede beneficiarse cambiando unilateralmente su estrategia.equilibrio de Nash"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "network topology": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying <br>network topology</br>.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "D modela una \"topología de red\" subyacente.topología de la red"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "peer-to-peer file system": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area <br>peer-to-peer file system</br>s [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area <br>peer-to-peer file system</br>s such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "INTRODUCCIÓN \"Sistema de archivos entre pares\" de área amplia S [2,5,22,32,33], cachés entre pares [15, 16] y cachés web [6, 10] se han vuelto populares sobrelos últimos años.sistema de archivos de pares",
                "Trabajo relacionado ha habido una investigación considerable sobre el \"sistema de archivos entre pares\" de área amplia como OceanStore [22], CFS [5], Past [32], Farsite [2] y Pangea [33], WebCaches como NetCache [6] y ResumenCache [10], y cachés entre pares como Squirrel [16].sistema de archivos de pares"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "remote replica": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a <br>remote replica</br>.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the <br>remote replica</br>.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the <br>remote replica</br> than to cache it, B accesses the <br>remote replica</br> as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the <br>remote replica</br>.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a <br>remote replica</br> or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the <br>remote replica</br> does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a <br>remote replica</br> is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the <br>remote replica</br>, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a <br>remote replica</br>, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En nuestro modelo, los nodos incurren en el costo de replicar los recursos o el costo de acceso a una \"réplica remota\".réplica remota",
                "Si una réplica de un objeto solicitado se encuentra en un nodo cercano, el servidor puede ser mejor acceder a la \"réplica remota\".réplica remota",
                "Si es más barato acceder a la \"réplica remota\" que en caché, B accede a la \"réplica remota\" como se muestra en la red (b).réplica remota",
                "En este caso, C (SW) = α + (α - 1) n 2, ya que todos los servidores en el otro clúster acceden a la \"réplica remota\".réplica remota",
                "Un nodo que replica el objeto no tiene incentivo para cambiar su estrategia: cambiar el umbral no disminuye su costo, y tendría que pagar al menos α para acceder a una \"réplica remota\" o incentivar un nodo cercano a la memoria caché.réplica remota",
                "B no tiene un incentivo para desviarse, ya que acceder a la \"réplica remota\" no disminuye su costo.réplica remota",
                "El pico en POA en α = 100 ocurre en el punto para una línea de 100 nodos donde el peor costo de acceder a una \"réplica remota\" es un poco menor que el costo de colocar una nueva réplica, por lo que los servidores egoístas nunca colocarán unSegunda réplica.réplica remota",
                "Cuando α> 2, el peor de los casos de equilibrio de Nash coloca una réplica en un nodo de hoja y los otros nodos acceden a la \"réplica remota\", y la réplica social óptima coloca una réplica en el centro.réplica remota",
                "Este procedimiento elige con avidez entre la replicación y el acceso a una \"réplica remota\", con las posibilidades de recibir y hacer pagos, respectivamente.réplica remota"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "demand distribution": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, <br>demand distribution</br>, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying <br>demand distribution</br> Now we examine the effects of varying the <br>demand distribution</br>.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Los detalles de las simulaciones, incluidos los protocolos y una discusión de la convergencia, se presentan en el Apéndice C. En nuestra evaluación, estudiamos los efectos de la variación en cuatro categorías: costo de colocación, topología subyacente, \"distribución de la demanda\" y pagos.distribución de la demanda",
                "El OPOA es igual a uno en la figura cuando se colocan el mismo número de réplicas.5.3 Varial \"Distribución de la demanda\" Ahora examinamos los efectos de variar la \"distribución de la demanda\".distribución de la demanda"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "price of anarchy": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the <br>price of anarchy</br>, which is the relative cost of the lack of coordination.",
                "The <br>price of anarchy</br> can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the <br>price of anarchy</br> [21].",
                "The <br>price of anarchy</br> is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The <br>price of anarchy</br> bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the <br>price of anarchy</br> [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the <br>price of anarchy</br>, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The <br>price of anarchy</br> of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the <br>price of anarchy</br> does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic <br>price of anarchy</br> can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic <br>price of anarchy</br> is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the <br>price of anarchy</br> increases.",
                "When the placement cost first exceeds the maximum distance between servers, the <br>price of anarchy</br> is at its highest due to undersupply problems.",
                "As the placement cost further increases, the <br>price of anarchy</br> decreases, and the effect of replica misplacement dominates the <br>price of anarchy</br>.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the <br>price of anarchy</br>.",
                "In Section 4 we discuss the payment game and analyze its <br>price of anarchy</br>.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the <br>price of anarchy</br> comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the <br>price of anarchy</br> and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The <br>price of anarchy</br> is O(n) and even the optimistic <br>price of anarchy</br> is O(n).",
                "This high <br>price of anarchy</br> comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic <br>price of anarchy</br> is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the <br>price of anarchy</br> in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the <br>price of anarchy</br>, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The <br>price of anarchy</br> (POA): To quantify the cost of lack of coordination, we use the <br>price of anarchy</br> [21] and the optimistic price of anarchy [3].",
                "The <br>price of anarchy</br> is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic <br>price of anarchy</br> is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the <br>price of anarchy</br>.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the <br>price of anarchy</br>, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the <br>price of anarchy</br>: We show bounds of the <br>price of anarchy</br> varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad <br>price of anarchy</br> comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic <br>price of anarchy</br> is O(n).",
                "In Appendix A, we analyze the <br>price of anarchy</br> with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the <br>price of anarchy</br> and the optimistic <br>price of anarchy</br> of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the <br>price of anarchy</br> of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic <br>price of anarchy</br> in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine <br>price of anarchy</br> (PoA), optimistic <br>price of anarchy</br> (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the <br>price of anarchy</br> is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the <br>price of anarchy</br> becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the <br>price of anarchy</br> under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) <br>price of anarchy</br>.",
                "In addition, we want to run large-scale simulations to observe the change in the <br>price of anarchy</br> as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the <br>price of anarchy</br> bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the <br>price of anarchy</br> can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the <br>price of anarchy</br> can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic <br>price of anarchy</br> is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the <br>price of anarchy</br> (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the <br>price of anarchy</br> is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Mostramos la existencia de pura estrategia Nash Equilibrios e investigamos el \"precio de la anarquía\", que es el costo relativo de la falta de coordinación.precio de la anarquía",
                "El \"precio de la anarquía\" puede ser alto debido a los problemas de suboficial, pero con ciertas topologías de red tiene mejores límites.precio de la anarquía",
                "Esta pérdida de eficiencia es 1 Utilizaremos el almacenamiento en caché y la replicación indistintamente.2 Usamos el objeto de término como una entidad abstracta que representa archivos y otros objetos de datos.21 cuantificado por el \"precio de la anarquía\" [21].precio de la anarquía",
                "El \"precio de la anarquía\" es la relación del costo social (total) del peor equilibrio de Nash posible al costo del óptimo social.precio de la anarquía",
                "El \"precio de la anarquía\" limita el peor comportamiento posible de un sistema egoísta, cuando se deja completamente solo.precio de la anarquía",
                "Esta versión optimista del \"precio de la anarquía\" [3] es capturada por la relación más pequeña entre un equilibrio de Nash y el óptimo social.precio de la anarquía",
                "En este documento abordamos las siguientes preguntas: • ¿Existen los equilibrios de Nash de estrategia pura en el juego de almacenamiento en caché?• Si existen equilibrios de Nash de estrategia pura, ¿cuán eficientes son (en términos del \"precio de la anarquía\", o su contraparte optimista) bajo diferentes costos de colocación, topologías de red y distribuciones de demanda?• ¿Cuál es el efecto de adoptar pagos?precio de la anarquía",
                "El \"precio de la anarquía\" del modelo de juego básico puede ser o (n), donde n es el número de servidores;La razón intuitiva es la subida.precio de la anarquía",
                "Bajo ciertas topologías, el \"precio de la anarquía\" tiene límites más estrictos.precio de la anarquía",
                "Incluso el \"precio de la anarquía\" optimista puede ser o (n).precio de la anarquía"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "anarchy price": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "instrumentation server": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, <br>instrumentation server</br>s, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and <br>instrumentation server</br>s in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Hay mucho trabajo en la ubicación de las réplicas web, el \"servidor de instrumentos\" s y los recursos replicados.servidor de instrumentación",
                "Los algoritmos centralizados para la colocación de objetos, proxies web, espejos y \"servidor de instrumentos\" en Internet se han estudiado ampliamente [18,19,23,30].servidor de instrumentación"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "primal-dual technique": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on <br>primal-dual technique</br>s, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Dado que el problema es NP-HARD, se han explorado algoritmos de aproximación basados en \"técnica primaria-dual\", algoritmos codiciosos y búsqueda local [17, 24, 26].técnica primaria-dual"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "social utility": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the <br>social utility</br> is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected <br>social utility</br> within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Vetta [35] considera una clase de problemas en los que la \"utilidad social\" es submodular (la submodularidad significa disminución de la utilidad marginal).utilidad social",
                "En el caso de la ubicación de las instalaciones competitivas entre las corporaciones, demuestra que cualquier equilibrio de Nash ofrece una \"utilidad social\" esperada dentro de un factor de 2 de óptimo más un término aditivo que depende del costo de apertura de la instalación.utilidad social"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "submodularity": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (<br>submodularity</br> means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Vetta [35] considera una clase de problemas en los que la utilidad social es submodular (\"submodularidad\" significa disminuir la utilidad marginal).submodularidad"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "group strategyproofness": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve <br>group strategyproofness</br> [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Devanur, Mihail y Vazirani ofrecen una asignación de costos a prueba de estrategias para el problema de ubicación de la instalación, pero no pueden lograr la \"prueba de estrategia grupal\" [7].3. Group Strategy -Probage"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "aggregation effect": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following <br>aggregation effect</br>.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "También queremos ver el siguiente \"efecto de agregación\".efecto de agregación"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "cache": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to <br>cache</br> objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to <br>cache</br> items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to <br>cache</br> it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to <br>cache</br>.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to <br>cache</br> the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to <br>cache</br> or not to <br>cache</br>.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to <br>cache</br>.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to <br>cache</br>.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to <br>cache</br> another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary <br>cache</br>: A Scalable Wide-area Web <br>cache</br> Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web <br>cache</br>.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that <br>cache</br> the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does <br>cache</br>.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Tienen incentivos obvios para \"cachear\" objetos2 que maximizan el beneficio en sus dominios, posiblemente a expensas del comportamiento globalmente óptimo.cache",
                "Sin embargo, sus resultados son incomparables para los nuestros porque sus funciones de pago descuidan las latencias de red entre los usuarios, consideran múltiples elementos de datos (mercados), y cada nodo tiene un presupuesto limitado para \"caché\" de elementos.cache",
                "Si es más barato acceder a la réplica remota que \"caché\", B accede a la réplica remota como se muestra en la red (b).cache",
                "Modelamos el problema de almacenamiento egoísta como un juego no cooperativo con N jugadores (servidores/nodos) cuyas estrategias son conjuntos de objetos para \"caché\".cache",
                "Dado un perfil de estrategia S = (S1, S2, ..., Sn), el costo incurrido por el servidor I se define como: CI (S) = j∈Si αij + j /∈Si wij di (i, j).(1) donde αij es el costo de colocación del objeto J, wij es la demanda que el servidor que tiene para el objeto J, (i, j) es el servidor más cercano a i que almacena el objeto J, y DIK es la distancia entre I y K.Cuando ningún servidor almacena en caché el objeto, definimos el costo de distancia di (i, j) para que sea lo suficientemente grande como para que al menos un servidor elija \"almacenar en caché\" el objeto.cache",
                "Para el almacenamiento egoísta de un solo objeto, cada servidor I tiene dos estrategias: \"caché\" o no para \"caché\".cache",
                "Aquí, el precio optimista de la anarquía es uno.En I, luego se coloca en otro servidor a la distancia α de I, por lo que no tengo ningún incentivo para \"caché\".cache",
                "Un nodo que replica el objeto no tiene incentivo para cambiar su estrategia: cambiar el umbral no disminuye su costo, y tendría que pagar al menos α para acceder a una réplica remota o incentivar un nodo cercano a \"caché\".cache",
                "Dado que el almacenamiento en caché de un objeto afecta la capacidad de \"almacenar\" a otro, no hay separabilidad de un juego de objetos múltiples en múltiples juegos de objetos individuales.cache",
                "Resumen \"Cache\": un protocolo de intercambio de \"caché\" de área amplia escalable.cache"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "distribute system": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "peer-to-peer system": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in <br>peer-to-peer system</br>s.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En [14], Gribble et al.Discuta el problema de colocación de datos en el \"sistema de pares\" s.sistema de pares"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "game-theoretic model": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Selfish Caching in Distributed Systems: A Game-Theoretic Analysis Byung-Gon Chun ∗ bgchun@cs.berkeley.edu Kamalika Chaudhuri † kamalika@cs.berkeley.edu Hoeteck Wee ‡ hoeteck@cs.berkeley.edu Marco Barreno § barreno@cs.berkeley.edu Christos H. Papadimitriou † christos@cs.berkeley.edu John Kubiatowicz ∗ kubitron@cs.berkeley.edu Computer Science Division University of California, Berkeley ABSTRACT We analyze replication of resources by server nodes that act selfishly, using a game-theoretic approach.",
                "We refer to this as the selfish caching problem.",
                "In our model, nodes incur either cost for replicating resources or cost for access to a remote replica.",
                "We show the existence of pure strategy Nash equilibria and investigate the price of anarchy, which is the relative cost of the lack of coordination.",
                "The price of anarchy can be high due to undersupply problems, but with certain network topologies it has better bounds.",
                "With a payment scheme the game can always implement the social optimum in the best case by giving servers incentive to replicate.",
                "Categories and Subject Descriptors C.2.4 [Computer-Communication Networks]: Distributed Systems General Terms Algorithms, Economics, Theory, Performance 1.",
                "INTRODUCTION Wide-area peer-to-peer file systems [2,5,22,32,33], peer-to-peer caches [15, 16], and web caches [6, 10] have become popular over the last few years.",
                "Caching1 of files in selected servers is widely used to enhance the performance, availability, and reliability of these systems.",
                "However, most such systems assume that servers cooperate with one another by following protocols optimized for overall system performance, regardless of the costs incurred by each server.",
                "In reality, servers may behave selfishly - seeking to maximize their own benefit.",
                "For example, parties in different administrative domains utilize their local resources (servers) to better support clients in their own domains.",
                "They have obvious incentives to cache objects2 that maximize the benefit in their domains, possibly at the expense of globally optimum behavior.",
                "It has been an open question whether these caching scenarios and protocols maintain their desirable global properties (low total social cost, for example) in the face of selfish behavior.",
                "In this paper, we take a game-theoretic approach to analyzing the problem of caching in networks of selfish servers through theoretical analysis and simulations.",
                "We model selfish caching as a non-cooperative game.",
                "In the basic model, the servers have two possible actions for each object.",
                "If a replica of a requested object is located at a nearby node, the server may be better off accessing the remote replica.",
                "On the other hand, if all replicas are located too far away, the server is better off caching the object itself.",
                "Decisions about caching the replicas locally are arrived at locally, taking into account only local costs.",
                "We also define a more elaborate payment model, in which each server bids for having an object replicated at another site.",
                "Each site now has the option of replicating an object and collecting the related bids.",
                "Once all servers have chosen a strategy, each game specifies a configuration, that is, the set of servers that replicate the object, and the corresponding costs for all servers.",
                "Game theory predicts that such a situation will end up in a Nash equilibrium, that is, a set of (possibly randomized) strategies with the property that no player can benefit by changing its strategy while the other players keep their strategies unchanged [28].",
                "Foundational considerations notwithstanding, it is not easy to accept randomized strategies as the behavior of rational agents in a distributed system (see [28] for an extensive discussion) - but this is what classical game theory can guarantee.",
                "In certain very fortunate situations, however (see [9]), the existence of pure (that is, deterministic) Nash equilibria can be predicted.",
                "With or without randomization, however, the lack of coordination inherent in selfish decision-making may incur costs well beyond what would be globally optimum.",
                "This loss of efficiency is 1 We will use caching and replication interchangeably. 2 We use the term object as an abstract entity that represents files and other data objects. 21 quantified by the price of anarchy [21].",
                "The price of anarchy is the ratio of the social (total) cost of the worst possible Nash equilibrium to the cost of the social optimum.",
                "The price of anarchy bounds the worst possible behavior of a selfish system, when left completely on its own.",
                "However, in reality there are ways whereby the system can be guided, through seeding or incentives, to a preselected Nash equilibrium.",
                "This optimistic version of the price of anarchy [3] is captured by the smallest ratio between a Nash equilibrium and the social optimum.",
                "In this paper we address the following questions : • Do pure strategy Nash equilibria exist in the caching game? • If pure strategy Nash equilibria do exist, how efficient are they (in terms of the price of anarchy, or its optimistic counterpart) under different placement costs, network topologies, and demand distributions? • What is the effect of adopting payments?",
                "Will the Nash equilibria be improved?",
                "We show that pure strategy Nash equilibria always exist in the caching game.",
                "The price of anarchy of the basic game model can be O(n), where n is the number of servers; the intuitive reason is undersupply.",
                "Under certain topologies, the price of anarchy does have tighter bounds.",
                "For complete graphs and stars, it is O(1).",
                "For D-dimensional grids, it is O(n D D+1 ).",
                "Even the optimistic price of anarchy can be O(n).",
                "In the payment model, however, the game can always implement a Nash equilibrium that is same as the social optimum, so the optimistic price of anarchy is one.",
                "Our simulation results show several interesting phases.",
                "As the placement cost increases from zero, the price of anarchy increases.",
                "When the placement cost first exceeds the maximum distance between servers, the price of anarchy is at its highest due to undersupply problems.",
                "As the placement cost further increases, the price of anarchy decreases, and the effect of replica misplacement dominates the price of anarchy.",
                "The rest of the paper is organized as follows.",
                "In Section 2 we discuss related work.",
                "Section 3 discusses details of the basic game and analyzes the bounds of the price of anarchy.",
                "In Section 4 we discuss the payment game and analyze its price of anarchy.",
                "In Section 5 we describe our simulation methodology and study the properties of Nash equilibria observed.",
                "We discuss extensions of the game and directions for future work in Section 6. 2.",
                "RELATED WORK There has been considerable research on wide-area peer-to-peer file systems such as OceanStore [22], CFS [5], PAST [32], FARSITE [2], and Pangaea [33], web caches such as NetCache [6] and SummaryCache [10], and peer-to-peer caches such as Squirrel [16].",
                "Most of these systems use caching for performance, availability, and reliability.",
                "The caching protocols assume obedience to the protocol and ignore participants incentives.",
                "Our work starts from the assumption that servers are selfish and quantifies the cost of the lack of coordination when servers behave selfishly.",
                "The placement of replicas in the caching problem is the most important issue.",
                "There is much work on the placement of web replicas, instrumentation servers, and replicated resources.",
                "All protocols assume obedience and ignore participants incentives.",
                "In [14], Gribble et al. discuss the data placement problem in peer-to-peer systems.",
                "Ko and Rubenstein propose a self-stabilizing, distributed graph coloring algorithm for the replicated resource placement [20].",
                "Chen, Katz, and Kubiatowicz propose a dynamic replica placement algorithm exploiting underlying distributed hash tables [4].",
                "Douceur and Wattenhofer describe a hill-climbing algorithm to exchange replicas for reliability in FARSITE [8].",
                "RaDar is a system that replicates and migrates objects for an Internet hosting service [31].",
                "Tang and Chanson propose a coordinated en-route web caching that caches objects along the routing path [34].",
                "Centralized algorithms for the placement of objects, web proxies, mirrors, and instrumentation servers in the Internet have been studied extensively [18,19,23,30].",
                "The facility location problem has been widely studied as a centralized optimization problem in theoretical computer science and operations research [27].",
                "Since the problem is NP-hard, approximation algorithms based on primal-dual techniques, greedy algorithms, and local search have been explored [17, 24, 26].",
                "Our caching game is different from all of these in that the optimization process is performed among distributed selfish servers.",
                "There is little research in non-cooperative facility location games, as far as we know.",
                "Vetta [35] considers a class of problems where the social utility is submodular (submodularity means decreasing marginal utility).",
                "In the case of competitive facility location among corporations he proves that any Nash equilibrium gives an expected social utility within a factor of 2 of optimal plus an additive term that depends on the facility opening cost.",
                "Their results are not directly applicable to our problem, however, because we consider each server to be tied to a particular location, while in their model an agent is able to open facilities in multiple locations.",
                "Note that in that paper the increase of the price of anarchy comes from oversupply problems due to the fact that competing corporations can open facilities at the same location.",
                "On the other hand, the significant problems in our game are undersupply and misplacement.",
                "In a recent paper, Goemans et al. analyze content distribution on ad-hoc wireless networks using a game-theoretic approach [12].",
                "As in our work, they provide monetary incentives to mobile users for caching data items, and provide tight bounds on the price of anarchy and speed of convergence to (approximate) Nash equilibria.",
                "However, their results are incomparable to ours because their payoff functions neglect network latencies between users, they consider multiple data items (markets), and each node has a limited budget to cache items.",
                "Cost sharing in the facility location problem has been studied using cooperative game theory [7, 13, 29].",
                "Goemans and Skutella show strong connections between fair cost allocations and linear programming relaxations for facility location problems [13].",
                "P´al and Tardos develop a method for cost-sharing that is approximately budget-balanced and group strategyproof and show that the method recovers 1/3 of the total cost for the facility location game [29].",
                "Devanur, Mihail, and Vazirani give a strategyproof cost allocation for the facility location problem, but cannot achieve group strategyproofness [7]. 3.",
                "BASIC GAME The caching problem we study is to find a configuration that meets certain objectives (e.g., minimum total cost).",
                "Figure 1 shows examples of caching among four servers.",
                "In network (a), A stores an object.",
                "Suppose B wants to access the object.",
                "If it is cheaper to access the remote replica than to cache it, B accesses the remote replica as shown in network (b).",
                "In network (c), C wants to access the object.",
                "If C is far from A, C caches the object instead of accessing the object from A.",
                "It is possible that in an optimal configuration it would be better to place replicas in A and B.",
                "Understanding the placement of replicas by selfish servers is the focus of our study.",
                "The caching problem is abstracted as follows.",
                "There is a set N of n servers and a set M of m objects.",
                "The distance between servers can be represented as a distance matrix D (i.e., dij is the distance 22 Server Server Server Server A B C D (a) Server Server Server Server A B C D (b) Server Server Server Server A B C D (c) Figure 1: Caching.",
                "There are four servers labeled A, B, C, and D. The rectangles are object replicas.",
                "In (a), A stores an object.",
                "If B incurs less cost accessing As replica than it would caching the object itself, it accesses the object from A as in (b).",
                "If the distance cost is too high, the server caches the object itself, as C does in (c).",
                "This figure is an example of our caching game model. from server i to server j).",
                "D models an underlying network topology.",
                "For our analysis we assume that the distances are symmetric and the triangle inequality holds on the distances (for all servers i, j, k: dij + djk ≥ dik).",
                "Each server has demand from clients that is represented by a demand matrix W (i.e., wij is the demand of server i for object j).",
                "When a server caches objects, the server incurs some placement cost that is represented by a matrix α (i.e., αij is a placement cost of server i for object j).",
                "In this study, we assume that servers have no capacity limit.",
                "As we discuss in the next section, this fact means that the caching behavior with respect to each object can be examined separately.",
                "Consequently, we can talk about configurations of the system with respect to a given object: DEFINITION 1.",
                "A configuration X for some object O is the set of servers replicating this object.",
                "The goal of the basic game is to find configurations that are achieved when servers optimize their cost functions locally. 3.1 Game Model We take a game-theoretic approach to analyzing the uncapacitated caching problem among networked selfish servers.",
                "We model the selfish caching problem as a non-cooperative game with n players (servers/nodes) whose strategies are sets of objects to cache.",
                "In the game, each server chooses a pure strategy that minimizes its cost.",
                "Our focus is to investigate the resulting configuration, which is the Nash equilibrium of the game.",
                "It should be emphasized that we consider only pure strategy Nash equilibria in this paper.",
                "The cost model is an important part of the game.",
                "Let Ai be the set of feasible strategies for server i, and let Si ∈ Ai be the strategy chosen by server i.",
                "Given a strategy profile S = (S1, S2, ..., Sn), the cost incurred by server i is defined as: Ci(S) = j∈Si αij + j /∈Si wij di (i,j). (1) where αij is the placement cost of object j, wij is the demand that server i has for object j, (i, j) is the closest server to i that caches object j, and dik is the distance between i and k. When no server caches the object, we define distance cost di (i,j) to be dM -large enough that at least one server will choose to cache the object.",
                "The placement cost can be further divided into first-time installation cost and maintenance cost: αij = k1i + k2i UpdateSizej ObjectSizej 1 T Pj k wkj , (2) where k1i is the installation cost, k2i is the relative weight between the maintenance cost and the installation cost, Pj is the ratio of the number of writes over the number of reads and writes, UpdateSizej is the size of an update, ObjectSizej is the size of the object, and T is the update period.",
                "We see tradeoffs between different parameters in this equation.",
                "For example, placing replicas becomes more expensive as UpdateSizej increases, Pj increases, or T decreases.",
                "However, note that by varying αij itself we can capture the full range of behaviors in the game.",
                "For our analysis, we use only αij .",
                "Since there is no capacity limit on servers, we can look at each single object as a separate game and combine the pure strategy equilibria of these games to obtain a pure strategy equilibrium of the multi-object game.",
                "Fabrikant, Papadimitriou, and Talwar discuss this existence argument: if two games are known to have pure equilibria, and their cost functions are cross-monotonic, then their union is also guaranteed to have pure Nash equilibria, by a continuity argument [9].",
                "A Nash equilibrium for the multi-object game is the cross product of Nash equilibria for single-object games.",
                "Therefore, we can focus on the single object game in the rest of this paper.",
                "For single object selfish caching, each server i has two strategies - to cache or not to cache.",
                "The object under consideration is j.",
                "We define Si to be 1 when server i caches j and 0 otherwise.",
                "The cost incurred by server i is Ci(S) = αij Si + wij di (i,j)(1 − Si). (3) We refer to this game as the basic game.",
                "The extent to which Ci(S) represents actual cost incurred by server i is beyond the scope of this paper; we will assume that an appropriate cost function of the form of Equation 3 can be defined. 3.2 Nash Equilibrium Solutions In principle, we can start with a random configuration and let this configuration evolve as each server alters its strategy and attempts to minimize its cost.",
                "Game theory is interested in stable solutions called Nash equilibria.",
                "A pure strategy Nash equilibrium is reached when no server can benefit by unilaterally changing its strategy.",
                "A Nash equilibrium3 (S∗ i , S∗ −i) for the basic game specifies a configuration X such that ∀i ∈ N, i ∈ X ⇔ S∗ i = 1.",
                "Thus, we can consider a set E of all pure strategy Nash equilibrium configurations: X ∈ E ⇔ ∀i ∈ N, ∀Si ∈ Ai, Ci(S∗ i , S∗ −i) ≤ Ci(Si, S∗ −i) (4) By this definition, no server has incentive to deviate in the configurations since it cannot reduce its cost.",
                "For the basic game, we can easily see that: X ∈ E ⇔ ∀i ∈ N, ∃j ∈ X s.t. dji ≤ α and ∀j ∈ X, ¬∃k ∈ X s.t. dkj < α (5) The first condition guarantees that there is a server that places the replica within distance α of each server i.",
                "If the replica is not placed 3 The notation for strategy profile (S∗ i , S∗ −i) separates node i s strategy (S∗ i ) from the strategies of other nodes (S∗ −i). 23 A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (a) A B1−α 0 0 0 0 0 0 0 0 0 0 2 n nodes 2 n nodes (b) A B1−α 2 n nodes 2 n nodes n2 n2 n2 n2 n2 n2 n2 n2 n2 n2 (c) Figure 2: Potential inefficiency of Nash equilibria illustrated by two clusters of n 2 servers.",
                "The intra-cluster distances are all zero and the distance between clusters is α − 1, where α is the placement cost.",
                "The dark nodes replicate the object.",
                "Network (a) shows a Nash equilibrium in the basic game, where one server in a cluster caches the object.",
                "Network (b) shows the social optimum where two replicas, one for each cluster, are placed.",
                "The price of anarchy is O(n) and even the optimistic price of anarchy is O(n).",
                "This high price of anarchy comes from the undersupply of replicas due to the selfish nature of servers.",
                "Network (c) shows a Nash equilibrium in the payment game, where two replicas, one for each cluster, are placed.",
                "Each light node in each cluster pays 2/n to the dark node, and the dark node replicates the object.",
                "Here, the optimistic price of anarchy is one. at i, then it is placed at another server within distance α of i, so i has no incentive to cache.",
                "If the replica is placed at i, then the second condition ensures there is no incentive to drop the replica because no two servers separated by distance less than α both place replicas. 3.3 Social Optimum The social cost of a given strategy profile is defined as the total cost incurred by all servers, namely: C(S) = n−1 i=0 Ci(S) (6) where Ci(S) is the cost incurred by server i given by Equation 1.",
                "The social optimum cost, referred to as C(SO) for the remainder of the paper, is the minimum social cost.",
                "The social optimum cost will serve as an important base case against which to measure the cost of selfish caching.",
                "We define C(SO) as: C(SO) = min S C(S) (7) where S varies over all possible strategy profiles.",
                "Note that in the basic game, this means varying configuration X over all possible configurations.",
                "In some sense, C(SO) represents the best possible caching behavior - if only nodes could be convinced to cooperate with one another.",
                "The social optimum configuration is a solution of a mini-sum facility location problem, which is NP-hard [11].",
                "To find such configurations, we formulate an integer programming problem: minimize Èi Èj ¢αij xij + Èk wij dikyijk £ subject to ∀i, j Èk yijk = I(wij) ∀i, j, k xij − ykji ≥ 0 ∀i, j xij ∈ {0, 1} ∀i, j, k yijk ∈ {0, 1} (8) Here, xij is 1 if server i replicates object j and 0 otherwise; yijk is 1 if server i accesses object j from server k and 0 otherwise; I(w) returns 1 if w is nonzero and 0 otherwise.",
                "The first constraint specifies that if server i has demand for object j, then it must access j from exactly one server.",
                "The second constraint ensures that server i replicates object j if any other server accesses j from i. 3.4 Analysis To analyze the basic game, we first give a proof of the existence of pure strategy Nash equilibria.",
                "We discuss the price of anarchy in general and then on specific underlying topologies.",
                "In this analysis we use simply α in place of αij , since we deal with a single object and we assume placement cost is the same for all servers.",
                "In addition, when we compute the price of anarchy, we assume that all nodes have the same demand (i.e., ∀i ∈ N wij = 1).",
                "THEOREM 1.",
                "Pure strategy Nash equilibria exist in the basic game.",
                "PROOF.",
                "We show a constructive proof.",
                "First, initialize the set V to N. Then, remove all nodes with zero demand from V .",
                "Each node x defines βx, where βx = α wxj .",
                "Furthermore, let Z(y) = {z : dzy ≤ βz, z ∈ V }; Z(y) represents all nodes z for which y lies within βz from z.",
                "Pick a node y ∈ V such that βy ≤ βx for all x ∈ V .",
                "Place a replica at y and then remove y and all z ∈ Z(y) from V .",
                "No such z can have incentive to replicate the object because it can access ys replica at lower (or equal) cost.",
                "Iterate this process of placing replicas until V is empty.",
                "Because at each iteration y is the remaining node with minimum β, no replica will be placed within distance βy of any such y by this process.",
                "The resulting configuration is a pure-strategy Nash equilibrium of the basic game.",
                "The Price of Anarchy (POA): To quantify the cost of lack of coordination, we use the price of anarchy [21] and the optimistic price of anarchy [3].",
                "The price of anarchy is the ratio of the social costs of the worst-case Nash equilibrium and the social optimum, and the optimistic price of anarchy is the ratio of the social costs of the best-case Nash equilibrium and the social optimum.",
                "We show general bounds on the price of anarchy.",
                "Throughout our discussion, we use C(SW ) to represent the cost of worst case Nash equilibrium, C(SO) to represent the cost of social optimum, and PoA to represent the price of anarchy, which is C(SW ) C(SO) .",
                "The worst case Nash equilibrium maximizes the total cost under the constraint that the configuration meets the Nash condition.",
                "Formally, we can define C(SW ) as follows.",
                "C(SW ) = max X∈E (α|X| + i min j∈X dij) (9) where minj∈X dij is the distance to the closest replica (including i itself) from node i and X varies through Nash equilibrium configurations.",
                "Bounds on the Price of Anarchy: We show bounds of the price of anarchy varying α.",
                "Let dmin = min(i,j)∈N×N,i=j dij and dmax = max(i,j)∈N×N dij .",
                "We see that if α ≤ dmin, PoA = 1 24 Topology PoA Complete graph 1 Star ≤ 2 Line O( √ n) D-dimensional grid O(n D D+1 ) Table 1: PoA in the basic game for specific topologies trivially, since every server caches the object for both Nash equilibrium and social optimum.",
                "When α > dmax, there is a transition in Nash equilibria: since the placement cost is greater than any distance cost, only one server caches the object and other servers access it remotely.",
                "However, the social optimum may still place multiple replicas.",
                "Since α ≤ C(SO) ≤ α+minj∈N Èi dij when α > dmax, we obtain α+maxj∈N Èi dij α+minj∈N Èi dij ≤ PoA ≤ α+maxj∈N Èi dij α .",
                "Note that depending on the underlying topology, even the lower bound of PoA can be O(n).",
                "Finally, there is a transition when α > maxj∈N Èi dij.",
                "In this case, PoA = α+maxj∈N Èi dij α+minj∈N Èi dij and it is upper bounded by 2.",
                "Figure 2 shows an example of the inefficiency of a Nash equilibrium.",
                "In the network there are two clusters of servers whose size is n 2 .",
                "The distance between two clusters is α − 1 where α is the placement cost.",
                "Figure 2(a) shows a Nash equilibrium where one server in a cluster caches the object.",
                "In this case, C(SW ) = α + (α − 1)n 2 , since all servers in the other cluster accesses the remote replica.",
                "However, the social optimum places two replicas, one for each cluster, as shown in Figure 2(b).",
                "Therefore, C(SO) = 2α.",
                "PoA = α+(α−1) n 2 2α , which is O(n).",
                "This bad price of anarchy comes from an undersupply of replicas due to the selfish nature of the servers.",
                "Note that all Nash equilibria have the same cost; thus even the optimistic price of anarchy is O(n).",
                "In Appendix A, we analyze the price of anarchy with specific underlying topologies and show that PoA can have tighter bounds than O(n) for the complete graph, star, line, and D-dimensional grid.",
                "In these topologies, we set the distance between directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A summary of the results is shown in Table 1. 4.",
                "PAYMENT GAME In this section, we present an extension to the basic game with payments and analyze the price of anarchy and the optimistic price of anarchy of the game. 4.1 Game Model The new game, which we refer to as the payment game, allows each player to offer a payment to another player to give the latter incentive to replicate the object.",
                "The cost of replication is shared among the nodes paying the server that replicates the object.",
                "The strategy for each player i is specified by a triplet (vi, bi, ti) ∈ {N, Ê+, Ê+}. vi specifies the player to whom i makes a bid, bi ≥ 0 is the value of the bid, and ti ≥ 0 denotes a threshold for payments beyond which i will replicate the object.",
                "In addition, we use Ri to denote the total amount of bids received by a node i (Ri = Èj:vj =i bj).",
                "A node i replicates the object if and only if Ri ≥ ti, that is, the amount of bids it receives is greater than or equal to its threshold.",
                "Let Ii denote the corresponding indicator variable, that is, Ii equals 1 if i replicates the object, and 0 otherwise.",
                "We make the rule that if a node i makes a bid to another node j and j replicates the object, then i must pay j the amount bi.",
                "If j does not replicate the object, i does not pay j.",
                "Given a strategy profile, the outcome of the game is the set of tuples {(Ii, vi, bi, Ri)}.",
                "Ii tells us whether player i replicates the object or not, bi is the payment player i makes to player vi, and Ri is the total amount of bids received by player i.",
                "To compute the payoffs given the outcome, we must now take into account the payments a node makes, in addition to the placement costs and access costs of the basic game.",
                "By our rules, a server node i pays bi to node vi if vi replicates the object, and receives a payment of Ri if it replicates the object itself.",
                "Its net payment is biIvi − RiIi.",
                "The total cost incurred by each node is the sum of its placement cost, access cost, and net payment.",
                "It is defined as Ci(S) = αij Ii + wij di (i,j)(1 − Ii) + biIvi − RiIi. (10) The cost of social optimum for the payment game is same as that for the basic game, since the net payments made cancel out. 4.2 Analysis In analyzing the payment model, we first show that a Nash equilibrium in the basic game is also a Nash equilibrium in the payment game.",
                "We then present an important positive result - in the payment game the socially optimal configuration can always be implemented by a Nash equilibrium.",
                "We know from the counterexample in Figure 2 that this is not guaranteed in the the basic game.",
                "In this analysis we use α to represent αij .",
                "THEOREM 2.",
                "Any configuration that is a pure strategy Nash equilibrium in the basic game is also a pure strategy Nash equilibrium in the payment game.",
                "Therefore, the price of anarchy of the payment game is at least that of the basic game.",
                "PROOF.",
                "Consider any Nash equilibrium configuration in the basic game.",
                "For each node i replicating the object, set its threshold ti to 0; everyone else has threshold α.",
                "Also, for all i, bi = 0.",
                "A node that replicates the object does not have incentive to change its strategy: changing the threshold does not decrease its cost, and it would have to pay at least α to access a remote replica or incentivize a nearby node to cache.",
                "Therefore it is better off keeping its threshold and bid at 0 and replicating the object.",
                "A node that is not replicating the object can access the object remotely at a cost less than or equal to α.",
                "Lowering its threshold does not decrease its cost, since all bi are zero.",
                "The payment necessary for another server to place a replica is at least α.",
                "No player has incentive to deviate, so the current configuration is a Nash equilibrium.",
                "In fact, Appendix B shows that the PoA of the payment game can be more than that of the basic game in a given topology.",
                "Now let us look at what happens to the example shown in Figure 2 in the best case.",
                "Suppose node Bs neighbors each decide to pay node B an amount 2/n.",
                "B does not have an incentive to deviate, since accessing the remote replica does not decrease its cost.",
                "The same argument holds for A because of symmetry in the graph.",
                "Since no one has an incentive to deviate, the configuration is a Nash equilibrium.",
                "Its total cost is 2α, the same as in the socially optimal configuration shown in Figure 2(b).",
                "Next we prove that indeed the payment game always has a strategy profile that implements the socially optimal configuration as a Nash equilibrium.",
                "We first present the following observation, which is used in the proof, about thresholds in the payment game.",
                "OBSERVATION 1.",
                "If node i replicates the object, j is the nearest node to i among the other nodes that replicate the object, and dij < α in a Nash equilibrium, then i should have a threshold at 25 least (α − dij).",
                "Otherwise, it cannot collect enough payment to compensate for the cost of replicating the object and is better off accessing the replica at j. THEOREM 3.",
                "In the payment game, there is always a pure strategy Nash equilibrium that implements the social optimum configuration.",
                "The optimistic price of anarchy in the payment game is therefore always one.",
                "PROOF.",
                "Consider the socially optimal configuration φopt.",
                "Let No be the set of nodes that replicate the object and Nc = N − No be the rest of the nodes.",
                "Also, for each i in No, let Qi denote the set of nodes that access the object from i, not including i itself.",
                "In the socially optimal configuration, dij ≤ α for all j in Qi.",
                "We want to find a set of payments and thresholds that makes this configuration implementable.",
                "The idea is to look at each node i in No and distribute the minimum payment needed to make i replicate the object among the nodes that access the object from i.",
                "For each i in No, and for each j in Qi, we define δj = min{α, min k∈No−{i} djk} − dji (11) Note that δj is the difference between js cost for accessing the replica at i and js next best option among replicating the object and accessing some replica other than i.",
                "It is clear that δj ≥ 0.",
                "CLAIM 1.",
                "For each i ∈ No, let be the nearest node to i in No.",
                "Then, Èj∈Qi δj ≥ α − di .",
                "PROOF. (of claim) Assume the contrary, that is, Èj∈Qi δj < α − di .",
                "Consider the new configuration φnew wherein i does not replicate and each node in Qi chooses its next best strategy (either replicating or accessing the replica at some node in No − {i}).",
                "In addition, we still place replicas at each node in No − {i}.",
                "It is easy to see that cost of φopt minus cost of φnew is at least: (α + j∈Qi dij) − (di + j∈Qi min{α, min k∈No−{i} dik}) = α − di − j∈Qi δj > 0, which contradicts the optimality of φopt.",
                "We set bids as follows.",
                "For each i in No, bi = 0 and for each j in Qi, j bids to i (i.e., vj = i) the amount: bj = max{0, δj − i/(|Qi| + 1)}, j ∈ Qi (12) where i = Èj∈Qi δj − α + di ≥ 0 and |Qi| is the cardinality of Qi.",
                "For the thresholds, we have: ti = α if i ∈ Nc;Èj∈Qi bj if i ∈ No. (13) This fully specifies the strategy profile of the nodes, and it is easy to see that the outcome is indeed the socially optimal configuration.",
                "Next, we verify that the strategies stipulated constitute a Nash equilibrium.",
                "Having set ti to α for i in Nc means that any node in N is at least as well off lowering its threshold and replicating as bidding α to some node in Nc to make it replicate, so we may disregard the latter as a profitable strategy.",
                "By observation 1, to ensure that each i in No does not deviate, we require that if is the nearest node to i in No, then Èj∈Qi bj is at least (α − di ).",
                "Otherwise, i will raise ti above Èj∈Qi bj so that it does not replicate and instead accesses the replica at .",
                "We can easily check that j∈Qi bj ≥ j∈Qi δj − |Qi| i |Qi| + 1 = α − di + i |Qi| + 1 ≥ α − di . 1 1.5 2 2.5 3 3.5 4 4.5 5 5.5 0 20 40 60 80 100 120 140 160 180 200 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) Figure 3: We present P oA, Ratio, and OP oA results for the basic game, varying α on a 100-node line topology, and we show number of replicas placed by the Nash equilibria and by the optimal solution.",
                "We see large peaks in P oA and OP oA at α = 100, where a phase transition causes an abrupt transition in the lines.",
                "Therefore, each node i ∈ No does not have incentive to change ti since i loses its payments received or there is no change, and i does not have incentive to bi since it replicates the object.",
                "Each node j in Nc has no incentive to change tj since changing tj does not reduce its cost.",
                "It also does not have incentive to reduce bj since the node where j accesses does not replicate and j has to replicate the object or to access the next closest replica, which costs at least the same from the definition of bj .",
                "No player has incentive to deviate, so this strategy profile is a Nash equilibrium. 5.",
                "SIMULATION We run simulations to compare Nash equilibria for the singleobject caching game with the social optimum computed by solving the integer linear program described in Equation 8 using Mosek [1].",
                "We examine price of anarchy (PoA), optimistic price of anarchy (OPoA), and the average ratio of the costs of Nash equilibria and social optima (Ratio), and when relevant we also show the average numbers of replicas placed by the Nash equilibrium (Replica(NE)) and the social optimum (Replica(SO)).",
                "The PoA and OPoA are taken from the worst and best Nash equilibria, respectively, that we observe over the runs.",
                "Each data point in our figures is based on 1000 runs, randomly varying the initial strategy profile and player order.",
                "The details of the simulations including protocols and a discussion of convergence are presented in Appendix C. In our evaluation, we study the effects of variation in four categories: placement cost, underlying topology, demand distribution, and payments.",
                "As we vary the placement cost α, we directly influence the tradeoff between caching and not caching.",
                "In order to get a clear picture of the dependency of PoA on α in a simple case, we first analyze the basic game with a 100-node line topology whose edge distance is one.",
                "We also explore transit-stub topologies generated using the GTITM library [36] and power-law topologies (Router-level BarabasiAlbert model) generated using the BRITE topology generator [25].",
                "For these topologies, we generate an underlying physical graph of 3050 physical nodes.",
                "Both topologies have similar minimum, average, and maximum physical node distances.",
                "The average distance is 0.42.",
                "We create an overlay of 100 server nodes and use the same overlay for all experiments with the given topology.",
                "In the game, each server has a demand whose distribution is Bernoulli(p), where p is the probability of having demand for the object; the default unless otherwise specified is p = 1.0. 26 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 2.6 2.8 3 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 4: Transit-stub topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node transit-stub topology. 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (a) 0.8 1 1.2 1.4 1.6 1.8 2 2.2 2.4 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2 1 10 100 C(NE)/C(SO) AverageNumberofReplicas alpha PoA Ratio OPoA Replica (SO) Replica (NE) (b) Figure 5: Power-law topology: (a) basic game, (b) payment game.",
                "We show the P oA, Ratio, OP oA, and the number of replicas placed while varying α between 0 and 2 with 100 servers on a 3050-physical-node power-law topology. 5.1 Varying Placement Cost Figure 3 shows PoA, OPoA, and Ratio, as well as number of replicas placed, for the line topology as α varies.",
                "We observe two phases.",
                "As α increases the PoA rises quickly to a peak at 100.",
                "After 100, there is a gradual decline.",
                "OPoA and Ratio show behavior similar to PoA.",
                "These behaviors can be explained by examining the number of replicas placed by Nash equilibria and by optimal solutions.",
                "We see that when α is above one, Nash equilibrium solutions place fewer replicas than optimal on average.",
                "For example, when α is 100, the social optimum places four replicas, but the Nash equilibrium places only one.",
                "The peak in PoA at α = 100 occurs at the point for a 100-node line where the worst-case cost of accessing a remote replica is slightly less than the cost of placing a new replica, so selfish servers will never place a second replica.",
                "The optimal solution, however, places multiple replicas to decrease the high global cost of access.",
                "As α continues to increase, the undersupply problem lessens as the optimal solution places fewer replicas. 5.2 Different Underlying Topologies In Figure 4(a) we examine an overlay graph on the more realistic transit-stub topology.",
                "The trends for the PoA, OPoA, and Ratio are similar to the results for the line topology, with a peak in PoA at α = 0.8 due to maximal undersupply.",
                "In Figure 5(a) we examine an overlay graph on the power-law topology.",
                "We observe several interesting differences between the power-law and transit-stub results.",
                "First, the PoA peaks at a lower level in the power-law graph, around 2.3 (at α = 0.9) while the peak PoA in the transit-stub topology is almost 3.0 (at α = 0.8).",
                "After the peak, PoA and Ratio decrease more slowly as α increases.",
                "OPoA is close to one for the whole range of α values.",
                "This can be explained by the observation in Figure 5(a) that there is no significant undersupply problem here like there was in the transit-stub graph.",
                "Indeed the high PoA is due mostly to misplacement problems when α is from 0.7 to 2.0, since there is little decrease in PoA when the number of replicas in social optimum changes from two to one.",
                "The OPoA is equal to one in the figure when the same number of replicas are placed. 5.3 Varying Demand Distribution Now we examine the effects of varying the demand distribution.",
                "The set of servers with demand is random for p < 1, so we calculate the expected PoA by averaging over 5 trials (each data point is based on 5000 runs).",
                "We run simulations for demand levels of p ∈ {0.2, 0.6, 1.0} as α is varied on the 100 servers on top of the transit-stub graph.",
                "We observe that as demand falls, so does expected PoA.",
                "As p decreases, the number of replicas placed in the social optimum decreases, but the number in Nash equilibria changes little.",
                "Furthermore, when α exceeds the overlay diameter, the number in Nash equilibria stays constant when p varies.",
                "Therefore, lower p leads to a lesser undersupply problem, agreeing with intuition.",
                "We do not present the graph due to space limitations and redundancy; the PoA for p = 1.0 is identical to PoA in Figure 4(a), and the lines for p = 0.6 and p = 0.2 are similar but lower and flatter. 27 5.4 Effects of Payment Finally, we discuss the effects of payments on the efficiency of Nash equilibria.",
                "The results are presented in Figure 4(b) and Figure 5(b).",
                "As shown in the analysis, the simulations achieve OPoA close to one (it is not exactly one because of randomness in the simulations).",
                "The Ratio for the payment game is much lower than the Ratio for the basic game, since the protocol for the payment game tends to explore good regions in the space of Nash equilibria.",
                "We observe in Figure 4 that for α ≥ 0.4, the average number of replicas of Nash equilibria gets closer with payments to that of the social optimum than it does without.",
                "We observe in Figure 5 that more replicas are placed with payments than without when α is between 0.7 and 1.3, the only range of significant undersupply in the power-law case.",
                "The results confirm that payments give servers incentive to replicate the object and this leads to better equilibria. 6.",
                "DISCUSSION AND FUTURE WORK We suggest several interesting extensions and directions.",
                "One extension is to consider multiple objects in the capacitated caching game, in which servers have capacity limits when placing objects.",
                "Since caching one object affects the ability to cache another, there is no separability of a multi-object game into multiple single object games.",
                "As studied in [12], one way to formulate this problem is to find the best response of a server by solving a knapsack problem and to compute Nash equilibria.",
                "In our analyses, we assume that all nodes have the same demand.",
                "However, nodes could have different demand depending on objects.",
                "We intend to examine the effects of heterogeneous demands (or heterogeneous placement costs) analytically.",
                "We also want to look at the following aggregation effect.",
                "Suppose there are n − 1 clustered nodes with distance of α−1 from a node hosting a replica.",
                "All nodes have demands of one.",
                "In that case, the price of anarchy is O(n).",
                "However, if we aggregate n − 1 nodes into one node with demand n − 1, the price of anarchy becomes O(1), since α should be greater than (n − 1)(α − 1) to replicate only one object.",
                "Such aggregation can reduce the inefficiency of Nash equilibria.",
                "We intend to compute the bounds of the price of anarchy under different underlying topologies such as random graphs or growthrestricted metrics.",
                "We want to investigate whether there are certain distance constraints that guarantee O(1) price of anarchy.",
                "In addition, we want to run large-scale simulations to observe the change in the price of anarchy as the network size increases.",
                "Another extension is to consider server congestion.",
                "Suppose the distance is the network distance plus γ × (number of accesses) where γ is an extra delay when an additional server accesses the replica.",
                "Then, when α > γ, it can be shown that PoA is bounded by α γ .",
                "As γ increases, the price of anarchy bound decreases, since the load of accesses is balanced across servers.",
                "While exploring the caching problem, we made several observations that seem counterintuitive.",
                "First, the PoA in the payment game can be worse than the PoA in the basic game.",
                "Another observation we made was that the number of replicas in a Nash equilibrium can be more than the number of replicas in the social optimum even without payments.",
                "For example, a graph with diameter slightly more than α may have a Nash equilibrium configuration with two replicas at the two ends.",
                "However, the social optimum may place one replica at the center.",
                "We leave the investigation of more examples as an open issue. 7.",
                "CONCLUSIONS In this work we introduce a novel non-cooperative game model to characterize the caching problem among selfish servers without any central coordination.",
                "We show that pure strategy Nash equilibria exist in the game and that the price of anarchy can be O(n) in general, where n is the number of servers, due to undersupply problems.",
                "With specific topologies, we show that the price of anarchy can have tighter bounds.",
                "More importantly, with payments, servers are incentivized to replicate and the optimistic price of anarchy is always one.",
                "Non-cooperative caching is a more realistic model than cooperative caching in the competitive Internet, hence this work is an important step toward viable federated caching systems. 8.",
                "ACKNOWLEDGMENTS We thank Kunal Talwar for enlightening discussions regarding this work. 9.",
                "REFERENCES [1] http://www.mosek.com. [2] A. Adya et al.",
                "FARSITE: Federated, Available, and Reliable Storage for an Incompletely Trusted Environment.",
                "In Proc. of USENIX OSDI, 2002. [3] E. Anshelevich, A. Dasgupta, E. Tardos, and T. Wexler.",
                "Near-optimal Network Design with Selfish Agents.",
                "In Proc. of ACM STOC, 2003. [4] Y. Chen, R. H. Katz, and J. D. Kubiatowicz.",
                "SCAN: A Dynamic, Scalable, and Efficient Content Distribution Network.",
                "In Proc. of Intl.",
                "Conf. on Pervasive Computing, 2002. [5] F. Dabek et al.",
                "Wide-area Cooperative Storage with CFS.",
                "In Proc. of ACM SOSP, Oct. 2001. [6] P. B. Danzig.",
                "NetCache Architecture and Deploment.",
                "In Computer Networks and ISDN Systems, 1998. [7] N. Devanur, M. Mihail, and V. Vazirani.",
                "Strategyproof cost-sharing Mechanisms for Set Cover and Facility Location Games.",
                "In Proc. of ACM EC, 2003. [8] J. R. Douceur and R. P. Wattenhofer.",
                "Large-Scale Simulation of Replica Placement Algorithms for a Serverless Distributed File System.",
                "In Proc. of MASCOTS, 2001. [9] A. Fabrikant, C. H. Papadimitriou, and K. Talwar.",
                "The Complexity of Pure Nash Equilibria.",
                "In Proc. of ACM STOC, 2004. [10] L. Fan, P. Cao, J. Almeida, and A.",
                "Z. Broder.",
                "Summary Cache: A Scalable Wide-area Web Cache Sharing Protocol.",
                "IEEE/ACM Trans. on Networking, 8(3):281-293, 2000. [11] M. R. Garey and D. S. Johnson.",
                "Computers and Intractability: A Guide to the Theory of NP-Completeness.",
                "W. H. Freeman and Co., 1979. [12] M. X. Goemans, L. Li, V. S. Mirrokni, and M. Thottan.",
                "Market Sharing Games Applied to Content Distribution in ad-hoc Networks.",
                "In Proc. of ACM MOBIHOC, 2004. [13] M. X. Goemans and M. Skutella.",
                "Cooperative Facility Location Games.",
                "In Proc. of ACM-SIAM SODA, 2000. [14] S. Gribble et al.",
                "What Can Databases Do for Peer-to-Peer?",
                "In WebDB Workshop on Databases and the Web, June 2001. [15] K. P. Gummadi et al.",
                "Measurement, Modeling, and Analysis of a Peer-to-Peer File-Sharing Workload.",
                "In Proc. of ACM SOSP, October 2003. [16] S. Iyer, A. Rowstron, and P. Druschel.",
                "Squirrel: A Decentralized Peer-to-Peer Web Cache.",
                "In Proc. of ACM PODC, 2002. [17] K. Jain and V. V. Vazirani.",
                "Primal-Dual Approximation Algorithms for Metric Facility Location and k-Median Problems.",
                "In Proc. of IEEE FOCS, 1999. 28 [18] S. Jamin et al.",
                "On the Placement of Internet Instrumentation.",
                "In Proc. of IEEE INFOCOM, pages 295-304, 2000. [19] S. Jamin et al.",
                "Constrained Mirror Placement on the Internet.",
                "In Proc. of IEEE INFOCOM, pages 31-40, 2001. [20] B.-J.",
                "Ko and D. Rubenstein.",
                "A Distributed, Self-stabilizing Protocol for Placement of Replicated Resources in Emerging Networks.",
                "In Proc. of IEEE ICNP, 2003. [21] E. Koutsoupias and C. Papadimitriou.",
                "Worst-Case Equilibria.",
                "In STACS, 1999. [22] J. Kubiatowicz et al.",
                "OceanStore: An Architecture for Global-scale Persistent Storage.",
                "In Proc. of ACM ASPLOS.",
                "ACM, November 2000. [23] B. Li, M. J. Golin, G. F. Italiano, and X. Deng.",
                "On the Optimal Placement of Web Proxies in the Internet.",
                "In Proc. of IEEE INFOCOM, 1999. [24] M. Mahdian, Y. Ye, and J. Zhang.",
                "Improved Approximation Algorithms for Metric Facility Location Problems.",
                "In Proc. of Intl.",
                "Workshop on Approximation Algorithms for Combinatorial Optimization Problems, 2002. [25] A. Medina, A. Lakhina, I. Matta, and J. Byers.",
                "BRITE: Universal Topology Generation from a Users Perspective.",
                "Technical Report 2001-003, 1 2001. [26] R. R. Mettu and C. G. Plaxton.",
                "The Online Median Problem.",
                "In Proc. of IEEE FOCS, 2000. [27] P. B. Mirchandani and R. L. Francis.",
                "Discrete Location Theory.",
                "Wiley-Interscience Series in Discrete Mathematics and Optimization, 1990. [28] M. J. Osborne and A. Rubinstein.",
                "A Course in Game Theory.",
                "MIT Press, 1994. [29] M. Pal and E. Tardos.",
                "Group Strategyproof Mechanisms via Primal-Dual Algorithms.",
                "In Proc. of IEEE FOCS, 2003. [30] L. Qiu, V. N. Padmanabhan, and G. M. Voelker.",
                "On the Placement of Web Server Replicas.",
                "In Proc. of IEEE INFOCOM, 2001. [31] M. Rabinovich, I. Rabinovich, R. Rajaraman, and A. Aggarwal.",
                "A Dynamic Object Replication and Migration Protocol for an Internet Hosting Service.",
                "In Proc. of IEEE ICDCS, 1999. [32] A. Rowstron and P. Druschel.",
                "Storage Management and Caching in PAST, A Large-scale, Persistent Peer-to-peer Storage Utility.",
                "In Proc. of ACM SOSP, October 2001. [33] Y. Saito, C. Karamanolis, M. Karlsson, and M. Mahalingam.",
                "Taming Aggressive Replication in the Pangaea Wide-Area File System.",
                "In Proc. of USENIX OSDI, 2002. [34] X. Tang and S. T. Chanson.",
                "Coordinated En-route Web Caching.",
                "In IEEE Trans.",
                "Computers, 2002. [35] A. Vetta.",
                "Nash Equilibria in Competitive Societies, with Applications to Facility Location, Traffic Routing, and Auctions.",
                "In Proc. of IEEE FOCS, 2002. [36] E. W. Zegura, K. L. Calvert, and S. Bhattacharjee.",
                "How to Model an Internetwork.",
                "In Proc. of IEEE INFOCOM, 1996.",
                "APPENDIX A. ANALYZING SPECIFIC TOPOLOGIES We now analyze the price of anarchy (PoA) for the basic game with specific underlying topologies and show that PoA can have better bounds.",
                "We look at complete graph, star, line, and Ddimensional grid.",
                "In all these topologies, we set the distance between two directly connected nodes to one.",
                "We describe the case where α > 1, since PoA = 1 trivially when α ≤ 1.",
                "A BC D3 α 3 α 4 3α 4 α 4 α Figure 6: Example where the payment game has a Nash equilibrium which is worse than any Nash equilibrium in the basic game.",
                "The unlabeled distances between the nodes in the cluster are all 1.",
                "The thresholds of white nodes are all α and the thresholds of dark nodes are all α/4.",
                "The two dark nodes replicate the object in this payment game Nash equilibrium.",
                "For a complete graph, PoA = 1, and for a star, PoA ≤ 2.",
                "For a complete graph, when α > 1, both Nash equilibria and social optima place one replica at one server, so PoA = 1.",
                "For star, when 1 < α < 2, the worst case Nash equilibrium places replicas at all leaf nodes.",
                "However, the social optimum places one replica at the center node.",
                "Therefore, PoA = (n−1)α+1 α+(n−1) ≤ 2(n−1)+1 1+(n−1) ≤ 2.",
                "When α > 2, the worst case Nash equilibrium places one replica at a leaf node and the other nodes access the remote replica, and the social optimum places one replica at the center.",
                "PoA = α+1+2(n−2) α+(n−1) = 1 + n α+(n−1) ≤ 2.",
                "For a line, the price of anarchy is O( √ n).",
                "When 1 < α < n, the worst case Nash equilibrium places replicas every 2α so that there is no overlap between areas covered by two adjacent servers that cache the object.",
                "The social optimum places replicas at least every √ 2α.",
                "The placement of replicas for the social optimum is as follows.",
                "Suppose there are two replicas separated by distance d. By placing an additional replica in the middle, we want to have the reduction of distance to be at least α.",
                "The distance reduction is d/2 + 2{((d/2 − 1) − 1) + ((d/2 − 2) − 2) + ... + ((d/2 − d/4) − d/4)} ≥ d2 /8. d should be at most 2 √ 2α.",
                "Therefore, the distance between replicas in the social optimum is at most √ 2α.",
                "C(SW ) = α(n−1) 2α + α(α+1) 2 (n−1) 2α = Θ(αn).",
                "C(SO) ≥ α n−1√ 2α + 2 √ 2α/2( √ 2α/2+1) 2 n−1√ 2α .",
                "C(SO) = Ω( √ αn).",
                "Therefore, PoA = O( √ α).",
                "When α > n − 1, the worst case Nash equilibrium places one replica at a leaf node and C(SW ) = α + (n−1)n 2 .",
                "However, the social optimum still places replicas every √ 2α.",
                "If we view PoA as a continuous function of α and compute a derivative of PoA, the derivative becomes 0 when α is Θ(n2 ), which means the function decreases as α increases from n. Therefore, PoA is maximum when α is n, and PoA = Θ(n2 ) Ω( √ nn) = O( √ n).",
                "When α > (n−1)n 2 , the social optimum also places only one replica, and PoA is trivially bounded by 2.",
                "This result holds for the ring and it can be generalized to the D-dimensional grid.",
                "As the dimension in the grid increases, the distance reduction of additional replica placement becomes Ω(dD+1 ) where d is the distance between two adjacent replicas.",
                "Therefore, PoA = Θ(n2) Ω(n 1 D+1 n) = O(n D D+1 ).",
                "B.",
                "PAYMENT CAN DO WORSE Consider the network in Figure 6 where α > 1+α/3.",
                "Any Nash equilibrium in the basic game model would have exactly two replicas - one in the left cluster, and one in the right.",
                "It is easy to verify that the worst placement (in terms of social cost) of two replicas occurs when they are placed at nodes A and B.",
                "This placement can be achieved as a Nash equilibrium in the payment game, but not in the basic game since A and B are a distance 3α/4 apart. 29 Algorithm 1 Initialization for the Basic Game L1 = a random subset of servers for each node i in N do if i ∈ L1 then Si = 1 ; replicate the object else Si = 0 Algorithm 2 Move Selection of i for the Basic Game Cost1 = α Cost2 = minj∈X−{i} dij ; X is the current configuration Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then Si = 1 else Si = 0 C. NASH DYNAMICS PROTOCOLS The simulator initializes the game according to the given parameters and a random initial strategy profile and then iterates through rounds.",
                "Initially the order of player actions is chosen randomly.",
                "In each round, each server performs the Nash dynamics protocol that adjusts its strategies greedily in the chosen order.",
                "When a round passes without any server changing its strategy, the simulation ends and a Nash equilibrium is reached.",
                "In the basic game, we pick a random initial subset of servers to replicate the object as shown in Algorithm 1.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 2 (in algorithms 2 and 4, Costnow represents the current cost for node i).",
                "This procedure chooses greedily between replication and non-replication.",
                "It is not hard to see that this Nash dynamics protocol converges in two rounds.",
                "In the payment game, we pick a random initial subset of servers to replicate the object by setting their thresholds to 0.",
                "In addition, we initialize a second random subset of servers to replicate the object with payments from other servers.",
                "The details are shown in Algorithm 3.",
                "After the initialization, each player runs the move selection procedure described in Algorithm 4.",
                "This procedure chooses greedily between replication and accessing a remote replica, with the possibilities of receiving and making payments, respectively.",
                "In the protocol, each node increases its threshold value by incr if it does not replicate the object.",
                "By this ramp up procedure, the cost of replicating an object is shared fairly among the nodes that access a replica from a server that does cache.",
                "If incr is small, cost is shared more fairly, and the game tends to reach equilibria that encourages more servers to store replicas, though the convergence takes longer.",
                "If incr is large, the protocol converges quickly, but it may miss efficient equilibria.",
                "In the simulations we set incr to 0.1.",
                "Most of our A B C a b c α/3+1 2α/3−1 2α/3 Figure 7: An example where the Nash dynamics protocol does not converge in the payment game.",
                "Algorithm 3 Initialization for the Payment Game L1 = a random subset of servers for each node i in N do bi = 0 if i ∈ L1 then ti = 0 ; replicate the object else ti = α L2 = {} for each node i in N do if coin toss == head then Mi = {j : d(j, i) < mink∈L1∪L2 d(j, k)} if Mi != ∅ then for each node j ∈ Mi do bj = max{ α+ Èk∈Mi d(i,k) |Mi| − d(i, j), 0} L2 = L2 ∪ {i} Algorithm 4 Move Selection of i for the Payment Game Cost1 = α − Ri Cost2 = minj∈N−{i}{tj − Rj + dij } Costmin = min{Cost1, Cost2} if Costnow > Costmin then if Costmin == Cost1 then ti = Ri else ti = Ri + incr vi = argminj{tj − Rj + dij} bi = tvi − Rvi simulation runs converged, but there were a very few cases where the simulation did not converge due to the cycles of dynamics.",
                "The protocol does not guarantee convergence within a certain number of rounds like the protocol for the basic game.",
                "We provide an example graph and an initial condition such that the Nash dynamics protocol does not converge in the payment game if started from this initial condition.",
                "The graph is represented by a shortest path metric on the network shown in Figure 7.",
                "In the starting configuration, only A replicates the object, and a pays it an amount α/3 to do so.",
                "The thresholds for A, B and C are α/3 each, and the thresholds for a, b and c are 2α/3.",
                "It is not hard to verify that the Nash dynamics protocol will never converge if we start with this condition.",
                "The Nash dynamics protocol for the payment game needs further investigation.",
                "The dynamics protocol for the payment game should avoid cycles of actions to achieve stabilization of the protocol.",
                "Finding a self-stabilizing dynamics protocol is an interesting problem.",
                "In addition, a fixed value of incr cannot adapt to changing environments.",
                "A small value of incr can lead to efficient equilibria, but it can take long time to converge.",
                "An important area for future research is looking at adaptively changing incr. 30"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        }
    }
}