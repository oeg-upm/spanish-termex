{
    "id": "J-66",
    "original_text": "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more. Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount. However, in their current form, matching offers allow for only limited negotiation. For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies. Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities. In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur. In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities. We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings. We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program. We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming. Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave). For the quasilinear setting, we study the mechanism design question. We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids. We also show that there may be benefits to linking the charities from a mechanism design standpoint. Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1. INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties. Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals. However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity. In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more. This is done by making the donation conditional on the others donations. The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation. Suppose we have two parties, 1 and 2, who are both supporters of charity A. To either of them, it would be worth $0.75 if A received $1. It follows neither of them will be willing to give unconditionally, because $0.75 < $1. However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give. Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer. Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y. In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1. Thus this matching offer implements the contract suggested above. As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23]. However, there are several severe limitations to the simple approach of matching offers as just described. 1. It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.) Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2. Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities. For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.) In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities. Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded). Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other. Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid. However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem. A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals. For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8]. Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully. In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world. A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale. Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2. COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges. It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges. In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items. The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.) Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid). Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids. Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2]. The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation. Nevertheless, there are interesting parallels. One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding. A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer. Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won. In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency. Expressive bidding is also one of the main benefits of the expressive charity donation market. Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities. This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities. Again, expressive bidding is necessary to achieve economic efficiency. Another parallel is the computational complexity of the clearing problem. In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3. DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders. In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.) The bidding language is expressive enough that no bidder should have to make more than one bid. The following definition makes the general form of a bid in our framework precise. Definition 1. In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ). We now define possible outcomes in our model, and which outcomes are valid given the bids that were made. Definition 2. An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ). A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2. For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to). Of course, in the end, only one of the valid outcomes can be chosen. We choose the valid outcome that maximizes the objective that we have for the donation process. Definition 3. An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective. One example of an objective is surplus, given by n j=1 πbj − m i=1 πci . The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities. Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.) Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem. We will refer to it as the clearing problem. The formal definition follows. Definition 4 (DONATION-CLEARING). We are given a set of n bids over charities c1, c2, . . . , cm. Additionally, we are given an objective function. We are asked to find an objective-maximizing valid outcome. How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed. This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids. The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4. A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm . Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values. Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely. We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions. First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.) Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities. We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.) So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.) Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity. Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.) Furthermore, each ui j must be piecewise linear. An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci . This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders. The only restriction that we place on the payment willingness functions wj is that they are piecewise linear. One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0. Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars. One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated. There are several reasons. First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes. Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5. AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable. Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center. In this scenario, the center merely has to verify that parties are giving the prescribed amounts. Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol). It is also a step towards a fully decentralized solution, if this is desirable. To bring this about, we can still use the approach described earlier. After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive. Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing. Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci . In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.) Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.) This is likely to lead to complaints and noncompliance with the clearing. We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to. These additional constraints, of course, may change the optimal solution. In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem. In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution). In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard). We also generalize our clearing algorithms to the partially decentralized case with constraints. 6. HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function. We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true?), which is NP-complete [7]. Theorem 1. There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1. If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2. Otherwise, there exists a solution with positive surplus. Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1. Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2. All the ui j have slope either 0 or 1; 3. Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4. Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function. Proof. The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise. To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance. Let the set of charities be as follows. For every literal l ∈ L, there is a charity cl. Then, let the set of bids be as follows. For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ). For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1). For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ). Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ). We show the two instances are equivalent. First, suppose there exists a solution to the MAX2SAT instance. If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0. Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false. First we show that no bidder whose bid is accepted pays more than she is willing to. For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met. For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met. Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met. The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus. So there exists a solution with positive surplus to the DONATION-CLEARING instance. Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance. First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted. For, this would require that πc+v + πc−v ≥ 4. The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least. It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help. Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1. It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted. All that is left to show is that this partial assignment satisfies at least T clauses. First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied). If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k). If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k . But this is the same situation that we analyzed before, and we know it is impossible. All that remains to show is that at least T clause bids are accepted. We now show that b0 is accepted. Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.) For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v. Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | . It follows that b0 is accepted. Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated. Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 . Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk. But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted. Corollary 1. Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance. This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1. Proof. Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1. It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise. So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.) This should not be interpreted to mean that our approach is infeasible. First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time. Second, NP-completeness is often overcome in practice (especially when the stakes are high). For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7. MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem. We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation. In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11]. The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj . In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj . Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci. The rest of the MIP can be phrased in terms of the πci and πbj . The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective). The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci . For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity. The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j. Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder. In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions. The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible. In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl). If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk). Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j. When the function is not concave, we require (for the first time) some binary variables. First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj . This has the effect that we will never be on the infinite segment again. Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise. To effect this, first add a constraint k l=0 xi,j l = 1. Now, we aim to represent πci as a weighted average of its two neighboring si,j l . For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l . We add the constraint k+1 l=0 λi,j l = 1. Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight. Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly. Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].) Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj). Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.) Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time. Thus: Theorem 2. If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming. Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8. WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms. In this section, we show that this is not the case. We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?) Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.) We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution. Theorem 3. The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints). In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ). The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint. Proof. For every variable xi in the LP, let there be two charities, c+xi and c−xi . Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise. For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ). For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1). Let the target total amount donated be 2vH. Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP. Without loss of generality, we can suppose that |x∗ i | ≤ H for all i. Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities). This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH. Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH. Then the maximum payment must be extracted from each bidder. From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H. Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H. Let x∗ i = πc+xi − H = H − πc−xi . Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i . Equivalently, i rj i x∗ i ≤ sj. It follows that the x∗ i constitute a feasible solution to the LP. 9. QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids. In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.) In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint). Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money. In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity. Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable. Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly. In this section, we will see that the clearing problem is much easier in the case of quasilinear bids. First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design). The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities. Lemma 1. Suppose all bids are quasilinear, and surplus is the objective. Then we can clear the market optimally by clearing the market for each charity individually. That is, for each bidder bj, let πbj = ci πbi j . Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ). Proof. The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative. Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems. All that remains to show is that the solution is optimal. Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach. Let π∗ ci be the amount paid to charity πci in some optimal solution. If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci . This expression is, of course, 0 if πci = π∗ ci . But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )). It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid). Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus. Theorem 4. When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time. Proof. By Lemma 1, we can solve the problem separately for each charity. For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci . Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable. It follows that we need only check all the points at which one of the terms is nondifferentiable. Unfortunately, the decomposing lemma does not hold for payment maximization. Proposition 1. When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof. Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 . The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 . But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 . In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.) Theorem 5. DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear. However, when the bids are also concave, a simple greedy clearing algorithm is optimal. Theorem 6. Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm. Start with πci = 0 for all charities. Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1. Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10. INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way. Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself. This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.) This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows. Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely. Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences. This is the field of mechanism design. In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point. First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity. For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that. Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this). Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14]. With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity. Suppose that there are two charities, and three bidders. The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise. The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise. Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise. Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1. The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case. But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 . Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1. We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences. First, historically, mechanism design has been been most successful when the quasilinear assumption could be made. Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem. Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem. Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem). Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function. Before presenting the decomposition result, we introduce some terms from game theory. A type is a preference profile that a bidder can have and can report (thus, a type report is a bid). Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium). Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim). A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante). A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities. Theorem 7. Suppose all agents preferences are quasilinear. Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient. Then there exists such a mechanism for any number of charities. Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms. Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities. The VCG mechanism is not budget balanced. The dAGVA mechanism does not satisfy ex-post individual rationality. In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient. Theorem 8. There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)). The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14]. Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15]. Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case. However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella. The next proposition shows that this is indeed the case. Proposition 2. There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11. CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities. We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings. We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time. We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids. Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave). For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically. We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids. We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint. There are many directions for future research. One is to build a web-based implementation of the (first-price) mechanism proposed in this paper. Another is to study the computational scalability of our MIP/LP approach. It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable. Much crucial work remains to be done on the mechanism design problem. Finally, are there good iterative mechanisms for charity donation?6 12. REFERENCES [1] K. Arrow. The property rights doctrine and demand revelation under incomplete information. In M. Boskin, editor, Economics and human welfare. New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom. Ascending auctions with package bidding. Frontiers of Theoretical Economics, 1, 2002. No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan. Incentive compatible multi-unit combinatorial auctions. In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke. Multipart pricing of public goods. Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm. Complexity of mechanism design. In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet. Incentives and incomplete information. Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer. Some simplified NP-complete graph problems. Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott. Red cross statement on official donation locations. 2001. Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann. Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics. In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves. Incentives in teams. Econometrica, 41:617-631, 1973. [11] L. Khachiyan. A polynomial algorithm in linear programming. Soviet Math. Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan. Towards a characterization of truthful combinatorial auctions. In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham. Truth revelation in rapid, approximately efficient combinatorial auctions. Journal of the ACM, 49(5):577-602, 2002. Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green. Microeconomic Theory. Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite. Efficient mechanisms for bilateral trading. Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey. Integer and Combinatorial Optimization. John Wiley & Sons, 1999. Section 4, page 11. [17] N. Nisan. Bidding and allocation in combinatorial auctions. In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen. Computationally feasible VCG mechanisms. In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction. In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad. Computationally manageable combinatorial auctions. Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm. Algorithm for optimal winner determination in combinatorial auctions. Artificial Intelligence, 135:1-54, Jan. 2002. Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine. CABOB: A fast optimal algorithm for combinatorial auctions. In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue. Global AIDS Funds Is Given Attention, but Not Money. The New York Times, June 1, 2003. Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey. Counterspeculation, auctions, and competitive sealed tenders. Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman. AkBA: A progressive, anonymous-price combinatorial auction. In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo. The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol. In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60",
    "original_translation": "Negociación expresiva sobre donaciones a organizaciones benéficas ∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, EE. UU. Conitzer@cs.cmu.edu tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA Sandholm@cs.cmu.edu.Al donar dinero a una causa (por ejemplo, caritativa), es posible utilizar la donación contemplada como material de negociación para inducir a otras partes interesadas en la organización benéfica a donar más. Dicha negociación generalmente se realiza en términos de ofertas de correspondencia, donde una parte promete pagar una cierta cantidad si otros pagan una cierta cantidad. Sin embargo, en su forma actual, las ofertas de correspondencia permiten solo una negociación limitada. Por un lado, no está claro de inmediato cómo varias partes pueden hacer ofertas de correspondencia al mismo tiempo sin crear dependencias circulares. Además, no está claro de inmediato cómo hacer una donación condicionada a otras donaciones a múltiples organizaciones benéficas, cuando el donante tiene diferentes niveles de apreciación por las diferentes organizaciones benéficas. En ambos casos, la expresión limitada de las ofertas de correspondencia causa pérdida económica: puede ocurrir que un acuerdo que hubiera hecho que todas las partes (donantes y organizaciones benéficas) sean mejor no se pueden expresar en términos de ofertas correspondientes y, por lo tanto, no ocurrirá. En este documento, presentamos un lenguaje de licitación para expresar tipos muy generales de ofertas de coincidencia en múltiples organizaciones benéficas. Formulamos el problema de compensación correspondiente (decidir cuánto paga cada postor y cuánto recibe cada organización benéfica), y mostramos que es NP complete a cualquier relación aproximada a cualquier relación incluso en entornos muy restringidos. Damos una formulación del programa de enteros mixtos del problema de compensación y mostramos que para las ofertas cóncavas, el programa se reduce a un programa lineal. Luego mostramos que el problema de compensación para una subclase de ofertas cóncavas es al menos tan difícil como la variante de decisión de la programación lineal. Posteriormente, mostramos que el problema de compensación es mucho más fácil cuando las ofertas son cuasilíneas, por excedente, el problema se descompone entre organizaciones benéficas, y para la maximización del pago, un enfoque codicioso es óptimo si las ofertas son cóncavas (aunque este último problema es débilmente para NP complete NP-completecuando las ofertas no son cóncavas). Para el entorno cuasilínico, estudiamos la pregunta de diseño del mecanismo. Mostramos que un mecanismo eficiente ex post está respaldado por NSF bajo el Premio de Carrera IRI-9703122, Grant IIS-9800994, ITR IIS-0081246 e ITR IIS-0121678.imposible incluso con solo una organización benéfica y una clase muy restringida de ofertas. También mostramos que puede haber beneficios para vincular las organizaciones benéficas desde el punto de vista del diseño del mecanismo. Categorías y descriptores de sujetos F.2 [Teoría de la computación]: Análisis de algoritmos y complejidad del problema;J.4 [Aplicaciones informáticas]: Ciencias sociales y conductuales-economía Algoritmos de términos generales, Economía, Teoría 1. Introducción Cuando el dinero se dona a una causa caritativa (u otra) (en adelante, denominada organización benéfica), a menudo la parte donante da incondicionalmente: una cantidad fija se transfiere del donante a la organización benéfica, y ninguna de esta transferencia depende de otros eventos.-En particular, no depende de la cantidad dada por otras partes. De hecho, actualmente esta es actualmente la única forma de hacer una donación, especialmente para pequeñas fiestas de donación como particulares. Sin embargo, cuando múltiples partes apoyan la misma organización benéfica, cada una de ellas preferiría ver a los demás dar más que menos a esta organización benéfica. En tales escenarios, es sensato que una parte use su donación contemplada como material de negociación para inducir a los demás a dar más. Esto se hace haciendo que la donación sea condicional de las otras donaciones. El siguiente ejemplo ilustrará esto y mostrará que las partes donantes y la causa caritativa pueden beneficiarse simultáneamente del potencial de dicha negociación. Supongamos que tenemos dos partes, 1 y 2, que son seguidores de la caridad A. Para cualquiera de ellos, valdría $ 0.75 si recibió $ 1. Sigue ninguno de ellos estará dispuesto a dar incondicionalmente, porque $ 0.75 <$ 1. Sin embargo, si las dos partes elaboran un contrato que dice que otorgarán $ 0.5, ambas partes tienen un incentivo para aceptar este contrato (en lugar de no tener ningún contrato): con el contrato, la organización benéfica recibirá $ 1 (más biende $ 0 sin contrato), que vale $ 0.75 para cada parte, que es mayor que los $ 0.5 que esa parte tendrá que dar. Efectivamente, cada parte ha hecho su donación condicional en las otras donaciones de Partys, lo que lleva a donaciones más grandes y una mayor felicidad para todas las partes involucradas.51 Un método que a menudo se usa para efectuar esto es hacer una oferta coincidente. Ejemplos de ofertas de emparejamiento son: daré x dólares por cada dólar donado. O daré x dólares si el total recaudado de otras partes excede y. En nuestro ejemplo anterior, una de las partes puede hacer la oferta, donaré $ 0.5 si la otra parte también dona al menos tanto, y la otra parte tendrá un incentivo para donar $ 0.5, de modo que la cantidad total otorgada a la organización benéficaaumenta en $ 1. Por lo tanto, esta oferta de correspondencia implementa el contrato sugerido anteriormente. Como ejemplo del mundo real, el gobierno de los Estados Unidos ha autorizado una donación de hasta $ 1 mil millones al Fondo Global para combatir el SIDA, la TB y la malaria, bajo la condición de que la contribución estadounidense no exceda un tercio del total para alentarOtros países para dar más [23]. Sin embargo, existen varias limitaciones severas en el enfoque simple de las ofertas de correspondencia como se acaba de describir.1. No está claro cómo dos partes pueden hacer ofertas coincidentes donde se establece cada oferta de Party en términos de la cantidad que paga la otra.(Por ejemplo, no está claro cuál debería ser el resultado cuando ambas partes ofrecen coincidir con la donación de otras). Por lo tanto, las ofertas de correspondencia solo pueden basarse en pagos realizados por partes que están dando incondicionalmente (no en términos de una oferta coincidente), o al menos no puede haber dependencias circulares.1 2. Dada la infraestructura actual para hacer ofertas de correspondencia, no es práctico hacer que una oferta correspondiente dependa de las cantidades otorgadas a múltiples organizaciones benéficas. Por ejemplo, una parte puede desear especificar que pagará $ 100 dado que la organización benéfica A recibe un total de $ 1000, pero que también contará las donaciones hechas a la organización benéfica B, a la mitad de la tarifa.(Por lo tanto, un pago total de $ 500 a la organización benéfica A combinado con un pago total de $ 1000 a la organización benéfica B sería suficiente para la oferta de Partys para entrar en vigencia). Por el contrario, en este documento proponemos un nuevo enfoque donde cada parte puede expresar sus preferencias relativas para diferentes organizaciones benéficas, y hacer que su oferta sea condicionada a su propio aprecio por el vector de donaciones hechas a las diferentes organizaciones benéficas. Además, la cantidad que la fiesta ofrece para donar a diferentes niveles de apreciación puede variar arbitrariamente (debe ser un acuerdo de juego en dólar por dólar (o n-dólar para dólar), o un acuerdo donde la parte ofrece unaLa cantidad fija siempre se ha excedido un total determinado (huelga)). Finalmente, existe una interpretación clara de lo que significa cuando múltiples partes están haciendo ofertas condicionales que se establecen en términos del otro. Dada cada combinación de ofertas (condicionales), hay una solución (generalmente) única que determina cuánto paga cada parte y cuánto se paga cada caridad. Sin embargo, como mostraremos, encontrar esta solución (el problema de compensación) requiere resolver un problema de optimización potencialmente difícil. Una gran parte de este documento se dedica a estudiar cuán difícil es este problema bajo diferentes suposiciones sobre la estructura de las ofertas y proporcionar algoritmos para resolverlo.1 Por lo general, las organizaciones más grandes coinciden con las ofertas de particulares. Por ejemplo, el Fondo de Desastres de la Cruz Roja Americana mantiene una lista de empresas que coinciden con las donaciones de sus clientes [8]. Hacia el final del documento, también estudiamos el problema de diseño del mecanismo de motivar a los postores a ofertar con sinceridad. En resumen, la negociación expresiva sobre las donaciones a organizaciones benéficas es una nueva forma en que el comercio electrónico puede ayudar al mundo. Una implementación basada en la web de las ideas descritas en este documento puede facilitar la reasignación voluntaria de la riqueza a escala global. Aditionalmente, resolver de manera óptima el problema de compensación (y, por lo tanto, generar el máximo bienestar económico) requiere la aplicación de algoritmos sofisticados.2. Comparación con las subastas e intercambios combinatorios Esta sección discute la relación entre la donación de caridad expresiva y las subastas e intercambios combinatorios. Se puede omitir, pero puede ser de interés para el lector con antecedentes en subastas e intercambios combinatorios. En una subasta combinatoria, hay m artículos a la venta, y los postores pueden colocar ofertas en paquetes de uno o más artículos. Posteriormente, el subastador etiqueta cada oferta como ganadora o pérdida, bajo la restricción de que ningún elemento puede estar en más de una oferta ganadora, para maximizar la suma de los valores de las ofertas ganadoras.(Esto se conoce como el problema de compensación). Las variantes incluyen subastas inversas combinatorias, donde el subastador busca obtener un conjunto de elementos;e intercambios combinatorios, donde los postores pueden comprar y vender artículos (incluso dentro de la misma oferta). Otras extensiones incluyen permitir restricciones laterales, así como la especificación de los atributos de los elementos en ofertas. Las subastas e intercambios combinatorios se han convertido recientemente en un tema de investigación popular [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2]. Los problemas de eliminar los mercados de donación de caridad expresiva y la compensación de subastas o intercambios combinatorios son muy diferentes en formulación. Sin embargo, hay paralelos interesantes. Una de las principales razones del interés en las subastas e intercambios combinatorios es que permite una licitación expresiva. Un postor puede expresar exactamente cuánto vale cada asignación diferente para ella y, por lo tanto, el subastador puede elegir la asignación óptima globalmente. Compare esto con un postor que tenga que ofertar por dos elementos diferentes en dos subastas diferentes (de un elemento), sin ninguna forma de expresar que (por ejemplo) un elemento no vale nada si el otro elemento no se gana. En este escenario, el postor puede ganar el primer elemento, pero no el segundo (porque hubo otra oferta alta en el segundo elemento que no anticipó), lo que condujo a la ineficiencia económica. La licitación expresiva también es uno de los principales beneficios del mercado de donaciones de caridad expresiva. Aquí, los postores pueden expresar exactamente cuánto están dispuestos a donar por cada vector de cantidades donadas a organizaciones benéficas. Esto puede permitir a los postores negociar un acuerdo complejo de quién da cuánto caridad, lo cual es beneficioso para todas las partes involucradas;Mientras que tal acuerdo no puede haber sido posible si los postores se hubieran restringido al uso de ofertas de correspondencia simples en organizaciones benéficas individuales. Nuevamente, la licitación expresiva es necesaria para lograr la eficiencia económica. Otro paralelo es la complejidad computacional del problema de compensación. Para lograr la máxima eficiencia económica permitida por la expresividad de los mercados (o incluso acercarse a ella), los problemas computacionales difíciles deben resolverse en subastas e intercambios combinatorios, así como en el mercado de donaciones de caridad (como veremos).52 3. Definiciones a lo largo de este documento, nos referiremos a las ofertas que las partes de donación hacen como ofertas y a las partes de donaciones como postores. En nuestro marco de licitación, una oferta especificará, para cada vector de pagos totales realizados a las organizaciones benéficas, cuánto está dispuesto a contribuir ese licitador.(La contribución de este postor también se cuenta en el vector de pagos, el vector de pagos totales a las organizaciones benéficas representa la cantidad dada por todas las partes donantes, no solo las que no sean este postor). El lenguaje de licitación es lo suficientemente expresivo como para que ningún postor tenga que hacer más de una oferta. La siguiente definición hace que la forma general de una oferta en nuestro marco sea precisa. Definición 1. En un entorno con M Charities C1, C2 ,..., CM, una oferta de Bidder BJ es una función VJ: RM → R. La interpretación es que si la caridad CI recibe una cantidad total de πci, entonces el postor j está dispuesto a donar (hasta) vj (πc1, πc2 ,.., πcm). Ahora definimos posibles resultados en nuestro modelo, y qué resultados son válidos dadas las ofertas que se hicieron. Definición 2. Un resultado es un vector de pagos realizados por los postores (πb1, πb2, ..., πbn), y un vector de pagos recibidos por las organizaciones benéficas (πc1, πc2, ..., πcm). Un resultado válido es un resultado donde 1. N J = 1 πbj ≥ m i = 1 πci (al menos tanto dinero se recauda como se da);2. Para todos 1 ≤ j ≤ n, πbj ≤ vj (πc1, πc2, ..., πcm) (ningún postor da más de lo que está dispuesta). Por supuesto, al final, solo se puede elegir uno de los resultados válidos. Elegimos el resultado válido que maximiza el objetivo que tenemos para el proceso de donación. Definición 3. Un objetivo es una función del conjunto de todos los resultados a R.2 Después de que se hayan recopilado todas las ofertas, se eligirá un resultado válido que maximice este objetivo. Un ejemplo de un objetivo es el excedente, dado por n j = 1 πbj - m i = 1 πci. El excedente podría ser las ganancias de una empresa que administra el mercado de donaciones expresivas;Pero, alternativamente, el excedente podría devolverse a los postores o entregarse a las organizaciones benéficas. Otro objetivo es la cantidad total donada, dada por m i = 1 πci.(Aquí, también se pueden colocar diferentes pesos en las diferentes organizaciones benéficas). Encontrar el resultado válido que maximiza el objetivo es un problema computacional (no trivial). Nos referiremos a él como el problema de compensación. La definición formal sigue. Definición 4 (limpieza de donaciones). Se nos da un conjunto de n ofertas sobre las organizaciones benéficas C1, C2 ,..., cm. Además, se nos da una función objetivo. Se nos pide que encontremos un resultado válido que maximiza el objetivo. Qué difícil es el problema de limpieza de donaciones depende de los tipos de ofertas utilizadas y del lenguaje en el que se expresan. Este es el tema de la siguiente sección.2 En general, la función objetivo también puede depender de las ofertas, pero las funciones objetivas bajo consideración en este documento no dependen de las ofertas. Las técnicas presentadas en este documento generalmente se generalizarán a los objetivos que tienen en cuenta las ofertas directamente.4. Un lenguaje de licitación simplificado que especifica una oferta general en nuestro marco (como se definió anteriormente) requiere poder especificar una función arbitraria de valor real sobre RM. Incluso si restringimos el posible pago total realizado a cada organización benéfica al conjunto {0, 1, 2 ,..., S}, esto aún requeriría que un postor especifique (s+1) m valores. Por lo tanto, necesitamos un lenguaje de licitación que permita a los postores al menos especificar algunas ofertas de manera más concisa. Especificaremos un lenguaje de licitación que solo represente un subconjunto de todas las ofertas posibles, que se pueden describir de manera concisa.3 Para introducir nuestro lenguaje de licitación, primero describiremos la función de licitación como una composición de dos funciones;Luego describiremos nuestras suposiciones en cada una de estas funciones. Primero, hay una función de utilidad UJ: RM → R, especificando cuánto Bidder J aprecia un vector dado de donaciones totales a las organizaciones benéficas.(Tenga en cuenta que la forma en que definimos la función de utilidad de los licitadores, no toma los pagos que el postor realiza en cuenta). Luego, hay una función de voluntad de donación WJ: R → R, que especifica cuánto licitador J está dispuesto a pagar, dado su utilidad por el vector de donaciones a las organizaciones benéficas. Hacemos hincapié en que esta función no necesita ser lineal, por lo que las utilidades no deben considerarse expresables en cantidades en dólares.(De hecho, cuando un individuo está donando a una gran organización benéfica, la razón por la que el individuo dona solo una cantidad limitada no suele disminuir el valor marginal del dinero otorgado a la organización benéfica, sino que el valor marginal de un dólar a la oferta mismase hace más grande a medida que su presupuesto se vuelve más pequeño). Entonces, tenemos WJ (UJ (πC1, πc2, ..., πcm)) = Vj (πc1, πc2, ..., πcm), y dejamos que el postor describiera sus funciones UJ y WJ por separado.(Ella presentará estas funciones como su oferta). Nuestra primera restricción es que la utilidad que un postor deriva del dinero donado a una organización benéfica es independiente de la cantidad donada a otra organización benéfica. Así, UJ (πc1, πc2, ..., πcm) = m i = 1 ui j (πci).(Observamos que esto no implica que la función BID VJ se descomponga de manera similar, debido a la no linealidad de WJ.) Además, cada UI J debe ser lineal por partes. Un caso especial interesante que estudiaremos es cuando cada ui j es una línea: ui j (πci) = ai jπci. Este caso especial se justifica en entornos en los que la escala de las donaciones por parte de los postores es pequeño en relación con los montos que las organizaciones benéficas reciben de otras fuentes, de modo que el uso marginal de un dólar a la organización benéfica no se ve afectado por la cantidad dada por los postores. La única restricción que colocamos en las funciones de voluntad de pago WJ es que son lineales por partes. Un caso especial interesante es una oferta umbral, donde WJ es una función de paso: el postor proporcionará dólares T si su utilidad excede S y de lo contrario 0. Otro caso interesante es cuando tal oferta es parcialmente aceptable: el postor proporcionará dólares T si su utilidad excede S;Pero si su utilidad es u <s, todavía está dispuesta a proporcionar dólares de UT. Uno podría preguntarse por qué, si se nos da las funciones de utilidad de los licitadores, no simplemente maximizamos la suma de los servicios públicos en lugar del excedente o total donado. Hay varias razones. Primero, debido a que las transformaciones afines no afectan las funciones de utilidad de una manera fundamental, sería posible3, por supuesto, nuestro lenguaje de licitación puede extenderse trivialmente para permitir ofertas totalmente expresivas, permitiendo también ofertas de un lenguaje de licitación totalmente expresivo, además deLas ofertas en nuestro lenguaje de licitación.53 BLE para un postor para inflar su utilidad cambiando sus unidades, lo que hace que su oferta sea más importante para fines de maximización de servicios públicos. En segundo lugar, un postor podría simplemente dar una función de voluntad de pago que es 0 en todas partes, y que su utilidad se tenga en cuenta al decidir el resultado, a pesar de que no contribuye con nada.5. Evitar los pagos indirectos en una implementación inicial, el enfoque de tener donaciones hechas a un centro y tener un centro reenvío de estos pagos a organizaciones benéficas, puede no ser deseable. Más bien, puede ser preferible tener una solución parcialmente descentralizada, donde las partes donantes escriben cheques a las organizaciones benéficas directamente de acuerdo con una solución prescrita por el centro. En este escenario, el Centro simplemente tiene que verificar que las partes están dando las cantidades prescritas. Las ventajas de esto incluyen que el Centro puede mantener su estado legal mínimo, así como que no requerimos que las partes de donaciones confíen en el Centro para transferir sus donaciones a las organizaciones benéficas (o requerir algún protocolo de verificación complicado). También es un paso hacia una solución totalmente descentralizada, si esto es deseable. Para lograr esto, aún podemos usar el enfoque descrito anteriormente. Después de aclarar el mercado de la manera descrita anteriormente, sabemos la cantidad que se supone que cada donante debe dar, y la cantidad que se supone que cada organización benéfica debe recibir. Luego, es sencillo dar alguna especificación de quién debería dar cuánto caridad, eso es consistente con ese claro. Cualquier algoritmo codicioso que aumente el flujo de efectivo de cualquier postor que aún no haya pagado lo suficiente, a ninguna organización benéfica que aún no haya recibido lo suficiente, hasta que el postor haya pagado lo suficiente o que la organización benéfica haya recibido lo suficiente, proporcionará dicha especificación.(Todo esto supone que bj πbj = ci πci. En el caso de que hay excedentes distintos de cero, es decir, bj πbj> ci πci, podemos distribuir este excedente en los licitadores al no exigirles que paguen el monto total, o en las organizaciones benéficas dándoles más de lo que especifica la solución). Sin embargo, con este enfoque, un postor puede tener que escribir un cheque a una organización benéfica que no le importa en absoluto.(Por ejemplo, un activista ambiental que estaba utilizando el sistema para aumentar las donaciones a un fondo de preservación de la vida silvestre puede ser obligado a escribir un cheque a un grupo que apoye a un partido político de derecha). Es probable que esto conduzca a quejas y incumplimiento con la compensación. Podemos abordar este problema permitiendo que cada postor especifique explícitamente (antes de la compensación) a qué organizaciones benéficas estaría dispuesta a hacer un cheque. Estas restricciones adicionales, por supuesto, pueden cambiar la solución óptima. En general, verificar si una solución centralizada dada (con cero excedente) se puede lograr a través de pagos descentralizados cuando hay tales restricciones se pueden modelar como un problema de flujo máximo. En la instancia de flujo máximo, hay un borde desde el nodo de origen S a cada postor BJ, con una capacidad de πbj (como se especifica en la solución centralizada);una ventaja de cada postor BJ a cada CI de caridad al que el postor está dispuesto a donar dinero, con una capacidad de ∞;y un borde de cada CI de caridad al nodo T diana T con capacidad πci (como se especifica en la solución centralizada). En el resto de este documento, todos nuestros resultados de dureza se aplican incluso a la configuración donde no hay una restricción en la que los licitadores puedan pagar a qué caridad (es decir, incluso el problema como se especificó antes de que esta sección sea difícil). También generalizamos nuestros algoritmos de compensación al caso parcialmente descentralizado con restricciones.6. La dureza de la limpieza del mercado en esta sección, mostraremos que el problema de compensación es completamente inapropiado, incluso cuando cada función de utilidad de los licitantes es lineal (con la pendiente 0 o 1 en cada pagos de caridad), cada postor se preocupa por las dos organizaciones benéficas o las dos organizaciones benéficas oAcerca de todas las organizaciones benéficas por igual, y la función de voluntad de pago de cada licitador es una función de paso. Reduciremos de max2sat (dada una fórmula en forma normal conjunta (donde cada cláusula tiene dos literales) y un número objetivo de cláusulas satisfechas t, ¿existe una asignación de valores de verdad a las variables que hace que al menos t cláusulas sean verdaderas?), que es NP-COMPLETO [7]. Teorema 1. Existe una reducción de instancias Max2Sat a instancias de limpieza de donaciones de tal manera que 1. Si la instancia MAX2SAT no tiene solución, entonces el único resultado válido es el resultado cero (ningún postor paga nada y ninguna organización benéfica recibe nada);2. De lo contrario, existe una solución con excedente positivo. Además, las instancias de limpieza de donaciones que reducimos para tener las siguientes propiedades: 1. Cada ui j es una línea;Es decir, la utilidad que cada licitador deriva de cualquier organización benéfica es lineal;2. Todos los ui j tienen pendiente 0 o 1;3. Cada postor tiene como máximo 2 organizaciones benéficas que afectan su utilidad (con la pendiente 1), o todas las organizaciones benéficas afectan su utilidad (con la pendiente 1);4. Cada oferta es una oferta umbral;Es decir, la función de voluntad de pago de todos los licitadores WJ es una función de paso. Prueba. El problema está en NP porque podemos elegir de manera no determinista los pagos a realizar y recibir, y verificar la validez y el valor objetivo de este resultado. A continuación, representaremos las ofertas de la siguiente manera: ({(ck, ak)}, s, t) indica que el Reino Unido j (πck) = akπck (esta función es 0 para ck no mencionada en la oferta) y wj ((UJ) = t para UJ ≥ S, WJ (UJ) = 0 de lo contrario. Para mostrar np-hardness, reducimos una instancia arbitraria max2sat, dada por un conjunto de cláusulas k = {k} = {(l1 k, l2 k)} sobre un conjunto de variable V junto con un número objetivo de cláusulas satisfechas t, aLa siguiente instancia de limpieza de donaciones. Deje que el conjunto de organizaciones benéficas sea el siguiente. Para cada l ∈ L literal, hay una organización benéfica Cl. Luego, deje que el conjunto de ofertas sea la siguiente. Para cada variable v, hay una oferta bv = ({(c+v, 1), (c - v, 1)}, 2, 1 - 1 4 | V |). Para cada l literal, hay una oferta bl = ({(cl, 1)}, 2, 1). Para cada cláusula k = {l1 k, l2 k} ∈ K, hay una oferta bk = ({(cl1 k, 1), (cl2 k, 1)}, 2, 1 8 | v || k |). Finalmente, hay una sola oferta que valora todas las organizaciones benéficas por igual: b0 = ({(c1, 1), (c2, 1), ..., (cm, 1)}, 2 | V |+ t 8 | V || K |, 1 4 + 1 16 | V || k |). Mostramos que las dos instancias son equivalentes. Primero, suponga que existe una solución a la instancia Max2SAT. Si en esta solución, L es verdadero, entonces deje πCl = 2 + t 8 | V | 2 | K |;de lo contrario πCl = 0. Además, las únicas ofertas que no se aceptan (lo que significa que el umbral no se cumple) son el BL donde L es falso, y el BK de tal manera que ambos de L1 K, L2 K son falsos. Primero mostramos que ningún postor cuya oferta es aceptada paga más de lo que está dispuesta. Para cada BV, C+V o C -V recibe al menos 2, por lo que se ha cumplido este umbral de los postores.54 Para cada BL, o es falso y la oferta no es aceptada, o L es verdadera, CL recibe al menos 2 y se ha cumplido el umbral. Para cada BK, ya sea L1 K, L2 K, son falsos y la oferta no es aceptada, o al menos uno de ellos (digamos Li K) es verdadero (es decir, K está satisfecho) y Cli K recibe al menos 2,y se ha cumplido el umbral. Finalmente, porque la cantidad total recibida por las organizaciones benéficas es 2 | V |+ T 8 | V || K |, el umbral de B0S también se ha cumplido. La cantidad total que se puede extraer de las ofertas aceptadas es al menos | V | (1- 1 4 | V |)+| V |+T 1 8 | V || K |+ 1 4 + 1 16 | V || K |) = 2 | V |+ T 8 | V || K |+ 1 16 | V || K |> 2 | V |+ T 8 | V || K |, entonces hay excedente positivo. Entonces existe una solución con excedente positivo para la instancia de limpieza de donaciones. Ahora suponga que existe un resultado distinto de cero en la instancia de limpieza de donaciones. Primero mostramos que no es posible (para cualquier v ∈ V) que se acepten B+V y B - V. Para, esto requeriría que πc + v + πc - v ≥ 4. Las ofertas BV, B+V, B - V no pueden contribuir más de 3, por lo que necesitamos otro 1 al menos. Se ve fácilmente que para cualquier otra V, aceptar cualquier subconjunto de {bv, b+v, b - v} requeriría que se otorgue al menos tanto a C+V y C - V como se pueda extraer de estas ofertas,Entonces esto no puede ayudar. Finalmente, todas las otras ofertas combinadas pueden contribuir como máximo | K |1 8 | V || K |+ 1 4 + 1 16 | V || K |<1. De ello se deduce que podemos interpretar el resultado en la instancia de limpieza de donaciones como una asignación parcial de valores de verdad a variables: V se establece en verdadero si se acepta B+V, y en falso si se acepta B-V. Todo lo que queda por mostrar es que esta tarea parcial satisface al menos las cláusulas T. Primero mostramos que si se acepta una oferta de cláusula BK, entonces se acepta BL1 K o BL2 K (y, por lo tanto, L1 K o L2 K se establece en verdadero, por lo tanto, K está satisfecho). Si se acepta BK, al menos uno de Cl1 K y Cl2 K debe recibir al menos 1;Sin pérdida de generalidad, digamos que es Cl1 K, y dice que L1 K corresponde a V1 K variable (es decir, es +V1 K o −v1 K). Si CL1 K no recibe al menos 2, BL1 K no es aceptado, y es fácil verificar que las ofertas BV1 K, B+V1 K, B - V1 K contribuyan (al menos) 1 menos de lo que se paga a C+V1 K y C+V1 K. Pero esta es la misma situación que analizamos antes, y sabemos que es imposible. Todo lo que queda por mostrar es que se aceptan al menos las ofertas de la cláusula T. Ahora mostramos que B0 es aceptado. Supongamos que no lo es;Entonces uno de los bv debe ser aceptado.(La solución no es cero por suposición; si solo se aceptan algunos BK, el pago total de estas ofertas es como máximo | K | 1 8 | V || k | <1, que no es suficiente para que ninguna oferta sea aceptada;Si se acepta uno de los BL, entonces también se alcanza el umbral para el BV correspondiente). Para esto V, BV1 K, B+V1 K, B - V1 K contribuye (al menos) 1 4 | V |Menos que los pagos totales a C+V y C - V. Nuevamente, el otro BV y BL no pueden (por sí mismos) ayudar a cerrar esta brecha;y el BK puede contribuir como máximo | K |1 8 | V || K |<1 4 | V |. Se deduce que B0 es aceptado. Ahora, para que B0 sea aceptado, un total de 2 | V |+ T 8 | V || K |debe ser donado. Debido a que no es posible (para cualquier v ∈ V) que tanto B+V como B - V se aceptan, se deduce que el pago total de BV y el BL pueden ser como máximo 2 | V |- 1 4. Agregar pago B0S de 1 4 + 1 16 | V || K |A esto, todavía necesitamos T - 1 2 8 | V || K |del bk. Pero cada uno de ellos contribuye como máximo 1 8 | V || K |, entonces al menos t de ellos deben ser aceptados. Corolario 1. A menos que p = np, no hay un algoritmo de tiempo polinómico para aproximar la limpieza de donaciones (con el excedente o la cantidad total donada como objetivo) dentro de cualquier relación F (n), donde F es una función no cero del tamaño del tamaño delinstancia. Esto se mantiene incluso si las estructuras de limpieza de donaciones satisfacen todas las propiedades dadas en el Teorema 1. Prueba. Supongamos que tuvimos un algoritmo de tiempo polinómico de este tipo, y lo aplicamos a las instancias de limpieza de donaciones que se redujeron de las instancias Max2SAT en el Teorema 1. Devolvería una solución distinta de cero cuando la instancia Max2SAT tenga una solución y una solución cero de lo contrario. Por lo tanto, podemos decidir si las instancias arbitrarias max2sat son satisfactorias de esta manera, y seguiría que p = np.(Resolver el problema a la optimización es NP complete en muchas otras configuraciones (no complejas o incluso más restringidas) como bien, omitemos tales resultados debido a la restricción de espacio). Esto no debe interpretarse como que nuestro enfoque es inviable. Primero, como mostraremos, hay familias muy expresivas de ofertas para las cuales el problema se puede solucionar en el tiempo polinomial. En segundo lugar, la satisfacción de NP a menudo se supera en la práctica (especialmente cuando las apuestas son altas). Por ejemplo, a pesar de que el problema de limpiar las subastas combinatorias es NP complete [20] (incluso para aproximarse [21]), generalmente se resuelven a la optimidad en la práctica.7. Formulación de programación entera mixta En esta sección, damos una formulación de programación entera mixta (MIP) para el problema general. También discutimos en qué casos especiales esta formulación se reduce a una formulación de programación lineal (LP). En tales casos, el problema se puede resolver en el tiempo polinomial, porque los programas lineales pueden resolverse en el tiempo polinomial [11]. Las variables del MIP que definen el resultado final son los pagos realizados a las organizaciones benéficas, denotadas por πci, y los pagos extraídos de los postores, πbj. En el caso en que tratamos de evitar pagos directos y dejamos que los licitadores pagen a las organizaciones benéficas directamente, agregamos variables πci, bj indicando cuánto BJ paga a CI, con las restricciones que para cada CI, πci ≤ bj πci, bj;y para cada bj, πbj ≥ ci πci, bj. Además, hay una restricción πci, bj = 0 siempre que el postor BJ no esté dispuesto a pagar la caridad CI. El resto del MIP se puede redactar en términos de πci y πbj. Los objetivos que hemos discutido anteriormente son tanto lineales: el excedente viene dados por n j = 1 πbj - m i = 1 πci, y la cantidad total donada viene dada por m i = 1 πci (se pueden agregar coeficientes para representar diferentes pesos en las diferentes organizaciones benéficas en las diferentes organizaciones benéficas en las diferentesobjetivo). La restricción de que el resultado debe ser válido (sin déficit) se da simplemente por: N J = 1 πbj ≥ m i = 1 πci. Para cada licitador, por cada organización benéfica, definimos una variable de utilidad adicional UI J que indica la utilidad que este postor deriva del pago a esta organización benéfica. Los licitadores totalizan 55 utilidad están dados por otra variable UJ, con la restricción de que UJ = m i = 1 ui j. Cada UI J se da en función de πci por la función (lineal por partes) proporcionada por el postor. Para representar esta función en la formulación MIP, simplemente colocaremos limitaciones de la limitación superior en UI J, para que no pueda exceder las funciones dadas. El solucionador MIP puede empujar las variables UI J hasta la restricción, para extraer la mayor cantidad de pago de este postor posible. En el caso en que los UI J son cóncavas, esto es fácil: si (SL, TL) y (SL+1, TL+1) son puntos finales de un segmento lineal finito en la función, agregamos la restricción de que UI J ≤ TL+πci −sl sl+1 - sl (tl+1 - tl). Si el segmento final (infinito) comienza en (SK, TK) y tiene pendiente D, agregamos la restricción de que UI J ≤ Tk + D (πci - SK). Usando el hecho de que la función es cóncava, para cada valor de πci, el límite superior más apretado en UI J es el que corresponde al segmento por encima de ese valor de πci, y por lo tanto, estas restricciones son suficientes para forzar el valor correcto de UI J. Cuando la función no es cóncava, requerimos (por primera vez) algunas variables binarias. Primero, definimos otro punto en la función: (SK + 1, TK + 1) = (SK + M, TK + DM), donde D es la pendiente del segmento infinito y M es cualquier límite superior en el πCJ. Esto tiene el efecto de que nunca volveremos a estar en el segmento infinito. Ahora, deje que Xi, J L sea una variable indicadora que debería ser 1 si πci está por debajo del segmento LTH de la función, y 0 de lo contrario. Para efectuar esto, primero agregue una restricción k l = 0 xi, j l = 1. Ahora, nuestro objetivo es representar πci como un promedio ponderado de sus dos SI vecinos, J l. Para 0 ≤ l ≤ k + 1, deje λi, j l el peso en si, j l. Agregamos la restricción k+1 l = 0 λi, j l = 1. Además, para 0 ≤ l ≤ k +1, agregamos la restricción λi, j l ≤ xl - 1 +xl (donde x - 1 y xk +1 se definen como cero), de modo que de hecho solo los dos si vecinos, j ltener un peso distinto de cero. Ahora agregamos la restricción πci = k+1 l = 0 si, j l λi, j l, y ahora el λi, j l debe configurarse correctamente. Entonces, podemos establecer ui j = k+1 l = 0 ti, j l λi, j l.(Esta es una técnica MIP estándar [16].) Finalmente, cada πbj está limitado por una función de UJ por la función (lineal por partes) proporcionada por el postor (WJ). Representar esta función es completamente análoga a la forma en que representamos UI J en función de πci.(Nuevamente necesitaremos variables binarias solo si la función no es cóncava). Debido a que solo usamos variables binarias cuando una función de utilidad ui j o una función de voluntad de pago WJ no es cóncava, se deduce que si todo esto es cóncavo, nuestra formulación MIP es simplemente un programa lineal, que se puede resolver en tiempo polinomial. Así: Teorema 2. Si todas las funciones UI J y WJ son cóncavas (y lineales por partes), el problema de limpieza de donaciones se puede resolver en tiempo polinomial utilizando programación lineal. Incluso si algunas de estas funciones no son cóncavas, podemos simplemente reemplazar cada una de dicha función por la función cóncava delimitador superior más pequeña, y usar la formulación de programación lineal para obtener un límite superior en el objetivo que puede ser útil en una formulación de búsqueda del problema general.8. Por qué uno no puede hacer mucho mejor que la programación lineal, uno puede preguntarse si, para los casos especiales del problema de limpieza que puede resolverse en el tiempo polinomial con la programación lineal, existen algoritmos de propósito especial que son mucho más rápidos que los algoritmos de programación lineal. En esta sección, mostramos que este no es el caso. Damos una reducción de (la variante de decisión de) el problema de programación lineal general a (la variante de decisión de) un caso especial del problema de limpieza de donaciones (que puede resolverse en tiempo polinómico utilizando programación lineal).(La variante de decisión de un problema de optimización hace la pregunta binaria: ¿Puede el valor objetivo exceder o?) Por lo tanto, cualquier algoritmo de uso especial para resolver la variante de decisión de este caso especial del problema de limpieza podría usarse para resolver una pregunta de decisión sobre un programa lineal arbitrario igual de rápido.(Y por lo tanto, si estamos dispuestos a llamar al algoritmo un número logarítmico de veces, podemos resolver la versión de optimización del programa lineal). Primero observamos que para la programación lineal, una pregunta de decisión sobre el objetivo simplemente puede ser redactada como otra restricción en el LP (forzando el objetivo a exceder el valor dado);Luego, la pregunta de decisión original coincide con preguntar si el programa lineal resultante tiene una solución factible. Teorema 3. La cuestión de si un LP (dado por un conjunto de restricciones lineales4) tiene una solución factible puede modelarse como una instancia de limpieza de donaciones con la maximización del pago como objetivo, con organizaciones benéficas de 2 V y ofertas V + C (donde V es el número deVariables en el LP, y C es el número de restricciones). En este modelo, cada oferta BJ solo tiene funciones lineales de UI J, y es una oferta de umbral parcialmente aceptable (WJ (U) = TJ para U ≥ SJ, de lo contrario WJ (U) = UTJ SJ). Las ofertas de V correspondientes a las variables mencionan solo dos organizaciones benéficas cada una;Las ofertas de C correspondientes a las restricciones mencionan solo dos veces el número de variables en la restricción correspondiente. Prueba. Para cada variable Xi en el LP, que haya dos organizaciones benéficas, C+Xi y C - XI. Sea h de un número de tal manera que si hay una solución factible para el LP, hay una en la que cada variable tiene un valor absoluto a lo sumo H. A continuación, representaremos ofertas de la siguiente manera: ({(CK, AK)}, s, t) indica que el Reino Unido j (πck) = akπck (esta función es 0 para ck no mencionada en la oferta), y wj (uj) = t para UJ ≥ S, wj (UJ) = UJ t s de otra manera. Para cada variable xi en el LP, que haya una oferta bxi = ({(c+xi, 1), (c - xi, 1)}, 2h, 2h - c v). Para cada restricción i rj i xi ≤ sj en el programa lineal, deje que haya una oferta bj = ({(c - xi, rj i)} i: r j i> 0 ∪ {(c+xi, −rj i)} i: r j i <0, (i | rj i |) h - Sj, 1). Deje que el monto total objetivo donado sea 2 VH. Supongamos que hay una solución factible (x ∗ 1, x ∗ 2, ..., x ∗ v) al LP. Sin pérdida de generalidad, podemos suponer que | x ∗ i |≤ h para todos i. Luego, en la instancia de limpieza de donaciones, 4 estas restricciones deben incluir límites en las variables (incluidos los límites de no negatividad), si las hay.56 Para cada i, deje πc + xi = h + x ∗ i, y deje πc - xi = h - x ∗ i (para un pago total de 2h a estas dos organizaciones benéficas). Esto nos permite extraer el pago máximo de las ofertas BXI -Un Total Pago de 2VH -c.Además, la utilidad de Bidder BJ es ahora I: R J I> 0 RJ I (H - X ∗ I) + I: R J I <0 −rj I (H + X ∗ I) = (I | rj I |) H - Irj i x ∗ i ≥ (i | rj i |) h - sj (donde la última desigualdad proviene del hecho de que la restricción j debe satisfacerse en la solución LP), por lo que se deduce, podemos extraer el pago máximo de todos los licitadores BJ, para un pago total de c.Se deduce que podemos extraer el pago requerido de 2 VH de los postores, y existe una solución a la instancia de limpieza de donaciones con una cantidad total donada de al menos 2 VH. Ahora suponga que hay una solución a la instancia de donación con una cantidad total donada de al menos VH. Entonces el pago máximo debe extraerse de cada postor. Por el hecho de que el pago máximo debe extraerse de cada postor BXI, se deduce que para cada i, πc + xi + πc - xi ≥ 2h. Debido a que el pago total máximo extraíble es de 2 VH, se deduce que para cada i, πc + xi + πc - xi = 2h. Sea x ∗ i = πc+xi - h = h - πc - xi. Luego, por el hecho de que el pago máximo debe extraerse de cada postor BJ, se deduce que (i | rj i |) h - sj ≤ i: r j i> 0 rj i πc - xi + i: r j i <0 −rj i iπc + xi = i: r j i> 0 rj i (h - x ∗ i) + i: r j i <0 −rj i (h + x ∗ i) = (i | rj i |) h - i rj i x ∗ i. De manera equivalente, i rj i x ∗ i ≤ sj. Se deduce que el x ∗ constituye una solución factible para el LP.9. Ofertas cuasilíneas Otra clase de ofertas de intereses es la clase de ofertas cuasilíneas. En una oferta cuasilínea, la función de voluntad de pago de los licitadores es lineal en utilidad: es decir, wj = uj.(Debido a que las unidades de utilidad son arbitrarias, también podemos dejarlas corresponder exactamente a unidades de dinero, por lo que no necesitamos un multiplicador constante). En la mayoría de los casos, la cuasilinealidad es una suposición irrazonable: por ejemplo, por lo general, los postores tienen un presupuesto limitado para las donaciones, de modo que la voluntad del pago dejará de aumentar en la utilidad después de algún punto (o al menos aumentan más lento en el caso de una restricción de presupuesto más suave). Sin embargo, la cuasilinealidad puede ser una suposición razonable en el caso en que los postores son grandes organizaciones con grandes presupuestos, y las organizaciones benéficas son algunos proyectos pequeños que requieren relativamente poco dinero. En este entorno, una vez que se ha donado una cierta cantidad pequeña a una organización benéfica, un postor no obtendrá más utilidad de más dinero donado de esa organización benéfica. Por lo tanto, los postores nunca alcanzarán una utilidad lo suficientemente alta para su restricción presupuestaria (incluso cuando es suave) para entrar en vigencia y, por lo tanto, una aproximación lineal de su función de voluntad de pago es razonable. Otra razón para estudiar el entorno cuasilíneo es que es la configuración más fácil para el diseño del mecanismo, que discutiremos en breve. En esta sección, veremos que el problema de compensación es mucho más fácil en el caso de las ofertas cuasilíneas. Primero, abordamos el caso en el que estamos tratando de maximizar el excedente (que es el entorno más natural para el diseño del mecanismo). La observación clave aquí es que cuando las ofertas son cuasilíneas, el problema de compensación se descompone entre las organizaciones benéficas. Lema 1. Supongamos que todas las ofertas son cuasilíneas, y el excedente es el objetivo. Luego podemos despejar el mercado de manera óptima al limpiar el mercado para cada organización benéfica individualmente. Es decir, para cada postor BJ, deje πbj = ci πbi j. Luego, para cada caridad CI, maximice (bj πbi j) - πci, bajo la restricción de que para cada postor bj, πbi j ≤ ui j (πci). Prueba. La solución resultante es ciertamente válida: en primer lugar, al menos tanto dinero se recolecta como se regala, porque bj πbj-ci πci = bj ci πbi j-ci πci = ci ((bj πbi j)-πci) -andLos términos de esta suma son los objetivos de los problemas de optimización individuales, cada uno de los cuales se puede establecer al menos a 0 (estableciendo todas las variables se establecen en 0), por lo que se deduce que la expresión no es negativa. Segundo, ningún postor BJ paga más de lo que ella está dispuesta a hacerlo, porque UJ −πbj = Ci ui J (πci)-ci πbi j = ci (ui j (πci) −πbi j)-y los términos de esta suma son no negativos porLas restricciones que impusimos a los problemas de optimización individual. Todo lo que queda por mostrar es que la solución es óptima. Debido a que en una solución óptima, extraeremos la mayor cantidad de pago de los postores como sea posible dado el πci, todo lo que necesitamos mostrar es que el πci se establece de manera óptima por este enfoque. Sea π ∗ Ci la cantidad pagada a la caridad πci en una solución óptima. Si cambiamos esta cantidad a πci y dejamos todo lo demás sin cambios, esto solo afectará el pago que podemos extraer de los postores debido a esta organización benéfica en particular, y la diferencia en el excedente será bj ui j (πci) - ui j (π (π∗ ci) - πci + π ∗ ci. Esta expresión es, por supuesto, 0 si πci = π ∗ ci. Pero ahora observe que esta expresión se maximiza en función de πci por la solución descompuesta para esta organización benéfica (los términos sin πci en ellos no importan, y por supuesto en la solución descompuesta siempre establecemos πbi j = ui j (πci)))). Se deduce que si cambiamos πci a la solución descompuesta, el cambio en el excedente será al menos 0 (y la solución seguirá siendo válida). Por lo tanto, podemos cambiar el πci uno por uno a la solución descompuesta sin perder ningún excedente. Teorema 4. Cuando todas las ofertas son cuasilíneas y el excedente es el objetivo, la limpieza de donaciones se puede hacer en tiempo lineal. Prueba. Por Lemma 1, podemos resolver el problema por separado para cada organización benéfica. Para la caridad CI, esto equivale a maximizar (bj ui j (πci)) - πci en función de πci. Debido a que todos sus términos son funciones lineales por partes, toda esta función es lineal por partes, y debe maximizarse en uno de los puntos donde no es efectentable. De ello se deduce que solo necesitamos verificar todos los puntos en los que uno de los términos no es efectivo. Desafortunadamente, el lema en descomposición no es válido para la maximización del pago. Proposición 1. Cuando el objetivo es la maximización del pago, incluso cuando las ofertas son cuasilíneas, la solución obtenida al descomponer el problema entre las organizaciones benéficas no es óptima (incluso con ofertas cóncavas).57 Prueba. Considere un solo postor B1 que coloca la siguiente oferta cuasilínea sobre dos organizaciones benéficas C1 y C2: U1 1 (πc1) = 2πci para 0 ≤ πci ≤ 1, u1 1 (πc1) = 2 + πci −1 4 de lo contrario;u2 1 (πc2) = πci 2. La solución descompuesta es πc1 = 7 3, πc2 = 0, para una donación total de 7 3. Pero la solución πc1 = 1, πc2 = 2 también es válida, para una donación total de 3> 7 3. De hecho, cuando la maximización del pago es el objetivo, la limpieza de donaciones permanece (débil) NP-complete en general.(En el resto del documento, se omiten las pruebas debido a la restricción de espacio). Teorema 5. La limpieza de donaciones es (débil) NPComplete cuando la maximización del pago es el objetivo, incluso cuando cada oferta se refiere solo a una organización benéfica (y tiene una función de utilidad de función de paso para esta organización benéfica) y es cuasilineal. Sin embargo, cuando las ofertas también son cóncavas, un algoritmo de compensación codicioso simple es óptimo. Teorema 6. Dada una instancia de limpieza de donaciones con la maximización del pago como objetivo donde todas las ofertas son cuasilíneas y cóncavas, considere el siguiente algoritmo. Comience con πci = 0 para todas las organizaciones benéficas. Luego, permitiendo γCI = D bj ui j (πci) dπci (en puntos no diferenciables, estos derivados deben tomarse de la derecha), aumentan πc ∗ i (donde c ∗ i ∈ Arg maxci γCI), hasta que γc ∗ i no es no es no es no es noMás largo, el más alto (en cuyo caso, recomputa c ∗ i y comience a aumentar el pago correspondiente), o bj uj = ci πci y γc ∗ i <1. Finalmente, deje πbj = UJ.(Un algoritmo codicioso similar funciona cuando el objetivo es excedente y las ofertas son cuasilíneas y cóncavas, con una única diferencia que dejamos de aumentar los pagos tan pronto como γc ∗ i <1.) 10. Compatibilidad de incentivos Hasta este punto, no hemos discutido los incentivos de los licitadores para ofertar de una manera particular. Específicamente, las ofertas pueden no reflejar sinceramente las preferencias de los licitantes sobre las organizaciones benéficas porque un postor puede ofertar estratégicamente, tergiversando sus preferencias para obtener un resultado que sea mejor para sí misma. Esto significa que el mecanismo no es a prueba de estrategias.(Mostraremos algunos ejemplos concretos de esto en breve). Esto no es demasiado sorprendente, porque el mecanismo descrito hasta ahora es, en cierto sentido, un mecanismo de primer precio, donde el mecanismo extraerá tanto pago de un postor como su oferta lo permita. Dichos mecanismos (por ejemplo, subastas de primer precio, donde los ganadores pagan el valor de sus ofertas) generalmente no son a prueba de estrategias: si un licitador informa su verdadera valoración para un resultado, entonces, si este resultado ocurre, el pago que el postor tendrápara hacer voluntad compensará sus ganancias del resultado por completo. Por supuesto, podríamos tratar de cambiar las reglas del juego, cuyo resultado (vector de pago a organizaciones benéficas) seleccionamos qué vector de oferta y qué postor paga cuánto orden hacer que la licitación sea sincera y para obtener el resultadoMejor con respecto a las verdaderas preferencias de los postores. Este es el campo del diseño del mecanismo. En esta sección, discutiremos brevemente las opciones que el diseño del mecanismo proporciona para el problema de donación de caridad expresiva.10.1 Ofertas estratégicas bajo el mecanismo de primer precio, primero señalamos algunas razones para que los postores informen mal sus preferencias bajo el mecanismo de primer precio descrito en el documento hasta este punto. En primer lugar, incluso cuando solo hay una organización benéfica, puede tener sentido subestimar la verdadera valoración para la organización benéfica. Por ejemplo, suponga que un postor desea que una organización benéfica reciba una cierta cantidad X, pero no le importa si la organización benéfica recibe más que eso. Además, suponga que las otras ofertas garantizan que la organización benéfica recibirá al menos x sin importar qué oferta presente el postor (y el postor lo sabe). Luego, el oferente es mejor no ofertar (o enviar una utilidad para la organización benéfica de 0), para evitar tener que realizar cualquier pago.(Esto se conoce en economía como el problema del jinete libre [14]. Con múltiples organizaciones benéficas, puede ocurrir otro tipo de manipulación, donde el postor intenta dirigir otros pagos hacia su organización benéfica preferida. Supongamos que hay dos organizaciones benéficas y tres postores. El primer postor ofrece u1 1 (πc1) = 1 si πc1 ≥ 1, u1 1 (πc1) = 0 de lo contrario;u2 1 (πc2) = 1 si πc2 ≥ 1, u2 1 (πc2) = 0 de lo contrario;y w1 (u1) = u1 si u1 ≤ 1, w1 (u1) = 1+ 1 100 (u1 −1) de lo contrario. El segundo postor ofrece u1 2 (πc1) = 1 si πc1 ≥ 1, u1 1 (πc1) = 0 de lo contrario;u2 2 (πc2) = 0 (siempre);w2 (u2) = 1 4 u2 si u2 ≤ 1, w2 (u2) = 1 4 + 1 100 (u2 −1) de lo contrario. Ahora, las verdaderas preferencias de los terceros postores están representadas con precisión5 por la BID U1 3 (πc1) = 1 si πc1 ≥ 1, u1 3 (πc1) = 0 de lo contrario;u2 3 (πc2) = 3 si πc2 ≥ 1, u2 3 (πc1) = 0 de lo contrario;y w3 (u3) = 1 3 u3 si u3 ≤ 1, w3 (u3) = 1 3 + 1 100 (u3 - 1) de lo contrario. Ahora, es sencillo verificar que, si el tercer postor ofrece sinceramente, independientemente de si el objetivo es la maximización de excedentes o el total donado, la caridad 1 recibirá al menos 1, y la caridad 2 recibirá menos de 1. Lo mismo es cierto si Bidder 3 no coloca una oferta en absoluto (como en el tipo de manipulación anterior);Por lo tanto, la utilidad 2S de los postres será 1 en este caso. Pero ahora, si el postor 3 informa U1 3 (πc1) = 0 en todas partes;u2 3 (πc2) = 3 si πc2 ≥ 1, u2 3 (πc2) = 0 de lo contrario (esta parte de la oferta es sincera);y w3 (u3) = 1 3 u3 si u3 ≤ 1, w3 (u3) = 1 3 de lo contrario;Luego, la organización benéfica 2 recibirá al menos 1, y el postor 3 tendrá que pagar como máximo 1 3. Debido a que hasta esta cantidad de pago, una unidad de dinero corresponde a tres unidades de utilidad al Bidder 3, sigue su utilidad ahora es al menos 3 - 1 = 2> 1. Observamos que en este caso, el postor estratégico no solo está afectando cuánto pagan los postores, sino también cuánto reciben las organizaciones benéficas.10.2 Diseño del mecanismo En el entorno cuasilíneo Hay cuatro razones por las cuales es probable que el enfoque de diseño del mecanismo sea más exitoso en el entorno de preferencias cuasilínales. Primero, históricamente, el diseño del mecanismo ha tenido más éxito cuando se podría hacer la suposición cuasilínea. En segundo lugar, debido a este éxito, se han descubierto algunos mecanismos muy generales para la configuración cuasilínea (por ejemplo, los mecanismos de VCG [24, 4, 10] o el mecanismo DAGVA [6, 1]) que podríamos aplicar directamente alProblema de donación de caridad expresiva. En tercer lugar, como vimos en la Sección 9, el problema de compensación es mucho más fácil en 5 formalmente, esto significa que si el postor se ve obligado a pagar el monto total que su oferta permite un vector particular de pagos a organizaciones benéficas, el postor es indiferente entreEsto y no participando en el mecanismo en absoluto.(Compare esto con la oferta con sinceridad en una subasta de primer precio). 58 Esta configuración, y por lo tanto, es menos probable que tengamos problemas computacionales para el problema de diseño del mecanismo. Cuarto, como mostraremos en breve, la suposición de cuasilinealidad en algunos casos permite descomponer el problema de diseño del mecanismo sobre las organizaciones benéficas (como lo hizo para el problema de compensación simple). Además, en el entorno cuasilíneo (a diferencia del entorno general), tiene sentido perseguir el bienestar social (la suma de los servicios públicos) como el objetivo, porque ahora 1) las unidades de utilidad corresponden directamente a las unidades de dinero, de modo que lo hacemosno tener el problema de los licitadores escala arbitrariamente sus utilidades;y 2) ya no es posible dar una función de voluntad de pago de 0 mientras afecta las donaciones a través de una función de utilidad. Antes de presentar el resultado de la descomposición, presentamos algunos términos de la teoría del juego. Un tipo es un perfil de preferencia que un postor puede tener y puede informar (por lo tanto, un informe de tipo es una oferta). La compatibilidad de incentivos (IC) significa que los postores son mejor informar sus preferencias sinceramente;Independientemente de los otros tipos (en estrategias dominantes), o en la expectativa sobre ellos (en el equilibrio de Bayes-Nash). La racionalidad individual (IR) significa que los agentes están al menos tan bien participando en el mecanismo que no participa;ya sea independientemente de los otros tipos (ex post) o con expectativa sobre ellos (ex-interim). Un mecanismo es equilibrado el presupuesto si no hay un flujo de dinero dentro o fuera del sistema en general (ex post), o en expectativa sobre los informes de tipo (ex antes). Un mecanismo es eficiente si (siempre) produce la asignación eficiente de la riqueza a las organizaciones benéficas. Teorema 7. Supongamos que todas las preferencias de los agentes son cuasilineales. Además, supongamos que existe un mecanismo de una sola característica m de que, para una cierta subclase P de preferencias (cuasilíneas), bajo un concepto de solución dado (implementación en estrategias dominantes o equilibrio de bayes-nash) y una noción dada de racionalidad individual Racionalidad(ex post, ex interino, o ninguno), satisface una cierta noción de equilibrio presupuestario (ex post, ex ante, o ninguno), y es ex-poste eficiente. Luego existe tal mecanismo para cualquier número de organizaciones benéficas. Dos mecanismos que satisfacen la eficiencia (y de hecho pueden aplicarse directamente al problema de caridad múltiple sin el uso del teorema anterior) son el VCG (que es compatible con incentivos en estrategias dominantes) y DAGVA (que es compatible con incentivos solo en Bayes-Nashequilibrio) mecanismos. Cada uno de ellos, sin embargo, tiene un inconveniente que probablemente lo haría poco práctico en el contexto de donaciones a organizaciones benéficas. El mecanismo VCG no está equilibrado con el presupuesto. El mecanismo DAGVA no satisface la racionalidad individual ex post. En la próxima subsección, investigaremos si podemos hacerlo mejor en el contexto de donaciones a organizaciones benéficas.10.3 Imposibilidad de eficiencia en esta subsección, mostramos que incluso en un entorno muy restringido, y con requisitos mínimos sobre las restricciones IC e IR, es imposible crear un mecanismo eficiente. Teorema 8. No existe un mecanismo que sea presupuestado ex poste, EXT-Post eficiente e ex-intermedio individualmente racional con el equilibrio de bayes-nash como concepto de solución (incluso con solo una organización benéfica, solo dos postores cuasilineales, con distribuciones de tipo idénticas (uniforme (uniformeEn dos tipos, ya que ambas funciones de utilidad son funciones de paso o ambas funciones de utilidad son funciones lineales cóncavas por partes)). El caso de las funciones de paso en este teorema corresponde exactamente al caso de un bien público único, de tamaño fijo e inexplible (el bien público es que la organización benéfica recibe la cantidad deseada), por lo que tal resultado de imposibilidad ya se conoce [14 14] Se conocen muchos resultados similares, probablemente el más famoso de los cuales es el resultado de imposibilidad de Myerson-Satterthwaite, que demuestra la imposibilidad de un comercio bilateral eficiente bajo los mismos requisitos [15]. El Teorema 7 indica que no hay razón para decidir las donaciones a múltiples organizaciones benéficas bajo un solo mecanismo (en lugar de uno separado para cada organización benéfica), cuando existe un mecanismo eficiente con las propiedades deseadas para el caso de una sola caridad. Sin embargo, debido a que bajo los requisitos del Teorema 8, no existe tal mecanismo, puede haber un beneficio de llevar a las organizaciones benéficas bajo el mismo paraguas. La siguiente proposición muestra que este es realmente el caso. Proposición 2. Existen entornos con dos organizaciones benéficas donde no existe un mecanismo racional de presupuesto ex-publicado, EXT-Post e individualmente con equilibrio de Bayes-Nash como el concepto de solución solo para cualquier organización benéfica;Pero existe un mecanismo racional de presupuesto ex-publicado, ex-publicado y ex post individualmente racional con estrategias dominantes como el concepto de solución para ambas organizaciones benéficas juntas.(Incluso cuando las condiciones son las mismas que en el Teorema 8, aparte del hecho de que ahora hay dos organizaciones benéficas). 11. Conclusión Introducimos un lenguaje de licitación para expresar tipos muy generales de ofertas de correspondencia en múltiples organizaciones benéficas. Formulamos el problema de compensación correspondiente (decidir cuánto paga cada postor y cuánto recibe cada organización benéfica), y demostramos que es NP complete a cualquier relación aproximada a cualquier relación incluso en entornos muy restringidos. Dimos una formulación del programa de introducción mixta del problema de compensación, y mostramos que para las ofertas cóncavas (donde las funciones de servicios públicos y la función de voluntad de pagos son cóncavas), el programa se reduce a un programa lineal y, por lo tanto, se puede resolver en tiempo polinomial. Luego demostramos que el problema de compensación para una subclase de ofertas cóncavas es al menos tan difícil como la variante de decisión de la programación lineal, lo que sugiere que no podemos hacer mucho mejor que una implementación de programación lineal para tales ofertas. Posteriormente, demostramos que el problema de compensación es mucho más fácil cuando las ofertas son cuasilíneas (donde las funciones de voluntad de pago son lineales): para excedentes, el problema se descompone entre las organizaciones benéficas y para la maximización del pago, un enfoque codicioso es óptimo si las ofertas son cóncavas (aunqueEste último problema es débilmente complete NP cuando las ofertas no son cóncavas). Para el entorno cuasilineal, estudiamos la cuestión del diseño del mecanismo de hacer que los postores denuncien sus preferencias sinceramente en lugar de estratégicamente. Mostramos que un mecanismo eficiente ex post es imposible incluso con una sola organización benéfica y una clase muy restringida de ofertas. También demostramos que a pesar de que el problema de compensación se descompone sobre las organizaciones benéficas en el entorno cuasilíneo, puede haber beneficios al vincular las organizaciones benéficas desde el punto de vista del diseño del mecanismo. Hay muchas direcciones para futuras investigaciones. Una es construir una implementación basada en la web del mecanismo (de primer precio) propuesto en este documento. Otra es estudiar la escalabilidad computacional de nuestro enfoque MIP/LP. También es importante identificar otras clases de ofertas (además de las cóncavas) para las cuales el problema de compensación es manejable. Queda mucho por hacer un trabajo crucial sobre el problema de diseño del mecanismo. Finalmente, ¿hay buenos mecanismos iterativos para la donación de caridad? 6 12. Referencias [1] K. Arrow. La doctrina de los derechos de propiedad y la revelación de la demanda bajo información incompleta. En M. Boskin, editor, economía y bienestar humano. New York Academic Press, 1979. [2] L. M. Ausubel y P. Milgrom. Subastas ascendentes con ofertas de paquetes. Fronteras de la economía teórica, 1, 2002. No. 1, Artículo 1. [3] Y. Bartal, R. Gonen y N. Nisan. Subastas combinatoriales de unidades múltiples compatibles con incentivos. En aspectos teóricos de la racionalidad y el conocimiento (Tark IX), Bloomington, Indiana, EE. UU., 2003. [4] E. H. Clarke. Precio multiparte de bienes públicos. Public Choice, 11: 17-33, 1971. [5] V. Conitzer y T. Sandholm. Complejidad del diseño del mecanismo. En Actas de la 18ª Conferencia Anual sobre Incertidumbre en Inteligencia Artificial (UAI-02), Páginas 103-110, Edmonton, Canadá, 2002. [6] C. Daspremont y L. A. G´erard-Varet. Incentivos e información incompleta. Journal of Public Economics, 11: 25-45, 1979. [7] M. R. Garey, D. S. Johnson y L. Stockmeyer. Algunos problemas de gráficos simplificados de NP-completan. Teórico de la informática, 1: 237-267, 1976. [8] D. Goldburg y S. Mcelligott. Declaración de la Cruz Roja en lugares de donación oficial.2001. Comunicado de prensa, http://www.redcross.org/press/disaster/ds PR/011017LegitDonors.html.[9] R. Gonen y D. Lehmann. Soluciones óptimas para subastas combinatorias de unidades múltiples: ramificación y heurística unida. En Actas de la Conferencia ACM sobre Comercio Electrónico (ACM-EC), páginas 13-20, Minneapolis, MN, octubre de 2000. [10] T. Groves. Incentivos en equipos. Econometrica, 41: 617-631, 1973. [11] L. Khachiyan. Un algoritmo polinomial en la programación lineal. Matemáticas soviéticas. Doklady, 20: 191-194, 1979. [12] R. Lavi, A. Mualem y N. Nisan. Hacia una caracterización de subastas combinatorias veraz. En Actas del Simposio Anual sobre Fundamentos de la Computación (FOCS), 2003. [13] D. Lehmann, L. I. Ocallaghan e Y. Shoham. Revelación de la verdad en subastas combinatorias rápidas, aproximadamente eficientes. Journal of the ACM, 49 (5): 577-602, 2002. La versión temprana apareció en ACMEC-99.6 Compare, por ejemplo, mecanismos iterativos en el entorno de subasta combinatoria [19, 25, 2].[14] A. Mas-Colell, M. Whinston y J. R. Green. Teoría microeconómica. Oxford University Press, 1995. [15] R. Myerson y M. Satterthwaite. Mecanismos eficientes para el comercio bilateral. Journal of Economic Theory, 28: 265-281, 1983. [16] G. L. Nemhauser y L. A. Wolsey. Integer y optimización combinatoria. John Wiley & Sons, 1999. Sección 4, página 11. [17] N. Nisan. Licitación y asignación en subastas combinatorias. En Actas de la Conferencia ACM sobre Comercio Electrónico (ACM-EC), páginas 1-12, Minneapolis, MN, 2000. [18] N. Nisan y A. Ronen. Mecanismos VCG computacionalmente factibles. En Actas de la Conferencia ACM sobre Comercio Electrónico (ACM-EC), páginas 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes.Ibundle: una subasta eficiente de paquete de precios ascendentes. En Actas de la Conferencia ACM sobre Comercio Electrónico (ACM-EC), páginas 148-157, Denver, CO, noviembre de 1999. [20] M. H. Rothkopf, A. Pekeˇc y R. M. Harstad. Subastas combinatorias computacionalmente manejables. Management Science, 44 (8): 1131-1147, 1998. [21] T. Sandholm. Algoritmo para una determinación óptima del ganador en subastas combinatorias. Inteligencia Artificial, 135: 1-54, enero de 2002. La versión de la conferencia apareció en la Conferencia Conjunta Internacional sobre Inteligencia Artificial (IJCAI), pp. 542-547, Estocolmo, Suecia, 1999. [22] T. Sandholm, S. Suri, A. Gilpin y D. Levine. CABOB: un algoritmo óptimo rápido para subastas combinatorias. En Actas de la Decimoséptima Conferencia Internacional Conjunta sobre Inteligencia Artificial (IJCAI), páginas 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue. Global AIDS Funds recibe atención, pero no dinero. The New York Times, 1 de junio de 2003. Reimpreso en http://www.healthgap.org/press se comunica/A03/060103 NYT HGAP G8 Fund.html.[24] W. Vickrey. Contrapeculación, subastas y licitaciones selladas competitivas. Journal of Finance, 16: 8-37, 1961. [25] P. R. Wurman y M. P. Wellman. AKBA: una subasta combinatoria progresiva de precio anónimo. En Actas de la Conferencia ACM sobre Comercio Electrónico (ACM-EC), páginas 21-29, Minneapolis, MN, octubre de 2000. [26] M. Yokoo. La caracterización de la estrategia/protocolos de subastas combinatoriales de prueba de nombre falso: protocolo sin racionamiento orientado al precio. En Actas de la Decimoctavo Conferencia Internacional Conjunta sobre Inteligencia Artificial (IJCAI), Acapulco, México, agosto de 2003. 60",
    "original_sentences": [
        "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
        "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
        "However, in their current form, matching offers allow for only limited negotiation.",
        "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
        "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
        "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
        "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
        "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
        "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
        "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
        "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
        "For the quasilinear setting, we study the mechanism design question.",
        "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
        "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
        "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
        "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
        "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
        "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
        "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
        "This is done by making the donation conditional on the others donations.",
        "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
        "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
        "To either of them, it would be worth $0.75 if A received $1.",
        "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
        "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
        "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
        "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
        "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
        "Thus this matching offer implements the contract suggested above.",
        "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
        "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
        "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
        "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
        "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
        "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
        "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
        "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
        "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
        "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
        "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
        "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
        "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
        "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
        "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
        "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
        "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
        "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
        "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
        "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
        "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
        "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
        "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
        "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
        "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
        "Nevertheless, there are interesting parallels.",
        "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
        "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
        "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
        "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
        "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
        "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
        "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
        "Again, expressive bidding is necessary to achieve economic efficiency.",
        "Another parallel is the computational complexity of the clearing problem.",
        "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
        "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
        "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
        "The bidding language is expressive enough that no bidder should have to make more than one bid.",
        "The following definition makes the general form of a bid in our framework precise.",
        "Definition 1.",
        "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
        "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
        "Definition 2.",
        "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
        "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
        "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
        "Of course, in the end, only one of the valid outcomes can be chosen.",
        "We choose the valid outcome that maximizes the objective that we have for the donation process.",
        "Definition 3.",
        "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
        "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
        "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
        "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
        "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
        "We will refer to it as the clearing problem.",
        "The formal definition follows.",
        "Definition 4 (DONATION-CLEARING).",
        "We are given a set of n bids over charities c1, c2, . . . , cm.",
        "Additionally, we are given an objective function.",
        "We are asked to find an objective-maximizing valid outcome.",
        "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
        "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
        "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
        "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
        "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
        "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
        "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
        "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
        "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
        "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
        "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
        "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
        "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
        "Furthermore, each ui j must be piecewise linear.",
        "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
        "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
        "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
        "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
        "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
        "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
        "There are several reasons.",
        "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
        "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
        "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
        "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
        "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
        "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
        "It is also a step towards a fully decentralized solution, if this is desirable.",
        "To bring this about, we can still use the approach described earlier.",
        "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
        "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
        "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
        "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
        "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
        "This is likely to lead to complaints and noncompliance with the clearing.",
        "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
        "These additional constraints, of course, may change the optimal solution.",
        "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
        "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
        "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
        "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
        "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
        "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
        "Theorem 1.",
        "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
        "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
        "Otherwise, there exists a solution with positive surplus.",
        "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
        "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
        "All the ui j have slope either 0 or 1; 3.",
        "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
        "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
        "Proof.",
        "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
        "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
        "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
        "Let the set of charities be as follows.",
        "For every literal l ∈ L, there is a charity cl.",
        "Then, let the set of bids be as follows.",
        "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
        "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
        "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
        "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
        "We show the two instances are equivalent.",
        "First, suppose there exists a solution to the MAX2SAT instance.",
        "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
        "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
        "First we show that no bidder whose bid is accepted pays more than she is willing to.",
        "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
        "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
        "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
        "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
        "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
        "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
        "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
        "For, this would require that πc+v + πc−v ≥ 4.",
        "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
        "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
        "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
        "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
        "All that is left to show is that this partial assignment satisfies at least T clauses.",
        "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
        "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
        "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
        "But this is the same situation that we analyzed before, and we know it is impossible.",
        "All that remains to show is that at least T clause bids are accepted.",
        "We now show that b0 is accepted.",
        "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
        "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
        "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
        "It follows that b0 is accepted.",
        "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
        "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
        "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
        "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
        "Corollary 1.",
        "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
        "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
        "Proof.",
        "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
        "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
        "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
        "This should not be interpreted to mean that our approach is infeasible.",
        "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
        "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
        "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
        "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
        "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
        "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
        "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
        "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
        "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
        "The rest of the MIP can be phrased in terms of the πci and πbj .",
        "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
        "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
        "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
        "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
        "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
        "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
        "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
        "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
        "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
        "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
        "When the function is not concave, we require (for the first time) some binary variables.",
        "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
        "This has the effect that we will never be on the infinite segment again.",
        "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
        "To effect this, first add a constraint k l=0 xi,j l = 1.",
        "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
        "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
        "We add the constraint k+1 l=0 λi,j l = 1.",
        "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
        "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
        "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
        "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
        "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
        "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
        "Thus: Theorem 2.",
        "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
        "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
        "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
        "In this section, we show that this is not the case.",
        "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
        "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
        "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
        "Theorem 3.",
        "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
        "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
        "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
        "Proof.",
        "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
        "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
        "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
        "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
        "Let the target total amount donated be 2vH.",
        "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
        "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
        "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
        "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
        "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
        "Then the maximum payment must be extracted from each bidder.",
        "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
        "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
        "Let x∗ i = πc+xi − H = H − πc−xi .",
        "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
        "Equivalently, i rj i x∗ i ≤ sj.",
        "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
        "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
        "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
        "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
        "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
        "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
        "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
        "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
        "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
        "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
        "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
        "Lemma 1.",
        "Suppose all bids are quasilinear, and surplus is the objective.",
        "Then we can clear the market optimally by clearing the market for each charity individually.",
        "That is, for each bidder bj, let πbj = ci πbi j .",
        "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
        "Proof.",
        "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
        "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
        "All that remains to show is that the solution is optimal.",
        "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
        "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
        "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
        "This expression is, of course, 0 if πci = π∗ ci .",
        "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
        "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
        "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
        "Theorem 4.",
        "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
        "Proof.",
        "By Lemma 1, we can solve the problem separately for each charity.",
        "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
        "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
        "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
        "Unfortunately, the decomposing lemma does not hold for payment maximization.",
        "Proposition 1.",
        "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
        "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
        "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
        "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
        "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
        "Theorem 5.",
        "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
        "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
        "Theorem 6.",
        "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
        "Start with πci = 0 for all charities.",
        "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
        "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
        "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
        "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
        "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
        "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
        "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
        "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
        "This is the field of mechanism design.",
        "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
        "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
        "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
        "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
        "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
        "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
        "Suppose that there are two charities, and three bidders.",
        "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
        "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
        "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
        "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
        "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
        "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
        "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
        "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
        "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
        "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
        "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
        "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
        "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
        "Before presenting the decomposition result, we introduce some terms from game theory.",
        "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
        "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
        "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
        "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
        "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
        "Theorem 7.",
        "Suppose all agents preferences are quasilinear.",
        "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
        "Then there exists such a mechanism for any number of charities.",
        "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
        "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
        "The VCG mechanism is not budget balanced.",
        "The dAGVA mechanism does not satisfy ex-post individual rationality.",
        "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
        "Theorem 8.",
        "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
        "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
        "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
        "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
        "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
        "The next proposition shows that this is indeed the case.",
        "Proposition 2.",
        "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
        "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
        "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
        "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
        "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
        "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
        "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
        "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
        "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
        "There are many directions for future research.",
        "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
        "Another is to study the computational scalability of our MIP/LP approach.",
        "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
        "Much crucial work remains to be done on the mechanism design problem.",
        "Finally, are there good iterative mechanisms for charity donation?6 12.",
        "REFERENCES [1] K. Arrow.",
        "The property rights doctrine and demand revelation under incomplete information.",
        "In M. Boskin, editor, Economics and human welfare.",
        "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
        "Ascending auctions with package bidding.",
        "Frontiers of Theoretical Economics, 1, 2002.",
        "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
        "Incentive compatible multi-unit combinatorial auctions.",
        "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
        "Multipart pricing of public goods.",
        "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
        "Complexity of mechanism design.",
        "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
        "Incentives and incomplete information.",
        "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
        "Some simplified NP-complete graph problems.",
        "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
        "Red cross statement on official donation locations. 2001.",
        "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
        "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
        "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
        "Incentives in teams.",
        "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
        "A polynomial algorithm in linear programming.",
        "Soviet Math.",
        "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
        "Towards a characterization of truthful combinatorial auctions.",
        "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
        "Truth revelation in rapid, approximately efficient combinatorial auctions.",
        "Journal of the ACM, 49(5):577-602, 2002.",
        "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
        "Microeconomic Theory.",
        "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
        "Efficient mechanisms for bilateral trading.",
        "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
        "Integer and Combinatorial Optimization.",
        "John Wiley & Sons, 1999.",
        "Section 4, page 11. [17] N. Nisan.",
        "Bidding and allocation in combinatorial auctions.",
        "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
        "Computationally feasible VCG mechanisms.",
        "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
        "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
        "Computationally manageable combinatorial auctions.",
        "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
        "Algorithm for optimal winner determination in combinatorial auctions.",
        "Artificial Intelligence, 135:1-54, Jan. 2002.",
        "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
        "CABOB: A fast optimal algorithm for combinatorial auctions.",
        "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
        "Global AIDS Funds Is Given Attention, but Not Money.",
        "The New York Times, June 1, 2003.",
        "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
        "Counterspeculation, auctions, and competitive sealed tenders.",
        "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
        "AkBA: A progressive, anonymous-price combinatorial auction.",
        "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
        "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
        "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
    ],
    "error_count": 0,
    "keys": {
        "supporters of charity": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both <br>supporters of charity</br> A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Supongamos que tenemos dos partes, 1 y 2, que son \"partidarios de la caridad\" A. partidarios de la caridad"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "charity supporter": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "negotiating material": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as <br>negotiating material</br> to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as <br>negotiating material</br> to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Negociación expresiva sobre donaciones a organizaciones benéficas ∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, EE. UU. Conitzer@cs.cmu.edu tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA Sandholm@cs.cmu.edu.Al donar dinero a una causa (por ejemplo, caritativa), es posible utilizar la donación contemplada como \"material de negociación\" para inducir a otras partes interesadas en la organización benéfica a donar más.Material de negociación",
                "En tales escenarios, es sensato que una parte use su donación contemplada como \"material de negociación\" para inducir a los demás a dar más.Material de negociación"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "expressive charity donation": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between <br>expressive charity donation</br> and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing <br>expressive charity donation</br> markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the <br>expressive charity donation</br> market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the <br>expressive charity donation</br> problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the <br>expressive charity donation</br> problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Comparación con las subastas e intercambios combinatorios Esta sección discute la relación entre la \"donación de caridad expresiva\" y las subastas y los intercambios combinatorios.Donación de caridad expresiva",
                "Los problemas de eliminar los mercados de \"donación de caridad expresiva\" y la compensación de subastas o intercambios combinatorios son muy diferentes en la formulación.Donación de caridad expresiva",
                "La licitación expresiva también es uno de los principales beneficios del mercado de \"donación de caridad expresiva\".Donación de caridad expresiva",
                "En esta sección, discutiremos brevemente las opciones que el diseño del mecanismo proporciona para el problema de \"donación de caridad expresiva\".10.1 Ofertas estratégicas bajo el mecanismo de primer precio, primero señalamos algunas razones para que los postores informen mal sus preferencias bajo el mecanismo de primer precio descrito en el documento hasta este punto.Donación de caridad expresiva",
                "En segundo lugar, debido a este éxito, se han descubierto algunos mecanismos muy generales para la configuración cuasilínea (por ejemplo, los mecanismos de VCG [24, 4, 10] o el mecanismo DAGVA [6, 1]) que podríamos aplicar directamente alProblema de \"donación de caridad expresiva\".Donación de caridad expresiva"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "combinatorial auction": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a <br>combinatorial auction</br>, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the <br>combinatorial auction</br> setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price <br>combinatorial auction</br>.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof <br>combinatorial auction</br> protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En una \"subasta combinatoria\", hay m artículos a la venta, y los postores pueden colocar ofertas en paquetes de uno o más artículos.subasta combinatoria",
                "La versión temprana apareció en ACMEC-99.6 Compare, por ejemplo, mecanismos iterativos en el entorno de \"subasta combinatoria\" [19, 25, 2].[14] A. Mas-Colell, M. Whinston y J. R. Green.subasta combinatoria",
                "AKBA: Una \"subasta combinatoria\" progresiva, anónima-precio \".subasta combinatoria",
                "La caracterización de la estrategia/protocolos de \"subasta combinatoria\" de prueba de nombre falso: protocolo orientado a precios y sin racionamiento.subasta combinatoria"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "economic efficiency": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve <br>economic efficiency</br>.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full <br>economic efficiency</br> allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Nuevamente, la licitación expresiva es necesaria para lograr la \"eficiencia económica\".eficiencia económica",
                "Para lograr la completa \"eficiencia económica\" permitida por la expresividad de los mercados (o incluso acercarse a ella), los problemas computacionales difíciles deben resolverse en subastas y intercambios combinatorios, así como en el mercado de donaciones de caridad (como veremos).52 3. Eficiencia económica"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "bidding framework": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our <br>bidding framework</br>, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En nuestro \"marco de licitación\", una oferta especificará, para cada vector de pagos totales realizados a las organizaciones benéficas, cuánto está dispuesto a contribuir ese licitador.(La contribución de este postor también se cuenta en el vector de pagos, el vector de pagos totales a las organizaciones benéficas representa la cantidad dada por todas las partes donantes, no solo las que no sean este postor). Marco de licitación"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "donation-clearing": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (<br>donation-clearing</br>).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the <br>donation-clearing</br> problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to <br>donation-clearing</br> instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the <br>donation-clearing</br> instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following <br>donation-clearing</br> instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the <br>donation-clearing</br> instance.",
                "Now suppose there exists a nonzero outcome in the <br>donation-clearing</br> instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the <br>donation-clearing</br> instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating <br>donation-clearing</br> (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the <br>donation-clearing</br> instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the <br>donation-clearing</br> problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the <br>donation-clearing</br> problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a <br>donation-clearing</br> instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the <br>donation-clearing</br> instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the <br>donation-clearing</br> instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, <br>donation-clearing</br> can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, <br>donation-clearing</br> remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "<br>donation-clearing</br> is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a <br>donation-clearing</br> instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Definición 4 (\"limpieza de donaciones\").limpieza de donaciones",
                "Qué difícil es el problema de \"limpieza de donaciones\" depende de los tipos de ofertas utilizadas y del lenguaje en el que se expresan.limpieza de donaciones",
                "Existe una reducción de instancias max2sat a instancias de \"limpieza de donaciones\" de tal manera que 1. limpieza de donaciones",
                "Además, las instancias de \"aclaración de donaciones\" que reducimos para tener las siguientes propiedades: 1. limpieza de donaciones",
                "Para mostrar np-hardness, reducimos una instancia arbitraria max2sat, dada por un conjunto de cláusulas k = {k} = {(l1 k, l2 k)} sobre un conjunto de variable V junto con un número objetivo de cláusulas satisfechas T, aLa siguiente instancia de \"limpieza de donaciones\".limpieza de donaciones",
                "Entonces existe una solución con excedente positivo a la instancia de \"reducción de donaciones\".limpieza de donaciones",
                "Ahora suponga que existe un resultado distinto de cero en la instancia de \"reducción de donaciones\".limpieza de donaciones",
                "De ello se deduce que podemos interpretar el resultado en la instancia de \"limpieza de donaciones\" como una asignación parcial de valores de verdad a variables: V se establece en verdadero si B+V se acepta, y en falso si se acepta B-V.limpieza de donaciones",
                "A menos que P = NP, no hay un algoritmo de tiempo polinómico para aproximar el \"limpieza de donaciones\" (con el excedente o la cantidad total donada como objetivo) dentro de cualquier relación F (n), donde F es una función no cero del tamaño del tamañode la instancia.limpieza de donaciones",
                "Supongamos que teníamos un algoritmo de tiempo polinómico de este tipo, y lo aplicamos a las instancias de \"limpieza de donaciones\" que se redujeron de las instancias Max2Sat en el Teorema 1.",
                "Si todas las funciones UI J y WJ son cóncavas (y lineales por partes), el problema de \"limpieza de donaciones\" se puede resolver en tiempo polinomial utilizando programación lineal.limpieza de donaciones",
                "Damos una reducción de (la variante de decisión de) el problema general de programación lineal a (la variante de decisión de) un caso especial del problema de \"limpieza de donaciones\" (que puede resolverse en tiempo polinomial utilizando la programación lineal).(La variante de decisión de un problema de optimización hace la pregunta binaria: ¿Puede el valor objetivo exceder o?) Clear la donación",
                "La cuestión de si un LP (dado por un conjunto de restricciones lineales4) tiene una solución factible puede modelarse como una instancia de \"limpieza de donaciones\" con la maximización del pago como objetivo, con organizaciones benéficas de 2V y ofertas V + C (donde V es la V la V es la V es la V y la donación.Número de variables en el LP, y C es el número de restricciones).limpieza de donaciones",
                "Luego, en la instancia de \"limpieza de donaciones\", 4 estas restricciones deben incluir límites en las variables (incluidos los límites de no negatividad), si las hay.56 Para cada i, deje πc + xi = h + x ∗ i, y deje πc - xi = h - x ∗ i (para un pago total de 2h a estas dos organizaciones benéficas).limpieza de donaciones",
                "Esto nos permite extraer el pago máximo de las ofertas BXI -Un Total Pago de 2VH -c.Además, la utilidad de Bidder BJ es ahora I: R J I> 0 RJ I (H - X ∗ I) + I: R J I <0 −rj I (H + X ∗ I) = (I | rj I |) H - Irj i x ∗ i ≥ (i | rj i |) h - sj (donde la última desigualdad proviene del hecho de que la restricción j debe satisfacerse en la solución LP), por lo que se deduce, podemos extraer el pago máximo de todos los licitadores BJ, para un pago total de c.Se deduce que podemos extraer el pago de 2 VH requerido de los postores, y existe una solución a la instancia de \"reducción de donaciones\" con una cantidad total donada de al menos 2 VH.limpieza de donaciones",
                "Cuando todas las ofertas son cuasilíneas y el excedente es el objetivo, el \"limpieza de donaciones\" se puede hacer en tiempo lineal.limpieza de donaciones",
                "De hecho, cuando la maximización del pago es el objetivo, la \"limpieza de donaciones\" permanece (débil) NP-Complete en general.(En el resto del documento, se omiten las pruebas debido a la restricción de espacio).",
                "El \"limpieza de donaciones\" es (débil) NPComplete cuando la maximización del pago es el objetivo, incluso cuando cada oferta es se refiere solo a una organización benéfica (y tiene una función de utilidad de función de paso para esta organización benéfica), y es cuasilineal.limpieza de donaciones",
                "Dada una instancia de \"limpieza de donaciones\" con la maximización del pago como objetivo donde todas las ofertas son cuasilíneas y cóncavas, considere el siguiente algoritmo.limpieza de donaciones"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "bidding language": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a <br>bidding language</br> for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The <br>bidding language</br> is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED <br>bidding language</br> Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a <br>bidding language</br> that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a <br>bidding language</br> that only represents a subset of all possible bids, which can be described concisely.3 To introduce our <br>bidding language</br>, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our <br>bidding language</br> can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive <br>bidding language</br>, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a <br>bidding language</br> for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En este documento, presentamos un \"lenguaje de licitación\" para expresar tipos muy generales de ofertas de correspondencia en múltiples organizaciones benéficas.lenguaje de licitación",
                "El \"lenguaje de licitación\" es lo suficientemente expresivo como para que ningún postor tenga que hacer más de una oferta.lenguaje de licitación",
                "Un \"lenguaje de licitación\" simplificado que especifica una oferta general en nuestro marco (como se definió anteriormente) requiere poder especificar una función arbitraria de valor real sobre RM.lenguaje de licitación",
                "Por lo tanto, necesitamos un \"lenguaje de licitación\" que permita a los postores al menos especificar algunas ofertas de manera más concisa.lenguaje de licitación",
                "Especificaremos un \"lenguaje de licitación\" que solo represente un subconjunto de todas las ofertas posibles, que se puede describir de manera concisa.3 Para introducir nuestro \"lenguaje de licitación\", primero describiremos la función de licitación como una composición de dos funciones;Luego describiremos nuestras suposiciones en cada una de estas funciones.lenguaje de licitación",
                "Primero, debido a que las transformaciones afines no afectan las funciones de utilidad de una manera fundamental, sería posible3, por supuesto, nuestro \"lenguaje de licitación\" puede extenderse trivialmente para permitir ofertas totalmente expresivas, al permitir también ofertas de un \"lenguaje de licitación\" totalmente expresivo \", además de las ofertas en nuestro lenguaje de licitación.53 BLE para un postor para inflar su utilidad cambiando sus unidades, lo que hace que su oferta sea más importante para fines de maximización de servicios públicos.lenguaje de licitación",
                "Conclusión Introdujimos un \"lenguaje de licitación\" para expresar tipos muy generales de ofertas de correspondencia en múltiples organizaciones benéficas.lenguaje de licitación"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "threshold bid": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a <br>threshold bid</br>, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a <br>threshold bid</br>; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable <br>threshold bid</br> (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Un caso especial interesante es una \"oferta umbral\", donde WJ es una función de paso: el postor proporcionará dólares T si su utilidad excede S, y de lo contrario 0. umbral de oferta",
                "Cada oferta es una \"oferta umbral\";Es decir, la función de voluntad de pago de todos los licitadores WJ es una función de paso.umbral de oferta",
                "En este modelo, cada oferta BJ solo tiene funciones lineales de UI J, y es una \"oferta umbral\" parcialmente aceptable (wj (u) = tj para u ≥ sj, de lo contrario wj (u) = utj sj).umbral de oferta"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "payment willingness function": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a <br>payment willingness function</br> that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders <br>payment willingness function</br> is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders <br>payment willingness function</br> wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a <br>payment willingness function</br> wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders <br>payment willingness function</br> is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their <br>payment willingness function</br> is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a <br>payment willingness function</br> of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and <br>payment willingness function</br> are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En segundo lugar, un postor podría simplemente dar una \"función de voluntad de pago\" que es 0 en todas partes, y que su utilidad se tenga en cuenta al decidir el resultado, a pesar de que no contribuye con nada.5. Función de voluntad de pagos",
                "La dureza de la limpieza del mercado en esta sección, mostraremos que el problema de compensación es completamente inapropiado, incluso cuando cada función de utilidad de los licitantes es lineal (con la pendiente 0 o 1 en cada pagos de caridad), cada postor se preocupa por las dos organizaciones benéficas o las dos organizaciones benéficas oAcerca de todas las organizaciones benéficas por igual, y cada licitante \"función de voluntad de pago\" es una función de paso.Función de voluntad de pagos",
                "Cada oferta es una oferta umbral;Es decir, cada \"función de voluntad de pago\" de los licitadores es una función de paso.Función de voluntad de pagos",
                "Debido a que solo usamos variables binarias cuando una función de utilidad ui j o una \"función de voluntad de pago\" WJ no es cóncava, se deduce que si todos estos son cóncavas, nuestra formulación MIP es simplemente un programa lineal, que se puede resolver en polinomiotiempo.Función de voluntad de pagos",
                "En una oferta cuasilínea, los licitadores \"función de voluntad de pago\" es lineal en utilidad: es decir, wj = uj.(Debido a que las unidades de utilidad son arbitrarias, también podemos dejarlas corresponder exactamente a unidades de dinero, por lo que no necesitamos un multiplicador constante). Función de voluntad de pago",
                "Por lo tanto, los postores nunca alcanzarán una utilidad lo suficientemente alta para su restricción presupuestaria (incluso cuando es suave) para entrar en vigencia y, por lo tanto, una aproximación lineal de su \"función de voluntad de pago\" es razonable.Función de voluntad de pagos",
                "Además, en el entorno cuasilíneo (a diferencia del entorno general), tiene sentido perseguir el bienestar social (la suma de los servicios públicos) como el objetivo, porque ahora 1) las unidades de utilidad corresponden directamente a las unidades de dinero, de modo que lo hacemosno tener el problema de los licitadores escala arbitrariamente sus utilidades;y 2) ya no es posible dar una \"función de voluntad de pago\" de 0 mientras afecta las donaciones a través de una función de utilidad.Función de voluntad de pagos",
                "Dimos una formulación del programa de intemperie mixta del problema de compensación, y mostramos que para las ofertas cóncavas (donde las funciones de servicios públicos y la \"función de voluntad de pago\" son cóncavas), el programa se reduce a un programa lineal y, por lo tanto, puede resolverse en tiempo polinomial.Función de voluntad de pagos"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "linear programming": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of <br>linear programming</br>.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a <br>linear programming</br> (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using <br>linear programming</br>.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the <br>linear programming</br> formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN <br>linear programming</br> One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with <br>linear programming</br>, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general <br>linear programming</br> problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using <br>linear programming</br>). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for <br>linear programming</br>, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of <br>linear programming</br>, suggesting that we cannot do much better than a <br>linear programming</br> implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in <br>linear programming</br>.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Luego mostramos que el problema de compensación para una subclase de ofertas cóncavas es al menos tan difícil como la variante de decisión de la \"programación lineal\".programación lineal",
                "También discutimos en qué casos especiales esta formulación se reduce a una formulación de \"programación lineal\" (LP).programación lineal",
                "Si todas las funciones UI J y WJ son cóncavas (y lineales por partes), el problema de limpieza de donaciones se puede resolver en tiempo polinomial utilizando \"programación lineal\".programación lineal",
                "Incluso si algunas de estas funciones no son cóncavas, podemos simplemente reemplazar cada una de dichas funciones por la función cóncava delimitador superior más pequeña, y usar la formulación de \"programación lineal\" para obtener un límite superior en el objetivo que puede ser útil en una formulación de búsqueda de la de búsqueda delproblema general.8. Programación lineal",
                "Por qué uno no puede hacer mucho mejor que la \"programación lineal\" se puede preguntar si, para los casos especiales del problema de limpieza de donaciones que se pueden resolver en tiempo polinomial con \"programación lineal\", existen algoritmos de propósito especial que son mucho más rápidos que los algoritmos de programación lineal.programación lineal",
                "Damos una reducción de (la variante de decisión de) el problema general de \"programación lineal\" a (la variante de decisión de) un caso especial del problema de limpieza de donaciones (que puede resolverse en tiempo polinomial utilizando \"programación lineal\").(La variante de decisión de un problema de optimización hace la pregunta binaria: ¿Puede el valor objetivo exceder o?) Programación lineal",
                "Primero observamos que para la \"programación lineal\", una pregunta de decisión sobre el objetivo simplemente puede ser redactada como otra restricción en el LP (forzando el objetivo de exceder el valor dado);Luego, la pregunta de decisión original coincide con preguntar si el programa lineal resultante tiene una solución factible.programación lineal",
                "Luego demostramos que el problema de compensación para una subclase de ofertas cóncavas es al menos tan difícil como la variante de decisión de la \"programación lineal\", lo que sugiere que no podemos hacerlo mucho mejor que una implementación de \"programación lineal\" para tales ofertas.programación lineal",
                "Un algoritmo polinomial en \"programación lineal\".programación lineal"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "quasilinearity": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, <br>quasilinearity</br> is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, <br>quasilinearity</br> may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the <br>quasilinearity</br> assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En la mayoría de los casos, la \"cuasilinealidad\" es una suposición irrazonable: por ejemplo, por lo general, los licitadores tienen un presupuesto limitado para las donaciones, de modo que la disposición de pago dejará de aumentar en utilidad después de algún punto (o al menos aumentan más lento en el caso de un presupuesto más suaverestricción).cuasilinealidad",
                "Sin embargo, la \"cuasilinealidad\" puede ser una suposición razonable en el caso de que los postores son grandes organizaciones con grandes presupuestos, y las organizaciones benéficas son algunos proyectos pequeños que requieren relativamente poco dinero.cuasilinealidad",
                "Cuarto, como mostraremos en breve, la suposición de \"cuasilinealidad\" en algunos casos permite descomponer el problema de diseño del mecanismo sobre las organizaciones benéficas (como lo hizo para el problema de compensación simple).cuasilinealidad"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "incentive compatibility": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "<br>incentive compatibility</br> Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "<br>incentive compatibility</br> (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "\"Compatibilidad de incentivos\" Hasta este punto, no hemos discutido los incentivos de los licitadores por ofertar de una manera particular.compatibilidad con incentivos",
                "\"Compatibilidad de incentivos\" (IC) significa que los postores son los mejores informes de sus preferencias con sinceridad;Independientemente de los otros tipos (en estrategias dominantes), o en la expectativa sobre ellos (en el equilibrio de Bayes-Nash).compatibilidad con incentivos"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "concave bid": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for <br>concave bid</br>s, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of <br>concave bid</br>s is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with <br>concave bid</br>s). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for <br>concave bid</br>s (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of <br>concave bid</br>s is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Damos una formulación del programa de enteros mixtos del problema de compensación, y mostramos que para \"Bid de cóncavo\", el programa se reduce a un programa lineal.oferta cóncava",
                "Luego mostramos que el problema de compensación para una subclase de \"oferta cóncava\" s es al menos tan difícil como la variante de decisión de la programación lineal.oferta cóncava",
                "Cuando el objetivo es la maximización del pago, incluso cuando las ofertas son cuasilíneas, la solución obtenida al descomponer el problema entre las organizaciones benéficas, en general, no es óptima (incluso con \"ofertas cóncavas\").57 Prueba.oferta cóncava",
                "Dimos una formulación del programa de introducción mixta del problema de compensación, y mostramos que para la \"oferta cóncava\" (donde las funciones de servicios públicos y la función de voluntad de pagos son cóncavas), el programa se reduce a un programa lineal y, por lo tanto, puede resolverse en tiempo polinomial.oferta cóncava",
                "Luego demostramos que el problema de compensación para una subclase de \"ofertas cóncavas\" s es al menos tan difícil como la variante de decisión de la programación lineal, lo que sugiere que no podemos hacerlo mucho mejor que una implementación de programación lineal para tales ofertas.oferta cóncava"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "expressive negotiation": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "<br>expressive negotiation</br> over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, <br>expressive negotiation</br> over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "\"Negociación expresiva\" sobre donaciones a organizaciones benéficas ∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, EE. UU. Conitzer@cs.cmu.edu tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, EE. UU.Resumen EDU Al donar dinero a una causa (por ejemplo, caritativa), es posible utilizar la donación contemplada como material de negociación para inducir a otras partes interesadas en la organización benéfica a donar más.negociación expresiva",
                "En resumen, la \"negociación expresiva\" sobre las donaciones a organizaciones benéficas es una nueva forma en que el comercio electrónico puede ayudar al mundo.negociación expresiva"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "donation to charity": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "market clear": {
            "translated_key": "",
            "is_in_text": false,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the mechanism design question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a mechanism design standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the mechanism design problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for mechanism design, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for mechanism design).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of mechanism design.",
                "In this section, we will briefly discuss the options that mechanism design provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 Mechanism design in the quasilinear setting There are four reasons why the mechanism design approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, mechanism design has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the mechanism design problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the mechanism design problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the mechanism design question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a mechanism design standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the mechanism design problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of mechanism design.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "mechanism design": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "Expressive Negotiation over Donations to Charities∗ Vincent Conitzer Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA conitzer@cs.cmu.edu Tuomas Sandholm Carnegie Mellon University 5000 Forbes Avenue Pittsburgh, PA 15213, USA sandholm@cs.cmu.edu ABSTRACT When donating money to a (say, charitable) cause, it is possible to use the contemplated donation as negotiating material to induce other parties interested in the charity to donate more.",
                "Such negotiation is usually done in terms of matching offers, where one party promises to pay a certain amount if others pay a certain amount.",
                "However, in their current form, matching offers allow for only limited negotiation.",
                "For one, it is not immediately clear how multiple parties can make matching offers at the same time without creating circular dependencies.",
                "Also, it is not immediately clear how to make a donation conditional on other donations to multiple charities, when the donator has different levels of appreciation for the different charities.",
                "In both these cases, the limited expressiveness of matching offers causes economic loss: it may happen that an arrangement that would have made all parties (donators as well as charities) better off cannot be expressed in terms of matching offers and will therefore not occur.",
                "In this paper, we introduce a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulate the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and show that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We give a mixed-integer program formulation of the clearing problem, and show that for concave bids, the program reduces to a linear program.",
                "We then show that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming.",
                "Subsequently, we show that the clearing problem is much easier when bids are quasilinear-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we study the <br>mechanism design</br> question.",
                "We show that an ex-post efficient mechanism is ∗ Supported by NSF under CAREER Award IRI-9703122, Grant IIS-9800994, ITR IIS-0081246, and ITR IIS-0121678. impossible even with only one charity and a very restricted class of bids.",
                "We also show that there may be benefits to linking the charities from a <br>mechanism design</br> standpoint.",
                "Categories and Subject Descriptors F.2 [Theory of Computation]: Analysis of Algorithms and Problem Complexity; J.4 [Computer Applications]: Social and Behavioral Sciences-Economics General Terms Algorithms, Economics, Theory 1.",
                "INTRODUCTION When money is donated to a charitable (or other) cause (hereafter referred to as charity), often the donating party gives unconditionally: a fixed amount is transferred from the donator to the charity, and none of this transfer is contingent on other events-in particular, it is not contingent on the amount given by other parties.",
                "Indeed, this is currently often the only way to make a donation, especially for small donating parties such as private individuals.",
                "However, when multiple parties support the same charity, each of them would prefer to see the others give more rather than less to this charity.",
                "In such scenarios, it is sensible for a party to use its contemplated donation as negotiating material to induce the others to give more.",
                "This is done by making the donation conditional on the others donations.",
                "The following example will illustrate this, and show that the donating parties as well as the charitable cause may simultaneously benefit from the potential for such negotiation.",
                "Suppose we have two parties, 1 and 2, who are both supporters of charity A.",
                "To either of them, it would be worth $0.75 if A received $1.",
                "It follows neither of them will be willing to give unconditionally, because $0.75 < $1.",
                "However, if the two parties draw up a contract that says that they will each give $0.5, both the parties have an incentive to accept this contract (rather than have no contract at all): with the contract, the charity will receive $1 (rather than $0 without a contract), which is worth $0.75 to each party, which is greater than the $0.5 that that party will have to give.",
                "Effectively, each party has made its donation conditional on the other partys donation, leading to larger donations and greater happiness to all parties involved. 51 One method that is often used to effect this is to make a matching offer.",
                "Examples of matching offers are: I will give x dollars for every dollar donated., or I will give x dollars if the total collected from other parties exceeds y.",
                "In our example above, one of the parties can make the offer I will donate $0.5 if the other party also donates at least that much, and the other party will have an incentive to indeed donate $0.5, so that the total amount given to the charity increases by $1.",
                "Thus this matching offer implements the contract suggested above.",
                "As a real-world example, the United States government has authorized a donation of up to $1 billion to the Global Fund to fight AIDS, TB and Malaria, under the condition that the American contribution does not exceed one third of the total-to encourage other countries to give more [23].",
                "However, there are several severe limitations to the simple approach of matching offers as just described. 1.",
                "It is not clear how two parties can make matching offers where each partys offer is stated in terms of the amount that the other pays. (For example, it is not clear what the outcome should be when both parties offer to match the others donation.)",
                "Thus, matching offers can only be based on payments made by parties that are giving unconditionally (not in terms of a matching offer)-or at least there can be no circular dependencies.1 2.",
                "Given the current infrastructure for making matching offers, it is impractical to make a matching offer depend on the amounts given to multiple charities.",
                "For instance, a party may wish to specify that it will pay $100 given that charity A receives a total of $1000, but that it will also count donations made to charity B, at half the rate. (Thus, a total payment of $500 to charity A combined with a total payment of $1000 to charity B would be just enough for the partys offer to take effect.)",
                "In contrast, in this paper we propose a new approach where each party can express its relative preferences for different charities, and make its offer conditional on its own appreciation for the vector of donations made to the different charities.",
                "Moreover, the amount the party offers to donate at different levels of appreciation is allowed to vary arbitrarily (it does need to be a dollar-for-dollar (or n-dollarfor-dollar) matching arrangement, or an arrangement where the party offers a fixed amount provided a given (strike) total has been exceeded).",
                "Finally, there is a clear interpretation of what it means when multiple parties are making conditional offers that are stated in terms of each other.",
                "Given each combination of (conditional) offers, there is a (usually) unique solution which determines how much each party pays, and how much each charity is paid.",
                "However, as we will show, finding this solution (the clearing problem) requires solving a potentially difficult optimization problem.",
                "A large part of this paper is devoted to studying how difficult this problem is under different assumptions on the structure of the offers, and providing algorithms for solving it. 1 Typically, larger organizations match offers of private individuals.",
                "For example, the American Red Cross Liberty Disaster Fund maintains a list of businesses that match their customers donations [8].",
                "Towards the end of the paper, we also study the <br>mechanism design</br> problem of motivating the bidders to bid truthfully.",
                "In short, expressive negotiation over donations to charities is a new way in which electronic commerce can help the world.",
                "A web-based implementation of the ideas described in this paper can facilitate voluntary reallocation of wealth on a global scale.",
                "Aditionally, optimally solving the clearing problem (and thereby generating the maximum economic welfare) requires the application of sophisticated algorithms. 2.",
                "COMPARISON TO COMBINATORIAL AUCTIONS AND EXCHANGES This section discusses the relationship between expressive charity donation and combinatorial auctions and exchanges.",
                "It can be skipped, but may be of interest to the reader with a background in combinatorial auctions and exchanges.",
                "In a combinatorial auction, there are m items for sale, and bidders can place bids on bundles of one or more items.",
                "The auctioneer subsequently labels each bid as winning or losing, under the constraint that no item can be in more than one winning bid, to maximize the sum of the values of the winning bids. (This is known as the clearing problem.)",
                "Variants include combinatorial reverse auctions, where the auctioneer is seeking to procure a set of items; and combinatorial exchanges, where bidders can both buy and and sell items (even within the same bid).",
                "Other extensions include allowing for side constraints, as well as the specification of attributes of the items in bids.",
                "Combinatorial auctions and exchanges have recently become a popular research topic [20, 21, 17, 22, 9, 18, 13, 3, 12, 26, 19, 25, 2].",
                "The problems of clearing expressive charity donation markets and clearing combinatorial auctions or exchanges are very different in formulation.",
                "Nevertheless, there are interesting parallels.",
                "One of the main reasons for the interest in combinatorial auctions and exchanges is that it allows for expressive bidding.",
                "A bidder can express exactly how much each different allocation is worth to her, and thus the globally optimal allocation may be chosen by the auctioneer.",
                "Compare this to a bidder having to bid on two different items in two different (one-item) auctions, without any way of expressing that (for instance) one item is worthless if the other item is not won.",
                "In this scenario, the bidder may win the first item but not the second (because there was another high bid on the second item that she did not anticipate), leading to economic inefficiency.",
                "Expressive bidding is also one of the main benefits of the expressive charity donation market.",
                "Here, bidders can express exactly how much they are willing to donate for every vector of amounts donated to charities.",
                "This may allow bidders to negotiate a complex arrangement of who gives how much to which charity, which is beneficial to all parties involved; whereas no such arrangement may have been possible if the bidders had been restricted to using simple matching offers on individual charities.",
                "Again, expressive bidding is necessary to achieve economic efficiency.",
                "Another parallel is the computational complexity of the clearing problem.",
                "In order to achieve the full economic efficiency allowed by the markets expressiveness (or even come close to it), hard computational problems must be solved in combinatorial auctions and exchanges, as well as in the charity donation market (as we will see). 52 3.",
                "DEFINITIONS Throughout this paper, we will refer to the offers that the donating parties make as bids, and to the donating parties as bidders.",
                "In our bidding framework, a bid will specify, for each vector of total payments made to the charities, how much that bidder is willing to contribute. (The contribution of this bidder is also counted in the vector of paymentsso, the vector of total payments to the charities represents the amount given by all donating parties, not just the ones other than this bidder.)",
                "The bidding language is expressive enough that no bidder should have to make more than one bid.",
                "The following definition makes the general form of a bid in our framework precise.",
                "Definition 1.",
                "In a setting with m charities c1, c2, . . . , cm, a bid by bidder bj is a function vj : Rm → R. The interpretation is that if charity ci receives a total amount of πci , then bidder j is willing to donate (up to) vj(πc1 , πc2 , . . . , πcm ).",
                "We now define possible outcomes in our model, and which outcomes are valid given the bids that were made.",
                "Definition 2.",
                "An outcome is a vector of payments made by the bidders (πb1 , πb2 , . . . , πbn ), and a vector of payments received by the charities (πc1 , πc2 , . . . , πcm ).",
                "A valid outcome is an outcome where 1. n j=1 πbj ≥ m i=1 πci (at least as much money is collected as is given away); 2.",
                "For all 1 ≤ j ≤ n, πbj ≤ vj(πc1 , πc2 , . . . , πcm ) (no bidder gives more than she is willing to).",
                "Of course, in the end, only one of the valid outcomes can be chosen.",
                "We choose the valid outcome that maximizes the objective that we have for the donation process.",
                "Definition 3.",
                "An objective is a function from the set of all outcomes to R.2 After all bids have been collected, a valid outcome will be chosen that maximizes this objective.",
                "One example of an objective is surplus, given by n j=1 πbj − m i=1 πci .",
                "The surplus could be the profits of a company managing the expressive donation marketplace; but, alternatively, the surplus could be returned to the bidders, or given to the charities.",
                "Another objective is total amount donated, given by m i=1 πci . (Here, different weights could also be placed on the different charities.)",
                "Finding the valid outcome that maximizes the objective is a (nontrivial) computational problem.",
                "We will refer to it as the clearing problem.",
                "The formal definition follows.",
                "Definition 4 (DONATION-CLEARING).",
                "We are given a set of n bids over charities c1, c2, . . . , cm.",
                "Additionally, we are given an objective function.",
                "We are asked to find an objective-maximizing valid outcome.",
                "How difficult the DONATION-CLEARING problem is depends on the types of bids used and the language in which they are expressed.",
                "This is the topic of the next section. 2 In general, the objective function may also depend on the bids, but the objective functions under consideration in this paper do not depend on the bids.",
                "The techniques presented in this paper will typically generalize to objectives that take the bids into account directly. 4.",
                "A SIMPLIFIED BIDDING LANGUAGE Specifying a general bid in our framework (as defined above) requires being able to specify an arbitrary real-valued function over Rm .",
                "Even if we restricted the possible total payment made to each charity to the set {0, 1, 2, . . . , s}, this would still require a bidder to specify (s+1)m values.",
                "Thus, we need a bidding language that will allow the bidders to at least specify some bids more concisely.",
                "We will specify a bidding language that only represents a subset of all possible bids, which can be described concisely.3 To introduce our bidding language, we will first describe the bidding function as a composition of two functions; then we will outline our assumptions on each of these functions.",
                "First, there is a utility function uj : Rm → R, specifying how much bidder j appreciates a given vector of total donations to the charities. (Note that the way we define a bidders utility function, it does not take the payments the bidder makes into account.)",
                "Then, there is a donation willingness function wj : R → R, which specifies how much bidder j is willing to pay given her utility for the vector of donations to the charities.",
                "We emphasize that this function does not need to be linear, so that utilities should not be thought of as expressible in dollar amounts. (Indeed, when an individual is donating to a large charity, the reason that the individual donates only a bounded amount is typically not decreasing marginal value of the money given to the charity, but rather that the marginal value of a dollar to the bidder herself becomes larger as her budget becomes smaller.)",
                "So, we have wj(uj(πc1 , πc2 , . . . , πcm )) = vj(πc1 , πc2 , . . . , πcm ), and we let the bidder describe her functions uj and wj separately. (She will submit these functions as her bid.)",
                "Our first restriction is that the utility that a bidder derives from money donated to one charity is independent of the amount donated to another charity.",
                "Thus, uj(πc1 , πc2 , . . . , πcm ) = m i=1 ui j(πci ). (We observe that this does not imply that the bid function vj decomposes similarly, because of the nonlinearity of wj.)",
                "Furthermore, each ui j must be piecewise linear.",
                "An interesting special case which we will study is when each ui j is a line: ui j(πci ) = ai jπci .",
                "This special case is justified in settings where the scale of the donations by the bidders is small relative to the amounts the charities receive from other sources, so that the marginal use of a dollar to the charity is not affected by the amount given by the bidders.",
                "The only restriction that we place on the payment willingness functions wj is that they are piecewise linear.",
                "One interesting special case is a threshold bid, where wj is a step function: the bidder will provide t dollars if her utility exceeds s, and otherwise 0.",
                "Another interesting case is when such a bid is partially acceptable: the bidder will provide t dollars if her utility exceeds s; but if her utility is u < s, she is still willing to provide ut s dollars.",
                "One might wonder why, if we are given the bidders utility functions, we do not simply maximize the sum of the utilities rather than surplus or total donated.",
                "There are several reasons.",
                "First, because affine transformations do not affect utility functions in a fundamental way, it would be possi3 Of course, our bidding language can be trivially extended to allow for fully expressive bids, by also allowing bids from a fully expressive bidding language, in addition to the bids in our bidding language. 53 ble for a bidder to inflate her utility by changing its units, thereby making her bid more important for utility maximization purposes.",
                "Second, a bidder could simply give a payment willingness function that is 0 everywhere, and have her utility be taken into account in deciding on the outcome, in spite of her not contributing anything. 5.",
                "AVOIDING INDIRECT PAYMENTS In an initial implementation, the approach of having donations made out to a center, and having a center forward these payments to charities, may not be desirable.",
                "Rather, it may be preferable to have a partially decentralized solution, where the donating parties write out checks to the charities directly according to a solution prescribed by the center.",
                "In this scenario, the center merely has to verify that parties are giving the prescribed amounts.",
                "Advantages of this include that the center can keep its legal status minimal, as well as that we do not require the donating parties to trust the center to transfer their donations to the charities (or require some complicated verification protocol).",
                "It is also a step towards a fully decentralized solution, if this is desirable.",
                "To bring this about, we can still use the approach described earlier.",
                "After we clear the market in the manner described before, we know the amount that each donator is supposed to give, and the amount that each charity is supposed to receive.",
                "Then, it is straightforward to give some specification of who should give how much to which charity, that is consistent with that clearing.",
                "Any greedy algorithm that increases the cash flow from any bidder who has not yet paid enough, to any charity that has not yet received enough, until either the bidder has paid enough or the charity has received enough, will provide such a specification. (All of this is assuming that bj πbj = ci πci .",
                "In the case where there is nonzero surplus, that is, bj πbj > ci πci , we can distribute this surplus across the bidders by not requiring them to pay the full amount, or across the charities by giving them more than the solution specifies.)",
                "Nevertheless, with this approach, a bidder may have to write out a check to a charity that she does not care for at all. (For example, an environmental activist who was using the system to increase donations to a wildlife preservation fund may be required to write a check to a group supporting a right-wing political party.)",
                "This is likely to lead to complaints and noncompliance with the clearing.",
                "We can address this issue by letting each bidder specify explicitly (before the clearing) which charities she would be willing to make a check out to.",
                "These additional constraints, of course, may change the optimal solution.",
                "In general, checking whether a given centralized solution (with zero surplus) can be accomplished through decentralized payments when there are such constraints can be modeled as a MAX-FLOW problem.",
                "In the MAX-FLOW instance, there is an edge from the source node s to each bidder bj, with a capacity of πbj (as specified in the centralized solution); an edge from each bidder bj to each charity ci that the bidder is willing to donate money to, with a capacity of ∞; and an edge from each charity ci to the target node t with capacity πci (as specified in the centralized solution).",
                "In the remainder of this paper, all our hardness results apply even to the setting where there is no constraint on which bidders can pay to which charity (that is, even the problem as it was specified before this section is hard).",
                "We also generalize our clearing algorithms to the partially decentralized case with constraints. 6.",
                "HARDNESS OF CLEARING THE MARKET In this section, we will show that the clearing problem is completely inapproximable, even when every bidders utility function is linear (with slope 0 or 1 in each charitys payments), each bidder cares either about at most two charities or about all charities equally, and each bidders payment willingness function is a step function.",
                "We will reduce from MAX2SAT (given a formula in conjunctive normal form (where each clause has two literals) and a target number of satisfied clauses T, does there exist an assignment of truth values to the variables that makes at least T clauses true? ), which is NP-complete [7].",
                "Theorem 1.",
                "There exists a reduction from MAX2SAT instances to DONATION-CLEARING instances such that 1.",
                "If the MAX2SAT instance has no solution, then the only valid outcome is the zero outcome (no bidder pays anything and no charity receives anything); 2.",
                "Otherwise, there exists a solution with positive surplus.",
                "Additionally, the DONATION-CLEARING instances that we reduce to have the following properties: 1.",
                "Every ui j is a line; that is, the utility that each bidder derives from any charity is linear; 2.",
                "All the ui j have slope either 0 or 1; 3.",
                "Every bidder either has at most 2 charities that affect her utility (with slope 1), or all charities affect her utility (with slope 1); 4.",
                "Every bid is a threshold bid; that is, every bidders payment willingness function wj is a step function.",
                "Proof.",
                "The problem is in NP because we can nondeterministically choose the payments to be made and received, and check the validity and objective value of this outcome.",
                "In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = 0 otherwise.",
                "To show NP-hardness, we reduce an arbitrary MAX2SAT instance, given by a set of clauses K = {k} = {(l1 k, l2 k)} over a variable set V together with a target number of satisfied clauses T, to the following DONATION-CLEARING instance.",
                "Let the set of charities be as follows.",
                "For every literal l ∈ L, there is a charity cl.",
                "Then, let the set of bids be as follows.",
                "For every variable v, there is a bid bv = ({(c+v, 1), (c−v, 1)}, 2, 1 − 1 4|V | ).",
                "For every literal l, there is a bid bl = ({(cl, 1)}, 2, 1).",
                "For every clause k = {l1 k, l2 k} ∈ K, there is a bid bk = ({(cl1 k , 1), (cl2 k , 1)}, 2, 1 8|V ||K| ).",
                "Finally, there is a single bid that values all charities equally: b0 = ({(c1, 1), (c2, 1), . . . , (cm, 1)}, 2|V |+ T 8|V ||K| , 1 4 + 1 16|V ||K| ).",
                "We show the two instances are equivalent.",
                "First, suppose there exists a solution to the MAX2SAT instance.",
                "If in this solution, l is true, then let πcl = 2 + T 8|V |2|K| ; otherwise πcl = 0.",
                "Also, the only bids that are not accepted (meaning the threshold is not met) are the bl where l is false, and the bk such that both of l1 k, l2 k are false.",
                "First we show that no bidder whose bid is accepted pays more than she is willing to.",
                "For each bv, either c+v or c−v receives at least 2, so this bidders threshold has been met. 54 For each bl, either l is false and the bid is not accepted, or l is true, cl receives at least 2, and the threshold has been met.",
                "For each bk, either both of l1 k, l2 k are false and the bid is not accepted, or at least one of them (say li k) is true (that is, k is satisfied) and cli k receives at least 2, and the threshold has been met.",
                "Finally, because the total amount received by the charities is 2|V | + T 8|V ||K| , b0s threshold has also been met.",
                "The total amount that can be extracted from the accepted bids is at least |V |(1− 1 4|V | )+|V |+T 1 8|V ||K| + 1 4 + 1 16|V ||K| ) = 2|V |+ T 8|V ||K| + 1 16|V ||K| > 2|V |+ T 8|V ||K| , so there is positive surplus.",
                "So there exists a solution with positive surplus to the DONATION-CLEARING instance.",
                "Now suppose there exists a nonzero outcome in the DONATION-CLEARING instance.",
                "First we show that it is not possible (for any v ∈ V ) that both b+v and b−v are accepted.",
                "For, this would require that πc+v + πc−v ≥ 4.",
                "The bids bv, b+v, b−v cannot contribute more than 3, so we need another 1 at least.",
                "It is easily seen that for any other v , accepting any subset of {bv , b+v , b−v } would require that at least as much is given to c+v and c−v as can be extracted from these bids, so this cannot help.",
                "Finally, all the other bids combined can contribute at most |K| 1 8|V ||K| + 1 4 + 1 16|V ||K| < 1.",
                "It follows that we can interpret the outcome in the DONATION-CLEARING instance as a partial assignment of truth values to variables: v is set to true if b+v is accepted, and to false if b−v is accepted.",
                "All that is left to show is that this partial assignment satisfies at least T clauses.",
                "First we show that if a clause bid bk is accepted, then either bl1 k or bl2 k is accepted (and thus either l1 k or l2 k is set to true, hence k is satisfied).",
                "If bk is accepted, at least one of cl1 k and cl2 k must be receiving at least 1; without loss of generality, say it is cl1 k , and say l1 k corresponds to variable v1 k (that is, it is +v1 k or −v1 k).",
                "If cl1 k does not receive at least 2, bl1 k is not accepted, and it is easy to check that the bids bv1 k , b+v1 k , b−v1 k contribute (at least) 1 less than is paid to c+v1 k and c+v1 k .",
                "But this is the same situation that we analyzed before, and we know it is impossible.",
                "All that remains to show is that at least T clause bids are accepted.",
                "We now show that b0 is accepted.",
                "Suppose it is not; then one of the bv must be accepted. (The solution is nonzero by assumption; if only some bk are accepted, the total payment from these bids is at most |K| 1 8|V ||K| < 1, which is not enough for any bid to be accepted; and if one of the bl is accepted, then the threshold for the corresponding bv is also reached.)",
                "For this v, bv1 k , b+v1 k , b−v1 k contribute (at least) 1 4|V | less than the total payments to c+v and c−v.",
                "Again, the other bv and bl cannot (by themselves) help to close this gap; and the bk can contribute at most |K| 1 8|V ||K| < 1 4|V | .",
                "It follows that b0 is accepted.",
                "Now, in order for b0 to be accepted, a total of 2|V |+ T 8|V ||K| must be donated.",
                "Because is not possible (for any v ∈ V ) that both b+v and b−v are accepted, it follows that the total payment by the bv and the bl can be at most 2|V | − 1 4 .",
                "Adding b0s payment of 1 4 + 1 16|V ||K| to this, we still need T − 1 2 8|V ||K| from the bk.",
                "But each one of them contributes at most 1 8|V ||K| , so at least T of them must be accepted.",
                "Corollary 1.",
                "Unless P=NP, there is no polynomial-time algorithm for approximating DONATION-CLEARING (with either the surplus or the total amount donated as the objective) within any ratio f(n), where f is a nonzero function of the size of the instance.",
                "This holds even if the DONATIONCLEARING structures satisfy all the properties given in Theorem 1.",
                "Proof.",
                "Suppose we had such a polynomial time algorithm, and applied it to the DONATION-CLEARING instances that were reduced from MAX2SAT instances in Theorem 1.",
                "It would return a nonzero solution when the MAX2SAT instance has a solution, and a zero solution otherwise.",
                "So we can decide whether arbitrary MAX2SAT instances are satisfiable this way, and it would follow that P=NP. (Solving the problem to optimality is NP-complete in many other (noncomparable or even more restricted) settings as well-we omit such results because of space constraint.)",
                "This should not be interpreted to mean that our approach is infeasible.",
                "First, as we will show, there are very expressive families of bids for which the problem is solvable in polynomial time.",
                "Second, NP-completeness is often overcome in practice (especially when the stakes are high).",
                "For instance, even though the problem of clearing combinatorial auctions is NP-complete [20] (even to approximate [21]), they are typically solved to optimality in practice. 7.",
                "MIXED INTEGER PROGRAMMING FORMULATION In this section, we give a mixed integer programming (MIP) formulation for the general problem.",
                "We also discuss in which special cases this formulation reduces to a linear programming (LP) formulation.",
                "In such cases, the problem is solvable in polynomial time, because linear programs can be solved in polynomial time [11].",
                "The variables of the MIP defining the final outcome are the payments made to the charities, denoted by πci , and the payments extracted from the bidders, πbj .",
                "In the case where we try to avoid direct payments and let the bidders pay the charities directly, we add variables πci,bj indicating how much bj pays to ci, with the constraints that for each ci, πci ≤ bj πci,bj ; and for each bj, πbj ≥ ci πci,bj .",
                "Additionally, there is a constraint πci,bj = 0 whenever bidder bj is unwilling to pay charity ci.",
                "The rest of the MIP can be phrased in terms of the πci and πbj .",
                "The objectives we have discussed earlier are both linear: surplus is given by n j=1 πbj − m i=1 πci , and total amount donated is given by m i=1 πci (coefficients can be added to represent different weights on the different charities in the objective).",
                "The constraint that the outcome should be valid (no deficit) is given simply by: n j=1 πbj ≥ m i=1 πci .",
                "For every bidder, for every charity, we define an additional utility variable ui j indicating the utility that this bidder derives from the payment to this charity.",
                "The bidders total 55 utility is given by another variable uj, with the constraint that uj = m i=1 ui j.",
                "Each ui j is given as a function of πci by the (piecewise linear) function provided by the bidder.",
                "In order to represent this function in the MIP formulation, we will merely place upper bounding constraints on ui j, so that it cannot exceed the given functions.",
                "The MIP solver can then push the ui j variables all the way up to the constraint, in order to extract as much payment from this bidder as possible.",
                "In the case where the ui j are concave, this is easy: if (sl, tl) and (sl+1, tl+1) are endpoints of a finite linear segment in the function, we add the constraint that ui j ≤ tl + πci −sl sl+1−sl (tl+1 − tl).",
                "If the final (infinite) segment starts at (sk, tk) and has slope d, we add the constraint that ui j ≤ tk + d(πci − sk).",
                "Using the fact that the function is concave, for each value of πci , the tightest upper bound on ui j is the one corresponding to the segment above that value of πci , and therefore these constraints are sufficient to force the correct value of ui j.",
                "When the function is not concave, we require (for the first time) some binary variables.",
                "First, we define another point on the function: (sk+1, tk+1) = (sk + M, tk + dM), where d is the slope of the infinite segment and M is any upper bound on the πcj .",
                "This has the effect that we will never be on the infinite segment again.",
                "Now, let xi,j l be an indicator variable that should be 1 if πci is below the lth segment of the function, and 0 otherwise.",
                "To effect this, first add a constraint k l=0 xi,j l = 1.",
                "Now, we aim to represent πci as a weighted average of its two neighboring si,j l .",
                "For 0 ≤ l ≤ k + 1, let λi,j l be the weight on si,j l .",
                "We add the constraint k+1 l=0 λi,j l = 1.",
                "Also, for 0 ≤ l ≤ k + 1, we add the constraint λi,j l ≤ xl−1 +xl (where x−1 and xk+1 are defined to be zero), so that indeed only the two neighboring si,j l have nonzero weight.",
                "Now we add the constraint πci = k+1 l=0 si,j l λi,j l , and now the λi,j l must be set correctly.",
                "Then, we can set ui j = k+1 l=0 ti,j l λi,j l . (This is a standard MIP technique [16].)",
                "Finally, each πbj is bounded by a function of uj by the (piecewise linear) function provided by the bidder (wj).",
                "Representing this function is entirely analogous to how we represented ui j as a function of πci . (Again we will need binary variables only if the function is not concave.)",
                "Because we only use binary variables when either a utility function ui j or a payment willingness function wj is not concave, it follows that if all of these are concave, our MIP formulation is simply a linear program-which can be solved in polynomial time.",
                "Thus: Theorem 2.",
                "If all functions ui j and wj are concave (and piecewise linear), the DONATION-CLEARING problem can be solved in polynomial time using linear programming.",
                "Even if some of these functions are not concave, we can simply replace each such function by the smallest upper bounding concave function, and use the linear programming formulation to obtain an upper bound on the objectivewhich may be useful in a search formulation of the general problem. 8.",
                "WHY ONE CANNOT DO MUCH BETTER THAN LINEAR PROGRAMMING One may wonder if, for the special cases of the DONATIONCLEARING problem that can be solved in polynomial time with linear programming, there exist special purpose algorithms that are much faster than linear programming algorithms.",
                "In this section, we show that this is not the case.",
                "We give a reduction from (the decision variant of) the general linear programming problem to (the decision variant of) a special case of the DONATION-CLEARING problem (which can be solved in polynomial time using linear programming). (The decision variant of an optimization problem asks the binary question: Can the objective value exceed o?)",
                "Thus, any special-purpose algorithm for solving the decision variant of this special case of the DONATIONCLEARING problem could be used to solve a decision question about an arbitrary linear program just as fast. (And thus, if we are willing to call the algorithm a logarithmic number of times, we can solve the optimization version of the linear program.)",
                "We first observe that for linear programming, a decision question about the objective can simply be phrased as another constraint in the LP (forcing the objective to exceed the given value); then, the original decision question coincides with asking whether the resulting linear program has a feasible solution.",
                "Theorem 3.",
                "The question of whether an LP (given by a set of linear constraints4 ) has a feasible solution can be modeled as a DONATION-CLEARING instance with payment maximization as the objective, with 2v charities and v + c bids (where v is the number of variables in the LP, and c is the number of constraints).",
                "In this model, each bid bj has only linear ui j functions, and is a partially acceptable threshold bid (wj(u) = tj for u ≥ sj, otherwise wj(u) = utj sj ).",
                "The v bids corresponding to the variables mention only two charities each; the c bids corresponding to the constraints mention only two times the number of variables in the corresponding constraint.",
                "Proof.",
                "For every variable xi in the LP, let there be two charities, c+xi and c−xi .",
                "Let H be some number such that if there is a feasible solution to the LP, there is one in which every variable has absolute value at most H. In the following, we will represent bids as follows: ({(ck, ak)}, s, t) indicates that uk j (πck ) = akπck (this function is 0 for ck not mentioned in the bid), and wj(uj) = t for uj ≥ s, wj(uj) = uj t s otherwise.",
                "For every variable xi in the LP, let there be a bid bxi = ({(c+xi , 1), (c−xi , 1)}, 2H, 2H − c v ).",
                "For every constraint i rj i xi ≤ sj in the linear program, let there be a bid bj = ({(c−xi , rj i )}i:r j i >0 ∪ {(c+xi , −rj i )}i:r j i <0 , ( i |rj i |)H − sj, 1).",
                "Let the target total amount donated be 2vH.",
                "Suppose there is a feasible solution (x∗ 1, x∗ 2, . . . , x∗ v) to the LP.",
                "Without loss of generality, we can suppose that |x∗ i | ≤ H for all i.",
                "Then, in the DONATION-CLEARING instance, 4 These constraints must include bounds on the variables (including nonnegativity bounds), if any. 56 for every i, let πc+xi = H + x∗ i , and let πc−xi = H − x∗ i (for a total payment of 2H to these two charities).",
                "This allows us to extract the maximum payment from the bids bxi -a total payment of 2vH − c. Additionally, the utility of bidder bj is now i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i ≥ ( i |rj i |)H − sj (where the last inequality stems from the fact that constraint j must be satisfied in the LP solution), so it follows we can extract the maximum payment from all the bidders bj, for a total payment of c. It follows that we can extract the required 2vH payment from the bidders, and there exists a solution to the DONATION-CLEARING instance with a total amount donated of at least 2vH.",
                "Now suppose there is a solution to the DONATIONCLEARING instance with a total amount donated of at least vH.",
                "Then the maximum payment must be extracted from each bidder.",
                "From the fact that the maximum payment must be extracted from each bidder bxi , it follows that for each i, πc+xi + πc−xi ≥ 2H.",
                "Because the maximum extractable total payment is 2vH, it follows that for each i, πc+xi + πc−xi = 2H.",
                "Let x∗ i = πc+xi − H = H − πc−xi .",
                "Then, from the fact that the maximum payment must be extracted from each bidder bj, it follows that ( i |rj i |)H − sj ≤ i:r j i >0 rj i πc−xi + i:r j i <0 −rj i πc+xi = i:r j i >0 rj i (H − x∗ i ) + i:r j i <0 −rj i (H + x∗ i ) = ( i |rj i |)H − i rj i x∗ i .",
                "Equivalently, i rj i x∗ i ≤ sj.",
                "It follows that the x∗ i constitute a feasible solution to the LP. 9.",
                "QUASILINEAR BIDS Another class of bids of interest is the class of quasilinear bids.",
                "In a quasilinear bid, the bidders payment willingness function is linear in utility: that is, wj = uj. (Because the units of utility are arbitrary, we may as well let them correspond exactly to units of money-so we do not need a constant multiplier.)",
                "In most cases, quasilinearity is an unreasonable assumption: for example, usually bidders have a limited budget for donations, so that the payment willingness will stop increasing in utility after some point (or at least increase slower in the case of a softer budget constraint).",
                "Nevertheless, quasilinearity may be a reasonable assumption in the case where the bidders are large organizations with large budgets, and the charities are a few small projects requiring relatively little money.",
                "In this setting, once a certain small amount has been donated to a charity, a bidder will derive no more utility from more money being donated from that charity.",
                "Thus, the bidders will never reach a high enough utility for their budget constraint (even when it is soft) to take effect, and thus a linear approximation of their payment willingness function is reasonable.",
                "Another reason for studying the quasilinear setting is that it is the easiest setting for <br>mechanism design</br>, which we will discuss shortly.",
                "In this section, we will see that the clearing problem is much easier in the case of quasilinear bids.",
                "First, we address the case where we are trying to maximize surplus (which is the most natural setting for <br>mechanism design</br>).",
                "The key observation here is that when bids are quasilinear, the clearing problem decomposes across charities.",
                "Lemma 1.",
                "Suppose all bids are quasilinear, and surplus is the objective.",
                "Then we can clear the market optimally by clearing the market for each charity individually.",
                "That is, for each bidder bj, let πbj = ci πbi j .",
                "Then, for each charity ci, maximize ( bj πbi j ) − πci , under the constraint that for every bidder bj, πbi j ≤ ui j(πci ).",
                "Proof.",
                "The resulting solution is certainly valid: first of all, at least as much money is collected as is given away, because bj πbj − ci πci = bj ci πbi j − ci πci = ci (( bj πbi j ) − πci )-and the terms of this summation are the objectives of the individual optimization problems, each of which can be set at least to 0 (by setting all the variables are set to 0), so it follows that the expression is nonnegative.",
                "Second, no bidder bj pays more than she is willing to, because uj −πbj = ci ui j(πci )− ci πbi j = ci (ui j(πci )−πbi j )-and the terms of this summation are nonnegative by the constraints we imposed on the individual optimization problems.",
                "All that remains to show is that the solution is optimal.",
                "Because in an optimal solution, we will extract as much payment from the bidders as possible given the πci , all we need to show is that the πci are set optimally by this approach.",
                "Let π∗ ci be the amount paid to charity πci in some optimal solution.",
                "If we change this amount to πci and leave everything else unchanged, this will only affect the payment that we can extract from the bidders because of this particular charity, and the difference in surplus will be bj ui j(πci ) − ui j(π∗ ci ) − πci + π∗ ci .",
                "This expression is, of course, 0 if πci = π∗ ci .",
                "But now notice that this expression is maximized as a function of πci by the decomposed solution for this charity (the terms without πci in them do not matter, and of course in the decomposed solution we always set πbi j = ui j(πci )).",
                "It follows that if we change πci to the decomposed solution, the change in surplus will be at least 0 (and the solution will still be valid).",
                "Thus, we can change the πci one by one to the decomposed solution without ever losing any surplus.",
                "Theorem 4.",
                "When all bids are quasilinear and surplus is the objective, DONATION-CLEARING can be done in linear time.",
                "Proof.",
                "By Lemma 1, we can solve the problem separately for each charity.",
                "For charity ci, this amounts to maximizing ( bj ui j(πci )) − πci as a function of πci .",
                "Because all its terms are piecewise linear functions, this whole function is piecewise linear, and must be maximized at one of the points where it is nondifferentiable.",
                "It follows that we need only check all the points at which one of the terms is nondifferentiable.",
                "Unfortunately, the decomposing lemma does not hold for payment maximization.",
                "Proposition 1.",
                "When the objective is payment maximization, even when bids are quasilinear, the solution obtained by decomposing the problem across charities is in general not optimal (even with concave bids). 57 Proof.",
                "Consider a single bidder b1 placing the following quasilinear bid over two charities c1 and c2: u1 1(πc1 ) = 2πci for 0 ≤ πci ≤ 1, u1 1(πc1 ) = 2 + πci −1 4 otherwise; u2 1(πc2 ) = πci 2 .",
                "The decomposed solution is πc1 = 7 3 , πc2 = 0, for a total donation of 7 3 .",
                "But the solution πc1 = 1, πc2 = 2 is also valid, for a total donation of 3 > 7 3 .",
                "In fact, when payment maximization is the objective, DONATION-CLEARING remains (weakly) NP-complete in general. (In the remainder of the paper, proofs are omitted because of space constraint.)",
                "Theorem 5.",
                "DONATION-CLEARING is (weakly) NPcomplete when payment maximization is the objective, even when every bid is concerns only one charity (and has a stepfunction utility function for this charity), and is quasilinear.",
                "However, when the bids are also concave, a simple greedy clearing algorithm is optimal.",
                "Theorem 6.",
                "Given a DONATION-CLEARING instance with payment maximization as the objective where all bids are quasilinear and concave, consider the following algorithm.",
                "Start with πci = 0 for all charities.",
                "Then, letting γci = d bj ui j (πci ) dπci (at nondifferentiable points, these derivatives should be taken from the right), increase πc∗ i (where c∗ i ∈ arg maxci γci ), until either γc∗ i is no longer the highest (in which case, recompute c∗ i and start increasing the corresponding payment), or bj uj = ci πci and γc∗ i < 1.",
                "Finally, let πbj = uj. (A similar greedy algorithm works when the objective is surplus and the bids are quasilinear and concave, with as only difference that we stop increasing the payments as soon as γc∗ i < 1.) 10.",
                "INCENTIVE COMPATIBILITY Up to this point, we have not discussed the bidders incentives for bidding any particular way.",
                "Specifically, the bids may not truthfully reflect the bidders preferences over charities because a bidder may bid strategically, misrepresenting her preferences in order to obtain a result that is better to herself.",
                "This means the mechanism is not strategy-proof. (We will show some concrete examples of this shortly.)",
                "This is not too surprising, because the mechanism described so far is, in a sense, a first-price mechanism, where the mechanism will extract as much payment from a bidder as her bid allows.",
                "Such mechanisms (for example, first-price auctions, where winners pay the value of their bids) are typically not strategy-proof: if a bidder reports her true valuation for an outcome, then if this outcome occurs, the payment the bidder will have to make will offset her gains from the outcome completely.",
                "Of course, we could try to change the rules of the game-which outcome (payment vector to charities) do we select for which bid vector, and which bidder pays how much-in order to make bidding truthfully beneficial, and to make the outcome better with regard to the bidders true preferences.",
                "This is the field of <br>mechanism design</br>.",
                "In this section, we will briefly discuss the options that <br>mechanism design</br> provides for the expressive charity donation problem. 10.1 Strategic bids under the first-price mechanism We first point out some reasons for bidders to misreport their preferences under the first-price mechanism described in the paper up to this point.",
                "First of all, even when there is only one charity, it may make sense to underbid ones true valuation for the charity.",
                "For example, suppose a bidder would like a charity to receive a certain amount x, but does not care if the charity receives more than that.",
                "Additionally, suppose that the other bids guarantee that the charity will receive at least x no matter what bid the bidder submits (and the bidder knows this).",
                "Then the bidder is best off not bidding at all (or submitting a utility for the charity of 0), to avoid having to make any payment. (This is known in economics as the free rider problem [14].",
                "With multiple charities, another kind of manipulation may occur, where the bidder attempts to steer others payments towards her preferred charity.",
                "Suppose that there are two charities, and three bidders.",
                "The first bidder bids u1 1(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 1(πc2 ) = 1 if πc2 ≥ 1, u2 1(πc2 ) = 0 otherwise; and w1(u1) = u1 if u1 ≤ 1, w1(u1) = 1+ 1 100 (u1 −1) otherwise.",
                "The second bidder bids u1 2(πc1 ) = 1 if πc1 ≥ 1, u1 1(πc1 ) = 0 otherwise; u2 2(πc2 ) = 0 (always); w2(u2) = 1 4 u2 if u2 ≤ 1, w2(u2) = 1 4 + 1 100 (u2 −1) otherwise.",
                "Now, the third bidders true preferences are accurately represented5 by the bid u1 3(πc1 ) = 1 if πc1 ≥ 1, u1 3(πc1 ) = 0 otherwise; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc1 ) = 0 otherwise; and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 + 1 100 (u3 − 1) otherwise.",
                "Now, it is straightforward to check that, if the third bidder bids truthfully, regardless of whether the objective is surplus maximization or total donated, charity 1 will receive at least 1, and charity 2 will receive less than 1.",
                "The same is true if bidder 3 does not place a bid at all (as in the previous type of manipulation); hence bidder 2s utility will be 1 in this case.",
                "But now, if bidder 3 reports u1 3(πc1 ) = 0 everywhere; u2 3(πc2 ) = 3 if πc2 ≥ 1, u2 3(πc2 ) = 0 otherwise (this part of the bid is truthful); and w3(u3) = 1 3 u3 if u3 ≤ 1, w3(u3) = 1 3 otherwise; then charity 2 will receive at least 1, and bidder 3 will have to pay at most 1 3 .",
                "Because up to this amount of payment, one unit of money corresponds to three units of utility to bidder 3, it follows his utility is now at least 3 − 1 = 2 > 1.",
                "We observe that in this case, the strategic bidder is not only affecting how much the bidders pay, but also how much the charities receive. 10.2 <br>mechanism design</br> in the quasilinear setting There are four reasons why the <br>mechanism design</br> approach is likely to be most successful in the setting of quasilinear preferences.",
                "First, historically, <br>mechanism design</br> has been been most successful when the quasilinear assumption could be made.",
                "Second, because of this success, some very general mechanisms have been discovered for the quasilinear setting (for instance, the VCG mechanisms [24, 4, 10], or the dAGVA mechanism [6, 1]) which we could apply directly to the expressive charity donation problem.",
                "Third, as we saw in Section 9, the clearing problem is much easier in 5 Formally, this means that if the bidder is forced to pay the full amount that his bid allows for a particular vector of payments to charities, the bidder is indifferent between this and not participating in the mechanism at all. (Compare this to bidding truthfully in a first-price auction.) 58 this setting, and thus we are less likely to run into computational trouble for the <br>mechanism design</br> problem.",
                "Fourth, as we will show shortly, the quasilinearity assumption in some cases allows for decomposing the <br>mechanism design</br> problem over the charities (as it did for the simple clearing problem).",
                "Moreover, in the quasilinear setting (unlike in the general setting), it makes sense to pursue social welfare (the sum of the utilities) as the objective, because now 1) units of utility correspond directly to units of money, so that we do not have the problem of the bidders arbitrarily scaling their utilities; and 2) it is no longer possible to give a payment willingness function of 0 while still affecting the donations through a utility function.",
                "Before presenting the decomposition result, we introduce some terms from game theory.",
                "A type is a preference profile that a bidder can have and can report (thus, a type report is a bid).",
                "Incentive compatibility (IC) means that bidders are best off reporting their preferences truthfully; either regardless of the others types (in dominant strategies), or in expectation over them (in Bayes-Nash equilibrium).",
                "Individual rationality (IR) means agents are at least as well off participating in the mechanism as not participating; either regardless of the others types (ex-post), or in expectation over them (ex-interim).",
                "A mechanism is budget balanced if there is no flow of money into or out of the system-in general (ex-post), or in expectation over the type reports (ex-ante).",
                "A mechanism is efficient if it (always) produces the efficient allocation of wealth to charities.",
                "Theorem 7.",
                "Suppose all agents preferences are quasilinear.",
                "Furthermore, suppose that there exists a single-charity mechanism M that, for a certain subclass P of (quasilinear) preferences, under a given solution concept S (implementation in dominant strategies or Bayes-Nash equilibrium) and a given notion of individual rationality R (ex post, ex interim, or none), satisfies a certain notion of budget balance (ex post, ex ante, or none), and is ex-post efficient.",
                "Then there exists such a mechanism for any number of charities.",
                "Two mechanisms that satisfy efficiency (and can in fact be applied directly to the multiple-charity problem without use of the previous theorem) are the VCG (which is incentive compatible in dominant strategies) and dAGVA (which is incentive compatible only in Bayes-Nash equilibrium) mechanisms.",
                "Each of them, however, has a drawback that would probably make it impractical in the setting of donations to charities.",
                "The VCG mechanism is not budget balanced.",
                "The dAGVA mechanism does not satisfy ex-post individual rationality.",
                "In the next subsection, we will investigate if we can do better in the setting of donations to charities. 10.3 Impossibility of efficiency In this subsection, we show that even in a very restricted setting, and with minimal requirements on IC and IR constraints, it is impossible to create a mechanism that is efficient.",
                "Theorem 8.",
                "There is no mechanism which is ex-post budget balanced, ex-post efficient, and ex-interim individually rational with Bayes-Nash equilibrium as the solution concept (even with only one charity, only two quasilinear bidders, with identical type distributions (uniform over two types, with either both utility functions being step functions or both utility functions being concave piecewise linear functions)).",
                "The case of step-functions in this theorem corresponds exactly to the case of a single, fixed-size, nonexcludable public good (the public good being that the charity receives the desired amount)-for which such an impossibility result is already known [14].",
                "Many similar results are known, probably the most famous of which is the Myerson-Satterthwaite impossibility result, which proves the impossibility of efficient bilateral trade under the same requirements [15].",
                "Theorem 7 indicates that there is no reason to decide on donations to multiple charities under a single mechanism (rather than a separate one for each charity), when an efficient mechanism with the desired properties exists for the single-charity case.",
                "However, because under the requirements of Theorem 8, no such mechanism exists, there may be a benefit to bringing the charities under the same umbrella.",
                "The next proposition shows that this is indeed the case.",
                "Proposition 2.",
                "There exist settings with two charities where there exists no ex-post budget balanced, ex-post efficient, and ex-interim individually rational mechanism with Bayes-Nash equilibrium as the solution concept for either charity alone; but there exists an ex-post budget balanced, ex-post efficient, and ex-post individually rational mechanism with dominant strategies as the solution concept for both charities together. (Even when the conditions are the same as in Theorem 8, apart from the fact that there are now two charities.) 11.",
                "CONCLUSION We introduced a bidding language for expressing very general types of matching offers over multiple charities.",
                "We formulated the corresponding clearing problem (deciding how much each bidder pays, and how much each charity receives), and showed that it is NP-complete to approximate to any ratio even in very restricted settings.",
                "We gave a mixed-integer program formulation of the clearing problem, and showed that for concave bids (where utility functions and payment willingness function are concave), the program reduces to a linear program and can hence be solved in polynomial time.",
                "We then showed that the clearing problem for a subclass of concave bids is at least as hard as the decision variant of linear programming, suggesting that we cannot do much better than a linear programming implementation for such bids.",
                "Subsequently, we showed that the clearing problem is much easier when bids are quasilinear (where payment willingness functions are linear)-for surplus, the problem decomposes across charities, and for payment maximization, a greedy approach is optimal if the bids are concave (although this latter problem is weakly NP-complete when the bids are not concave).",
                "For the quasilinear setting, we studied the <br>mechanism design</br> question of making the bidders report their preferences truthfully rather than strategically.",
                "We showed that an ex-post efficient mechanism is impossible even with only one charity and a very restricted class of bids.",
                "We also showed that even though the clearing problem decomposes over charities in the quasilinear setting, there may be benefits to linking the charities from a <br>mechanism design</br> standpoint.",
                "There are many directions for future research.",
                "One is to build a web-based implementation of the (first-price) mechanism proposed in this paper.",
                "Another is to study the computational scalability of our MIP/LP approach.",
                "It is also 59 important to identify other classes of bids (besides concave ones) for which the clearing problem is tractable.",
                "Much crucial work remains to be done on the <br>mechanism design</br> problem.",
                "Finally, are there good iterative mechanisms for charity donation?6 12.",
                "REFERENCES [1] K. Arrow.",
                "The property rights doctrine and demand revelation under incomplete information.",
                "In M. Boskin, editor, Economics and human welfare.",
                "New York Academic Press, 1979. [2] L. M. Ausubel and P. Milgrom.",
                "Ascending auctions with package bidding.",
                "Frontiers of Theoretical Economics, 1, 2002.",
                "No. 1, Article 1. [3] Y. Bartal, R. Gonen, and N. Nisan.",
                "Incentive compatible multi-unit combinatorial auctions.",
                "In Theoretical Aspects of Rationality and Knowledge (TARK IX), Bloomington, Indiana, USA, 2003. [4] E. H. Clarke.",
                "Multipart pricing of public goods.",
                "Public Choice, 11:17-33, 1971. [5] V. Conitzer and T. Sandholm.",
                "Complexity of <br>mechanism design</br>.",
                "In Proceedings of the 18th Annual Conference on Uncertainty in Artificial Intelligence (UAI-02), pages 103-110, Edmonton, Canada, 2002. [6] C. dAspremont and L. A. G´erard-Varet.",
                "Incentives and incomplete information.",
                "Journal of Public Economics, 11:25-45, 1979. [7] M. R. Garey, D. S. Johnson, and L. Stockmeyer.",
                "Some simplified NP-complete graph problems.",
                "Theoretical Computer Science, 1:237-267, 1976. [8] D. Goldburg and S. McElligott.",
                "Red cross statement on official donation locations. 2001.",
                "Press release, http://www.redcross.org/press/disaster/ds pr/ 011017legitdonors.html. [9] R. Gonen and D. Lehmann.",
                "Optimal solutions for multi-unit combinatorial auctions: Branch and bound heuristics.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 13-20, Minneapolis, MN, Oct. 2000. [10] T. Groves.",
                "Incentives in teams.",
                "Econometrica, 41:617-631, 1973. [11] L. Khachiyan.",
                "A polynomial algorithm in linear programming.",
                "Soviet Math.",
                "Doklady, 20:191-194, 1979. [12] R. Lavi, A. MuAlem, and N. Nisan.",
                "Towards a characterization of truthful combinatorial auctions.",
                "In Proceedings of the Annual Symposium on Foundations of Computer Science (FOCS), 2003. [13] D. Lehmann, L. I. OCallaghan, and Y. Shoham.",
                "Truth revelation in rapid, approximately efficient combinatorial auctions.",
                "Journal of the ACM, 49(5):577-602, 2002.",
                "Early version appeared in ACMEC-99. 6 Compare, for example, iterative mechanisms in the combinatorial auction setting [19, 25, 2]. [14] A. Mas-Colell, M. Whinston, and J. R. Green.",
                "Microeconomic Theory.",
                "Oxford University Press, 1995. [15] R. Myerson and M. Satterthwaite.",
                "Efficient mechanisms for bilateral trading.",
                "Journal of Economic Theory, 28:265-281, 1983. [16] G. L. Nemhauser and L. A. Wolsey.",
                "Integer and Combinatorial Optimization.",
                "John Wiley & Sons, 1999.",
                "Section 4, page 11. [17] N. Nisan.",
                "Bidding and allocation in combinatorial auctions.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 1-12, Minneapolis, MN, 2000. [18] N. Nisan and A. Ronen.",
                "Computationally feasible VCG mechanisms.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 242-252, Minneapolis, MN, 2000. [19] D. C. Parkes. iBundle: An efficient ascending price bundle auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 148-157, Denver, CO, Nov. 1999. [20] M. H. Rothkopf, A. Pekeˇc, and R. M. Harstad.",
                "Computationally manageable combinatorial auctions.",
                "Management Science, 44(8):1131-1147, 1998. [21] T. Sandholm.",
                "Algorithm for optimal winner determination in combinatorial auctions.",
                "Artificial Intelligence, 135:1-54, Jan. 2002.",
                "Conference version appeared at the International Joint Conference on Artificial Intelligence (IJCAI), pp. 542-547, Stockholm, Sweden, 1999. [22] T. Sandholm, S. Suri, A. Gilpin, and D. Levine.",
                "CABOB: A fast optimal algorithm for combinatorial auctions.",
                "In Proceedings of the Seventeenth International Joint Conference on Artificial Intelligence (IJCAI), pages 1102-1108, Seattle, WA, 2001. [23] J. Tagliabue.",
                "Global AIDS Funds Is Given Attention, but Not Money.",
                "The New York Times, June 1, 2003.",
                "Reprinted on http://www.healthgap.org/press releases/a03/ 060103 NYT HGAP G8 fund.html. [24] W. Vickrey.",
                "Counterspeculation, auctions, and competitive sealed tenders.",
                "Journal of Finance, 16:8-37, 1961. [25] P. R. Wurman and M. P. Wellman.",
                "AkBA: A progressive, anonymous-price combinatorial auction.",
                "In Proceedings of the ACM Conference on Electronic Commerce (ACM-EC), pages 21-29, Minneapolis, MN, Oct. 2000. [26] M. Yokoo.",
                "The characterization of strategy/false-name proof combinatorial auction protocols: Price-oriented, rationing-free protocol.",
                "In Proceedings of the Eighteenth International Joint Conference on Artificial Intelligence (IJCAI), Acapulco, Mexico, Aug. 2003. 60"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Para el entorno cuasilínico, estudiamos la pregunta del \"diseño del mecanismo\".diseño de mecanismo",
                "También mostramos que puede haber beneficios al vincular las organizaciones benéficas desde un punto de vista del \"diseño del mecanismo\".diseño de mecanismo",
                "Hacia el final del documento, también estudiamos el problema del \"diseño del mecanismo\" de motivar a los postores a ofertar con sinceridad.diseño de mecanismo",
                "Otra razón para estudiar el entorno cuasilíneo es que es la configuración más fácil para el \"diseño de mecanismo\", que discutiremos en breve.diseño de mecanismo",
                "Primero, abordamos el caso en el que estamos tratando de maximizar el excedente (que es el entorno más natural para el \"diseño del mecanismo\").diseño de mecanismo",
                "Este es el campo del \"diseño del mecanismo\".diseño de mecanismo",
                "En esta sección, discutiremos brevemente las opciones que el \"diseño de mecanismo\" proporciona el problema de donación de caridad expresiva.10.1 Ofertas estratégicas bajo el mecanismo de primer precio, primero señalamos algunas razones para que los postores informen mal sus preferencias bajo el mecanismo de primer precio descrito en el documento hasta este punto.diseño de mecanismo",
                "Observamos que en este caso, el postor estratégico no solo está afectando cuánto pagan los postores, sino también cuánto reciben las organizaciones benéficas.10.2 \"Diseño del mecanismo\" en el entorno cuasilíneo Hay cuatro razones por las cuales el enfoque del \"diseño del mecanismo\" es probable que tenga más éxito en el contexto de las preferencias cuasilínicas.diseño de mecanismo",
                "Primero, históricamente, el \"diseño de mecanismo\" ha tenido más éxito cuando se podría hacer la suposición cuasilínea.diseño de mecanismo",
                "En tercer lugar, como vimos en la Sección 9, el problema de compensación es mucho más fácil en 5 formalmente, esto significa que si el postor se ve obligado a pagar el monto total que su oferta permite un vector particular de pagos a organizaciones benéficas, el postor es indiferente entreEsto y no participando en el mecanismo en absoluto.(Compare esto con la oferta con sinceridad en una subasta de primer precio). 58 Esta configuración, y por lo tanto, es menos probable que tengamos problemas computacionales para el problema del \"diseño del mecanismo\".diseño de mecanismo",
                "Cuarto, como mostraremos en breve, la suposición de cuasilinealidad en algunos casos permite descomponer el problema del \"diseño del mecanismo\" sobre las organizaciones benéficas (como lo hizo para el problema de compensación simple).diseño de mecanismo",
                "Para el entorno cuasilíneo, estudiamos la cuestión del \"diseño del mecanismo\" de hacer que los postores denuncien sus preferencias sinceramente en lugar de estratégicamente.diseño de mecanismo",
                "También demostramos que a pesar de que el problema de compensación se descompone sobre las organizaciones benéficas en el entorno cuasilíneo, puede haber beneficios al vincular las organizaciones benéficas desde un punto de vista del \"diseño del mecanismo\".diseño de mecanismo",
                "Queda mucho por hacer un trabajo crucial sobre el problema del \"diseño del mecanismo\".diseño de mecanismo",
                "Complejidad del \"diseño del mecanismo\".diseño de mecanismo"
            ],
            "translated_text": "",
            "candidates": [],
            "error": []
        }
    }
}