{
    "id": "C-46",
    "original_text": "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends. We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors. We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies. At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries. At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index. We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors. Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks. Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1. Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years. Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users. To achieve its goals, a typical sensor application needs access to both live and past sensor data. Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events. Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency. There have been a spectrum of approaches for constructing sensor storage systems. In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time. Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead. In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive. Further, all data is propagated to the server, regardless of whether it is ever used by the application. An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads. A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing. More complex read requests are handled by flooding. For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system. Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads. Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors. Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing. Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1. The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage. In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items. Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table. A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach. Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained. In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors. TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction. We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks. Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors. No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers. Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet. Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars. An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication. Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads. These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks. TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor. Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs. The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors. This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors. In-network index lookups are eliminated, reducing network overheads for read requests. This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks. To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks. Our design and implementation of TSAR has resulted in four contributions. At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper. This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able. This data structure has O(log n) expected search and update complexity. Further, the index provides a logically unified view of all data in the system. Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory. Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors. Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms. Further, the local store is optimized for time-series access to archived data, as is typical in many applications. Each sensor periodically sends a summary of its data to a proxy. TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries. More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives. Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors. Our implementation supports spatio-temporal, value, and rangebased queries on sensor data. Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype. While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting. Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network . The remainder of this paper is structured as follows. Section 2 presents key design issues that guide our work. Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively. Section 5 discusses our prototype implementation, and Section 6 presents our experimental results. We present related work in Section 7 and our conclusions in Section 8. 2. Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work. We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1). The lowest tier is assumed to form a dense deployment of lowpower sensors. A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB). The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint. The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited. In general, we assume radio communication to be substantially more expensive than accesses to flash memory. The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously. In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes. In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell. Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity. A typical sensor network deployment will contain multiple geographically distributed proxies. For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity. At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20]. In this work, we focus on applications that require access to past sensor data. To support such queries, the system needs to archive data on a persistent store. Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it. A large fraction of queries on sensor data can be expected to be spatio-temporal in nature. Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred. Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring). Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time. In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering. There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18]. However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures. Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values. Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value. Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries. Specifically, if a sensor reports a numerical value, then the index is constructed on these values. A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly. Hybrid value and spatio-temporal queries are also possible. Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August. These queries require an index on both time and value. In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future. For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission. But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data. We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search. To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system. Examples of this metadata are data attributes such as location and time, or selected or summarized data values. We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors. The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups. Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated. We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data. This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies. The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata. This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application. In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location. Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data. In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy. The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record. The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series. The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system. Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor. Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors. There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task. Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches. The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for. However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources. The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives. Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3. Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values. Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13]. The resulting data structure has two properties that make it ideal for sensor networks. First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval. Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value. Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data. Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network. Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy. Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi]. These intervals can correspond to time or value ranges that are used for indexing sensor data. No assumption is made about the size of an interval or about the amount of overlap between intervals. Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq]. The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently. In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1]. Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key. Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node. In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers. Lookups make use of ordered comparisons between the search key and existing index entries. In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed. Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root. In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes. In Figure 2 we see the process of searching for a particular value in a skip graph. The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on. Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse. In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level. We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n). Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows. In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows. The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain. Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion. The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1. To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain. One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string. Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level. Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries. In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}. Our data structure can be extended to range searches in a straightforward manner. The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree. The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key. Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk). The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound). To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors. To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.) If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done. Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done. Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism. Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree. The complexity of search is O(log n). The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query. Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry. For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element. It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed. The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost. In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node. These two modifications allow us to achieve reductions in asymptotic complexity of both update and search. As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree. The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting. However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system. If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings. Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements. When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements. An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.) When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements. The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1). An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages. Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.) Note that since searches are started at root elements of expected height log2 n, search complexity is not improved. For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case. In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree. Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root. In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element. The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps. To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages. The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message. Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph. By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived. A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data. Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue. Two distributed B-Trees were examined - P-Trees [6] and RP* [19]. Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures. DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4. Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier. TSAR implements two key mechanisms at the sensor tier. The first is a local archival store at each sensor node that is optimized for resource-constrained devices. The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics. The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query. These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy. To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data. While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained. Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting. Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store. Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data. In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing. Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection. Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer. The format of each data record is shown in Figure 6. Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc. Raw sensor data is stored in the data field of the record. The data field is opaque and application-specific-the storage system does not know or care about interpreting this field. A camera-based sensor, for instance, may store binary images in this data field. In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another. Our archival store supports three operations on records: create, read, and delete. Due to the append-only nature of the store, creation of records is simple and efficient. The create operation simply creates a new record and appends it to the tail of the store. Since records are always written at the tail, the store need not maintain a free space list. All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record. Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries. In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records. However, this can be quite complex for a small sensor node with limited resources. Consequently, TSAR sensors do not maintain any index for the data stored in their archive. Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory. The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7). Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy. Within this collection, records are accessed sequentially. When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address. Any queryspecific operation can then be performed on this data. Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management. The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy. While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications. This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data. When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy. Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive. In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both). The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value. As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries. The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data. TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives. The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive. If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio. If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits. The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary. Our focus in this paper is on the interval over which the summary is constructed. Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper. Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5. TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed. Our prototype employs Crossbow Stargate nodes to implement the proxy tier. Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1. The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver. The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication. The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor. The sensor nodes run TinyOS 1.1.8. In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector. The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives. Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier. In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up. Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory. The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6. The Mote sends a report to the proxy every N readings, summarizing the observed data. The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number. The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network. Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2). Spatial constraints are specified using sensor IDs. Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch. A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data). In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy. Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6. Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations. The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy. Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings. Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform. Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy. One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy. The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days. The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space. Our experimental evaluation has four parts. First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets. Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies. These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes. We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier. Finally, we demonstrate the adaptive summarization capability at each sensor node. The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads. We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets. For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index. Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well. Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages. Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost. Next, we evaluate the lookup performance of the index structure. Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure. Figures 9(a) and (b) depict our results. There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals. The initial lookup can be seen to takes log n messages, as expected. The costs of the subsequent linear traversal, however, are highly data dependent. For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)). The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b). Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance. We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies. We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups. Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs. Figure 10(a) depicts our results. In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements. This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure. Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases. Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade. Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures. In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element. Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure. Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible. To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries. TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries. Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used. The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy. Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case. However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture. Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements. In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature. For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote. The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device. The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table. Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead. Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers. In our setup, there are four proxies connected via 802.11 links and three sensors per proxy. The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3. Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size. Our evaluation metric is the end-to-end latency of query processing. A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s). The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user. We first measure query latency for different sensors in our multi-hop topology. Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)). Figure 11(b) provides a breakdown of the various components of the end-to-end latency. The dominant component of the total latency is the communication over one or more hops. The typical time to communicate over one hop is approximately 300ms. This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased. The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size. Not surprisingly, the overhead seen at the sensor is independent of the index size. The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency. This result is shown in Figure 12(a). The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads. As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet. Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor. Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query. The coarser the summary, the larger the memory region that needs to be accessed. For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size. In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element. More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost. With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported. However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values. These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports. The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits. As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases. Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled. The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant. To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity. We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples. As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7. Related Work In this section, we review prior work on storage and indexing techniques for sensor networks. While our work addresses both problems jointly, much prior work has considered them in isolation. The problem of archival storage of sensor data has received limited attention in sensor network literature. ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14]. Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives. Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources. In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors. The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data. In order to efficiently access a distributed sensor store, an index needs to be constructed of the data. Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored. Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events. The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g.: find temperature in the south-west quadrant), and if not, the query is flooded throughout the network. These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries. Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9]. Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18]. One such scheme is DCS [26], which provides a hash function for mapping from event name to location. DCS constructs a distributed structure that groups events together spatially by their named type. Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data. While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables. TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers. Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple. In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work. DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search. While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8. Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks. We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies. At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries. At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure. We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors. Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9. REFERENCES [1] James Aspnes and Gauri Shah. Skip graphs. In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley. Multidimensional binary search trees used for associative searching. Commun. ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri. Towards sensor database systems. In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon. CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein. Introduction to Algorithms. The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram. Querying Peer-to-Peer Networks Using P-Trees. Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han. ELF: an efficient log-structured flash file system for micro sensor nodes. In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004. ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy. PRESTO: A predictive storage architecture for sensor networks. In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann. An evaluation of multi-resolution storage in sensor networks. In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer. A system for simulation, emulation, and deployment of heterogeneous sensor networks. In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker. DIFS: A distributed index for features in sensor networks. Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman. R-trees: a dynamic index structure for spatial searching. In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984. ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman. Skipnet: A scalable overlay network with practical locality properties. In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister. System architecture directions for networked sensors. In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000. ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin. Directed diffusion: A scalable and robust communication paradigm for sensor networks. In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000. ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong. Multi-dimensional range queries in sensor networks. In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider. RP*: A family of order preserving scalable distributed data structures. In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong. TAG: a tiny aggregation service for ad-hoc sensor networks. In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki. High performance, low power sensor platforms featuring gigabyte scale storage. In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler. Versatile low power media access for wireless sensor networks. In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh. Skip lists: a probabilistic alternative to balanced trees. Commun. ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu. Data-centric storage in sensornets. In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker. A scalable content addressable network. In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker. GHT - a geographic hash-table for data-centric storage. In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/. James Reserve Data. 50",
    "original_translation": "Zar: una arquitectura de almacenamiento de sensores de dos niveles utilizando gráficos de olor a intervalo ∗ Peter Desnoyers, Deepak Ganesan y Prashant Shenoy Departamento de Ciencias de la Computación Universidad de Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, Shenoy@cs.umass.edu Abstract Archival El almacenamiento de datos del sensor es necesario para aplicaciones que consultan, extraen y analicen dichos datos para características y tendencias interesantes. Argumentamos que los sistemas de almacenamiento existentes están diseñados principalmente para jerarquías planas de nodos de sensores homogéneos y no explotan completamente la naturaleza de varios niveles de las redes de sensores emergentes, donde una aplicación puede comprender decenas de proxies atados, cada una administrando decenas a cientos de sensores sin ataduras. Presentamos TSAR, una arquitectura de almacenamiento fundamentalmente diferente que prevé la separación de datos de metadatos al emplear el archivo local en los sensores e indexación distribuida en los proxies. En el nivel proxy, TSAR emplea una nueva estructura de índice distribuido ordenado por múltiples resolución, el gráfico de omisión del intervalo, para soportar eficientemente las consultas espacio-temporales y de valor. En el nivel del sensor, TSAR admite un resumen adaptativo consciente de la energía que puede intercambiar el costo de transmitir metadatos a los representantes contra la sobrecarga de golpes falsos resultantes de consultar un índice de grano grueso. Implementamos TSAR en una prueba de prueba de sensor de dos niveles que comprende proxies basados en StarGate y sensores basados en motas. Nuestros experimentos demuestran los beneficios y la viabilidad de utilizar nuestra arquitectura de almacenamiento de eficiencia energética en redes de sensores de varios niveles. Categorías y descriptores de sujetos: C.2.4 [Networks de comunicación - Comunicación]: Sistemas distribuidos Términos generales: algoritmos, rendimiento, experimentación.1. Introducción 1.1 Motivación Muchos tipos diferentes de aplicaciones de sensores centrados en datos en red han surgido en los últimos años. Los sensores en estas aplicaciones detectan el entorno y generan datos que deben procesarse, filtrarse, interpretarse y archivarse para proporcionar una infraestructura útil a sus usuarios. Para lograr sus objetivos, una aplicación típica de sensor necesita acceso a datos de sensores en vivo y pasados. Mientras que el acceso a los datos en vivo es necesario en las aplicaciones de monitoreo y vigilancia, el acceso a datos pasados es necesario para aplicaciones como la minería de registros de sensores para detectar patrones inusuales, análisis de tendencias históricas y análisis post mortem de eventos particulares. El almacenamiento de archivos de datos del sensor pasado requiere un sistema de almacenamiento, cuyos atributos clave son: donde se almacenan los datos, ya sea indexado y cómo la aplicación puede acceder a estos datos de manera eficiente en energía con baja latencia. Ha habido un espectro de enfoques para construir sistemas de almacenamiento de sensores. En el más simple, los sensores transmiten datos o eventos a un servidor para el almacenamiento de archivo a largo plazo [3], donde el servidor a menudo indexa los datos para permitir un acceso eficiente en un momento posterior. Dado que los sensores pueden estar varios saltos de la estación base más cercana, se incurren en los costos de la red;Sin embargo, una vez que los datos están indexados y archivados, los accesos de datos posteriores se pueden manejar localmente en el servidor sin incurrir en sobrecarga de red. En este enfoque, el almacenamiento está centralizado, las lecturas son eficientes y baratas, mientras que las escrituras son caras. Además, todos los datos se propagan al servidor, independientemente de si alguna vez lo usan la aplicación. Un enfoque alternativo es tener cada datos o eventos de almacenamiento de sensores localmente (por ejemplo, en memoria flash), de modo que todas las escrituras sean locales y no incurran en gastos de comunicación. Una solicitud de lectura, como si un sensor en particular detectó un evento, requiere que se envíe un mensaje al sensor para su procesamiento. Las solicitudes de lectura más complejas se manejan por inundaciones. Por ejemplo, determinar si se detectó un intruso en un intervalo de tiempo particular requiere que la solicitud se inunde a todos los sensores del sistema. Por lo tanto, en este enfoque, el almacenamiento se distribuye, las escrituras son locales y económicas, mientras que las lecturas incurren en importantes gastos generales de la red. Las solicitudes que requieren inundaciones, debido a la falta de un índice, son costosas y pueden desperdiciar recursos de sensor preciosos, incluso si no se almacenan datos coincidentes en esos sensores. Sin embargo, los esfuerzos de investigación, como la difusión dirigida [17], han intentado reducir estos costos de lectura mediante el enrutamiento inteligente de mensajes. Entre estos dos extremos se encuentran varios otros sistemas de almacenamiento de sensores con diferentes compensaciones, resumidas en la Tabla 1. El enfoque de la tabla hash geográfica (GHT) [24, 26] aboga por el uso de un índice de inicio para aumentar la naturaleza completamente distribuida del almacenamiento del sensor. En este enfoque, cada elemento de datos tiene una clave asociada, y se utiliza una tabla de hash distribuida o geográfica para asignar las claves a los nodos que almacenan los elementos de datos correspondientes. Por lo tanto, las escrituras hacen que los elementos de datos se envíen a los nodos hash y también activen actualizaciones a la tabla hash en la red. Una solicitud de lectura requiere una búsqueda en la tabla hash en la red para localizar el nodo que almacena el elemento de datos 39;Observe que la presencia de un índice elimina la necesidad de inundaciones en este enfoque. La mayoría de estos enfoques asumen una arquitectura plana y homogénea en la que cada nodo del sensor está limitado por la energía. En este documento, proponemos una nueva arquitectura de almacenamiento llamada TSAR1 que refleja y explota la naturaleza de varios niveles de las redes de sensores emergentes, donde la aplicación se compone de decenas de proxies de sensores atados (o más), cada una controladora o cientos de sensores sin ataduras. TSAR es un componente de nuestra arquitectura de almacenamiento predictivo de Presto [8], que combina el almacenamiento de archivo con almacenamiento en caché y predicción. Creemos que es necesaria una arquitectura de almacenamiento fundamentalmente diferente para abordar la naturaleza de varios niveles de futuras redes de sensores. Específicamente, la arquitectura de almacenamiento necesita explotar la naturaleza rica en recursos de los proxies, al tiempo que respeta las limitaciones de recursos en los sensores remotos. Ninguna arquitectura de almacenamiento de sensores existente aborda explícitamente esta dicotomía en las capacidades de recursos de diferentes niveles. Cualquier sistema de almacenamiento de sensores también debe explotar cuidadosamente las tendencias tecnológicas actuales, lo que indica que las capacidades de los recuerdos de flash continúan aumentando según la ley de los Moores, mientras que sus costos continúan cayendo en picado. Por lo tanto, pronto será factible equipar cada sensor con 1 GB de almacenamiento de flash por unas pocas decenas de dólares. Un argumento aún más convincente es el costo de energía del almacenamiento flash, que puede ser hasta dos órdenes de magnitud más bajos que el de la comunicación. Los recuerdos más nuevos de NAND Flash ofrecen costos de energía de escritura y borrado muy bajos: nuestra comparación de un almacenamiento Flash Samsung Nand de 1 GB [16] y el ChIPCON CC2420 802.15.4 Radio inalámbrico [4] en la Sección 6.2 indica una relación 1: 100 en por byteCosto de energía entre los dos dispositivos, incluso antes de contabilizar los gastos generales del protocolo de red. Estas tendencias, junto con la naturaleza limitada por la energía de los sensores sin ataduras, indican que el almacenamiento local ofrece una alternativa viable y eficiente en la energía a la comunicación en las redes de sensores. TSAR explota estas tendencias almacenando datos o eventos localmente en el almacenamiento flash de eficiencia energética en cada sensor. Los sensores envían información de identificación concisa, que llamamos metadatos, a un proxy cercano;Dependiendo de la representación utilizada, estos metadatos pueden ser un orden de magnitud o más más pequeño que los datos en sí, lo que impuso costos de comunicación mucho más bajos. Los proxies ricos en recursos interactúan entre sí para construir un índice distribuido de los metadatos informados de todos los sensores y, por lo tanto, un índice de los datos asociados almacenados en los sensores. Este índice proporciona una vista unificada y lógica de los datos distribuidos, y permite que una aplicación consulte y lea los datos anteriores de manera eficiente: el índice se utiliza para identificar todos los datos que coinciden con una solicitud de lectura, seguido de mensajes para recuperar esos datos de los sensores correspondientes. Se eliminan las búsquedas de índice en la red, reduciendo los gastos generales de la red para las solicitudes de lectura. Esta separación de datos, que se almacena en los sensores, y los metadatos, que se almacenan en los proxies, permite a TSAR reducir los gastos de energía en los sensores, aprovechando los recursos en los proxies atados.1.2 Contribuciones Este documento presenta TSAR, una nueva arquitectura de almacenamiento de dos niveles para redes de sensores. Hasta donde sabemos, este es el primer sistema de almacenamiento de sensores que se adapta explícitamente para las redes de sensores múltiples emergentes. Nuestro diseño e implementación de TSAR ha resultado en cuatro contribuciones. En el núcleo de la arquitectura del zar hay una nueva estructura de índice distribuido basada en gráficos de omisión de intervalos que presentamos en este documento. Esta estructura de índice puede almacenar resúmenes gruesos de los datos del sensor y organizarlos de manera ordenada para buscar fácilmente el zar: arquitectura de almacenamiento escalonada para redes de sensores.capaz. Esta estructura de datos tiene O (log n) esperado de búsqueda y complejidad de actualización. Además, el índice proporciona una vista lógicamente unificada de todos los datos en el sistema. En segundo lugar, a nivel de sensor, cada sensor mantiene un archivo local que almacena datos en la memoria flash. Nuestra arquitectura de almacenamiento es totalmente estancada en cada sensor desde la perspectiva del índice de metadatos;Todas las estructuras de índice se mantienen en los proxies ricos en recursos, y solo se envían solicitudes directas o consultas simples en ubicaciones de almacenamiento explícitamente identificadas a los sensores. El almacenamiento en el sensor remoto se trata en efecto como un apéndice del proxy, lo que resulta en una baja complejidad de implementación, lo que lo hace ideal para plataformas de sensores pequeñas y recompensadas en recursos. Además, la tienda local está optimizada para el acceso de series de tiempo a los datos archivados, como es típico en muchas aplicaciones. Cada sensor envía periódicamente un resumen de sus datos a un proxy. TSAR emplea una nueva técnica de resumen adaptativa que adapta la granularidad de los datos informados en cada resumen a la relación de golpes falsos para consultas de aplicación. Se envían más resúmenes de grano fino cuando se observan más falsos positivos, equilibrando así el costo de energía de las actualizaciones de metadatos y los falsos positivos. En tercer lugar, hemos implementado un prototipo de TSAR en una prueba de prueba de varios niveles que comprende proxies basados en Stargate y sensores basados en mote. Nuestra implementación admite consultas espacio-temporales, de valor y a base de rango en los datos del sensor. Cuarto, realizamos una evaluación experimental detallada de TSAR utilizando una combinación de Emstar/EMTOS [10] y nuestro prototipo. Mientras que nuestros experimentos EMSTAR/EMTOS se centran en la escalabilidad del TSAR en entornos más grandes, nuestra evaluación de prototipos implica mediciones de latencia y energía en un entorno real. Nuestros resultados demuestran la propiedad de escala logarítmica del gráfico de salto disperso y la baja latencia de las consultas de extremo a extremo en una red múltiple de cicatrices múltiple. El resto de este trabajo se estructura de la siguiente manera. La Sección 2 presenta problemas de diseño clave que guían nuestro trabajo. Las Secciones 3 y 4 presentan el índice de nivel de proxy y el archivo local y el resumen en un sensor, respectivamente. La Sección 5 discute nuestra implementación de prototipos, y la Sección 6 presenta nuestros resultados experimentales. Presentamos el trabajo relacionado en la Sección 7 y nuestras conclusiones en la Sección 8. 2. Consideraciones de diseño En esta sección, primero describimos los diversos componentes de una red de sensores de varios niveles asumidas en nuestro trabajo. Luego presentamos una descripción de los modelos de uso esperados para este sistema, seguido de varios principios que abordan estos factores que guían el diseño de nuestro sistema de almacenamiento.2.1 Modelo del sistema imaginamos una red de sensores de varios niveles que comprende múltiples niveles: un nivel inferior de nodos de sensores remotos sin atar, un nivel medio de proxies de sensores atados y un nivel superior de aplicaciones y terminales de usuarios (ver Figura 1). Se supone que el nivel más bajo forma un despliegue denso de sensores de baja potencia. Un nodo del sensor canónico en este nivel está equipado con sensores de baja potencia, un microcontrolador y una radio, así como una cantidad significativa de memoria flash (por ejemplo, 1 GB). La restricción común para este nivel es la energía y la necesidad de una larga vida a pesar de una restricción de energía finita. El uso de radio, procesador, RAM y la memoria flash consumen energía, que debe ser limitada. En general, asumimos que la comunicación por radio es sustancialmente más costosa que los accesos a la memoria flash. El nivel medio consiste en proxies de sensores ricos en potencia que tienen recursos significativos de cálculo, memoria y almacenamiento y pueden usar 40 Tabla 1: Características del sistema de datos de sistemas de almacenamiento de sensores Lectura de escrituras Escrituras Preservador de la tienda centralizada Centralizado Centralizado Manejado en Store Enviar a Store Sí SÍTienda de sensores local completamente distribuido inundación de índice, difusión local sin ght/dcs [24] índice de índice en la red totalmente distribuido al nodo enviar al nodo hash no tsar/presto índice distribuido totalmente distribuido en proxies bearup + sensor consultas locales más índice actualización de índiceSí, el usuario unificado consultas lógicas de almacén (tiempo, espacio, valor) Respuesta de consulta Cache Consulta Reenvío Proxy Sensores remotos Archivo de datos locales En intervalo de memoria Flash Skip Graph Consulta Reenvío de la consulta Inicio Inicio Índice Índice Final Index Lineal Consulta Respuesta de consulta de caché Cache: Arquitectura de una red de sensores de varios niveles.estos recursos continuamente. En los entornos urbanos, el nivel proxy comprendería los nodos de clase de estación base atada (por ejemplo, ballesta de Stargate), cada uno con múltiples radios: una radio 802.11 que lo conecta a una red de malla inalámbrica y una radio de baja potencia (por ejemplo, 802.15.4) Eso lo conecta a los nodos del sensor. En aplicaciones de teledetección [10], este nivel podría comprender un nodo Stargate similar con una célula de energía solar. Se supone que cada proxy administra varias decenas a cientos de sensores de nivel inferior en su vecindad. Una implementación de red de sensores típica contendrá múltiples proxies distribuidos geográficamente. Por ejemplo, en una aplicación de monitoreo del edificio, se puede colocar un proxy de sensor por piso o pasillo para monitorear los sensores de temperatura, calor y luz en sus vecindad. En el nivel más alto de nuestra infraestructura hay aplicaciones que consultan la red de sensores a través de una interfaz de consulta [20]. En este trabajo, nos centramos en aplicaciones que requieren acceso a datos de sensores pasados. Para respaldar tales consultas, el sistema necesita archivar datos en una tienda persistente. Nuestro objetivo es diseñar un sistema de almacenamiento que explote la abundancia relativa de recursos en los proxies para enmascarar la escasez de recursos en los sensores.2.2 Modelos de uso El diseño de un sistema de almacenamiento como TSAR se ve afectado por las consultas que probablemente se planteen. Se puede esperar que una gran fracción de consultas sobre los datos del sensor sea de naturaleza espacio-temporal. Los sensores proporcionan información sobre el mundo físico;Dos atributos clave de esta información son cuando ocurrió un evento o actividad particular y donde ocurrió. Algunas instancias de tales consultas incluyen el tiempo y la ubicación de las detecciones objetivo o intrusos (por ejemplo, aplicaciones de seguridad y monitoreo), notificaciones de tipos específicos de eventos, como valores de presión y humedad que exceden un umbral (por ejemplo, aplicaciones industriales) o una simple recopilación de datosconsultas que solicitan datos de una hora o ubicación particular (por ejemplo, monitoreo del clima o medio ambiente). Las consultas esperadas de dichos datos incluyen aquellos que solicitan rangos de uno o más atributos;Por ejemplo, una consulta para todos los datos de imagen de cámaras dentro de un área geográfica especificada durante un cierto período de tiempo. Además, a menudo es deseable admitir un acceso eficiente a los datos de una manera que mantenga el pedido espacial y temporal. Hay varias formas de soportar consultas de rango, como los hashes que preservan la localidad, como los que se utilizan en DIMS [18]. Sin embargo, el mecanismo más directo, y uno que naturalmente proporciona un acceso ordenado eficiente, es mediante el uso de estructuras de datos que preservan el orden. Las estructuras de preservación de orden, como el conocido árbol B mantienen relaciones entre los valores indexados y, por lo tanto, permiten el acceso natural a los rangos, así como las operaciones predecesoras y sucesoras en sus valores clave. Las aplicaciones también pueden plantear consultas basadas en el valor que implican determinar si se observó un valor V en cualquier sensor;La consulta devuelve una lista de sensores y los momentos en los que observaron este valor. Las variantes de consultas de valor implican restringir la consulta a una región geográfica, o especificar un rango (V1, V2) en lugar de un único valor v. Las consultas de valor se pueden manejar indexando los valores informados en los resúmenes. Específicamente, si un sensor informa un valor numérico, entonces el índice se construye en estos valores. Una búsqueda implica encontrar valores coincidentes que están contenidos en el rango de búsqueda (V1, V2) o coincidir con el valor de búsqueda V exactamente. El valor híbrido y las consultas espacio-temporales también son posibles. Dichas consultas especifican un intervalo de tiempo, un rango de valor y una región espacial y solicitan todos los registros que coincidan con estos atributos: encuentre todas las instancias en las que la temperatura excedió los 100o F en la ubicación R durante el mes de agosto. Estas consultas requieren un índice tanto en tiempo como en valor. En zar, nuestro enfoque está en consultas de rango en el valor o el tiempo, con extensiones planificadas para incluir el alcance espacial.2.3 Principios de diseño Nuestro diseño de un sistema de almacenamiento de sensores para redes de varios niveles se basa en el siguiente conjunto de principios, que abordan los problemas que surgen del sistema y los modelos de uso anteriores.• Principio 1: Almacene localmente, Acceso a nivel mundial: la tecnología actual permite que el almacenamiento local sea significativamente más eficiente de energía que la comunicación de red, mientras que las tendencias tecnológicas no muestran signos de borrar esta brecha en el futuro cercano. Para la máxima vida de red, un sistema de almacenamiento de sensores debe aprovechar la memoria flash en los sensores para archivar datos localmente, sustituyendo operaciones de memoria baratas por una transmisión de radio costosa. Pero sin mecanismos eficientes para la recuperación, las ganancias de energía del almacenamiento local pueden verse superadas por los costos de comunicación incurridos por la aplicación en la búsqueda de datos. Creemos que si el sistema de almacenamiento de datos proporciona la abstracción de un solo almacén lógico a las aplicaciones, como 41 hace TSAR, entonces tendrá flexibilidad adicional para optimizar los costos de comunicación y almacenamiento.• Principio 2: distinguir los datos de los metadatos: los datos deben identificarse para que la aplicación pueda recuperarlos sin una búsqueda exhaustiva. Para hacer esto, asociamos metadatos con cada registro de datos: campos de datos de sintaxis conocida que sirven como identificadores y el sistema de almacenamiento puede consultar. Los ejemplos de estos metadatos son los atributos de datos, como la ubicación y el tiempo, o los valores de datos seleccionados o resumidos. Aprovechamos la presencia de proxies ricos en recursos para indexar metadatos para sensores limitados por recursos. Los proxies comparten este índice de metadatos para proporcionar una visión lógica unificada de todos los datos en el sistema, lo que permite buscar búsquedas eficientes de baja latencia. Dicha separación específica de nivel de almacenamiento de datos de la indexación de metadatos permite que el sistema explote las idiosincrasias de las redes de varios niveles, al tiempo que mejora el rendimiento y la funcionalidad.• Principio 3: Proporcionar soporte de consulta centrada en datos: en una aplicación de sensor, es poco probable que la ubicación específica (es decir, compensación) de un registro en una secuencia sea de importancia, excepto si transmite información sobre la ubicación y/o tiempo en el que else generó información. Por lo tanto, esperamos que las aplicaciones sean mejor atendidas por una interfaz de consulta que les permite localizar datos por valor o atributo (por ejemplo, ubicación y tiempo), en lugar de una interfaz de lectura para datos no estructurados. Esto a su vez implica la necesidad de mantener metadatos en forma de un índice que proporciona búsquedas de bajo costo.2.4 Diseño del sistema TSAR encarna estos principios de diseño empleando almacenamiento local en sensores y un índice distribuido en los proxies. Las características clave del diseño del sistema son las siguientes: en TSAR, las escrituras ocurren en los nodos del sensor, y se supone que consisten en datos opacos y metadatos específicos de la aplicación. Estos metadatos son una tupla de tipos conocidos, que la aplicación puede utilizar para ubicar e identificar registros de datos, y que puede ser buscado y comparado por TSAR en el curso de la ubicación de datos para la aplicación. En una aplicación de detección basada en la cámara, por ejemplo, estos metadatos pueden incluir coordenadas que describen el campo de visión, la luminancia promedio y los valores de movimiento, además de la información básica como el tiempo y la ubicación del sensor. Dependiendo de la aplicación, estos metadatos pueden ser dos o tres órdenes de magnitud más pequeños que los datos en sí, por ejemplo, si los metadatos consisten en características extraídas de la imagen o los datos acústicos. Además de almacenar datos localmente, cada sensor envía periódicamente un resumen de los metadatos informados a un proxy cercano. El resumen contiene información como la ID del sensor, el intervalo (T1, T2) sobre el cual se generó el resumen, un mango que identifica el registro de datos correspondiente (por ejemplo, su ubicación en la memoria flash) y una representación de grano grueso de los metadatos asociadoscon el récord. La representación de datos precisa utilizada en el resumen es específica de la aplicación;Por ejemplo, un sensor de temperatura puede optar por informar los valores de temperatura máximos y mínimos observados en un intervalo como una representación de grano grueso de la serie temporal real. El proxy utiliza el resumen para construir un índice;El índice es global en el sentido de que almacena información de todos los sensores del sistema y se distribuye en los diversos proxies del sistema. Por lo tanto, las aplicaciones consulte una vista unificada de datos distribuidos y pueden consultar el índice en cualquier proxy para obtener acceso a los datos almacenados en cualquier sensor. Específicamente, cada consulta desencadena las búsquedas en este índice distribuido y la lista de coincidencias se usa para recuperar los datos correspondientes de los sensores. Hay varios métodos de índice y búsqueda distribuidos que podrían usarse en este sistema;Sin embargo, la estructura de índice descrita en la Sección 3 es muy adecuada para la tarea. Dado que el índice se construye utilizando un resumen de grano grueso, en lugar de los datos reales, las búsquedas del índice producirán coincidencias aproximadas. El mecanismo de resumen del TSAR garantiza que las búsquedas de índice nunca producirán falsos negativos, es decir, nunca se perderá resúmenes que incluyan el valor que se busca. Sin embargo, las búsquedas de índice pueden producir falsos positivos, donde un resumen coincide con la consulta, pero cuando se consulta el sensor remoto no encuentra valor coincidente, desperdiciando los recursos de la red. Cuanto más grueso sea el resumen, menor será la sobrecarga de la actualización y mayor es la fracción de falsos positivos, mientras que los resúmenes más finos incurren en la sobrecarga de la actualización mientras reducen la sobrecarga de consultas debido a falsos positivos. Los sensores remotos pueden distinguir fácilmente los falsos positivos de las consultas que resultan en golpes de búsqueda, y calcular la relación entre los dos;Basado en esta relación, TSAR emplea una nueva técnica adaptativa que varía dinámicamente la granularidad de los resúmenes de los sensores para equilibrar la sobrecarga de metadatos y la sobrecarga de falsos positivos.3. Estructuras de datos en el nivel proxy, TSAR emplea una nueva estructura de índice llamado gráfico de omisión del intervalo, que es una estructura de datos distribuida ordenada para encontrar todos los intervalos que contienen un punto o rango particular de valores. Los gráficos de omisión de intervalos combinan árboles de intervalo [5], un árbol de búsqueda binario basado en intervalo, con gráficos de omisión [1], una estructura de datos distribuida ordenada para sistemas entre pares [13]. La estructura de datos resultante tiene dos propiedades que lo hacen ideal para redes de sensores. Primero, tiene la complejidad de búsqueda O (log n) para acceder al primer intervalo que coincide con un valor o rango particular, y una complejidad constante para acceder a cada intervalo sucesivo. En segundo lugar, la indexación de intervalos en lugar de valores individuales hace que la estructura de datos sea ideal para indexar resúmenes a lo largo del tiempo o el valor. Dicha indexación basada en sumar es un ajuste más natural para los nodos sensores con energía, ya que la transmisión de resúmenes incurre en menos gastos generales de energía que transmitir todos los datos del sensor. Definiciones: Asumimos que hay proxies NP y sensores NS en una red de sensores de dos niveles. Cada proxy es responsable de múltiples nodos de sensores, y no se asume sobre la cantidad de sensores por proxy. Cada sensor transmite resúmenes de intervalo de datos o eventos regularmente a uno o más proxies con los que está asociado, donde el intervalo I se representa como [Lowi, Highi]. Estos intervalos pueden corresponder a rangos de tiempo o valor que se utilizan para indexar los datos del sensor. No se supone sobre el tamaño de un intervalo o la cantidad de superposición entre los intervalos. Los usuarios plantean consultas de rango en los intervalos a la red de proxies y sensores;Cada consulta Q necesita determinar todos los valores de índice que se superponen al intervalo [LowQ, Highq]. El objetivo del gráfico de omisión del intervalo es indexar todos los intervalos de manera que el conjunto que superponga un intervalo de consulta puede ubicarse de manera eficiente. En el resto de esta sección, describimos el gráfico de omitir el intervalo con mayor detalle.3.1 Skip Graph Descripción general Para informar la descripción del gráfico de omitir el intervalo, primero proporcionamos una breve descripción de la estructura de datos de gráficos de omisión;Para una descripción más extensa, se hace referencia al lector [1]. La Figura 2 muestra un gráfico de omisión que indexa 8 teclas;Las teclas se pueden ver a lo largo de la parte inferior, y por encima de cada tecla están los punteros asociados con esa tecla. Cada elemento de datos, que consiste en una clave y sus punteros asociados, puede residir en un nodo diferente en la red, 42 7 9 13 17 21 25 311 Nivel 0 Nivel 1 Nivel 2 Elemento de gráfico de omisión simple (cada uno puede estar en un nodo diferente)encontrar (21) mensajes de nodo a nodo Figura 2: omita gráfico de 8 elementos [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21, 30] [2,5] 5 14 14 16 23 23 27 30 [bajo, alto] Máx contiene (13) Match sin coincidencia Figura 3: Gráfico de omitir intervalo [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Nodo 1 Nodo 2 Nodo 3 Nivel 2 Nivel 1 Nivel 0 Figura 4: El gráfico de omitir el intervalo distribuido y los punteros identifican ambosun nodo remoto, así como un elemento de datos en ese nodo. En esta figura podemos ver las siguientes propiedades de un gráfico de omisión: • Índice ordenado: las claves son miembros de un tipo de datos ordenados, por ejemplo, enteros. Las búsquedas hacen uso de comparaciones ordenadas entre la clave de búsqueda y las entradas de índice existentes. Además, los punteros en el nivel más bajo apuntan directamente al sucesor de cada elemento en el índice.• Indexación en el lugar: los elementos de datos permanecen en los nodos donde se insertaron, y los mensajes se envían entre nodos para establecer enlaces entre esos elementos y otros en el índice.• Altura log n: hay log2 n punteros asociados con cada elemento, donde n es el número de elementos de datos indexados. Cada puntero pertenece a un nivel l en [0 ... log2 n - 1], y junto con algunos otros punteros en ese nivel forma una cadena de elementos N/2L.• Balance probabilístico: en lugar de confiar en las operaciones de re-equilibrio que pueden activarse al insertar o eliminar, omitir gráficos implementan un mecanismo de equilibrio aleatorio simple que mantiene cerca de un equilibrio perfecto en promedio, con una probabilidad extremadamente baja de desequilibrio significativo.• Redundancia y resistencia: cada elemento de datos forma una raíz de árbol de búsqueda independiente, por lo que las búsquedas pueden comenzar en cualquier nodo en la red, eliminando los puntos calientes en una sola raíz de búsqueda. Además, el índice es resistente a la falla del nodo;No se pueden acceder a los datos en el nodo fallido, pero los elementos de datos restantes serán accesibles a través de árboles de búsqueda enraizados en otros nodos. En la Figura 2 vemos el proceso de búsqueda de un valor particular en un gráfico de omisión. Los punteros alcanzables de un solo elemento de datos forman un árbol binario: un puntero que atraviesa el nivel más alto se salta sobre los elementos N/2, N/4 en el siguiente nivel, y así sucesivamente. La búsqueda consiste en descender el árbol del nivel más alto al nivel 0, en cada nivel, comparando la clave de destino con el siguiente elemento en ese nivel y decidir si atraviesa o no. En el caso perfectamente equilibrado que se muestra aquí hay niveles log2 N de punteros, y la búsqueda atravesará 0 o 1 punteros en cada nivel. Suponemos que cada elemento de datos reside en un nodo diferente y medimos el costo de búsqueda por los mensajes numéricos enviados (es decir, el número de punteros atravesados);Esto será claramente o (log n). La actualización de los árboles avanza desde el fondo, como en un árbol B, con la (s) raíz (s) promovida en el nivel a medida que el árbol crece. De esta manera, por ejemplo, las dos cadenas en el nivel 1 siempre contienen n/2 entradas cada una, y nunca hay necesidad de dividir las cadenas a medida que la estructura crece. El proceso de actualización consiste en elegir cuál de las cadenas 2L insertar un elemento en cada nivel L e insertarlo en el lugar adecuado en cada cadena. Mantener un gráfico de omisión perfectamente equilibrado como se muestra en la Figura 2 sería bastante complejo;En cambio, se utiliza el método de equilibrio probabilístico introducido en las listas de Skip [23], que cierra una pequeña cantidad de sobrecarga en el caso esperado a cambio de una actualización y eliminación simples. La base de este método es la observación de que cualquier elemento que pertenece a una cadena particular en el nivel L solo puede pertenecer a una de las dos cadenas en el nivel L+1. Para insertar un elemento, ascendemos los niveles a partir de 0, eligiendo aleatoriamente una de las dos cadenas posibles en cada nivel, una parada cuando llegamos a una cadena vacía. Un medio de implementación (por ejemplo, como se describe en [1]) es asignar a cada elemento una cadena de bits aleatoria arbitrariamente larga. Cada cadena en el nivel L se construye a partir de aquellos elementos cuyas cadenas de bits coinciden en los primeros bits de L, creando así 2l posibles cadenas en cada nivel y asegurando que cada cadena se divide exactamente en dos cadenas en el siguiente nivel. Aunque la estructura resultante no está perfectamente equilibrada, después del análisis en [23] podemos demostrar que la probabilidad de que esté significativamente fuera de equilibrio es extremadamente pequeña;Además, dado que la estructura está determinada por la secuencia de números aleatorios, los patrones de datos de entrada no pueden hacer que el árbol se desequilibre.3.2 Gráfico de Skip Interval Un gráfico de omisión está diseñado para almacenar entradas de un solo valor. En esta sección, presentamos una nueva estructura de datos que extiende los gráficos de omisión para almacenar intervalos [Lowi, Highi] y permite búsquedas eficientes de todos los intervalos que cubren un valor V, es decir, {I: Lowi ≤ V ≤ Highi}. Nuestra estructura de datos se puede extender a las búsquedas de rango de manera directa. El gráfico de salto de intervalo se construye aplicando el método de los árboles de búsqueda aumentados, según lo descrito por Cormen, Leiserson y Rivest [5] y se aplica a los árboles de búsqueda binarios para crear un árbol de intervalo. El método se basa en la observación de que una estructura de búsqueda basada en la comparación de claves ordenadas, como un árbol binario, también puede usarse para buscar en una tecla secundaria que no es de toma en la primera clave. Dado un conjunto de intervalos ordenados por un límite inferior - Lowi ≤ Lowi+1 - Definimos la clave secundaria como el máximo acumulativo, maxi = maxk = 0 ... i (highk). El conjunto de intervalos que se cruzan en un valor V se puede encontrar luego buscando el primer intervalo (y, por lo tanto, el intervalo con menos bajo) de tal manera que Maxi ≥ VCon Lowi> V, seleccionando aquellos intervalos que se cruzan v. Usando este enfoque aumentamos la estructura de datos de gráficos de omisión, como se muestra en la Figura 3, de modo que cada entrada almacena un rango (límite inferior y límite superior) y una clave secundaria (máximo acumulativodel límite superior). Para calcular eficientemente la clave secundaria MAXI para una entrada I, tomamos el más grande de Highi y los valores máximos reportados por cada uno de los vecinos de la izquierda. Para buscar aquellos intervalos que contienen el valor V, primero buscamos V en el índice secundario, maxi, y localizamos la primera entrada con maxi ≥ v. (Mediante la definición de maxi, para este elemento de datos maxi = highi). Si lowi> V, entonces este intervalo no contiene V, y ningún otro intervalos tampoco lo hará. De lo contrario, atravesamos el índice en el orden creciente de Mini, devolviendo intervalos de coincidencia, hasta que llegamos a una entrada con Mini> V y terminamos. Las búsquedas de todos los intervalos que se superponen a un rango de consulta, o que contienen completamente un rango de consulta, son extensiones directas de este mecanismo. Complejidad de búsqueda: Busque el primer intervalo que coincida con un valor dado se realiza de manera muy similar a un árbol de intervalo. La complejidad de la búsqueda es o (log n). El número de intervalos que coinciden con una consulta de rango puede variar según la cantidad de superposición en los intervalos que se indexan, así como el rango especificado en la consulta. Insertar complejidad: en un árbol de intervalo o lista de omisión de intervalo, el valor máximo para una entrada solo necesita calcularse sobre el subárbol enraizado en esa entrada, ya que este valor se examinará solo cuando se busque dentro del subárbol enraizado en esa entrada. Sin embargo, para un gráfico de omisión de intervalo simple, este valor máximo para una entrada debe calcularse en todas las entradas que lo preceden en el índice, ya que las búsquedas pueden comenzar en cualquier lugar de la estructura de datos, en lugar de en un elemento raíz distinguido. Se puede ver fácilmente que, en el peor de los casos, la inserción de un solo intervalo (uno que cubre todos los intervalos existentes en el índice) desencadenará la actualización de todas las entradas en el índice, para el costo de inserción del peor de los casos de o (n).3.3 Intervalo de escasos gráfico de omisión Las extensiones finales que proponemos aprovechar la diferencia entre el número de elementos indexados en un gráfico de omisión y el número de sistemas en los que se distribuyen estos elementos. El costo en los mensajes de red de una operación puede reducirse organizando la estructura de datos para que la mayoría de los recorridos de la estructura ocurran localmente en un solo nodo y, por lo tanto, incurran en el costo de la red cero. Además, dado que tanto la congestión como la falla ocurren por nodo, podemos eliminar los enlaces sin consecuencias adversas si esos enlaces solo contribuyen a la distribución y/o la resistencia de la carga dentro de un solo nodo. Estas dos modificaciones nos permiten lograr reducciones en la complejidad asintótica de la actualización y la búsqueda. Como puede ser en la Sección 3.2, inserte y elimine el costo en un gráfico de omisión de intervalo tiene la peor complejidad de O (N), en comparación con O (log N) para un árbol de intervalo. La razón principal de la diferencia es que los gráficos de omisión tienen una estructura de búsqueda completa enraizada en cada elemento, para distribuir la carga y proporcionar resiliencia a las fallas del sistema en una configuración distribuida. Sin embargo, para proporcionar distribución de carga y resiliencia de falla, solo es necesario proporcionar una estructura de búsqueda completa para cada sistema. Si como en TSAR, el número de nodos (proxies) es mucho menor que el número de elementos de datos (resúmenes de datos indexados), entonces esto dará como resultado ahorros significativos. Implementación: para construir un gráfico de omisión de intervalo disperso, nos aseguramos de que haya un solo elemento distinguido en cada sistema, el elemento raíz para ese sistema;Todas las búsquedas comenzarán en uno de estos elementos raíz. Al agregar un nuevo elemento, en lugar de dividir las listas a niveles crecientes L hasta que el elemento esté en una lista sin otro, nos detenemos cuando encontramos que el elemento estaría en una lista que no contiene elementos raíz, asegurando así que el elemento sea accesiblede todos los elementos raíz. Se puede ver un ejemplo de aplicar esta optimización en la Figura 5. (En la práctica, en lugar de designar elementos de datos existentes como raíces, como se muestra, puede ser preferible insertar valores nulos en el inicio). Al usar la técnica de los vectores de membresía como en [1], esto se puede hacer transmitiendo los vectores de membresía de cada elemento raíz a todos los demás sistemas, y deteniendo la inserción de un elemento en el nivel L cuando no comparte un prefijo L-bitcon cualquiera de los elementos de raíz NP. El número esperado de raíces que comparten un prefijo log2np-bit es 1, dando una altura esperada esperada para cada elemento de log2np +o (1). Se omite una implementación alternativa, que distribuye información sobre elementos raíz en el tiempo de establecimiento de puntero, se omite debido a limitaciones de espacio;Este método elimina la necesidad de mensajes adicionales. Rendimiento: en un gráfico de omisión disperso (no intervalado), ya que la altura esperada de un elemento insertado ahora es log2 np + o (1), la complejidad de inserción esperada es o (log np), en lugar de o (log n), dondeNP es el número de elementos raíz y, por lo tanto, el número de sistemas separados en la red.(En el caso degenerado de un solo sistema tenemos una lista de omisión; con probabilidad de división 0.5, la altura esperada de un elemento individual es 1.) Tenga en cuenta que dado que las búsquedas se inician en los elementos raíz de la altura esperada log2 n, la complejidad de búsqueda no se mejora. Para un gráfico de omisión escaso de intervalo, el rendimiento de la actualización se mejora considerablemente en comparación con el peor caso de O (n) para el caso de no pareja. En una estructura de búsqueda aumentada como esta, un elemento solo almacena información para nodos que se puede alcanzar desde ese elemento-e.g.el subárbol enraizado en ese elemento, en el caso de un árbol. Por lo tanto, al actualizar el valor máximo en un árbol de intervalo, la actualización solo se propaga hacia la raíz. En un gráfico de omita el intervalo escaso, las actualizaciones a un nodo solo se propagan hacia los elementos raíz NP, para un costo peor de NP log2 n.Búsqueda de atajos: al comenzar una búsqueda de un valor V, en lugar de comenzar en la raíz en ese proxy, podemos encontrar el elemento más cercano a V (por ejemplo, usando un índice local secundario), y luego comenzar la búsqueda en ese elemento. La distancia esperada entre este elemento y el término de búsqueda es log2 np, y la búsqueda ahora tomará en promedio los pasos log2 np + o (1). Para ilustrar esta optimización, en la Figura 4 dependiendo de la elección de la raíz de búsqueda, una búsqueda de [21, 30] a partir del nodo 2 puede tomar 3 lúpulos de red, atravesando al nodo 1, luego volver al nodo 2 y finalmente al nodo 3donde se encuentra el destino, para un costo de 3 mensajes. Sin embargo, la búsqueda de acceso directo localiza el elemento de datos intermedio en el nodo 2, y luego procede directamente al nodo 3 para un costo de 1 mensaje. Rendimiento: esta técnica se puede aplicar a la búsqueda de clave principal, que es el primero de los dos pasos de inserción en un gráfico de omisión de intervalo. Al combinar la optimización atrevida con gráficos de omisión de intervalo escaso, el costo esperado de inserción ahora es O (log np), independiente del tamaño del índice o el grado de superposición de los intervalos insertados.3.4 Estructuras de datos alternativas Hasta ahora solo hemos comparado el gráfico de omisión del intervalo escaso con estructuras similares de las cuales se deriva. En la Tabla 2. 44 Tabla 2: Comparación de estructuras de índice distribuidos de consulta de consulta de consulta de consulta de consulta de consulta de consulta de soporte de intervalo para el intervalo de compensación de intervalo de compensación de intervalo de compensación de intervalo de resaliencia de Representación de Balancing de una comparación con varias otras estructuras de datos que cumplen con al menos algunos de los requisitos para el índice TSAR para el índice TSAR.no no no sí, buen buen índice local, consulta de inundación sí sí no sí bien prae p mal, rp* (árboles b distribuidos) Sí posible sí no buenas dimensas sí sí sí sí sí sí interval[6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Roots Nodo 1 Nodo 2 Figura 5: Intervalo dispersoSkip Graph Los sistemas basados en hash, DHT [25] y GHT [26], carecen de la capacidad de realizar consultas de rango y, por lo tanto, no se adaptan bien a la indexación de datos espacio-temporales. La indexación localmente utilizando una estructura de singlenode apropiada y luego inundaciones de consultas a todos los proxies es una alternativa competitiva para pequeñas redes;Para las redes grandes, la dependencia lineal del número de proxies se convierte en un problema. Se examinaron dos árboles B distribuidos: árboles P [6] y RP* [19]. Cada uno de estos respalda consultas de rango, y en teoría podría modificarse para apoyar la indexación de intervalos;Sin embargo, ambos requieren un reequilibrio complejo y no proporcionan las características de resiliencia de las otras estructuras. Dims [18] proporciona la capacidad de realizar consultas de rango espacio-temporal y tiene la resistencia necesaria para las fallas;Sin embargo, no se puede utilizar intervalos de índice, que son utilizados por el algoritmo de resumen de datos de TSARS.4. Almacenamiento y resumen de datos Al haber descrito la estructura del índice de nivel proxy, pasamos a los mecanismos en el nivel del sensor. TSAR implementa dos mecanismos clave en el nivel del sensor. El primero es una tienda de archivo local en cada nodo del sensor que está optimizado para dispositivos con recursos limitados. La segunda es una técnica de resumen adaptativa que permite a cada sensor adaptarse a los datos cambiantes y las características de consulta. El resto de esta sección describe estos mecanismos en detalle.4.1 Almacenamiento local en los gráficos de omisión del intervalo de sensores proporcionan un mecanismo eficiente para buscar nodos de sensores que contengan datos relevantes para una consulta. Estas consultas se enrutan a los sensores, que ubican los registros de datos relevantes en el archivo local y responden al proxy. Para habilitar tales búsquedas, cada nodo del sensor en TSAR mantiene una tienda de archivo de datos del sensor. Si bien la implementación de tal tienda de archivo es directa en dispositivos ricos en recursos que pueden ejecutar una base de datos, los sensores a menudo son potencia y con recursos limitados. En consecuencia, el subsistema de archivo de sensores en TSAR está explícitamente diseñado para explotar las características de los datos del sensor en un entorno limitado por los recursos. Parámetros de calibración de la marca de tiempo Atributos Opaces Datadatos/Event Attributes Tamaño Figura 6: Los datos del sensor de registro de almacenamiento único tienen características muy distintas que informan nuestro diseño de la tienda del archivo TSAR. Los sensores producen flujos de datos de series de tiempo y, por lo tanto, el orden temporal de los datos es una forma natural y simple de almacenar datos de sensores archivados. Además de la simplicidad, una tienda ordenada temporalmente a menudo es adecuada para muchas tareas de procesamiento de datos del sensor, ya que involucran el procesamiento de datos de la serie temporal. Los ejemplos incluyen operaciones de procesamiento de señales como FFT, transformaciones wavelet, agrupación, coincidencia de similitud y detección de objetivos. En consecuencia, la tienda local de archivos es una colección de registros, diseñada como un búfer circular solo de apropiación, donde los nuevos registros se agregan a la cola del búfer. El formato de cada registro de datos se muestra en la Figura 6. Cada registro tiene un campo de metadatos que incluye una marca de tiempo, configuración del sensor, parámetros de calibración, etc. Los datos del sensor sin procesar se almacenan en el campo de datos del registro. El campo de datos es opaco y específico de la aplicación: el sistema de almacenamiento no conoce ni se preocupa por interpretar este campo. Un sensor basado en cámara, por ejemplo, puede almacenar imágenes binarias en este campo de datos. Para admitir una variedad de aplicaciones, TSAR admite campos de datos de longitud variable;Como resultado, los tamaños de registro pueden variar de un registro a otro. Nuestra tienda de archivo admite tres operaciones en registros: Crear, leer y eliminar. Debido a la naturaleza de solo appería de la tienda, la creación de registros es simple y eficiente. La operación Crear simplemente crea un nuevo registro y lo agrega a la cola de la tienda. Dado que los registros siempre se escriben en la cola, la tienda no necesita mantener una lista de espacio libre. Todos los campos del registro deben especificarse en el momento de la creación;Por lo tanto, el tamaño del registro se conoce a priori y la tienda simplemente asigna el número correspondiente de bytes en la cola para almacenar el registro. Dado que las escrituras son inmutables, el tamaño de un registro no cambia una vez que se crea.proxy proxy proxy registro 3 resumen de registro Archivo local en el inicio de resumen de datos de memoria flash, finalización de intervalo de intervalo de compensación final resumen enviado a proxy insertar resúmenes en intervalos gráfico de omisión Figura 7: Resumen del sensor 45 La operación de lectura permite recuperar registros almacenados para responder para responderconsultas. En un sistema de base de datos tradicional, las búsquedas eficientes se habilitan manteniendo una estructura como un árbol B que indexa ciertas claves de los registros. Sin embargo, esto puede ser bastante complejo para un nodo de sensor pequeño con recursos limitados. En consecuencia, los sensores de TSAR no mantienen ningún índice para los datos almacenados en su archivo. En cambio, confían en los proxies para mantener este índice de metadatos que los sensores de índice envían periódicamente la información del proxy que resume los datos contenidos en una secuencia contigua de registros, así como un mango que indica la ubicación de estos registros en la memoria flash. El mecanismo funciona de la siguiente manera: además del resumen de los datos del sensor, cada nodo envía metadatos al proxy que contiene el intervalo de tiempo correspondiente al resumen, así como al inicio y al final de la ubicación de la memoria flash donde se corresponde a los datos sin procesar.almacenado (como se muestra en la Figura 7). Por lo tanto, el acceso aleatorio se habilita en granularidad de un resumen: el desplazamiento de inicio de cada parte de los registros representados por un resumen es conocido por el proxy. Dentro de esta colección, se accede a los registros secuencialmente. Cuando una consulta coincide con un resumen en el índice, el sensor usa estas compensaciones para acceder a los registros relevantes en su flash local leyendo secuencialmente datos desde la dirección de inicio hasta la dirección final. Cualquier operación de QuerySpecific se puede realizar en estos datos. Por lo tanto, no es necesario mantener ningún índice en el sensor, en línea con nuestro objetivo de simplificar la gestión del estado del sensor. El estado del archivo se captura en los metadatos asociados con los resúmenes, y se almacena y se mantiene en el poder. Si bien anticipamos que la capacidad de almacenamiento local para ser grande, eventualmente puede haber una necesidad de sobrescribir datos más antiguos, especialmente en aplicaciones de alta velocidad de datos. Esto se puede hacer a través de técnicas como el almacenamiento de datos de resolución múltiple [9], o simplemente simplemente sobrescribiendo datos más antiguos. Cuando se sobrescriben los datos más antiguos, se realiza una operación de eliminación, donde se elimina una entrada de índice del gráfico de omisión del intervalo en el proxy y se libera el espacio de almacenamiento correspondiente en la memoria flash en el sensor.4.2 Resumen adaptativo Los resúmenes de datos sirven como pegamento entre el almacenamiento en el sensor remoto y el índice en el proxy. Cada actualización de un sensor al proxy incluye tres piezas de información: el resumen, un período de tiempo correspondiente al resumen y las compensaciones de inicio y finalización para el archivo Flash. En general, el proxy puede indexar el intervalo de tiempo que representa un resumen o el rango de valor informado en el resumen (o ambos). El primer índice habilita las búsquedas rápidas en todos los registros vistos durante un cierto intervalo, mientras que el último índice habilita las búsquedas rápidas en todos los registros que coinciden con un cierto valor. Como se describe en la Sección 2.4, existe una compensación entre la energía utilizada en el envío de resúmenes (y, por lo tanto, la frecuencia y resolución de esos resúmenes) y el costo de los golpes falsos durante las consultas. La información resumida más gruesa y menos frecuente, cuanto menos energía requerida, mientras que la consulta falsa llega a su vez la energía de desperdicio en las solicitudes de datos inexistentes. TSAR emplea una técnica de resumen adaptativa que equilibra el costo de enviar actualizaciones contra el costo de los falsos positivos. La intuición clave es que cada sensor puede identificar de forma independiente la fracción de golpes falsos y éxitos verdaderos para consultas que acceden a su archivo local. Si la mayoría de las consultas dan como resultado éxitos verdaderos, entonces el sensor determina que el resumen puede engranarse aún más para reducir los costos de actualización sin afectar negativamente la relación HIT. Si muchas consultas dan como resultado golpes falsos, entonces el sensor hace que la granularidad de cada resumen sea más fina para reducir el número y la sobrecarga de golpes falsos. La resolución del resumen depende de dos parámetros el intervalo sobre el cual se construyen y transmiten resúmenes de los datos al proxy, así como al tamaño del resumen específico de aplicaciones. Nuestro enfoque en este documento está en el intervalo sobre el cual se construye el resumen. Cambiar el tamaño del resumen de datos se puede realizar de manera específica de aplicación (por ejemplo, utilizando técnicas de compresión de wavelet como en [9]) y está más allá del alcance de este documento. Actualmente, el zar emplea un esquema de resumen simple que calcula la relación de golpes y disminución (aumenta) falsas y verdaderas el intervalo entre resúmenes cada vez que esta relación aumenta (disminuye) más allá de un umbral.5. Implementación de TSAR Hemos implementado un prototipo de TSAR en un Bed de prueba de red de sensores de varios niveles. Nuestro prototipo emplea nodos de Stargate de ballesta para implementar el nivel proxy. Cada nodo Stargate emplea un procesador Intel XScale de 400MHz con 64 MB de RAM y ejecuta el Linux 2.4.19 Kernel y Emstar Release 2.1. Los nodos proxy están equipados con dos radios inalámbricos, una radio 802.11b con sede en Cisco Aironet 340 y un puente de hostmote a los nodos del sensor Mica2 utilizando el transceptor Emstar. La red inalámbrica 802.11b se utiliza para la comunicación interproxi dentro del nivel proxy, mientras que el puente inalámbrico permite la comunicación del sensor-proxima. El nivel del sensor consta de mica2 de ballesta y mica2-dots, cada uno que consiste en una radio CC1000 de 915MHz, una pila de protocolo BMAC, una memoria flash a bordo de 4 MB y un procesador ATMEGA 128L. Los nodos sensores ejecutan Tinyos 1.1.8. Además del flash integrado, los nodos del sensor se pueden equipar con tarjetas Flash MMC/SD externas utilizando un conector personalizado. Los nodos proxy se pueden equipar con almacenamiento externo, como flash compacto de alta capacidad (hasta 4GB), micro-conductas de 6 GB o unidades de disco móvil de 1,8 pulgadas de hasta 60 GB. Dado que los nodos sensores pueden estar a varios saltos del proxy más cercano, el nivel de sensor emplea un enrutamiento de saltos múltiples para comunicarse con el nivel proxy. Además, para reducir el consumo de energía de la radio mientras aún hace que el nodo del sensor esté disponible para consultas, se habilita la escucha de baja potencia, en la que el receptor de radio se enciende periódicamente para un intervalo corto para detectar el canal para las transmisiones y el paquete y el paqueteEl preámbulo se extiende para tener en cuenta la latencia hasta el siguiente intervalo cuando la radio receptora se despierta. Nuestro prototipo emplea el protocolo de enrutamiento de multioplepsm con la capa BMAC configurada en el modo de baja potencia con un ciclo de trabajo del 11% (uno de los parámetros BMAC predeterminados [22]) nuestra implementación de TSAR en la mota implica una tarea de recopilación de datos que obtiene periódicamente el sensor de sensor de sensor.Lecturas y registra estas lecturas en la memoria flash. Se supone que la memoria flash es un almacén circular solo de apéndice y el formato de los datos registrados se muestra en la Figura 6. El Mote envía un informe al proxy cada n lecturas, resumiendo los datos observados. El informe contiene: (i) la dirección de la mota, (ii) un mango que contiene un desplazamiento y la longitud de la región en la memoria flash que contiene datos mencionados por el resumen, (iii) un intervalo (T1, T2) sobreque se genera este informe, (iv) una tupla (baja, alta) que representa los valores mínimos y máximos observados en el sensor en el intervalo, y (v) un número de secuencia. Las actualizaciones del sensor se utilizan para construir un gráfico de omisión de intervalo disperso que se distribuye a través de proxies, a través de mensajes de red entre proxies a través de la red inalámbrica 802.11b. Nuestra implementación actual admite consultas que solicitan registros que coincidan con un intervalo de tiempo (T1, T2) o un rango de valor (V1, V2). Las restricciones espaciales se especifican utilizando ID del sensor. Dada una lista de intervalos coincidentes del gráfico Skip, TSAR admite dos tipos de mensajes para consultar el sensor: buscar y obtener. Un mensaje de búsqueda desencadena una búsqueda dentro de la región correspondiente en la memoria flash y devuelve el número de registros coincidentes en esa región de memoria (pero no recupera los datos). Por el contrario, un mensaje de búsqueda no solo 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 Tamaño del índice del índice (entradas) Insertar (Skipgraph) Insertar (Skipgraph) Búsqueda inicial (a) James Reserve Datos 0 20 30 40 40 40 40 40 40 40 4050 60 70 80 512 1024 2048 4096 Número de messages Tamaño del índice (entradas) Insertar (SkipGraph) Insertar (SkipGraph Sparse) Búsqueda inicial (B) Datos sintéticos Figura 8: Skip Graph Insertar el rendimiento desencadena una búsqueda pero también devuelve todos los registros de datos coincidentes al proxy del proxy al proxy del proxy. Los mensajes de búsqueda son útiles para sondear un sensor, por ejemplo, para determinar si una consulta coincide con demasiados registros.6. Evaluación experimental En esta sección, evaluamos la eficacia del TSAR utilizando nuestro prototipo y simulaciones. El Testbed para nuestros experimentos consta de cuatro proxies de Stargate y doce sensores de mica2 y mica2dot;Se asignan tres sensores a cada proxy. Dado el tamaño limitado de nuestro Bed de prueba, empleamos simulaciones para evaluar el comportamiento de TSAR en entornos más grandes. Nuestra simulación emplea el emulador EMTOS [10], que nos permite ejecutar el mismo código en simulación y la plataforma de hardware. En lugar de usar datos en vivo de un sensor real, para garantizar experimentos repetibles, sembramos cada nodo del sensor con un conjunto de datos (es decir, un rastro) que dicta los valores informados por ese nodo al proxy. Una sección de la memoria flash en cada nodo del sensor está programada con puntos de datos de la traza;Estas observaciones se reproducen durante un experimento, registran el archivo local (ubicado también en la memoria flash), y se informan al proxy. El primer conjunto de datos utilizado para evaluar TSAR es un conjunto de datos de temperatura de James Reserve [27] que incluye datos de once nodos del sensor de temperatura durante un período de 34 días. El segundo conjunto de datos se genera sintéticamente;La traza para cada sensor se genera utilizando una caminata aleatoria distribuida uniformemente a través del espacio de valor. Nuestra evaluación experimental tiene cuatro partes. Primero, ejecutamos simulaciones EMTOS para evaluar la búsqueda, actualizar y eliminar la sobrecarga para los gráficos de omisión de intervalo escaso utilizando los conjuntos de datos reales y sintéticos. En segundo lugar, proporcionamos resultados resumidos de micro-benchos del componente de almacenamiento de TSAR, que incluyen la caracterización empírica de los costos de energía y la latencia de las lecturas y escrituras para el chip de memoria flash, así como la plataforma de mote entera, y las comparaciones con los números publicados para los números publicados para los números publicados paraOtras tecnologías de almacenamiento y comunicación. Estos micro-benchmarks forman la base para nuestra evaluación a gran escala de TSAR en un lecho de prueba de cuatro proxies de Stargate y doce motas. Medimos la latencia de consulta de extremo a extremo en nuestro Bed de prueba de múltiples saltos, así como la sobrecarga de procesamiento de consultas en el nivel Mote. Finalmente, demostramos la capacidad de resumen adaptativa en cada nodo del sensor. El resto de esta sección presenta nuestros resultados experimentales.6.1 Intervalo de escasez de gráfico de omisión Esta sección evalúa el rendimiento de los gráficos de omisión del intervalo disperso cuantificando insertar, buscar y eliminar los gastos generales. Asumimos un nivel proxy con 32 proxies y construimos gráficos de omisión de intervalo disperso de varios tamaños utilizando nuestros conjuntos de datos. Para cada omisión 0 5 10 15 20 25 30 35 409620481024512 Número de messages Tamaño del índice (entradas) Traversal inicial (a) Datos de reserva de James 0 2 4 6 8 10 12 409620481024512 Número de messages Tamaño del índice (Entradas) Mireza inicial Traversal (B) Datos sintéticos de datos sintéticosFigura 9: Skip Graph Búsqueda Rendimiento 0 10 20 30 30 40 50 60 70 1 4 8 16 24 32 48 Número deMessages Número de proxies Skipgraph Insert Skipgraph Skipgraph Insertar Búsqueda inicial (a) Impacto del número de proxies 0 20 40 60 60 100 120 512 10242048 4096 Número de Messages Tamaño del índice (Entradas) Insertar (redundante) Insertar (no redundante) Búsqueda (redundante) Búsqueda (no redundante) (b) Impacto de resúmenes redundantes Figura 10: omitir los gastos generales de los gráficos, evaluamos el costo de insertar una unaNuevo valor en el índice. Cada entrada se eliminó después de su inserción, lo que nos permitió cuantificar la sobrecarga de eliminación también. La Figura 8 (a) y (b) cuantifican la sobrecarga de insertos para nuestros dos conjuntos de datos: cada inserto implica un recorrido inicial que incurre en mensajes log N, seguido de la actualización del puntero de vecinos a niveles crecientes, incurriendo en un costo de 4 mensajes log n. Nuestros resultados demuestran este comportamiento y también muestran que el rendimiento de Delete, que también implica un recorrido inicial, seguido de las actualizaciones de puntero en cada nivel, un costo similar. A continuación, evaluamos el rendimiento de la búsqueda de la estructura del índice. Nuevamente, construimos omitir gráficos de varios tamaños utilizando nuestros conjuntos de datos y evaluamos el costo de una búsqueda en la estructura del índice. Las Figuras 9 (a) y (b) representan nuestros resultados. Hay dos componentes para cada búsqueda, la búsqueda del primer intervalo que coincide con la consulta y, en el caso de los intervalos superpuestos, la transferencia lineal posterior para identificar todos los intervalos coincidentes. Se puede ver que la búsqueda inicial toma mensajes log n, como se esperaba. Sin embargo, los costos del recorrido lineal posterior dependen de los datos. Por ejemplo, los valores de temperatura para los datos de la reserva de James exhiben correlaciones espaciales significativas, lo que resulta en una superposición significativa entre diferentes intervalos y un costo transversal variable (ver Figura 9 (a)). Los datos sintéticos, sin embargo, tienen menos superposición y incurre en una sobrecarga transversal más baja como se muestra en la Figura 9 (b). Dado que los experimentos anteriores asumieron 32 proxies, evaluamos el impacto del número de proxies en el rendimiento del gráfico de omisión. Varimos el número de proxies de 10 a 48 y distribuimos un gráfico de omisión con 4096 entradas entre estos proxies. Construimos gráficos de omitir el intervalo regular, así como los gráficos de omisión de intervalo escaso usando estas entradas y medimos la sobrecarga de inserciones y búsqueda. Por lo tanto, el experimento también busca demostrar los beneficios de los gráficos de omisión dispersos sobre los gráficos de omisión regulares. La Figura 10 (a) representa nuestros resultados. En gráficos de omisión regulares, la complejidad de inserción es o (log2n) en el caso 47 esperado (y o (n) en el peor de los casos) donde n es el número de elementos. Esta complejidad no se ve afectada al cambiar el número de proxies, como lo indica la línea plana en la figura. Los gráficos de omisión escasos requieren menos actualizaciones de puntero;Sin embargo, su sobrecarga depende del número de proxies, y es O (log2np) en el caso esperado, independiente de n.Esto se puede ver que resulta en una reducción significativa en la sobrecarga cuando el número de proxies es pequeño, lo que disminuye a medida que aumenta el número de proxies. El manejo de fallas es un problema importante en una arquitectura de sensores de varios niveles, ya que se basa en muchos componentes, los nodos de sensores y los nodos de enrutamiento pueden fallar, y los enlaces inalámbricos pueden desvanecerse. El manejo de muchos de estos modos de falla está fuera del alcance de este documento;Sin embargo, consideramos el caso de la resiliencia de los gráficos de omitir a las fallas de poder. En este caso, Skip Graph Search (y las operaciones de reparación posteriores) pueden seguir cualquiera de los otros enlaces desde un elemento raíz. Dado que un gráfico de omisión escaso tiene árboles de búsqueda enraizados en cada nodo, la búsqueda puede reanudar una vez que la solicitud de búsqueda se ha enrutado alrededor de la falla. Juntas, estas dos propiedades aseguran que incluso si un proxy falla, las entradas restantes en el gráfico Skip se pueden accesibles con una alta probabilidad de las entradas en el proxy fallido y los datos correspondientes en los sensores se vuelven inaccesibles. Para garantizar que todos los datos en sensores sigan siendo accesibles, incluso en el caso de falla de un proxy que contiene entradas de índice para esos datos, incorporamos entradas de índice redundantes. TSAR emplea un esquema de redundancia simple donde se utilizan resúmenes adicionales de grano grueso para proteger resúmenes regulares. Cada sensor envía datos de resumen periódicamente a su proxy local, pero con menos frecuencia envía un resumen de baja resolución a un proxy de respaldo: el resumen de copia de seguridad representa todos los datos representados por los resúmenes de grano más fino, pero de manera más general, lo que resulta en una lectura más alta.sobrecarga (debido a golpes falsos) si se usa el resumen de copia de seguridad. El costo de implementar esto en nuestro sistema es bajo: la Figura 10 (b) muestra la sobrecarga de dicho esquema de redundancia, donde se envía un solo resumen grueso a una copia de seguridad por cada dos resúmenes enviados al proxy primario. Dado que se envía un resumen redundante por cada dos resúmenes, el costo de inserción es 1.5 veces el costo en el caso normal. Sin embargo, estas entradas redundantes dan como resultado solo un aumento insignificante en la sobrecarga de búsqueda, debido a la dependencia logarítmica del costo de búsqueda en el tamaño del índice, al tiempo que proporciona una capacidad de recuperación completa a cualquier falla de representación única.6.2 Microbiadores de almacenamiento Dado que los sensores están limitados por los recursos, el consumo de energía y la latencia en este nivel son medidas importantes para evaluar el rendimiento de una arquitectura de almacenamiento. Antes de realizar una evaluación de extremo a extremo de nuestro sistema, proporcionamos información más detallada sobre el consumo de energía del componente de almacenamiento utilizado para implementar el archivo local de TSAR, en función de las mediciones empíricas. Además, comparamos estas cifras con las de otras tecnologías de almacenamiento locales, así como con el consumo de energía de la comunicación inalámbrica, utilizando información de la literatura. Para las mediciones empíricas, medimos el uso de energía para el componente de almacenamiento en sí (es decir, la corriente dibujada por el chip de flash), así como para toda la mota de Mica2. Las mediciones de potencia en la Tabla 3 se realizaron para la memoria flash AT45DB041 [15] en un mote de Mica2, que es un dispositivo de flash más antiguo. La tecnología más prometedora para el almacenamiento de baja energía en los dispositivos de detección es NAND Flash, como el dispositivo Samsung K9K4G08U0M [16];Los números de potencia publicados para este dispositivo se proporcionan en la tabla. Los requisitos de energía publicados para la transmisión inalámbrica utilizando la radio CCCON [4] CC2420 (utilizada en Micaz y Telos Motes) se proporcionan para comparación, suponiendo que la energía de energía / byte Mote Flash lea 256 byte Page 58µJ* / 136µJ* Total 0.23µJ* Escribir 256 Byte 256 Byte 256 Byte 256 BytePágina 926 µJ* / 1042µJ* Total 3.6µj* Nand Flash Leer 512 BYTE Página 2.7µJ 1.8nj Escriba 512 Byte Page 7.8µJ 15nj Eroase 16k Byte Sector 60µJ 3.7NJ CC2420 Transmisión de radio 8 bits (-25dbm) 0.8µj 0.8 µJ Recibe 8 bits 8 bits 8 bits1.9 µJ 1.9 µJ MOTE AVR Procesador Búsqueda en memoria, 256 bytes 1.8 µJ 6.9NJ Tabla 3: Costos de energía de almacenamiento y comunicación (*valores medidos) 0 200 400 600 800 1000 1 2 3 LATENCIA (MS) Número de lúpulo (a)Rendimiento de consultas de múltiples saltos 0 100 200 300 400 500 1 5121024 2048 4096 LATENCIA (MS) Tamaño del índice (entradas) Comunicación del sensor Proxy Communication Sensor Búsqueda, Procesamiento (B) Rendimiento de la consulta Figura 11: Red de latencia cero de la consulta Network y Protocolo Overocolos. Comparando el costo total de energía para escribir flash (borrar + escribir) con el costo total de la comunicación (transmisión + recibir), encontramos que el flash NAND es casi 150 veces más eficiente que la comunicación por radio, incluso suponiendo protocolos de red perfectos.6.3 Evaluación del prototipo Esta sección informa que resulta de una evaluación de extremo a extremo del prototipo TSAR que involucra ambos niveles. En nuestra configuración, hay cuatro proxies conectados a través de enlaces 802.11 y tres sensores por proxy. La topología de múltiples saltos se preconfiguó de tal manera que los nodos sensores se conectaron en una línea a cada proxy, formando un árbol mínimo de profundidad 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 RECUPERALACIÓN (MS) Datos archivados recuperados (bytes)(a) Consulta de datos y tiempo de obtención 0 2 4 6 8 10 12 4 8 16 32 LATENCIA (MS) Número de registros de 34 bytes buscados (b) Retraso de procesamiento de consultas del sensor Figura 12: Componentes de latencia de consulta 48 3. Debido a las limitaciones de recursos, no pudimos realizar experimentos con docenas de nodos sensores, sin embargo, esta topología aseguró que el diámetro de la red fuera tan grande como para una red típica de tamaño significativamente mayor. Nuestra métrica de evaluación es la latencia de extremo a extremo del procesamiento de consultas. Una consulta planteada en zar primero incurre en la latencia de una búsqueda de gráfico de omisión escasa, seguido de enrutamiento a los nodos del sensor apropiados. El nodo del sensor lee las páginas requeridas de su archivo local, procesa la consulta en la página que se lee y transmite la respuesta al proxy, que luego la reenvía al usuario. Primero medimos la latencia de consulta para diferentes sensores en nuestra topología de múltiples saltos. Dependiendo de cuál se consulte de los sensores, la latencia total aumenta casi linealmente de aproximadamente 400 ms a 1 segundo, a medida que aumenta el número de lúpulo de 1 a 3 (ver Figura 11 (a)). La Figura 11 (b) proporciona un desglose de los diversos componentes de la latencia de extremo a extremo. El componente dominante de la latencia total es la comunicación sobre uno o más lúpulos. El tiempo típico para comunicarse en un salto es de aproximadamente 300 ms. Esta gran latencia se debe principalmente al uso de una capa MAC ciclada por deber;La latencia será mayor si el ciclo de trabajo se reduce (por ejemplo, la configuración del 2% en comparación con la configuración del 11.5% utilizada en este experimento), y por el contrario disminuirá si el ciclo de trabajo aumenta. La figura también muestra la latencia para diferentes tamaños de índice;Como se esperaba, la latencia de la comunicación interproxi y omitir las búsquedas de gráficos aumenta logarítmicamente con el tamaño del índice. No es sorprendente que la sobrecarga vista en el sensor sea independiente del tamaño del índice. La latencia también depende del número de paquetes transmitidos en respuesta a una consulta, cuanto mayor sea la cantidad de datos recuperados por una consulta, mayor será la latencia. Este resultado se muestra en la Figura 12 (a). La función de paso se debe a la paquete en Tinyos;Tinyos envía un paquete siempre que la carga útil sea menor que 30 bytes y divide la respuesta en múltiples paquetes para cargas útiles más grandes. A medida que aumentan los datos recuperados por una consulta, la latencia aumenta en los pasos, donde cada paso denota la sobrecarga de un paquete adicional. Finalmente, la Figura 12 (b) muestra el impacto de la búsqueda y el procesamiento de las regiones de memoria flash de los tamaños crecientes en un sensor. Cada resumen representa una colección de registros en la memoria flash, y todos estos registros deben recuperarse y procesarse si ese resumen coincide con una consulta. Cuanto más grueso sea el resumen, más grande es la región de memoria a la que debe acceder. Para los tamaños de búsqueda examinados, la amortización de la sobrecarga al buscar múltiples páginas de flash y registros de archivo, así como dentro del chip flash y su controlador asociado, da como resultado la aparición del aumento sublineal en la latencia con el tamaño de búsqueda. Además, se puede ver que la operación tiene una latencia muy baja, en parte debido a la simplicidad de nuestro procesamiento de consultas, que requiere solo una operación de comparación con cada elemento almacenado. Las operaciones más complejas, sin embargo, incurrirán, por supuesto, una mayor latencia.6.4 Resumen adaptativo Cuando el sensor resume los datos antes de ser informado al proxy, se pierde la información. Con el método de resumen de intervalo que estamos utilizando, esta pérdida de información nunca hará que el proxy crea que un nodo del sensor no tiene un valor que de hecho tiene, ya que todos los valores archivados estarán contenidos dentro del intervalo informado. Sin embargo, hace que el proxy crea que el sensor puede contener valores que no lo hace, y reenviar mensajes de consulta al sensor para estos valores. Estos falsos positivos constituyen el costo del mecanismo de resumen, y deben equilibrarse con los ahorros logrados al reducir el número de informes. El objetivo del resumen adaptativo es variar dinámicamente el tamaño de suma para que estos dos costos estén equilibrados.0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 FractionOfTruehits Tamaño de resumen (número de registros) (a) Impacto del tamaño de resumen 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Resumen (num.Records) normalizadotiempo (unidades) tasa de consulta 0.2 tasa de consulta 0.03 tasa de consulta 0.1 (b) Adaptación a la tasa de consulta Figura 13: Impacto de la granularidad de resumen La Figura 13 (a) demuestra el impacto de la granularidad resumida en los golpes falsos. A medida que aumenta el número de registros incluidos en un resumen, la fracción de consultas reenviadas al sensor que coincide con los datos de ese sensor (verdaderos positivos) disminuye. A continuación, en la Figura 13 (b) ejecutamos la simulación AMTOS con nuestro algoritmo de resumen adaptativo habilitado. El algoritmo adaptativo aumenta la granularidad resumida (definida como el número de registros por resumen) cuando el costo (actualizaciones) costo (falshits)> 1 + y la reduce si el costo (actualizaciones) costo (falshits)> 1 -, donde es una pequeña constante constante. Para demostrar la naturaleza adaptativa de nuestra técnica, trazamos una serie temporal de la granularidad de resumen. Comenzamos con una tasa de consulta de 1 consulta por 5 muestras, la disminuimos a 1 cada 30 muestras y luego la aumentamos nuevamente a 1 consulta cada 10 muestras. Como se muestra en la Figura 13 (b), la técnica adaptativa se ajusta en consecuencia enviando más resúmenes de grano fino a tasas de consulta más altas (en respuesta a la tasa de aciertos falsos más altos) y menos resúmenes de grano grueso a tasas de consulta más bajas.7. Trabajo relacionado En esta sección, revisamos el trabajo previo sobre técnicas de almacenamiento e indexación para redes de sensores. Si bien nuestro trabajo aborda ambos problemas conjuntamente, mucho trabajo previo los ha considerado de forma aislada. El problema del almacenamiento de archivo de datos del sensor ha recibido atención limitada en la literatura de redes de sensores. ELF [7] es un sistema de archivos Logestructurado para el almacenamiento local en la memoria flash que proporciona nivelación de carga y Matchbox es un sistema de archivos simple que está empaquetado con la distribución TinyOS [14]. Ambos sistemas se centran en el almacenamiento local, mientras que nuestro enfoque está tanto en el almacenamiento en los sensores remotos como en proporcionar una vista unificada de los datos distribuidos en todos estos archivos locales. El almacenamiento de resolución múltiple [9] está destinado al almacenamiento y búsqueda en la red en sistemas donde hay datos significativos en comparación con los recursos de almacenamiento. En contraste, TSAR aborda el problema del almacenamiento de archivo en sistemas de dos niveles donde se pueden colocar suficientes recursos en los sensores de borde. La plataforma Rise [21] se desarrolla como parte del proyecto de nodo en UCR aborda los problemas del soporte de la plataforma de hardware para grandes cantidades de almacenamiento en nodos de sensores remotos, pero no la indexación y consulta de estos datos. Para acceder de manera eficiente a un almacén de sensores distribuidos, se debe construir un índice de los datos. El trabajo temprano en las redes de sensores, como la difusión dirigida [17], supone que un sistema donde todos los datos de sensor útiles se almacenan localmente en cada sensor, y las consultas de alcance espacial se enrutan utilizando coordenadas geográficas en ubicaciones donde se almacenan los datos. Las fuentes publican los eventos que detectan, y se hunden con interés en eventos específicos pueden suscribirse a estos eventos. Las consultas de las rutas de sustrato de difusión dirigida a ubicaciones específicas 49 Si la consulta tiene información geográfica integrada en ella (por ejemplo, encontrar temperatura en el cuadrante suroeste), y si no, la consulta se inunda en toda la red. Estos esquemas tenían el inconveniente de que para consultas que no están geográficamente alcanzan el costo de búsqueda (O (N) para una red de N nodos) pueden ser prohibitivos en grandes redes con consultas frecuentes. El almacenamiento local con enfoques de indexación en la red abordan este problema mediante la construcción de índices utilizando marcos como tablas de hash geográficas [24] y árboles cuádruples [9]. Investigaciones recientes han visto un creciente cuerpo de trabajo en esquemas de indexación de datos para redes de sensores [26] [11] [18]. Uno de esos esquemas es DCS [26], que proporciona una función hash para mapear desde el nombre del evento hasta la ubicación. DCS construye una estructura distribuida que agrupa eventos espacialmente por su tipo nombrado. El índice distribuido de características en sensorNets (DIFS [11]) y consultas de rango multidimensional en redes de sensores (DIM [18]) extienden el enfoque de almacenamiento centrado en los datos para proporcionar jerarquías de índices distribuidas espacialmente a datos. Si bien estos enfoques abogan por la indexación en la red para las redes de sensores, creemos que la indexación es una tarea demasiado complicada para realizar en los nodos de sensores remotos, ya que implica mantener un estado significativo y tablas grandes. TSAR proporciona una mejor coincidencia entre los requisitos de recursos de almacenamiento e indexación y la disponibilidad de recursos en diferentes niveles. Por lo tanto, las operaciones complejas, como la indexación y la gestión de metadatos, se realizan en los proxies, mientras que el almacenamiento en el sensor sigue siendo simple. Además de las técnicas de almacenamiento e indexación específicas de las redes de sensores, muchas estructuras de índice distribuidas, pares y espacio-temporales son relevantes para nuestro trabajo. Los DHT [25] se pueden usar para indexar eventos en función de su tipo, las variantes de cuádruple como RTrees [12] se pueden usar para optimizar las búsquedas espaciales, y los árboles K-D [2] se pueden usar para la búsqueda de atributos múltiples. Si bien este documento se enfoca en construir una estructura de índice ordenada para consultas de rango, exploraremos el uso de otras estructuras de índice para consultas alternativas sobre los datos del sensor.8. Conclusiones En este documento, argumentamos que los sistemas de almacenamiento de sensores existentes están diseñados principalmente para jerarquías planas de nodos de sensores homogéneos y no explotan completamente la naturaleza de varios niveles de las redes de sensores emergentes. Presentamos el diseño de TSAR, una arquitectura de almacenamiento fundamentalmente diferente que prevé la separación de datos de metadatos al emplear almacenamiento local en los sensores e indexación distribuida en los proxies. En el nivel proxy, TSAR emplea una nueva estructura de índice distribuido ordenada por múltiples resolución, el gráfico de omisión del intervalo escaso, para soportar eficientemente las consultas espacio-temporales y de rango. En el nivel del sensor, TSAR admite un resumen adaptativo consciente de la energía que puede intercambiar el costo de energía de transmitir metadatos a los representantes contra la sobrecarga de golpes falsos resultantes de consultar una estructura de índice de resolución más gruesa. Implementamos TSAR en una prueba de prueba de sensor de dos niveles que comprende proxies basados en StarGate y sensores basados en la mota. Nuestra evaluación experimental de TSAR demostró los beneficios y la viabilidad de emplear nuestra arquitectura de almacenamiento distribuido de baja latencia de bajo consumo de energía en redes de sensores de múltiples niveles.9. Referencias [1] James Aspnes y Gauri Shah. Omita gráficos. En el decimoterce simposio anual de ACM-SIAM sobre algoritmos discretos, páginas 384-393, Baltimore, MD, EE. UU., 12-14 de enero de 2003. [2] Jon Louis Bentley. Árboles de búsqueda binarios multidimensionales utilizados para la búsqueda asociativa. Comun. ACM, 18 (9): 509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke y Praveen Seshadri. Hacia sistemas de bases de datos de sensores. En Actas de la Segunda Conferencia Internacional sobre Gestión de Datos Móviles., Enero de 2001. [4] Chipcon. CC2420 2.4 GHz IEEE 802.15.4 / Transceptor RF listo para Zigbee, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest y Clifford Stein. Introducción a los algoritmos. The MIT Press y McGraw-Hill, segunda edición de edición, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke y Jayavel Shanmugasundaram. Consultar redes entre pares con árboles P. Informe técnico TR2004-1926, Universidad de Cornell, 2004. [7] Hui Dai, Michael Neufeld y Richard Han. ELF: un sistema de archivo flash estructurado de registro eficiente para nodos de micro sensor. En Sensys 04: Actas de la 2da Conferencia Internacional sobre Sistemas de Sensores Networked Incrustados, páginas 176-187, Nueva York, NY, EE. UU., 2004. ACM Press.[8] Peter Desnoyers, Deepak Ganesan, Huan Li y Prashant Shenoy. Presto: una arquitectura de almacenamiento predictiva para redes de sensores. En el décimo taller sobre temas calientes en sistemas operativos (Hotos X)., Junio de 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin y John Heidemann. Una evaluación del almacenamiento de resolución múltiple en redes de sensores. En Actas de la primera conferencia de ACM sobre sistemas de sensores en red integrados (Sensys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil y T. Schoellhammer. Un sistema para simulación, emulación y implementación de redes de sensores heterogéneos. En Actas de la Segunda Conferencia de ACM sobre Sistemas de Sensores Networked Incrustados, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy y S. Shenker. DIFS: un índice distribuido para características en redes de sensores. Elsevier Journal of Ad-Hoc Networks, 2003. [12] Antonin Guttman. R-TRES: una estructura de índice dinámico para la búsqueda espacial. En Sigmod 84: Actas de la Conferencia Internacional ACM Sigmod de 1984 sobre gestión de datos, páginas 47-57, Nueva York, NY, EE. UU., 1984. ACM Press.[13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer y Alec Wolman. Skipnet: una red superpuesta escalable con propiedades prácticas de localidad. En Actas del 4to Simposio de Usenix sobre tecnologías y sistemas de Internet (USIT 03), Seattle, WA, marzo de 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler y Kristofer Pister. Instrucciones de arquitectura del sistema para sensores en red. En Actas de la Novena Conferencia Internacional sobre Apoyo Arquitectónico para Lenguajes de Programación y Sistemas Operativos (ASPLOS-IX), Páginas 93-104, Cambridge, MA, EE. UU., Noviembre de 2000. Acm[15] Atmel Inc. 4 megabit 2.5 voltios o 2.7 voltios Dataflash AT45DB041b, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M X 8 BIT / 1G X 8 BIT NAND FLASH MEMORY, 2003. [17]Chalermek Intanagonwiwat, Ramesh Govindan y Deborah Estrin. Difusión dirigida: un paradigma de comunicación escalable y robusto para redes de sensores. En Actas de la Sexta Conferencia Internacional Anual sobre Computación y Redes Móviles, páginas 56-67, Boston, MA, agosto de 2000. ACM Press.[18] Xin Li, Young-Jin Kim, Ramesh Govindan y Wei Hong. Consultas de rango multidimensional en redes de sensores. En Actas de la primera conferencia de ACM sobre sistemas de sensores en red integrados (Sensys)., 2003. Aparecer.[19] Witold Litwin, Marie-Anne Neimat y Donovan A. Schneider. RP*: Una familia de orden que preserva estructuras de datos distribuidos escalables. En VLDB 94: Actas de la 20ª Conferencia Internacional sobre Bases de datos muy grandes, páginas 342-353, San Francisco, CA, EE. UU., 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein y Wei Hong. Etiqueta: un pequeño servicio de agregación para redes de sensores ad-hoc. En Osdi, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos y V. Kalogeraki. Plataformas de sensores de bajo rendimiento y baja potencia con almacenamiento de escala de gigabyte. En Senmetrics 2005: Tercer Taller Internacional sobre Medición, Modelado y Análisis de rendimiento de redes de sensores inalámbricos, julio de 2005. [22] J. Polastre, J. Hill y D. Culler. Acceso versátil de medios de baja potencia para redes de sensores inalámbricos. En Actas de la segunda conferencia de ACM sobre sistemas de sensores en red integrados (Sensys), noviembre de 2004. [23] William Pugh. Listas de omisión: una alternativa probabilística a los árboles equilibrados. Comun. ACM, 33 (6): 668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker y F. Yu. Almacenamiento centrado en los datos en Sensornets. En ACM First Workshop sobre temas calientes en redes, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp y S. Shenker. Una red de contenido de contenido escalable. En Actas de la Conferencia ACM Sigcomm 2001, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan y S. Shenker. GHT: una tabla de hash geográfica para el almacenamiento centrado en los datos. En First ACM International Workshop sobre redes de sensores inalámbricos y sus aplicaciones, 2002. [27] N. Xu, E. Osterweil, M. Hamilton y D. Estrin.http://www.lecs.cs.ucla.edu/˜nxu/ess/. Datos de la reserva de James.50",
    "original_sentences": [
        "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
        "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
        "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
        "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
        "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
        "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
        "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
        "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
        "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
        "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
        "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
        "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
        "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
        "There have been a spectrum of approaches for constructing sensor storage systems.",
        "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
        "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
        "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
        "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
        "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
        "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
        "More complex read requests are handled by flooding.",
        "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
        "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
        "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
        "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
        "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
        "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
        "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
        "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
        "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
        "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
        "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
        "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
        "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
        "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
        "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
        "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
        "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
        "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
        "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
        "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
        "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
        "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
        "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
        "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
        "In-network index lookups are eliminated, reducing network overheads for read requests.",
        "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
        "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
        "Our design and implementation of TSAR has resulted in four contributions.",
        "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
        "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
        "This data structure has O(log n) expected search and update complexity.",
        "Further, the index provides a logically unified view of all data in the system.",
        "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
        "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
        "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
        "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
        "Each sensor periodically sends a summary of its data to a proxy.",
        "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
        "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
        "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
        "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
        "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
        "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
        "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
        "The remainder of this paper is structured as follows.",
        "Section 2 presents key design issues that guide our work.",
        "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
        "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
        "We present related work in Section 7 and our conclusions in Section 8. 2.",
        "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
        "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
        "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
        "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
        "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
        "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
        "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
        "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
        "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
        "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
        "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
        "A typical sensor network deployment will contain multiple geographically distributed proxies.",
        "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
        "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
        "In this work, we focus on applications that require access to past sensor data.",
        "To support such queries, the system needs to archive data on a persistent store.",
        "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
        "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
        "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
        "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
        "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
        "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
        "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
        "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
        "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
        "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
        "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
        "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
        "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
        "Hybrid value and spatio-temporal queries are also possible.",
        "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
        "These queries require an index on both time and value.",
        "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
        "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
        "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
        "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
        "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
        "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
        "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
        "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
        "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
        "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
        "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
        "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
        "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
        "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
        "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
        "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
        "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
        "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
        "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
        "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
        "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
        "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
        "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
        "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
        "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
        "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
        "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
        "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
        "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
        "The resulting data structure has two properties that make it ideal for sensor networks.",
        "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
        "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
        "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
        "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
        "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
        "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
        "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
        "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
        "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
        "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
        "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
        "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
        "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
        "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
        "Lookups make use of ordered comparisons between the search key and existing index entries.",
        "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
        "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
        "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
        "In Figure 2 we see the process of searching for a particular value in a skip graph.",
        "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
        "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
        "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
        "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
        "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
        "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
        "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
        "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
        "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
        "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
        "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
        "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
        "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
        "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
        "Our data structure can be extended to range searches in a straightforward manner.",
        "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
        "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
        "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
        "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
        "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
        "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
        "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
        "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
        "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
        "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
        "The complexity of search is O(log n).",
        "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
        "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
        "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
        "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
        "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
        "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
        "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
        "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
        "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
        "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
        "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
        "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
        "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
        "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
        "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
        "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
        "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
        "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
        "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
        "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
        "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
        "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
        "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
        "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
        "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
        "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
        "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
        "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
        "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
        "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
        "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
        "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
        "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
        "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
        "TSAR implements two key mechanisms at the sensor tier.",
        "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
        "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
        "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
        "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
        "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
        "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
        "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
        "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
        "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
        "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
        "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
        "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
        "The format of each data record is shown in Figure 6.",
        "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
        "Raw sensor data is stored in the data field of the record.",
        "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
        "A camera-based sensor, for instance, may store binary images in this data field.",
        "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
        "Our archival store supports three operations on records: create, read, and delete.",
        "Due to the append-only nature of the store, creation of records is simple and efficient.",
        "The create operation simply creates a new record and appends it to the tail of the store.",
        "Since records are always written at the tail, the store need not maintain a free space list.",
        "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
        "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
        "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
        "However, this can be quite complex for a small sensor node with limited resources.",
        "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
        "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
        "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
        "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
        "Within this collection, records are accessed sequentially.",
        "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
        "Any queryspecific operation can then be performed on this data.",
        "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
        "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
        "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
        "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
        "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
        "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
        "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
        "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
        "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
        "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
        "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
        "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
        "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
        "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
        "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
        "Our focus in this paper is on the interval over which the summary is constructed.",
        "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
        "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
        "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
        "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
        "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
        "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
        "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
        "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
        "The sensor nodes run TinyOS 1.1.8.",
        "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
        "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
        "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
        "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
        "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
        "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
        "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
        "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
        "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
        "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
        "Spatial constraints are specified using sensor IDs.",
        "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
        "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
        "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
        "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
        "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
        "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
        "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
        "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
        "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
        "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
        "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
        "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
        "Our experimental evaluation has four parts.",
        "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
        "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
        "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
        "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
        "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
        "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
        "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
        "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
        "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
        "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
        "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
        "Next, we evaluate the lookup performance of the index structure.",
        "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
        "Figures 9(a) and (b) depict our results.",
        "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
        "The initial lookup can be seen to takes log n messages, as expected.",
        "The costs of the subsequent linear traversal, however, are highly data dependent.",
        "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
        "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
        "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
        "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
        "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
        "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
        "Figure 10(a) depicts our results.",
        "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
        "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
        "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
        "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
        "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
        "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
        "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
        "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
        "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
        "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
        "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
        "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
        "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
        "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
        "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
        "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
        "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
        "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
        "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
        "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
        "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
        "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
        "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
        "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
        "Our evaluation metric is the end-to-end latency of query processing.",
        "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
        "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
        "We first measure query latency for different sensors in our multi-hop topology.",
        "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
        "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
        "The dominant component of the total latency is the communication over one or more hops.",
        "The typical time to communicate over one hop is approximately 300ms.",
        "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
        "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
        "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
        "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
        "This result is shown in Figure 12(a).",
        "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
        "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
        "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
        "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
        "The coarser the summary, the larger the memory region that needs to be accessed.",
        "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
        "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
        "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
        "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
        "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
        "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
        "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
        "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
        "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
        "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
        "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
        "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
        "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
        "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
        "While our work addresses both problems jointly, much prior work has considered them in isolation.",
        "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
        "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
        "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
        "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
        "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
        "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
        "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
        "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
        "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
        "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
        "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
        "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
        "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
        "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
        "DCS constructs a distributed structure that groups events together spatially by their named type.",
        "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
        "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
        "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
        "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
        "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
        "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
        "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
        "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
        "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
        "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
        "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
        "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
        "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
        "REFERENCES [1] James Aspnes and Gauri Shah.",
        "Skip graphs.",
        "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
        "Multidimensional binary search trees used for associative searching.",
        "Commun.",
        "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
        "Towards sensor database systems.",
        "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
        "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
        "Introduction to Algorithms.",
        "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
        "Querying Peer-to-Peer Networks Using P-Trees.",
        "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
        "ELF: an efficient log-structured flash file system for micro sensor nodes.",
        "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
        "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
        "PRESTO: A predictive storage architecture for sensor networks.",
        "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
        "An evaluation of multi-resolution storage in sensor networks.",
        "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
        "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
        "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
        "DIFS: A distributed index for features in sensor networks.",
        "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
        "R-trees: a dynamic index structure for spatial searching.",
        "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
        "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
        "Skipnet: A scalable overlay network with practical locality properties.",
        "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
        "System architecture directions for networked sensors.",
        "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
        "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
        "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
        "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
        "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
        "Multi-dimensional range queries in sensor networks.",
        "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
        "RP*: A family of order preserving scalable distributed data structures.",
        "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
        "TAG: a tiny aggregation service for ad-hoc sensor networks.",
        "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
        "High performance, low power sensor platforms featuring gigabyte scale storage.",
        "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
        "Versatile low power media access for wireless sensor networks.",
        "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
        "Skip lists: a probabilistic alternative to balanced trees.",
        "Commun.",
        "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
        "Data-centric storage in sensornets.",
        "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
        "A scalable content addressable network.",
        "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
        "GHT - a geographic hash-table for data-centric storage.",
        "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
        "James Reserve Data. 50"
    ],
    "error_count": 0,
    "keys": {
        "sensor datum": {
            "translated_key": "dato de sensor",
            "is_in_text": false,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "separation of datum": {
            "translated_key": "separación de dato",
            "is_in_text": false,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "datum separation": {
            "translated_key": "separación de dato",
            "is_in_text": false,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "analysis": {
            "translated_key": "análisis",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, <br>analysis</br> of historical trends, and post-mortem <br>analysis</br> of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the <br>analysis</br> in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance <br>analysis</br> of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Mientras que el acceso a los datos en vivo es necesario en las aplicaciones de monitoreo y vigilancia, el acceso a datos pasados es necesario para aplicaciones como la minería de registros de sensores para detectar patrones inusuales, \"análisis\" de tendencias históricas y \"análisis\" post mortem de eventos particulares.",
                "Aunque la estructura resultante no está perfectamente equilibrada, después del \"análisis\" en [23] podemos demostrar que la probabilidad de que esté significativamente fuera de balance es extremadamente pequeña;Además, dado que la estructura está determinada por la secuencia de números aleatorios, los patrones de datos de entrada no pueden hacer que el árbol se desequilibre.3.2 Gráfico de Skip Interval Un gráfico de omisión está diseñado para almacenar entradas de un solo valor.",
                "En Senmetrics 2005: Tercer Taller Internacional sobre Medición, Modelado y \"Análisis\" de Redes de Sensores inalámbricos, julio de 2005. [22] J. Polastre, J. Hill y D. Culler."
            ],
            "translated_text": "",
            "candidates": [
                "análisis",
                "análisis",
                "análisis",
                "análisis",
                "análisis",
                "análisis",
                "Análisis"
            ],
            "error": []
        },
        "archive": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local <br>archive</br> that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local <br>archive</br> and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data <br>archive</br> on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to <br>archive</br> data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to <br>archive</br> data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local <br>archive</br> and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local <br>archive</br> in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their <br>archive</br>.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the <br>archive</br> is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash <br>archive</br>.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local <br>archive</br>.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local <br>archive</br> (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local <br>archive</br>, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local <br>archive</br>, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En segundo lugar, a nivel de sensor, cada sensor mantiene un \"archivo\" local que almacena datos en la memoria flash.",
                "Las Secciones 3 y 4 presentan el índice de nivel de proxy y el \"archivo\" local y el resumen en un sensor, respectivamente.",
                "El nivel medio consiste en proxies de sensores ricos en potencia que tienen recursos significativos de cálculo, memoria y almacenamiento y pueden usar 40 Tabla 1: Características del sistema de datos de sistemas de almacenamiento de sensores Lectura de escrituras Escrituras Preservador de la tienda centralizada Centralizado Centralizado Manejado en Store Enviar a Store Sí SÍTienda de sensores local completamente distribuido inundación de índice, difusión local sin ght/dcs [24] índice de índice en la red totalmente distribuido al nodo enviar al nodo hash no tsar/presto índice distribuido totalmente distribuido en proxies bearup + sensor consultas locales más índice actualización de índiceSí, el usuario unificado consultas lógicas de almacén (tiempo, espacio, valor) Respuesta de consulta Cache Consulta Reenvío Proxy Sensores remotos Datos locales \"Archivo\" en intervalo de memoria Flash Skip Graph Consulta de consulta Resumen Inicio Inicio Índice Índice Fin de la transferencia Respuesta de consulta lineal Cache-MissFigura 1: Arquitectura de una red de sensores de varios niveles.estos recursos continuamente.",
                "Para respaldar tales consultas, el sistema necesita \"archivar\" datos en una tienda persistente.",
                "Para la máxima vida de red, un sistema de almacenamiento de sensores debe aprovechar la memoria flash en los sensores para \"archivar\" los datos localmente, sustituyendo las operaciones de memoria baratas por una transmisión de radio costosa.",
                "Estas consultas se enrutan a los sensores, que ubican los registros de datos relevantes en el \"archivo\" local y responden al proxy.",
                "Dado que las escrituras son inmutables, el tamaño de un registro no cambia una vez que se crea.proxy proxy proxy registro 3 resumen de registro \"archivo\" local en el inicio del resumen de datos de memoria flash, el resumen del sensor de intervalo de tiempo de compensación final enviado a los resúmenes de inserción de proxy en el gráfico de omisión de intervalo Figura 7: Resumen del sensor 45 La operación de lectura permite recuperar registros almacenados en ordenPara responder consultas.",
                "En consecuencia, los sensores de TSAR no mantienen ningún índice para los datos almacenados en su \"archivo\".",
                "El estado del \"archivo\" se captura en los metadatos asociados con los resúmenes, y se almacena y se mantiene en el poder.",
                "Cada actualización de un sensor al proxy incluye tres piezas de información: el resumen, un período de tiempo correspondiente al resumen y las compensaciones de inicio y finalización para el \"archivo\" flash.",
                "La intuición clave es que cada sensor puede identificar independientemente la fracción de golpes falsos y éxitos verdaderos para consultas que acceden a su \"archivo\" local.",
                "Una sección de la memoria flash en cada nodo del sensor está programada con puntos de datos de la traza;Estas observaciones se reproducen durante un experimento, registran el \"archivo\" local (ubicado también en la memoria flash), y se informan al proxy.",
                "Antes de realizar una evaluación de extremo a extremo de nuestro sistema, proporcionamos información más detallada sobre el consumo de energía del componente de almacenamiento utilizado para implementar el \"archivo\" local de TSAR, basado en mediciones empíricas.",
                "El nodo del sensor lee las páginas requeridas de su \"archivo\" local, procesa la consulta en la página que se lee y transmite la respuesta al proxy, que luego la reenvía al usuario."
            ],
            "translated_text": "",
            "candidates": [
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "Archivo",
                "archivo",
                "archivar",
                "archivo",
                "archivar",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo",
                "archivo"
            ],
            "error": []
        },
        "flooding": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by <br>flooding</br>.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require <br>flooding</br>, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for <br>flooding</br> in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index <br>flooding</br>, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then <br>flooding</br> queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Las solicitudes de lectura más complejas se manejan por \"inundaciones\".",
                "Las solicitudes que requieren \"inundaciones\", debido a la falta de un índice, son costosas y pueden desperdiciar recursos de sensor preciosos, incluso si no se almacenan datos coincidentes en esos sensores.",
                "Una solicitud de lectura requiere una búsqueda en la tabla hash en la red para localizar el nodo que almacena el elemento de datos 39;Observe que la presencia de un índice elimina la necesidad de \"inundaciones\" en este enfoque.",
                "El nivel medio consiste en proxies de sensores ricos en potencia que tienen recursos significativos de cálculo, memoria y almacenamiento y pueden usar 40 Tabla 1: Características del sistema de datos de sistemas de almacenamiento de sensores Lectura de escrituras Escrituras Preservador de la tienda centralizada Centralizado Centralizado Manejado en Store Enviar a Store Sí SÍTienda de sensores local completamente distribuido \"inundación\" de índice, difusión local sin ght/dcs [24] Índice en la red totalmente distribuido hash al nodo envío al nodo hash sin tsar/presto índice distribuido completamente distribuido en proxies bearup + consultora de sensor local más local másactualización del índice sí consultas de almacén lógicas unificadas de usuario (tiempo, espacio, valor) Respuesta de consulta Cache Consulta Reenvío Proxy Sensores remotos Archivo de datos locales en intervalo de memoria Flash Skip Graph Consulta Reenvío de la consulta Inicio Inicio Índice Índice In Índice Lineal Consulta Respuesta de consulta Cache-MissFigura 1: Arquitectura de una red de sensores de varios niveles.estos recursos continuamente.",
                "Indexar localmente utilizando una estructura individual apropiada y luego consultas de \"inundación\" a todos los proxies es una alternativa competitiva para pequeñas redes;Para las redes grandes, la dependencia lineal del número de proxies se convierte en un problema."
            ],
            "translated_text": "",
            "candidates": [
                "inundación",
                "inundaciones",
                "inundación",
                "inundaciones",
                "inundación",
                "inundaciones",
                "inundación",
                "inundación",
                "inundación",
                "inundación"
            ],
            "error": []
        },
        "geographic hash table": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The <br>geographic hash table</br> (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or <br>geographic hash table</br> is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El enfoque \"Tabla de hash geográfico\" (GHT) [24, 26] aboga por el uso de un índice de inicio para aumentar la naturaleza completamente distribuida del almacenamiento del sensor.",
                "En este enfoque, cada elemento de datos tiene una clave asociada con él, y se utiliza una \"tabla de hash geográfico\" distribuida para asignar las claves a los nodos que almacenan los elementos de datos correspondientes."
            ],
            "translated_text": "",
            "candidates": [
                "tabla de hash geográfica",
                "Tabla de hash geográfico",
                "tabla de hash geográfica",
                "tabla de hash geográfico"
            ],
            "error": []
        },
        "homogeneous architecture": {
            "translated_key": "arquitectura homogénea",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, <br>homogeneous architecture</br> in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "La mayoría de estos enfoques asumen una \"arquitectura homogénea\" plana en la que cada nodo del sensor está limitado por la energía."
            ],
            "translated_text": "",
            "candidates": [
                "arquitectura homogénea",
                "arquitectura homogénea"
            ],
            "error": []
        },
        "multi-tier sensor network": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a <br>multi-tier sensor network</br> assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a <br>multi-tier sensor network</br> comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a <br>multi-tier sensor network</br>. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a <br>multi-tier sensor network</br> testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Consideraciones de diseño En esta sección, primero describimos los diversos componentes de una \"red de sensores de varios niveles\" asumidas en nuestro trabajo.",
                "Luego presentamos una descripción de los modelos de uso esperados para este sistema, seguido de varios principios que abordan estos factores que guían el diseño de nuestro sistema de almacenamiento.2.1 Modelo del sistema Imaginamos una \"red de sensores de varios niveles\" que comprende múltiples niveles: un nivel inferior de nodos de sensores remotos sin ataduras, un nivel medio de proxies de sensores atados y un nivel superior de aplicaciones y terminales de usuario (ver Figura 1).",
                "El nivel medio consiste en proxies de sensores ricos en potencia que tienen recursos significativos de cálculo, memoria y almacenamiento y pueden usar 40 Tabla 1: Características del sistema de datos de sistemas de almacenamiento de sensores Lectura de escrituras Escrituras Preservador de la tienda centralizada Centralizado Centralizado Manejado en Store Enviar a Store Sí SÍTienda de sensores local completamente distribuido inundación de índice, difusión local sin ght/dcs [24] índice de índice en la red totalmente distribuido al nodo enviar al nodo hash no tsar/presto índice distribuido totalmente distribuido en proxies bearup + sensor consultas locales más índice actualización de índiceSí, el usuario unificado consultas lógicas de almacén (tiempo, espacio, valor) Respuesta de consulta Cache Consulta Reenvío Proxy Sensores remotos Archivo de datos locales En intervalo de memoria Flash Skip Graph Consulta Reenvío de la consulta Inicio Inicio Índice Índice Final Index Lineal Consulta Respuesta de consulta de caché Cache: Arquitectura de una \"red de sensores de varios niveles\".estos recursos continuamente.",
                "Implementación de TSAR Hemos implementado un prototipo de TSAR en una prueba de prueba de \"red de sensores de varios niveles\"."
            ],
            "translated_text": "",
            "candidates": [
                "red de sensores de múltiples niveles",
                "red de sensores de varios niveles",
                "red de sensores de múltiples niveles",
                "red de sensores de varios niveles",
                "red de sensores de múltiples niveles",
                "red de sensores de varios niveles",
                "red de sensores de múltiples niveles",
                "red de sensores de varios niveles"
            ],
            "error": []
        },
        "flash storage": {
            "translated_key": "almacenamiento flash",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of <br>flash storage</br> for a few tens of dollars.",
                "An even more compelling argument is the energy cost of <br>flash storage</br>, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND <br>flash storage</br> [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient <br>flash storage</br> at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Por lo tanto, pronto será factible equipar cada sensor con 1 GB de \"almacenamiento flash\" por unas pocas decenas de dólares.",
                "Un argumento aún más convincente es el costo de energía del \"almacenamiento flash\", que puede ser hasta dos órdenes de magnitud más bajos que el de la comunicación.",
                "Los recuerdos más nuevos de NAND Flash ofrecen costos de energía de escritura y borrado muy bajos: nuestra comparación de una \"almacenamiento flash\" de 1GB Samsung Nand [16] y el ChIPCON CC2420 802.15.4 Radio inalámbrica [4] en la Sección 6.2 indica una relación 1: 100 en PER por-La costo de energía byte entre los dos dispositivos, incluso antes de contabilizar los gastos generales del protocolo de red.",
                "TSAR explota estas tendencias almacenando datos o eventos localmente en el \"almacenamiento flash\" de eficiencia energética en cada sensor."
            ],
            "translated_text": "",
            "candidates": [
                "almacenamiento flash",
                "almacenamiento flash",
                "almacenamiento flash",
                "almacenamiento flash",
                "almacenamiento flash",
                "almacenamiento flash",
                "almacenamiento flash",
                "almacenamiento flash"
            ],
            "error": []
        },
        "metada": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from <br>metada</br>ta by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting <br>metada</br>ta to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term <br>metada</br>ta, to a nearby proxy; depending on the representation used, this <br>metada</br>ta may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the <br>metada</br>ta reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the <br>metada</br>ta, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the <br>metada</br>ta index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of <br>metada</br>ta updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from <br>metada</br>ta: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate <br>metada</br>ta with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this <br>metada</br>ta are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index <br>metada</br>ta for resource-constrained sensors.",
                "The proxies share this <br>metada</br>ta index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from <br>metada</br>ta indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain <br>metada</br>ta in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific <br>metada</br>ta.",
                "This <br>metada</br>ta is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this <br>metada</br>ta might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this <br>metada</br>ta may be two or three orders of magnitude smaller than the data itself, for instance if the <br>metada</br>ta consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported <br>metada</br>ta to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the <br>metada</br>ta associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the <br>metada</br>ta overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a <br>metada</br>ta field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this <br>metada</br>ta index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends <br>metada</br>ta to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the <br>metada</br>ta associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing <br>metada</br>ta are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from <br>metada</br>ta by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting <br>metada</br>ta to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Presentamos TSAR, una arquitectura de almacenamiento fundamentalmente diferente que prevé la separación de datos de \"Metada\" TA empleando el archivo local en los sensores e indexación distribuida en los proxies.",
                "En el nivel del sensor, TSAR admite un resumen adaptativo consciente de la energía que puede intercambiar el costo de transmitir \"Metada\" TA a los representantes contra la sobrecarga de golpes falsos resultantes de consultar un índice de grano grueso.",
                "Los sensores envían información de identificación concisa, que llamamos \"Metada\" TA, a un proxy cercano;Dependiendo de la representación utilizada, esta TA \"Metada\" puede ser un orden de magnitud o más más pequeño que los datos en sí, lo que impuso costos de comunicación mucho más bajos.",
                "Los proxies ricos en recursos interactúan entre sí para construir un índice distribuido de la \"metada\" TA informada de todos los sensores y, por lo tanto, un índice de los datos asociados almacenados en los sensores.",
                "Esta separación de datos, que se almacena en los sensores, y el TA \"Metada\", que se almacena en los proxies, permite a TSAR reducir los gastos de energía en los sensores, aprovechando los recursos en proxies atados.1.2 Contribuciones Este documento presenta TSAR, una nueva arquitectura de almacenamiento de dos niveles para redes de sensores.",
                "Nuestra arquitectura de almacenamiento es totalmente estancada en cada sensor desde la perspectiva del índice TA \"Metada\";Todas las estructuras de índice se mantienen en los proxies ricos en recursos, y solo se envían solicitudes directas o consultas simples en ubicaciones de almacenamiento explícitamente identificadas a los sensores.",
                "Se envían más resúmenes de granos finos cuando se observan más falsos positivos, equilibrando así el costo de energía de las actualizaciones de TA \"Metada\" y los falsos positivos.",
                "Creemos que si el sistema de almacenamiento de datos proporciona la abstracción de un solo almacén lógico a las aplicaciones, como 41 hace TSAR, entonces tendrá flexibilidad adicional para optimizar los costos de comunicación y almacenamiento.• Principio 2: Distinga los datos de \"Metada\" TA: los datos deben identificarse para que la aplicación pueda recuperarlos sin una búsqueda exhaustiva.",
                "Para hacer esto, asociamos \"Metada\" TA con cada registro de datos: campos de datos de sintaxis conocida que sirven como identificadores y el sistema de almacenamiento puede consultar.",
                "Los ejemplos de este TA \"Metada\" son los atributos de datos, como la ubicación y el tiempo, o los valores de datos seleccionados o resumidos.",
                "Aprovechamos la presencia de representantes ricos en recursos para indexar \"Metada\" TA para sensores con recursos limitados.",
                "Los proxies comparten este índice de TA \"Metada\" para proporcionar una vista lógica unificada de todos los datos en el sistema, lo que permite las búsquedas eficientes de baja latencia.",
                "Dicha separación específica de nivel de almacenamiento de datos de la indexación de TA \"Metada\" permite al sistema explotar las idiosincrasias de las redes de múltiples niveles, al tiempo que mejora el rendimiento y la funcionalidad.• Principio 3: Proporcionar soporte de consulta centrada en datos: en una aplicación de sensor, es poco probable que la ubicación específica (es decir, compensación) de un registro en una secuencia sea de importancia, excepto si transmite información sobre la ubicación y/o tiempo en el que else generó información.",
                "Esto a su vez implica la necesidad de mantener la \"metada\" TA en forma de un índice que proporciona búsquedas de bajo costo.2.4 Diseño del sistema TSAR encarna estos principios de diseño empleando almacenamiento local en sensores y un índice distribuido en los proxies.",
                "Las características clave del diseño del sistema son las siguientes: en TSAR, las escrituras ocurren en los nodos del sensor, y se supone que consisten en datos opacos y \"Metada\" específicos de la aplicación.",
                "Este TA \"Metada\" es una tupla de tipos conocidos, que puede ser utilizado por la aplicación para ubicar e identificar registros de datos, y que puede ser buscado y comparado por TSAR en el curso de la ubicación de los datos para la aplicación.",
                "En una aplicación de detección basada en la cámara, por ejemplo, esta TA \"Metada\" podría incluir coordenadas que describen el campo de visión, la luminancia promedio y los valores de movimiento, además de la información básica como el tiempo y la ubicación del sensor.",
                "Dependiendo de la aplicación, este TA \"Metada\" puede ser dos o tres órdenes de magnitud más pequeños que los datos en sí, por ejemplo, si el TA \"Metada\" consiste en características extraídas de la imagen o los datos acústicos.",
                "",
                "El resumen contiene información como la ID del sensor, el intervalo (T1, T2) sobre el cual se generó el resumen, un mango que identifica el registro de datos correspondiente (por ejemplo, su ubicación en la memoria flash) y una representación de grano grueso de la \"Metada\"TA asociado con el registro.",
                "Los sensores remotos pueden distinguir fácilmente los falsos positivos de las consultas que resultan en golpes de búsqueda, y calcular la relación entre los dos;Basado en esta relación, TSAR emplea una nueva técnica adaptativa que varía dinámicamente la granularidad de los resúmenes de los sensores para equilibrar la sobrecarga de \"Metada\" y la sobrecarga de falsos positivos.3.",
                "Cada registro tiene un campo TA \"Metada\" que incluye una marca de tiempo, configuración del sensor, parámetros de calibración, etc.",
                "En cambio, confían en los proxies para mantener estos sensores de índice \"Metada\" TA envían periódicamente la información de poder que resume los datos contenidos en una secuencia contigua de registros, así como un mango que indica la ubicación de estos registros en la memoria flash.",
                "El mecanismo funciona de la siguiente manera: además del resumen de los datos del sensor, cada nodo envía \"Metada\" TA al proxy que contiene el intervalo de tiempo correspondiente al resumen, así como a las compensaciones de inicio y finalización de la ubicación de la memoria flash donde el crudoLos datos correspondientes se almacenan (como se muestra en la Figura 7).",
                "El estado del archivo se captura en el TA \"Metada\" asociado con los resúmenes, y se almacena y se mantiene en el poder.",
                "Por lo tanto, las operaciones complejas, como la indexación y la gestión de \"Metada\" TA, se realizan en los proxies, mientras que el almacenamiento en el sensor sigue siendo simple.",
                "Presentamos el diseño de TSAR, una arquitectura de almacenamiento fundamentalmente diferente que prevé la separación de datos de \"Metada\" TA empleando almacenamiento local en los sensores e indexación distribuida en los proxies.",
                "En el nivel del sensor, TSAR admite un resumen adaptativo consciente de la energía que puede intercambiar el costo de energía de transmitir \"Metada\" TA a los representantes contra la sobrecarga de golpes falsos resultantes de la consulta de una estructura de índice de resolución más gruesa."
            ],
            "translated_text": "",
            "candidates": [
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "Metada",
                "metada",
                "metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "Metada",
                "",
                "metada",
                "Metada",
                "Metada",
                "Metada",
                "Metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada",
                "metada",
                "Metada"
            ],
            "error": []
        },
        "distributed index structure": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered <br>distributed index structure</br>, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel <br>distributed index structure</br> based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered <br>distributed index structure</br>, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En el nivel proxy, TSAR emplea una nueva \"estructura de índice distribuido\" ordenada de resolución múltiple, el gráfico de omisión del intervalo, para soportar eficientemente las consultas espacio-temporales y de valor.",
                "En el núcleo de la arquitectura del zar hay una nueva \"estructura de índice distribuido\" basada en gráficos de omisión de intervalos que presentamos en este documento.",
                "En el nivel proxy, TSAR emplea una nueva \"estructura de índice distribuido\" ordenada de resolución múltiple, el gráfico de omisión del intervalo disperso, para soportar eficientemente las consultas espacio-temporales y de rango."
            ],
            "translated_text": "",
            "candidates": [
                "Estructura del índice distribuido",
                "estructura de índice distribuido",
                "Estructura del índice distribuido",
                "estructura de índice distribuido",
                "Estructura del índice distribuido",
                "estructura de índice distribuido"
            ],
            "error": []
        },
        "interval skip graph": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the <br>interval skip graph</br>, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory <br>interval skip graph</br> Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the <br>interval skip graph</br>, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the <br>interval skip graph</br> is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the <br>interval skip graph</br> in greater detail. 3.1 Skip Graph Overview In order to inform the description of the <br>interval skip graph</br>, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: <br>interval skip graph</br> [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed <br>interval skip graph</br> and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 <br>interval skip graph</br> A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The <br>interval skip graph</br> is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple <br>interval skip graph</br>, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse <br>interval skip graph</br> The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an <br>interval skip graph</br> has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse <br>interval skip graph</br>, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse <br>interval skip graph</br>, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an <br>interval skip graph</br>.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse <br>interval skip graph</br> with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse <br>interval skip graph</br> The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into <br>interval skip graph</br> Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the <br>interval skip graph</br> at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse <br>interval skip graph</br> that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse <br>interval skip graph</br> Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse <br>interval skip graph</br>, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En el nivel proxy, TSAR emplea una nueva estructura de índice distribuido ordenada por múltiples resolución, el \"gráfico de omitir intervalo\", para soportar eficientemente las consultas espacio-temporales y de valor.",
                "El nivel medio consiste en proxies de sensores ricos en potencia que tienen recursos significativos de cálculo, memoria y almacenamiento y pueden usar 40 Tabla 1: Características del sistema de datos de sistemas de almacenamiento de sensores Lectura de escrituras Escrituras Preservador de la tienda centralizada Centralizado Centralizado Manejado en Store Enviar a Store Sí SÍTienda de sensores local completamente distribuido inundación de índice, difusión local sin ght/dcs [24] índice de índice en la red totalmente distribuido al nodo enviar al nodo hash no tsar/presto índice distribuido totalmente distribuido en proxies bearup + sensor consultas locales más índice actualización de índiceSí, el usuario unificado consultas lógicas de almacén (tiempo, espacio, valor) Respuesta de consulta Cache Consulta Reenvío Proxy Sensores remotos Archivo de datos locales en la memoria flash \"Gráfico de omisión del intervalo\" Sumergios de consulta de consulta Inicio Inicio Índice Índice Fin del índice Lineal Consulta Respuesta de consulta Cache-MissionFigura 1: Arquitectura de una red de sensores de varios niveles.estos recursos continuamente.",
                "Estructuras de datos En el nivel proxy, TSAR emplea una nueva estructura de índice llamada \"Gráfico de salto de intervalo\", que es una estructura de datos distribuida ordenada para encontrar todos los intervalos que contienen un punto o rango particular de valores.",
                "El objetivo del \"gráfico de omisión del intervalo\" es indexar todos los intervalos de manera que el conjunto que superponga un intervalo de consulta puede ubicarse de manera eficiente.",
                "En el resto de esta sección, describimos el \"gráfico de omitir el intervalo\" con mayor detalle.3.1 Skip Graph Descripción general Para informar la descripción del \"Gráfico de omitir el intervalo\", primero proporcionamos una breve descripción de la estructura de datos del gráfico de omitir;Para una descripción más extensa, se hace referencia al lector [1].",
                "Cada elemento de datos, que consiste en una clave y sus punteros asociados, puede residir en un nodo diferente en la red, 42 7 9 13 17 21 25 311 Nivel 0 Nivel 1 Nivel 2 Elemento de gráfico de omisión simple (cada uno puede estar en un nodo diferente)encontrar (21) mensajes de nodo a nodo Figura 2: omita gráfico de 8 elementos [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21, 30] [2,5] 5 14 14 16 23 23 27 30 [bajo, alto] Max contiene (13) coincidir sin coincidencia Figura 3: \"Gráfico de omitir intervalo\" [6,14] [9,12] [14, 16] [15,23] [18,19] [20,27] [21,30] [2,5] Nodo 1 Nodo 2 Nodo 3 Nivel 2 Nivel 1 Nivel 0 Figura 4: Distribuido \"Gráfico de omisión del intervalo\" yPor lo tanto, los punteros identifican tanto un nodo remoto como un elemento de datos en ese nodo.",
                "Aunque la estructura resultante no está perfectamente equilibrada, después del análisis en [23] podemos demostrar que la probabilidad de que esté significativamente fuera de equilibrio es extremadamente pequeña;Además, dado que la estructura está determinada por la secuencia de números aleatorios, los patrones de datos de entrada no pueden hacer que el árbol se desequilibre.3.2 \"Gráfico de Skip Interval\" Un gráfico de omisión está diseñado para almacenar entradas de un solo valor.",
                "El \"gráfico de salto de intervalo\" se construye aplicando el método de los árboles de búsqueda aumentados, según lo descrito por Cormen, Leiserson y Rivest [5] y se aplica a los árboles de búsqueda binarios para crear un árbol de intervalo.",
                "Sin embargo, para un simple \"gráfico de salto de intervalo\", este valor máximo para una entrada debe calcularse en todas las entradas que lo preceden en el índice, ya que las búsquedas pueden comenzar en cualquier lugar de la estructura de datos, en lugar de en un elemento raíz distinguido.",
                "Se puede ver fácilmente que, en el peor de los casos, la inserción de un solo intervalo (uno que cubre todos los intervalos existentes en el índice) desencadenará la actualización de todas las entradas en el índice, para el costo de inserción del peor de los casos de o (n).3.3 SPARSE \"Interval Skip Graph\" Las extensiones finales que proponemos aprovechar la diferencia entre el número de elementos indexados en un gráfico de omisión y el número de sistemas en los que se distribuyen estos elementos.",
                "Como puede ser en la Sección 3.2, inserte y elimine el costo en un \"gráfico de salto de intervalo\" tiene la peor complejidad de O (N), en comparación con O (log N) para un árbol de intervalo.",
                "Implementación: para construir un escaso \"gráfico de salto de intervalo\", nos aseguramos de que haya un solo elemento distinguido en cada sistema, el elemento raíz para ese sistema;Todas las búsquedas comenzarán en uno de estos elementos raíz.",
                "En un escaso \"gráfico de salto de intervalo\", las actualizaciones a un nodo solo se propagan hacia los elementos de la raíz NP, para un costo peor de NP log2 n.Búsqueda de atajos: al comenzar una búsqueda de un valor V, en lugar de comenzar en la raíz en ese proxy, podemos encontrar el elemento más cercano a V (por ejemplo, usando un índice local secundario), y luego comenzar la búsqueda en ese elemento.",
                "Rendimiento: esta técnica se puede aplicar a la búsqueda de clave principal, que es el primero de los dos pasos de inserción en un \"gráfico de salto de intervalo\".",
                "Al combinar la optimización atrevida con gráficos de omisión de intervalo disperso, el costo esperado de inserción ahora es O (log np), independiente del tamaño del índice o el grado de superposición de los intervalos insertados.3.4 Estructuras de datos alternativas Hasta ahora solo hemos comparado el escaso \"Gráfico de omitir el intervalo\" con estructuras similares de las cuales se deriva.",
                "En la Tabla 2. 44 Tabla 2: Comparación de estructuras de índice distribuidos de consulta de consulta de consulta de consulta de consulta de consulta de consulta de soporte de intervalo para el intervalo de compensación de intervalo de compensación de intervalo de compensación de intervalo de resaliencia de Representación de Balancing de una comparación con varias otras estructuras de datos que cumplen con al menos algunos de los requisitos para el índice TSAR para el índice TSAR.no no no sí, buen buen índice local, consulta de inundación sí sí no sí bien prae p mal, rp* (árboles b distribuidos) Sí posible sí no buenas dimensas sí sí sí sí sí sí interval[6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Roots Nodo 1 Nodo 2 Figura 5:Interval Skip Graph \"Los sistemas basados en hash, DHT [25] y GHT [26] carecen de la capacidad de realizar consultas de rango y, por lo tanto, no son adecuados para indexar datos espacio-temporales.",
                "Dado que las escrituras son inmutables, el tamaño de un registro no cambia una vez que se crea.proxy proxy proxy registro 3 resumen de registro Archivo local en el inicio del resumen de datos de memoria flash, finalización de intervalo de tiempo de desplazamiento final resumen enviado a los resúmenes de inserción de proxy en \"gráfico de omisión de intervalo\" Figura 7: Resumen del sensor 45 La operación de lectura permite recuperar registros almacenados en ordenPara responder consultas.",
                "Cuando se sobrescriben los datos más antiguos, se realiza una operación de eliminación, donde se elimina una entrada de índice del \"gráfico de omisión del intervalo\" en el proxy y el espacio de almacenamiento correspondiente en la memoria flash en el sensor se libera.4.2 Resumen adaptativo Los resúmenes de datos sirven como pegamento entre el almacenamiento en el sensor remoto y el índice en el proxy.",
                "Las actualizaciones del sensor se utilizan para construir un escaso \"Gráfico de omisión de intervalo\" que se distribuye a través de proxies, a través de mensajes de red entre proxies a través de la red inalámbrica 802.11b.",
                "El resto de esta sección presenta nuestros resultados experimentales.6.1 SPARSE \"Interval Skip Graphy Performance Esta sección evalúa el rendimiento de los gráficos de omisión del intervalo disperso cuantificando insertar, buscar y eliminar los gastos generales.",
                "En el nivel proxy, TSAR emplea una nueva estructura de índice distribuido ordenado por múltiples resolución, el escaso \"gráfico de salto de intervalo\", para soportar eficientemente las consultas espacio-temporales y de rango."
            ],
            "translated_text": "",
            "candidates": [
                "Gráfico de salto de intervalo",
                "gráfico de omitir intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de omisión del intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de omisión del intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de omitir el intervalo",
                "Gráfico de omitir el intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de omitir intervalo",
                "Gráfico de omisión del intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de Skip Interval",
                "Gráfico de salto de intervalo",
                "gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "Interval Skip Graph",
                "Gráfico de salto de intervalo",
                "gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de omitir el intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de omisión de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de omisión del intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de omisión de intervalo",
                "Gráfico de salto de intervalo",
                "Gráfico de salto de intervalo",
                "gráfico de salto de intervalo"
            ],
            "error": []
        },
        "spatial scoping": {
            "translated_key": "alcance espacial",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include <br>spatial scoping</br>. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En zar, nuestro enfoque está en consultas de rango en el valor o el tiempo, con extensiones planificadas para incluir \"alcance espacial\".2.3 Principios de diseño Nuestro diseño de un sistema de almacenamiento de sensores para redes de varios niveles se basa en el siguiente conjunto de principios, que abordan los problemas que surgen del sistema y los modelos de uso anteriores.• Principio 1: Almacene localmente, Acceso a nivel mundial: la tecnología actual permite que el almacenamiento local sea significativamente más eficiente de energía que la comunicación de red, mientras que las tendencias tecnológicas no muestran signos de borrar esta brecha en el futuro cercano."
            ],
            "translated_text": "",
            "candidates": [
                "alcance espacial",
                "alcance espacial"
            ],
            "error": []
        },
        "interval tree": {
            "translated_key": "",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an <br>interval tree</br>.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an <br>interval tree</br>.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an <br>interval tree</br> or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an <br>interval tree</br>.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an <br>interval tree</br>, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "El gráfico de salto de intervalo se construye aplicando el método de los árboles de búsqueda aumentados, según lo descrito por Cormen, Leiserson y Rivest [5] y se aplica a los árboles de búsqueda binarios para crear un \"árbol de intervalo\".",
                "Complejidad de búsqueda: Busque el primer intervalo que coincida con un valor dado se realiza de manera muy similar a un \"árbol de intervalo\".",
                "Insertar complejidad: en un \"árbol de intervalo\" o una lista de omisión de intervalo, el valor máximo para una entrada solo debe calcularse sobre el subárbol enraizado en esa entrada, ya que este valor se examinará solo cuando se busque dentro del subárbol enraizado en esa entrada.",
                "Como puede ser en la Sección 3.2, inserte y elimine el costo en un gráfico de omisión de intervalo tiene la peor complejidad de O (N), en comparación con O (log N) para un \"árbol de intervalo\".",
                "Por lo tanto, al actualizar el valor máximo en un \"árbol de intervalos\", la actualización solo se propaga hacia la raíz."
            ],
            "translated_text": "",
            "candidates": [
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalo",
                "árbol de intervalos"
            ],
            "error": []
        },
        "wireless sensor network": {
            "translated_key": "red de sensores inalámbricos",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for <br>wireless sensor network</br>s.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Acceso versátil de medios de baja potencia para \"red de sensores inalámbricos\" s."
            ],
            "translated_text": "",
            "candidates": [
                "red de sensores inalámbricos",
                "red de sensores inalámbricos"
            ],
            "error": []
        },
        "archival storage": {
            "translated_key": "almacenamiento de archivo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT <br>archival storage</br> of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "<br>archival storage</br> of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term <br>archival storage</br> [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines <br>archival storage</br> with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of <br>archival storage</br> of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of <br>archival storage</br> in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Zar: una arquitectura de almacenamiento de sensores de dos niveles utilizando gráficos de olor a intervalo ∗ Peter Desnoyers, Deepak Ganesan y Prashant Shenoy Departamento de Ciencias de la Computación Universidad de Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, Shenoy@cs.umass.edu El \"almacenamiento de archivo\" de los datos del sensor es necesario para aplicaciones que consultan, extraen y analicen dichos datos para obtener características y tendencias interesantes.",
                "El \"almacenamiento de archivo\" de los datos del sensor pasado requiere un sistema de almacenamiento, cuyos atributos clave son: dónde se almacenan los datos, si se indexan y cómo la aplicación puede acceder a estos datos de manera que eficiente en energía con baja latencia.",
                "En el más simple, los sensores transmiten datos o eventos a un servidor para el \"almacenamiento de archivo\" a largo plazo [3], donde el servidor a menudo indexa los datos para permitir un acceso eficiente en un momento posterior.",
                "TSAR es un componente de nuestra arquitectura de almacenamiento predictivo Presto [8], que combina \"almacenamiento de archivo\" con almacenamiento en caché y predicción.",
                "El problema del \"almacenamiento de archivo\" de los datos del sensor ha recibido atención limitada en la literatura de redes de sensores.",
                "Por el contrario, TSAR aborda el problema del \"almacenamiento de archivo\" en sistemas de dos niveles donde se pueden colocar suficientes recursos en los sensores de borde."
            ],
            "translated_text": "",
            "candidates": [
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo",
                "almacenamiento de archivo"
            ],
            "error": []
        },
        "index method": {
            "translated_key": "método de índice",
            "is_in_text": false,
            "original_annotated_sentences": [
                "TSAR: A Two Tier Sensor Storage Architecture Using Interval Skip Graphs ∗ Peter Desnoyers, Deepak Ganesan, and Prashant Shenoy Department of Computer Science University of Massachusetts Amherst, MA 01003 pjd@cs.umass.edu, dganesan@cs.umass.edu, shenoy@cs.umass.edu ABSTRACT Archival storage of sensor data is necessary for applications that query, mine, and analyze such data for interesting features and trends.",
                "We argue that existing storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks, where an application can comprise tens of tethered proxies, each managing tens to hundreds of untethered sensors.",
                "We present TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local archiving at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Interval Skip Graph, for efficiently supporting spatio-temporal and value queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade off the cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarse-grain index.",
                "We implement TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experiments demonstrate the benefits and feasibility of using our energy-efficient storage architecture in multi-tier sensor networks.",
                "Categories and Subject Descriptors: C.2.4 [Computer - Communication Networks]: Distributed Systems General Terms: Algorithms, performance, experimentation. 1.",
                "Introduction 1.1 Motivation Many different kinds of networked data-centric sensor applications have emerged in recent years.",
                "Sensors in these applications sense the environment and generate data that must be processed, filtered, interpreted, and archived in order to provide a useful infrastructure to its users.",
                "To achieve its goals, a typical sensor application needs access to both live and past sensor data.",
                "Whereas access to live data is necessary in monitoring and surveillance applications, access to past data is necessary for applications such as mining of sensor logs to detect unusual patterns, analysis of historical trends, and post-mortem analysis of particular events.",
                "Archival storage of past sensor data requires a storage system, the key attributes of which are: where the data is stored, whether it is indexed, and how the application can access this data in an energy-efficient manner with low latency.",
                "There have been a spectrum of approaches for constructing sensor storage systems.",
                "In the simplest, sensors stream data or events to a server for long-term archival storage [3], where the server often indexes the data to permit efficient access at a later time.",
                "Since sensors may be several hops from the nearest base station, network costs are incurred; however, once data is indexed and archived, subsequent data accesses can be handled locally at the server without incurring network overhead.",
                "In this approach, the storage is centralized, reads are efficient and cheap, while writes are expensive.",
                "Further, all data is propagated to the server, regardless of whether it is ever used by the application.",
                "An alternate approach is to have each sensor store data or events locally (e.g., in flash memory), so that all writes are local and incur no communication overheads.",
                "A read request, such as whether an event was detected by a particular sensor, requires a message to be sent to the sensor for processing.",
                "More complex read requests are handled by flooding.",
                "For instance, determining if an intruder was detected over a particular time interval requires the request to be flooded to all sensors in the system.",
                "Thus, in this approach, the storage is distributed, writes are local and inexpensive, while reads incur significant network overheads.",
                "Requests that require flooding, due to the lack of an index, are expensive and may waste precious sensor resources, even if no matching data is stored at those sensors.",
                "Research efforts such as Directed Diffusion [17] have attempted to reduce these read costs, however, by intelligent message routing.",
                "Between these two extremes lie a number of other sensor storage systems with different trade-offs, summarized in Table 1.",
                "The geographic hash table (GHT) approach [24, 26] advocates the use of an in-network index to augment the fully distributed nature of sensor storage.",
                "In this approach, each data item has a key associated with it, and a distributed or geographic hash table is used to map keys to nodes that store the corresponding data items.",
                "Thus, writes cause data items to be sent to the hashed nodes and also trigger updates to the in-network hash table.",
                "A read request requires a lookup in the in-network hash table to locate the node that stores the data 39 item; observe that the presence of an index eliminates the need for flooding in this approach.",
                "Most of these approaches assume a flat, homogeneous architecture in which every sensor node is energy-constrained.",
                "In this paper, we propose a novel storage architecture called TSAR1 that reflects and exploits the multi-tier nature of emerging sensor networks, where the application is comprised of tens of tethered sensor proxies (or more), each controlling tens or hundreds of untethered sensors.",
                "TSAR is a component of our PRESTO [8] predictive storage architecture, which combines archival storage with caching and prediction.",
                "We believe that a fundamentally different storage architecture is necessary to address the multi-tier nature of future sensor networks.",
                "Specifically, the storage architecture needs to exploit the resource-rich nature of proxies, while respecting resource constraints at the remote sensors.",
                "No existing sensor storage architecture explicitly addresses this dichotomy in the resource capabilities of different tiers.",
                "Any sensor storage system should also carefully exploit current technology trends, which indicate that the capacities of flash memories continue to rise as per Moores Law, while their costs continue to plummet.",
                "Thus it will soon be feasible to equip each sensor with 1 GB of flash storage for a few tens of dollars.",
                "An even more compelling argument is the energy cost of flash storage, which can be as much as two orders of magnitude lower than that for communication.",
                "Newer NAND flash memories offer very low write and erase energy costs - our comparison of a 1GB Samsung NAND flash storage [16] and the Chipcon CC2420 802.15.4 wireless radio [4] in Section 6.2 indicates a 1:100 ratio in per-byte energy cost between the two devices, even before accounting for network protocol overheads.",
                "These trends, together with the energy-constrained nature of untethered sensors, indicate that local storage offers a viable, energy-efficient alternative to communication in sensor networks.",
                "TSAR exploits these trends by storing data or events locally on the energy-efficient flash storage at each sensor.",
                "Sensors send concise identifying information, which we term metadata, to a nearby proxy; depending on the representation used, this metadata may be an order of magnitude or more smaller than the data itself, imposing much lower communication costs.",
                "The resource-rich proxies interact with one another to construct a distributed index of the metadata reported from all sensors, and thus an index of the associated data stored at the sensors.",
                "This index provides a unified, logical view of the distributed data, and enables an application to query and read past data efficiently - the index is used to pinpoint all data that match a read request, followed by messages to retrieve that data from the corresponding sensors.",
                "In-network index lookups are eliminated, reducing network overheads for read requests.",
                "This separation of data, which is stored at the sensors, and the metadata, which is stored at the proxies, enables TSAR to reduce energy overheads at the sensors, by leveraging resources at tethered proxies. 1.2 Contributions This paper presents TSAR, a novel two-tier storage architecture for sensor networks.",
                "To the best of our knowledge, this is the first sensor storage system that is explicitly tailored for emerging multitier sensor networks.",
                "Our design and implementation of TSAR has resulted in four contributions.",
                "At the core of the TSAR architecture is a novel distributed index structure based on interval skip graphs that we introduce in this paper.",
                "This index structure can store coarse summaries of sensor data and organize them in an ordered manner to be easily search1 TSAR: Tiered Storage ARchitecture for sensor networks. able.",
                "This data structure has O(log n) expected search and update complexity.",
                "Further, the index provides a logically unified view of all data in the system.",
                "Second, at the sensor level, each sensor maintains a local archive that stores data on flash memory.",
                "Our storage architecture is fully stateless at each sensor from the perspective of the metadata index; all index structures are maintained at the resource-rich proxies, and only direct requests or simple queries on explicitly identified storage locations are sent to the sensors.",
                "Storage at the remote sensor is in effect treated as appendage of the proxy, resulting in low implementation complexity, which makes it ideal for small, resourceconstrained sensor platforms.",
                "Further, the local store is optimized for time-series access to archived data, as is typical in many applications.",
                "Each sensor periodically sends a summary of its data to a proxy.",
                "TSAR employs a novel adaptive summarization technique that adapts the granularity of the data reported in each summary to the ratio of false hits for application queries.",
                "More fine grain summaries are sent whenever more false positives are observed, thereby balancing the energy cost of metadata updates and false positives.",
                "Third, we have implemented a prototype of TSAR on a multi-tier testbed comprising Stargate-based proxies and Mote-based sensors.",
                "Our implementation supports spatio-temporal, value, and rangebased queries on sensor data.",
                "Fourth, we conduct a detailed experimental evaluation of TSAR using a combination of EmStar/EmTOS [10] and our prototype.",
                "While our EmStar/EmTOS experiments focus on the scalability of TSAR in larger settings, our prototype evaluation involves latency and energy measurements in a real setting.",
                "Our results demonstrate the logarithmic scaling property of the sparse skip graph and the low latency of end-to-end queries in a duty-cycled multi-hop network .",
                "The remainder of this paper is structured as follows.",
                "Section 2 presents key design issues that guide our work.",
                "Section 3 and 4 present the proxy-level index and the local archive and summarization at a sensor, respectively.",
                "Section 5 discusses our prototype implementation, and Section 6 presents our experimental results.",
                "We present related work in Section 7 and our conclusions in Section 8. 2.",
                "Design Considerations In this section, we first describe the various components of a multi-tier sensor network assumed in our work.",
                "We then present a description of the expected usage models for this system, followed by several principles addressing these factors which guide the design of our storage system. 2.1 System Model We envision a multi-tier sensor network comprising multiple tiers - a bottom tier of untethered remote sensor nodes, a middle tier of tethered sensor proxies, and an upper tier of applications and user terminals (see Figure 1).",
                "The lowest tier is assumed to form a dense deployment of lowpower sensors.",
                "A canonical sensor node at this tier is equipped with low-power sensors, a micro-controller, and a radio as well as a significant amount of flash memory (e.g., 1GB).",
                "The common constraint for this tier is energy, and the need for a long lifetime in spite of a finite energy constraint.",
                "The use of radio, processor, RAM, and the flash memory all consume energy, which needs to be limited.",
                "In general, we assume radio communication to be substantially more expensive than accesses to flash memory.",
                "The middle tier consists of power-rich sensor proxies that have significant computation, memory and storage resources and can use 40 Table 1: Characteristics of sensor storage systems System Data Index Reads Writes Order preserving Centralized store Centralized Centralized index Handled at store Send to store Yes Local sensor store Fully distributed No index Flooding, diffusion Local No GHT/DCS [24] Fully distributed In-network index Hash to node Send to hashed node No TSAR/PRESTO Fully distributed Distributed index at proxies Proxy lookup + sensor query Local plus index update Yes User Unified Logical Store Queries (time, space, value) Query Response Cache Query forwarding Proxy Remote Sensors Local Data Archive on Flash Memory Interval Skip Graph Query forwarding summaries start index end index linear traversal Query Response Cache-miss triggered query forwarding summaries Figure 1: Architecture of a multi-tier sensor network. these resources continuously.",
                "In urban environments, the proxy tier would comprise a tethered base-station class nodes (e.g., Crossbow Stargate), each with with multiple radios-an 802.11 radio that connects it to a wireless mesh network and a low-power radio (e.g. 802.15.4) that connects it to the sensor nodes.",
                "In remote sensing applications [10], this tier could comprise a similar Stargate node with a solar power cell.",
                "Each proxy is assumed to manage several tens to hundreds of lower-tier sensors in its vicinity.",
                "A typical sensor network deployment will contain multiple geographically distributed proxies.",
                "For instance, in a building monitoring application, one sensor proxy might be placed per floor or hallway to monitor temperature, heat and light sensors in their vicinity.",
                "At the highest tier of our infrastructure are applications that query the sensor network through a query interface[20].",
                "In this work, we focus on applications that require access to past sensor data.",
                "To support such queries, the system needs to archive data on a persistent store.",
                "Our goal is to design a storage system that exploits the relative abundance of resources at proxies to mask the scarcity of resources at the sensors. 2.2 Usage Models The design of a storage system such as TSAR is affected by the queries that are likely to be posed to it.",
                "A large fraction of queries on sensor data can be expected to be spatio-temporal in nature.",
                "Sensors provide information about the physical world; two key attributes of this information are when a particular event or activity occurred and where it occurred.",
                "Some instances of such queries include the time and location of target or intruder detections (e.g., security and monitoring applications), notifications of specific types of events such as pressure and humidity values exceeding a threshold (e.g., industrial applications), or simple data collection queries which request data from a particular time or location (e.g., weather or environment monitoring).",
                "Expected queries of such data include those requesting ranges of one or more attributes; for instance, a query for all image data from cameras within a specified geographic area for a certain period of time.",
                "In addition, it is often desirable to support efficient access to data in a way that maintains spatial and temporal ordering.",
                "There are several ways of supporting range queries, such as locality-preserving hashes such as are used in DIMS [18].",
                "However, the most straightforward mechanism, and one which naturally provides efficient ordered access, is via the use of order-preserving data structures.",
                "Order-preserving structures such as the well-known B-Tree maintain relationships between indexed values and thus allow natural access to ranges, as well as predecessor and successor operations on their key values.",
                "Applications may also pose value-based queries that involve determining if a value v was observed at any sensor; the query returns a list of sensors and the times at which they observed this value.",
                "Variants of value queries involve restricting the query to a geographical region, or specifying a range (v1, v2) rather than a single value v. Value queries can be handled by indexing on the values reported in the summaries.",
                "Specifically, if a sensor reports a numerical value, then the index is constructed on these values.",
                "A search involves finding matching values that are either contained in the search range (v1, v2) or match the search value v exactly.",
                "Hybrid value and spatio-temporal queries are also possible.",
                "Such queries specify a time interval, a value range and a spatial region and request all records that match these attributes - find all instances where the temperature exceeded 100o F at location R during the month of August.",
                "These queries require an index on both time and value.",
                "In TSAR our focus is on range queries on value or time, with planned extensions to include spatial scoping. 2.3 Design Principles Our design of a sensor storage system for multi-tier networks is based on the following set of principles, which address the issues arising from the system and usage models above. • Principle 1: Store locally, access globally: Current technology allows local storage to be significantly more energyefficient than network communication, while technology trends show no signs of erasing this gap in the near future.",
                "For maximum network life a sensor storage system should leverage the flash memory on sensors to archive data locally, substituting cheap memory operations for expensive radio transmission.",
                "But without efficient mechanisms for retrieval, the energy gains of local storage may be outweighed by communication costs incurred by the application in searching for data.",
                "We believe that if the data storage system provides the abstraction of a single logical store to applications, as 41 does TSAR, then it will have additional flexibility to optimize communication and storage costs. • Principle 2: Distinguish data from metadata: Data must be identified so that it may be retrieved by the application without exhaustive search.",
                "To do this, we associate metadata with each data record - data fields of known syntax which serve as identifiers and may be queried by the storage system.",
                "Examples of this metadata are data attributes such as location and time, or selected or summarized data values.",
                "We leverage the presence of resource-rich proxies to index metadata for resource-constrained sensors.",
                "The proxies share this metadata index to provide a unified logical view of all data in the system, thereby enabling efficient, low-latency lookups.",
                "Such a tier-specific separation of data storage from metadata indexing enables the system to exploit the idiosyncrasies of multi-tier networks, while improving performance and functionality. • Principle 3: Provide data-centric query support: In a sensor application the specific location (i.e. offset) of a record in a stream is unlikely to be of significance, except if it conveys information concerning the location and/or time at which the information was generated.",
                "We thus expect that applications will be best served by a query interface which allows them to locate data by value or attribute (e.g. location and time), rather than a read interface for unstructured data.",
                "This in turn implies the need to maintain metadata in the form of an index that provides low cost lookups. 2.4 System Design TSAR embodies these design principles by employing local storage at sensors and a distributed index at the proxies.",
                "The key features of the system design are as follows: In TSAR, writes occur at sensor nodes, and are assumed to consist of both opaque data as well as application-specific metadata.",
                "This metadata is a tuple of known types, which may be used by the application to locate and identify data records, and which may be searched on and compared by TSAR in the course of locating data for the application.",
                "In a camera-based sensing application, for instance, this metadata might include coordinates describing the field of view, average luminance, and motion values, in addition to basic information such as time and sensor location.",
                "Depending on the application, this metadata may be two or three orders of magnitude smaller than the data itself, for instance if the metadata consists of features extracted from image or acoustic data.",
                "In addition to storing data locally, each sensor periodically sends a summary of reported metadata to a nearby proxy.",
                "The summary contains information such as the sensor ID, the interval (t1, t2) over which the summary was generated, a handle identifying the corresponding data record (e.g. its location in flash memory), and a coarse-grain representation of the metadata associated with the record.",
                "The precise data representation used in the summary is application-specific; for instance, a temperature sensor might choose to report the maximum and minimum temperature values observed in an interval as a coarse-grain representation of the actual time series.",
                "The proxy uses the summary to construct an index; the index is global in that it stores information from all sensors in the system and it is distributed across the various proxies in the system.",
                "Thus, applications see a unified view of distributed data, and can query the index at any proxy to get access to data stored at any sensor.",
                "Specifically, each query triggers lookups in this distributed index and the list of matches is then used to retrieve the corresponding data from the sensors.",
                "There are several distributed index and lookup methods which might be used in this system; however, the index structure described in Section 3 is highly suited for the task.",
                "Since the index is constructed using a coarse-grain summary, instead of the actual data, index lookups will yield approximate matches.",
                "The TSAR summarization mechanism guarantees that index lookups will never yield false negatives - i.e. it will never miss summaries which include the value being searched for.",
                "However, index lookups may yield false positives, where a summary matches the query but when queried the remote sensor finds no matching value, wasting network resources.",
                "The more coarse-grained the summary, the lower the update overhead and the greater the fraction of false positives, while finer summaries incur update overhead while reducing query overhead due to false positives.",
                "Remote sensors may easily distinguish false positives from queries which result in search hits, and calculate the ratio between the two; based on this ratio, TSAR employs a novel adaptive technique that dynamically varies the granularity of sensor summaries to balance the metadata overhead and the overhead of false positives. 3.",
                "Data Structures At the proxy tier, TSAR employs a novel index structure called the Interval Skip Graph, which is an ordered, distributed data structure for finding all intervals that contain a particular point or range of values.",
                "Interval skip graphs combine Interval Trees [5], an interval-based binary search tree, with Skip Graphs [1], a ordered, distributed data structure for peer-to-peer systems [13].",
                "The resulting data structure has two properties that make it ideal for sensor networks.",
                "First, it has O(log n) search complexity for accessing the first interval that matches a particular value or range, and constant complexity for accessing each successive interval.",
                "Second, indexing of intervals rather than individual values makes the data structure ideal for indexing summaries over time or value.",
                "Such summary-based indexing is a more natural fit for energyconstrained sensor nodes, since transmitting summaries incurs less energy overhead than transmitting all sensor data.",
                "Definitions: We assume that there are Np proxies and Ns sensors in a two-tier sensor network.",
                "Each proxy is responsible for multiple sensor nodes, and no assumption is made about the number of sensors per proxy.",
                "Each sensor transmits interval summaries of data or events regularly to one or more proxies that it is associated with, where interval i is represented as [lowi, highi].",
                "These intervals can correspond to time or value ranges that are used for indexing sensor data.",
                "No assumption is made about the size of an interval or about the amount of overlap between intervals.",
                "Range queries on the intervals are posed by users to the network of proxies and sensors; each query q needs to determine all index values that overlap the interval [lowq, highq].",
                "The goal of the interval skip graph is to index all intervals such that the set that overlaps a query interval can be located efficiently.",
                "In the rest of this section, we describe the interval skip graph in greater detail. 3.1 Skip Graph Overview In order to inform the description of the Interval Skip Graph, we first provide a brief overview of the Skip Graph data structure; for a more extensive description the reader is referred to [1].",
                "Figure 2 shows a skip graph which indexes 8 keys; the keys may be seen along the bottom, and above each key are the pointers associated with that key.",
                "Each data element, consisting of a key and its associated pointers, may reside on a different node in the network, 42 7 9 13 17 21 25 311 level 0 level 1 level 2 key single skip graph element (each may be on different node) find(21) node-to-node messages Figure 2: Skip Graph of 8 Elements [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] 5 14 14 16 23 23 27 30 [low,high] max contains(13) match no match halt Figure 3: Interval Skip Graph [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30] [2,5] Node 1 Node 2 Node 3 level 2 level 1 level 0 Figure 4: Distributed Interval Skip Graph and pointers therefore identify both a remote node as well as a data element on that node.",
                "In this figure we may see the following properties of a skip graph: • Ordered index: The keys are members of an ordered data type, for instance integers.",
                "Lookups make use of ordered comparisons between the search key and existing index entries.",
                "In addition, the pointers at the lowest level point directly to the successor of each item in the index. • In-place indexing: Data elements remain on the nodes where they were inserted, and messages are sent between nodes to establish links between those elements and others in the index. • Log n height: There are log2 n pointers associated with each element, where n is the number of data elements indexed.",
                "Each pointer belongs to a level l in [0... log2 n − 1], and together with some other pointers at that level forms a chain of n/2l elements. • Probabilistic balance: Rather than relying on re-balancing operations which may be triggered at insert or delete, skip graphs implement a simple random balancing mechanism which maintains close to perfect balance on average, with an extremely low probability of significant imbalance. • Redundancy and resiliency: Each data element forms an independent search tree root, so searches may begin at any node in the network, eliminating hot spots at a single search root.",
                "In addition the index is resilient against node failure; data on the failed node will not be accessible, but remaining data elements will be accessible through search trees rooted on other nodes.",
                "In Figure 2 we see the process of searching for a particular value in a skip graph.",
                "The pointers reachable from a single data element form a binary tree: a pointer traversal at the highest level skips over n/2 elements, n/4 at the next level, and so on.",
                "Search consists of descending the tree from the highest level to level 0, at each level comparing the target key with the next element at that level and deciding whether or not to traverse.",
                "In the perfectly balanced case shown here there are log2 n levels of pointers, and search will traverse 0 or 1 pointers at each level.",
                "We assume that each data element resides on a different node, and measure search cost by the number messages sent (i.e. the number of pointers traversed); this will clearly be O(log n).",
                "Tree update proceeds from the bottom, as in a B-Tree, with the root(s) being promoted in level as the tree grows.",
                "In this way, for instance, the two chains at level 1 always contain n/2 entries each, and there is never a need to split chains as the structure grows.",
                "The update process then consists of choosing which of the 2l chains to insert an element into at each level l, and inserting it in the proper place in each chain.",
                "Maintaining a perfectly balanced skip graph as shown in Figure 2 would be quite complex; instead, the probabilistic balancing method introduced in Skip Lists [23] is used, which trades off a small amount of overhead in the expected case in return for simple update and deletion.",
                "The basis for this method is the observation that any element which belongs to a particular chain at level l can only belong to one of two chains at level l+1.",
                "To insert an element we ascend levels starting at 0, randomly choosing one of the two possible chains at each level, an stopping when we reach an empty chain.",
                "One means of implementation (e.g. as described in [1]) is to assign each element an arbitrarily long random bit string.",
                "Each chain at level l is then constructed from those elements whose bit strings match in the first l bits, thus creating 2l possible chains at each level and ensuring that each chain splits into exactly two chains at the next level.",
                "Although the resulting structure is not perfectly balanced, following the analysis in [23] we can show that the probability of it being significantly out of balance is extremely small; in addition, since the structure is determined by the random number stream, input data patterns cannot cause the tree to become imbalanced. 3.2 Interval Skip Graph A skip graph is designed to store single-valued entries.",
                "In this section, we introduce a novel data structure that extends skip graphs to store intervals [lowi, highi] and allows efficient searches for all intervals covering a value v, i.e. {i : lowi ≤ v ≤ highi}.",
                "Our data structure can be extended to range searches in a straightforward manner.",
                "The interval skip graph is constructed by applying the method of augmented search trees, as described by Cormen, Leiserson, and Rivest [5] and applied to binary search trees to create an Interval Tree.",
                "The method is based on the observation that a search structure based on comparison of ordered keys, such as a binary tree, may also be used to search on a secondary key which is non-decreasing in the first key.",
                "Given a set of intervals sorted by lower bound - lowi ≤ lowi+1 - we define the secondary key as the cumulative maximum, maxi = maxk=0...i (highk).",
                "The set of intervals intersecting a value v may then be found by searching for the first interval (and thus the interval with least lowi) such that maxi ≥ v. We then 43 traverse intervals in increasing order lower bound, until we find the first interval with lowi > v, selecting those intervals which intersect v. Using this approach we augment the skip graph data structure, as shown in Figure 3, so that each entry stores a range (lower bound and upper bound) and a secondary key (cumulative maximum of upper bound).",
                "To efficiently calculate the secondary key maxi for an entry i, we take the greatest of highi and the maximum values reported by each of is left-hand neighbors.",
                "To search for those intervals containing the value v, we first search for v on the secondary index, maxi, and locate the first entry with maxi ≥ v. (by the definition of maxi, for this data element maxi = highi.)",
                "If lowi > v, then this interval does not contain v, and no other intervals will, either, so we are done.",
                "Otherwise we traverse the index in increasing order of mini, returning matching intervals, until we reach an entry with mini > v and we are done.",
                "Searches for all intervals which overlap a query range, or which completely contain a query range, are straightforward extensions of this mechanism.",
                "Lookup Complexity: Lookup for the first interval that matches a given value is performed in a manner very similar to an interval tree.",
                "The complexity of search is O(log n).",
                "The number of intervals that match a range query can vary depending on the amount of overlap in the intervals being indexed, as well as the range specified in the query.",
                "Insert Complexity: In an interval tree or interval skip list, the maximum value for an entry need only be calculated over the subtree rooted at that entry, as this value will be examined only when searching within the subtree rooted at that entry.",
                "For a simple interval skip graph, however, this maximum value for an entry must be computed over all entries preceding it in the index, as searches may begin anywhere in the data structure, rather than at a distinguished root element.",
                "It may be easily seen that in the worse case the insertion of a single interval (one that covers all existing intervals in the index) will trigger the update of all entries in the index, for a worst-case insertion cost of O(n). 3.3 Sparse Interval Skip Graph The final extensions we propose take advantage of the difference between the number of items indexed in a skip graph and the number of systems on which these items are distributed.",
                "The cost in network messages of an operation may be reduced by arranging the data structure so that most structure traversals occur locally on a single node, and thus incur zero network cost.",
                "In addition, since both congestion and failure occur on a per-node basis, we may eliminate links without adverse consequences if those links only contribute to load distribution and/or resiliency within a single node.",
                "These two modifications allow us to achieve reductions in asymptotic complexity of both update and search.",
                "As may be in Section 3.2, insert and delete cost on an interval skip graph has a worst case complexity of O(n), compared to O(log n) for an interval tree.",
                "The main reason for the difference is that skip graphs have a full search structure rooted at each element, in order to distribute load and provide resilience to system failures in a distributed setting.",
                "However, in order to provide load distribution and failure resilience it is only necessary to provide a full search structure for each system.",
                "If as in TSAR the number of nodes (proxies) is much smaller than the number of data elements (data summaries indexed), then this will result in significant savings.",
                "Implementation: To construct a sparse interval skip graph, we ensure that there is a single distinguished element on each system, the root element for that system; all searches will start at one of these root elements.",
                "When adding a new element, rather than splitting lists at increasing levels l until the element is in a list with no others, we stop when we find that the element would be in a list containing no root elements, thus ensuring that the element is reachable from all root elements.",
                "An example of applying this optimization may be seen in Figure 5. (In practice, rather than designating existing data elements as roots, as shown, it may be preferable to insert null values at startup.)",
                "When using the technique of membership vectors as in [1], this may be done by broadcasting the membership vectors of each root element to all other systems, and stopping insertion of an element at level l when it does not share an l-bit prefix with any of the Np root elements.",
                "The expected number of roots sharing a log2Np-bit prefix is 1, giving an expected expected height for each element of log2Np +O(1).",
                "An alternate implementation, which distributes information concerning root elements at pointer establishment time, is omitted due to space constraints; this method eliminates the need for additional messages.",
                "Performance: In a (non-interval) sparse skip graph, since the expected height of an inserted element is now log2 Np + O(1), expected insertion complexity is O(log Np), rather than O(log n), where Np is the number of root elements and thus the number of separate systems in the network. (In the degenerate case of a single system we have a skip list; with splitting probability 0.5 the expected height of an individual element is 1.)",
                "Note that since searches are started at root elements of expected height log2 n, search complexity is not improved.",
                "For an interval sparse skip graph, update performance is improved considerably compared to the O(n) worst case for the nonsparse case.",
                "In an augmented search structure such as this, an element only stores information for nodes which may be reached from that element-e.g. the subtree rooted at that element, in the case of a tree.",
                "Thus, when updating the maximum value in an interval tree, the update is only propagated towards the root.",
                "In a sparse interval skip graph, updates to a node only propagate towards the Np root elements, for a worst-case cost of Np log2 n. Shortcut search: When beginning a search for a value v, rather than beginning at the root on that proxy, we can find the element that is closest to v (e.g. using a secondary local index), and then begin the search at that element.",
                "The expected distance between this element and the search terminus is log2 Np, and the search will now take on average log2 Np + O(1) steps.",
                "To illustrate this optimization, in Figure 4 depending on the choice of search root, a search for [21, 30] beginning at node 2 may take 3 network hops, traversing to node 1, then back to node 2, and finally to node 3 where the destination is located, for a cost of 3 messages.",
                "The shortcut search, however, locates the intermediate data element on node 2, and then proceeds directly to node 3 for a cost of 1 message.",
                "Performance: This technique may be applied to the primary key search which is the first of two insertion steps in an interval skip graph.",
                "By combining the short-cut optimization with sparse interval skip graphs, the expected cost of insertion is now O(log Np), independent of the size of the index or the degree of overlap of the inserted intervals. 3.4 Alternative Data Structures Thus far we have only compared the sparse interval skip graph with similar structures from which it is derived.",
                "A comparison with several other data structures which meet at least some of the requirements for the TSAR index is shown in Table 2. 44 Table 2: Comparison of Distributed Index Structures Range Query Support Interval Representation Re-balancing Resilience Small Networks Large Networks DHT, GHT no no no yes good good Local index, flood query yes yes no yes good bad P-tree, RP* (distributed B-Trees) yes possible yes no good good DIMS yes no yes yes yes yes Interval Skipgraph yes yes no yes good good [6,14] [9,12] [14,16] [15,23] [18,19] [20,27] [21,30][2,5] Roots Node 1 Node 2 Figure 5: Sparse Interval Skip Graph The hash-based systems, DHT [25] and GHT [26], lack the ability to perform range queries and are thus not well-suited to indexing spatio-temporal data.",
                "Indexing locally using an appropriate singlenode structure and then flooding queries to all proxies is a competitive alternative for small networks; for large networks the linear dependence on the number of proxies becomes an issue.",
                "Two distributed B-Trees were examined - P-Trees [6] and RP* [19].",
                "Each of these supports range queries, and in theory could be modified to support indexing of intervals; however, they both require complex re-balancing, and do not provide the resilience characteristics of the other structures.",
                "DIMS [18] provides the ability to perform spatio-temporal range queries, and has the necessary resilience to failures; however, it cannot be used index intervals, which are used by TSARs data summarization algorithm. 4.",
                "Data Storage and Summarization Having described the proxy-level index structure, we turn to the mechanisms at the sensor tier.",
                "TSAR implements two key mechanisms at the sensor tier.",
                "The first is a local archival store at each sensor node that is optimized for resource-constrained devices.",
                "The second is an adaptive summarization technique that enables each sensor to adapt to changing data and query characteristics.",
                "The rest of this section describes these mechanisms in detail. 4.1 Local Storage at Sensors Interval skip graphs provide an efficient mechanism to lookup sensor nodes containing data relevant to a query.",
                "These queries are then routed to the sensors, which locate the relevant data records in the local archive and respond back to the proxy.",
                "To enable such lookups, each sensor node in TSAR maintains an archival store of sensor data.",
                "While the implementation of such an archival store is straightforward on resource-rich devices that can run a database, sensors are often power and resource-constrained.",
                "Consequently, the sensor archiving subsystem in TSAR is explicitly designed to exploit characteristics of sensor data in a resource-constrained setting.",
                "Timestamp Calibration Parameters Opaque DataData/Event Attributes size Figure 6: Single storage record Sensor data has very distinct characteristics that inform our design of the TSAR archival store.",
                "Sensors produce time-series data streams, and therefore, temporal ordering of data is a natural and simple way of storing archived sensor data.",
                "In addition to simplicity, a temporally ordered store is often suitable for many sensor data processing tasks since they involve time-series data processing.",
                "Examples include signal processing operations such as FFT, wavelet transforms, clustering, similarity matching, and target detection.",
                "Consequently, the local archival store is a collection of records, designed as an append-only circular buffer, where new records are appended to the tail of the buffer.",
                "The format of each data record is shown in Figure 6.",
                "Each record has a metadata field which includes a timestamp, sensor settings, calibration parameters, etc.",
                "Raw sensor data is stored in the data field of the record.",
                "The data field is opaque and application-specific-the storage system does not know or care about interpreting this field.",
                "A camera-based sensor, for instance, may store binary images in this data field.",
                "In order to support a variety of applications, TSAR supports variable-length data fields; as a result, record sizes can vary from one record to another.",
                "Our archival store supports three operations on records: create, read, and delete.",
                "Due to the append-only nature of the store, creation of records is simple and efficient.",
                "The create operation simply creates a new record and appends it to the tail of the store.",
                "Since records are always written at the tail, the store need not maintain a free space list.",
                "All fields of the record need to be specified at creation time; thus, the size of the record is known a priori and the store simply allocates the the corresponding number of bytes at the tail to store the record.",
                "Since writes are immutable, the size of a record does not change once it is created. proxy proxy proxy record 3 record summary local archive in flash memory data summary start,end offset time interval sensor summary sent to proxy Insert summaries into interval skip graph Figure 7: Sensor Summarization 45 The read operation enables stored records to be retrieved in order to answer queries.",
                "In a traditional database system, efficient lookups are enabled by maintaining a structure such as a B-tree that indexes certain keys of the records.",
                "However, this can be quite complex for a small sensor node with limited resources.",
                "Consequently, TSAR sensors do not maintain any index for the data stored in their archive.",
                "Instead, they rely on the proxies to maintain this metadata index-sensors periodically send the proxy information summarizing the data contained in a contiguous sequence of records, as well as a handle indicating the location of these records in flash memory.",
                "The mechanism works as follows: In addition to the summary of sensor data, each node sends metadata to the proxy containing the time interval corresponding to the summary, as well as the start and end offsets of the flash memory location where the raw data corresponding is stored (as shown in Figure 7).",
                "Thus, random access is enabled at granularity of a summary-the start offset of each chunk of records represented by a summary is known to the proxy.",
                "Within this collection, records are accessed sequentially.",
                "When a query matches a summary in the index, the sensor uses these offsets to access the relevant records on its local flash by sequentially reading data from the start address until the end address.",
                "Any queryspecific operation can then be performed on this data.",
                "Thus, no index needs to be maintained at the sensor, in line with our goal of simplifying sensor state management.",
                "The state of the archive is captured in the metadata associated with the summaries, and is stored and maintained at the proxy.",
                "While we anticipate local storage capacity to be large, eventually there might be a need to overwrite older data, especially in high data rate applications.",
                "This may be done via techniques such as multi-resolution storage of data [9], or just simply by overwriting older data.",
                "When older data is overwritten, a delete operation is performed, where an index entry is deleted from the interval skip graph at the proxy and the corresponding storage space in flash memory at the sensor is freed. 4.2 Adaptive Summarization The data summaries serve as glue between the storage at the remote sensor and the index at the proxy.",
                "Each update from a sensor to the proxy includes three pieces of information: the summary, a time period corresponding to the summary, and the start and end offsets for the flash archive.",
                "In general, the proxy can index the time interval representing a summary or the value range reported in the summary (or both).",
                "The former index enables quick lookups on all records seen during a certain interval, while the latter index enables quick lookups on all records matching a certain value.",
                "As described in Section 2.4, there is a trade-off between the energy used in sending summaries (and thus the frequency and resolution of those summaries) and the cost of false hits during queries.",
                "The coarser and less frequent the summary information, the less energy required, while false query hits in turn waste energy on requests for non-existent data.",
                "TSAR employs an adaptive summarization technique that balances the cost of sending updates against the cost of false positives.",
                "The key intuition is that each sensor can independently identify the fraction of false hits and true hits for queries that access its local archive.",
                "If most queries result in true hits, then the sensor determines that the summary can be coarsened further to reduce update costs without adversely impacting the hit ratio.",
                "If many queries result in false hits, then the sensor makes the granularity of each summary finer to reduce the number and overhead of false hits.",
                "The resolution of the summary depends on two parametersthe interval over which summaries of the data are constructed and transmitted to the proxy, as well as the size of the applicationspecific summary.",
                "Our focus in this paper is on the interval over which the summary is constructed.",
                "Changing the size of the data summary can be performed in an application-specific manner (e.g. using wavelet compression techniques as in [9]) and is beyond the scope of this paper.",
                "Currently, TSAR employs a simple summarization scheme that computes the ratio of false and true hits and decreases (increases) the interval between summaries whenever this ratio increases (decreases) beyond a threshold. 5.",
                "TSAR Implementation We have implemented a prototype of TSAR on a multi-tier sensor network testbed.",
                "Our prototype employs Crossbow Stargate nodes to implement the proxy tier.",
                "Each Stargate node employs a 400MHz Intel XScale processor with 64MB RAM and runs the Linux 2.4.19 kernel and EmStar release 2.1.",
                "The proxy nodes are equipped with two wireless radios, a Cisco Aironet 340-based 802.11b radio and a hostmote bridge to the Mica2 sensor nodes using the EmStar transceiver.",
                "The 802.11b wireless network is used for inter-proxy communication within the proxy tier, while the wireless bridge enables sensor-proxy communication.",
                "The sensor tier consists of Crossbow Mica2s and Mica2dots, each consisting of a 915MHz CC1000 radio, a BMAC protocol stack, a 4 Mb on-board flash memory and an ATMega 128L processor.",
                "The sensor nodes run TinyOS 1.1.8.",
                "In addition to the on-board flash, the sensor nodes can be equipped with external MMC/SD flash cards using a custom connector.",
                "The proxy nodes can be equipped with external storage such as high-capacity compact flash (up to 4GB), 6GB micro-drives, or up to 60GB 1.8inch mobile disk drives.",
                "Since sensor nodes may be several hops away from the nearest proxy, the sensor tier employs multi-hop routing to communicate with the proxy tier.",
                "In addition, to reduce the power consumption of the radio while still making the sensor node available for queries, low power listening is enabled, in which the radio receiver is periodically powered up for a short interval to sense the channel for transmissions, and the packet preamble is extended to account for the latency until the next interval when the receiving radio wakes up.",
                "Our prototype employs the MultiHopLEPSM routing protocol with the BMAC layer configured in the low-power mode with a 11% duty cycle (one of the default BMAC [22] parameters) Our TSAR implementation on the Mote involves a data gathering task that periodically obtains sensor readings and logs these reading to flash memory.",
                "The flash memory is assumed to be a circular append-only store and the format of the logged data is depicted in Figure 6.",
                "The Mote sends a report to the proxy every N readings, summarizing the observed data.",
                "The report contains: (i) the address of the Mote, (ii) a handle that contains an offset and the length of the region in flash memory containing data referred to by the summary, (iii) an interval (t1, t2) over which this report is generated, (iv) a tuple (low, high) representing the minimum and the maximum values observed at the sensor in the interval, and (v) a sequence number.",
                "The sensor updates are used to construct a sparse interval skip graph that is distributed across proxies, via network messages between proxies over the 802.11b wireless network.",
                "Our current implementation supports queries that request records matching a time interval (t1, t2) or a value range (v1, v2).",
                "Spatial constraints are specified using sensor IDs.",
                "Given a list of matching intervals from the skip graph, TSAR supports two types of messages to query the sensor: lookup and fetch.",
                "A lookup message triggers a search within the corresponding region in flash memory and returns the number of matching records in that memory region (but does not retrieve data).",
                "In contrast, a fetch message not only 46 0 10 20 30 40 50 60 70 80 128512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (a) James Reserve Data 0 10 20 30 40 50 60 70 80 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (skipgraph) Insert (sparse skipgraph) Initial lookup (b) Synthetic Data Figure 8: Skip Graph Insert Performance triggers a search but also returns all matching data records to the proxy.",
                "Lookup messages are useful for polling a sensor, for instance, to determine if a query matches too many records. 6.",
                "Experimental Evaluation In this section, we evaluate the efficacy of TSAR using our prototype and simulations.",
                "The testbed for our experiments consists of four Stargate proxies and twelve Mica2 and Mica2dot sensors; three sensors each are assigned to each proxy.",
                "Given the limited size of our testbed, we employ simulations to evaluate the behavior of TSAR in larger settings.",
                "Our simulation employs the EmTOS emulator [10], which enables us to run the same code in simulation and the hardware platform.",
                "Rather than using live data from a real sensor, to ensure repeatable experiments, we seed each sensor node with a dataset (i.e., a trace) that dictates the values reported by that node to the proxy.",
                "One section of the flash memory on each sensor node is programmed with data points from the trace; these observations are then replayed during an experiment, logged to the local archive (located in flash memory, as well), and reported to the proxy.",
                "The first dataset used to evaluate TSAR is a temperature dataset from James Reserve [27] that includes data from eleven temperature sensor nodes over a period of 34 days.",
                "The second dataset is synthetically generated; the trace for each sensor is generated using a uniformly distributed random walk though the value space.",
                "Our experimental evaluation has four parts.",
                "First, we run EmTOS simulations to evaluate the lookup, update and delete overhead for sparse interval skip graphs using the real and synthetic datasets.",
                "Second, we provide summary results from micro-benchmarks of the storage component of TSAR, which include empirical characterization of the energy costs and latency of reads and writes for the flash memory chip as well as the whole mote platform, and comparisons to published numbers for other storage and communication technologies.",
                "These micro-benchmarks form the basis for our full-scale evaluation of TSAR on a testbed of four Stargate proxies and twelve Motes.",
                "We measure the end-to-end query latency in our multi-hop testbed as well as the query processing overhead at the mote tier.",
                "Finally, we demonstrate the adaptive summarization capability at each sensor node.",
                "The remainder of this section presents our experimental results. 6.1 Sparse Interval Skip Graph Performance This section evaluates the performance of sparse interval skip graphs by quantifying insert, lookup and delete overheads.",
                "We assume a proxy tier with 32 proxies and construct sparse interval skip graphs of various sizes using our datasets.",
                "For each skip 0 5 10 15 20 25 30 35 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (a) James Reserve Data 0 2 4 6 8 10 12 14 409620481024512 NumberofMessages Index size (entries) Initial lookup Traversal (b) Synthetic Data Figure 9: Skip Graph Lookup Performance 0 10 20 30 40 50 60 70 1 4 8 16 24 32 48 Numberofmessages Number of proxies Skipgraph insert Sparse skipgraph insert Initial lookup (a) Impact of Number of Proxies 0 20 40 60 80 100 120 512 1024 2048 4096 NumberofMessages Index size (entries) Insert (redundant) Insert (non-redundant) Lookup (redundant) Lookup (non-redundant) (b) Impact of Redundant Summaries Figure 10: Skip Graph Overheads graph, we evaluate the cost of inserting a new value into the index.",
                "Each entry was deleted after its insertion, enabling us to quantify the delete overhead as well.",
                "Figure 8(a) and (b) quantify the insert overhead for our two datasets: each insert entails an initial traversal that incurs log n messages, followed by neighbor pointer update at increasing levels, incurring a cost of 4 log n messages.",
                "Our results demonstrate this behavior, and show as well that performance of delete-which also involves an initial traversal followed by pointer updates at each level-incurs a similar cost.",
                "Next, we evaluate the lookup performance of the index structure.",
                "Again, we construct skip graphs of various sizes using our datasets and evaluate the cost of a lookup on the index structure.",
                "Figures 9(a) and (b) depict our results.",
                "There are two components for each lookup-the lookup of the first interval that matches the query and, in the case of overlapping intervals, the subsequent linear traversal to identify all matching intervals.",
                "The initial lookup can be seen to takes log n messages, as expected.",
                "The costs of the subsequent linear traversal, however, are highly data dependent.",
                "For instance, temperature values for the James Reserve data exhibit significant spatial correlations, resulting in significant overlap between different intervals and variable, high traversal cost (see Figure 9(a)).",
                "The synthetic data, however, has less overlap and incurs lower traversal overhead as shown in Figure 9(b).",
                "Since the previous experiments assumed 32 proxies, we evaluate the impact of the number of proxies on skip graph performance.",
                "We vary the number of proxies from 10 to 48 and distribute a skip graph with 4096 entries among these proxies.",
                "We construct regular interval skip graphs as well as sparse interval skip graphs using these entries and measure the overhead of inserts and lookups.",
                "Thus, the experiment also seeks to demonstrate the benefits of sparse skip graphs over regular skip graphs.",
                "Figure 10(a) depicts our results.",
                "In regular skip graphs, the complexity of insert is O(log2n) in the 47 expected case (and O(n) in the worst case) where n is the number of elements.",
                "This complexity is unaffected by changing the number of proxies, as indicated by the flat line in the figure.",
                "Sparse skip graphs require fewer pointer updates; however, their overhead is dependent on the number of proxies, and is O(log2Np) in the expected case, independent of n. This can be seen to result in significant reduction in overhead when the number of proxies is small, which decreases as the number of proxies increases.",
                "Failure handling is an important issue in a multi-tier sensor architecture since it relies on many components-proxies, sensor nodes and routing nodes can fail, and wireless links can fade.",
                "Handling of many of these failure modes is outside the scope of this paper; however, we consider the case of resilience of skip graphs to proxy failures.",
                "In this case, skip graph search (and subsequent repair operations) can follow any one of the other links from a root element.",
                "Since a sparse skip graph has search trees rooted at each node, searching can then resume once the lookup request has routed around the failure.",
                "Together, these two properties ensure that even if a proxy fails, the remaining entries in the skip graph will be reachable with high probability-only the entries on the failed proxy and the corresponding data at the sensors becomes inaccessible.",
                "To ensure that all data on sensors remains accessible, even in the event of failure of a proxy holding index entries for that data, we incorporate redundant index entries.",
                "TSAR employs a simple redundancy scheme where additional coarse-grain summaries are used to protect regular summaries.",
                "Each sensor sends summary data periodically to its local proxy, but less frequently sends a lowerresolution summary to a backup proxy-the backup summary represents all of the data represented by the finer-grained summaries, but in a lossier fashion, thus resulting in higher read overhead (due to false hits) if the backup summary is used.",
                "The cost of implementing this in our system is low - Figure 10(b) shows the overhead of such a redundancy scheme, where a single coarse summary is send to a backup for every two summaries sent to the primary proxy.",
                "Since a redundant summary is sent for every two summaries, the insert cost is 1.5 times the cost in the normal case.",
                "However, these redundant entries result in only a negligible increase in lookup overhead, due the logarithmic dependence of lookup cost on the index size, while providing full resilience to any single proxy failure. 6.2 Storage Microbenchmarks Since sensors are resource-constrained, the energy consumption and the latency at this tier are important measures for evaluating the performance of a storage architecture.",
                "Before performing an endto-end evaluation of our system, we provide more detailed information on the energy consumption of the storage component used to implement the TSAR local archive, based on empirical measurements.",
                "In addition we compare these figures to those for other local storage technologies, as well as to the energy consumption of wireless communication, using information from the literature.",
                "For empirical measurements we measure energy usage for the storage component itself (i.e. current drawn by the flash chip), as well as for the entire Mica2 mote.",
                "The power measurements in Table 3 were performed for the AT45DB041 [15] flash memory on a Mica2 mote, which is an older NOR flash device.",
                "The most promising technology for low-energy storage on sensing devices is NAND flash, such as the Samsung K9K4G08U0M device [16]; published power numbers for this device are provided in the table.",
                "Published energy requirements for wireless transmission using the Chipcon [4] CC2420 radio (used in MicaZ and Telos motes) are provided for comparison, assuming Energy Energy/byte Mote flash Read 256 byte page 58µJ* / 136µJ* total 0.23µJ* Write 256 byte page 926µJ* / 1042µJ* total 3.6µJ* NAND Flash Read 512 byte page 2.7µJ 1.8nJ Write 512 byte page 7.8µJ 15nJ Erase 16K byte sector 60µJ 3.7nJ CC2420 radio Transmit 8 bits (-25dBm) 0.8µJ 0.8µJ Receive 8 bits 1.9µJ 1.9µJ Mote AVR processor In-memory search, 256 bytes 1.8µJ 6.9nJ Table 3: Storage and Communication Energy Costs (*measured values) 0 200 400 600 800 1000 1 2 3 Latency(ms) Number of hops (a) Multi-hop query performance 0 100 200 300 400 500 1 5121024 2048 4096 Latency(ms) Index size (entries) Sensor communication Proxy communication Sensor lookup, processing (b) Query Performance Figure 11: Query Processing Latency zero network and protocol overhead.",
                "Comparing the total energy cost for writing flash (erase + write) to the total cost for communication (transmit + receive), we find that the NAND flash is almost 150 times more efficient than radio communication, even assuming perfect network protocols. 6.3 Prototype Evaluation This section reports results from an end-to-end evaluation of the TSAR prototype involving both tiers.",
                "In our setup, there are four proxies connected via 802.11 links and three sensors per proxy.",
                "The multi-hop topology was preconfigured such that sensor nodes were connected in a line to each proxy, forming a minimal tree of depth 0 400 800 1200 1600 0 20 40 60 80 100 120 140 160 Retrievallatency(ms) Archived data retrieved (bytes) (a) Data Query and Fetch Time 0 2 4 6 8 10 12 4 8 16 32 Latency(ms) Number of 34-byte records searched (b) Sensor query processing delay Figure 12: Query Latency Components 48 3.",
                "Due to resource constraints we were unable to perform experiments with dozens of sensor nodes, however this topology ensured that the network diameter was as large as for a typical network of significantly larger size.",
                "Our evaluation metric is the end-to-end latency of query processing.",
                "A query posed on TSAR first incurs the latency of a sparse skip graph lookup, followed by routing to the appropriate sensor node(s).",
                "The sensor node reads the required page(s) from its local archive, processes the query on the page that is read, and transmits the response to the proxy, which then forwards it to the user.",
                "We first measure query latency for different sensors in our multi-hop topology.",
                "Depending on which of the sensors is queried, the total latency increases almost linearly from about 400ms to 1 second, as the number of hops increases from 1 to 3 (see Figure 11(a)).",
                "Figure 11(b) provides a breakdown of the various components of the end-to-end latency.",
                "The dominant component of the total latency is the communication over one or more hops.",
                "The typical time to communicate over one hop is approximately 300ms.",
                "This large latency is primarily due to the use of a duty-cycled MAC layer; the latency will be larger if the duty cycle is reduced (e.g. the 2% setting as opposed to the 11.5% setting used in this experiment), and will conversely decrease if the duty cycle is increased.",
                "The figure also shows the latency for varying index sizes; as expected, the latency of inter-proxy communication and skip graph lookups increases logarithmically with index size.",
                "Not surprisingly, the overhead seen at the sensor is independent of the index size.",
                "The latency also depends on the number of packets transmitted in response to a query-the larger the amount of data retrieved by a query, the greater the latency.",
                "This result is shown in Figure 12(a).",
                "The step function is due to packetization in TinyOS; TinyOS sends one packet so long as the payload is smaller than 30 bytes and splits the response into multiple packets for larger payloads.",
                "As the data retrieved by a query is increased, the latency increases in steps, where each step denotes the overhead of an additional packet.",
                "Finally, Figure 12(b) shows the impact of searching and processing flash memory regions of increasing sizes on a sensor.",
                "Each summary represents a collection of records in flash memory, and all of these records need to be retrieved and processed if that summary matches a query.",
                "The coarser the summary, the larger the memory region that needs to be accessed.",
                "For the search sizes examined, amortization of overhead when searching multiple flash pages and archival records, as well as within the flash chip and its associated driver, results in the appearance of sub-linear increase in latency with search size.",
                "In addition, the operation can be seen to have very low latency, in part due to the simplicity of our query processing, requiring only a compare operation with each stored element.",
                "More complex operations, however, will of course incur greater latency. 6.4 Adaptive Summarization When data is summarized by the sensor before being reported to the proxy, information is lost.",
                "With the interval summarization method we are using, this information loss will never cause the proxy to believe that a sensor node does not hold a value which it in fact does, as all archived values will be contained within the interval reported.",
                "However, it does cause the proxy to believe that the sensor may hold values which it does not, and forward query messages to the sensor for these values.",
                "These false positives constitute the cost of the summarization mechanism, and need to be balanced against the savings achieved by reducing the number of reports.",
                "The goal of adaptive summarization is to dynamically vary the summary size so that these two costs are balanced. 0 0.1 0.2 0.3 0.4 0.5 0 5 10 15 20 25 30 Fractionoftruehits Summary size (number of records) (a) Impact of summary size 0 5 10 15 20 25 30 35 0 5000 10000 15000 20000 25000 30000 Summarizationsize(num.records) Normalized time (units) query rate 0.2 query rate 0.03 query rate 0.1 (b) Adaptation to query rate Figure 13: Impact of Summarization Granularity Figure 13(a) demonstrates the impact of summary granularity on false hits.",
                "As the number of records included in a summary is increased, the fraction of queries forwarded to the sensor which match data held on that sensor (true positives) decreases.",
                "Next, in Figure 13(b) we run the a EmTOS simulation with our adaptive summarization algorithm enabled.",
                "The adaptive algorithm increases the summary granularity (defined as the number of records per summary) when Cost(updates) Cost(falsehits) > 1 + and reduces it if Cost(updates) Cost(falsehits) > 1 − , where is a small constant.",
                "To demonstrate the adaptive nature of our technique, we plot a time series of the summarization granularity.",
                "We begin with a query rate of 1 query per 5 samples, decrease it to 1 every 30 samples, and then increase it again to 1 query every 10 samples.",
                "As shown in Figure 13(b), the adaptive technique adjusts accordingly by sending more fine-grain summaries at higher query rates (in response to the higher false hit rate), and fewer, coarse-grain summaries at lower query rates. 7.",
                "Related Work In this section, we review prior work on storage and indexing techniques for sensor networks.",
                "While our work addresses both problems jointly, much prior work has considered them in isolation.",
                "The problem of archival storage of sensor data has received limited attention in sensor network literature.",
                "ELF [7] is a logstructured file system for local storage on flash memory that provides load leveling and Matchbox is a simple file system that is packaged with the TinyOS distribution [14].",
                "Both these systems focus on local storage, whereas our focus is both on storage at the remote sensors as well as providing a unified view of distributed data across all such local archives.",
                "Multi-resolution storage [9] is intended for in-network storage and search in systems where there is significant data in comparison to storage resources.",
                "In contrast, TSAR addresses the problem of archival storage in two-tier systems where sufficient resources can be placed at the edge sensors.",
                "The RISE platform [21] being developed as part of the NODE project at UCR addresses the issues of hardware platform support for large amounts of storage in remote sensor nodes, but not the indexing and querying of this data.",
                "In order to efficiently access a distributed sensor store, an index needs to be constructed of the data.",
                "Early work on sensor networks such as Directed Diffusion [17] assumes a system where all useful sensor data was stored locally at each sensor, and spatially scoped queries are routed using geographic co-ordinates to locations where the data is stored.",
                "Sources publish the events that they detect, and sinks with interest in specific events can subscribe to these events.",
                "The Directed Diffusion substrate routes queries to specific locations 49 if the query has geographic information embedded in it (e.g. : find temperature in the south-west quadrant), and if not, the query is flooded throughout the network.",
                "These schemes had the drawback that for queries that are not geographically scoped, search cost (O(n) for a network of n nodes) may be prohibitive in large networks with frequent queries.",
                "Local storage with in-network indexing approaches address this issue by constructing indexes using frameworks such as Geographic Hash Tables [24] and Quad Trees [9].",
                "Recent research has seen a growing body of work on data indexing schemes for sensor networks[26][11][18].",
                "One such scheme is DCS [26], which provides a hash function for mapping from event name to location.",
                "DCS constructs a distributed structure that groups events together spatially by their named type.",
                "Distributed Index of Features in Sensornets (DIFS [11]) and Multi-dimensional Range Queries in Sensor Networks (DIM [18]) extend the data-centric storage approach to provide spatially distributed hierarchies of indexes to data.",
                "While these approaches advocate in-network indexing for sensor networks, we believe that indexing is a task that is far too complicated to be performed at the remote sensor nodes since it involves maintaining significant state and large tables.",
                "TSAR provides a better match between resource requirements of storage and indexing and the availability of resources at different tiers.",
                "Thus complex operations such as indexing and managing metadata are performed at the proxies, while storage at the sensor remains simple.",
                "In addition to storage and indexing techniques specific to sensor networks, many distributed, peer-to-peer and spatio-temporal index structures are relevant to our work.",
                "DHTs [25] can be used for indexing events based on their type, quad-tree variants such as Rtrees [12] can be used for optimizing spatial searches, and K-D trees [2] can be used for multi-attribute search.",
                "While this paper focuses on building an ordered index structure for range queries, we will explore the use of other index structures for alternate queries over sensor data. 8.",
                "Conclusions In this paper, we argued that existing sensor storage systems are designed primarily for flat hierarchies of homogeneous sensor nodes and do not fully exploit the multi-tier nature of emerging sensor networks.",
                "We presented the design of TSAR, a fundamentally different storage architecture that envisions separation of data from metadata by employing local storage at the sensors and distributed indexing at the proxies.",
                "At the proxy tier, TSAR employs a novel multi-resolution ordered distributed index structure, the Sparse Interval Skip Graph, for efficiently supporting spatio-temporal and range queries.",
                "At the sensor tier, TSAR supports energy-aware adaptive summarization that can trade-off the energy cost of transmitting metadata to the proxies against the overhead of false hits resulting from querying a coarser resolution index structure.",
                "We implemented TSAR in a two-tier sensor testbed comprising Stargatebased proxies and Mote-based sensors.",
                "Our experimental evaluation of TSAR demonstrated the benefits and feasibility of employing our energy-efficient low-latency distributed storage architecture in multi-tier sensor networks. 9.",
                "REFERENCES [1] James Aspnes and Gauri Shah.",
                "Skip graphs.",
                "In Fourteenth Annual ACM-SIAM Symposium on Discrete Algorithms, pages 384-393, Baltimore, MD, USA, 12-14 January 2003. [2] Jon Louis Bentley.",
                "Multidimensional binary search trees used for associative searching.",
                "Commun.",
                "ACM, 18(9):509-517, 1975. [3] Philippe Bonnet, J. E. Gehrke, and Praveen Seshadri.",
                "Towards sensor database systems.",
                "In Proceedings of the Second International Conference on Mobile Data Management., January 2001. [4] Chipcon.",
                "CC2420 2.4 GHz IEEE 802.15.4 / ZigBee-ready RF transceiver, 2004. [5] Thomas H. Cormen, Charles E. Leiserson, Ronald L. Rivest, and Clifford Stein.",
                "Introduction to Algorithms.",
                "The MIT Press and McGraw-Hill, second edition edition, 2001. [6] Adina Crainiceanu, Prakash Linga, Johannes Gehrke, and Jayavel Shanmugasundaram.",
                "Querying Peer-to-Peer Networks Using P-Trees.",
                "Technical Report TR2004-1926, Cornell University, 2004. [7] Hui Dai, Michael Neufeld, and Richard Han.",
                "ELF: an efficient log-structured flash file system for micro sensor nodes.",
                "In SenSys 04: Proceedings of the 2nd international conference on Embedded networked sensor systems, pages 176-187, New York, NY, USA, 2004.",
                "ACM Press. [8] Peter Desnoyers, Deepak Ganesan, Huan Li, and Prashant Shenoy.",
                "PRESTO: A predictive storage architecture for sensor networks.",
                "In Tenth Workshop on Hot Topics in Operating Systems (HotOS X)., June 2005. [9] Deepak Ganesan, Ben Greenstein, Denis Perelyubskiy, Deborah Estrin, and John Heidemann.",
                "An evaluation of multi-resolution storage in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. [10] L. Girod, T. Stathopoulos, N. Ramanathan, J. Elson, D. Estrin, E. Osterweil, and T. Schoellhammer.",
                "A system for simulation, emulation, and deployment of heterogeneous sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems, Baltimore, MD, 2004. [11] B. Greenstein, D. Estrin, R. Govindan, S. Ratnasamy, and S. Shenker.",
                "DIFS: A distributed index for features in sensor networks.",
                "Elsevier Journal of ad-hoc Networks, 2003. [12] Antonin Guttman.",
                "R-trees: a dynamic index structure for spatial searching.",
                "In SIGMOD 84: Proceedings of the 1984 ACM SIGMOD international conference on Management of data, pages 47-57, New York, NY, USA, 1984.",
                "ACM Press. [13] Nicholas Harvey, Michael B. Jones, Stefan Saroiu, Marvin Theimer, and Alec Wolman.",
                "Skipnet: A scalable overlay network with practical locality properties.",
                "In In proceedings of the 4th USENIX Symposium on Internet Technologies and Systems (USITS 03), Seattle, WA, March 2003. [14] Jason Hill, Robert Szewczyk, Alec Woo, Seth Hollar, David Culler, and Kristofer Pister.",
                "System architecture directions for networked sensors.",
                "In Proceedings of the Ninth International Conference on Architectural Support for Programming Languages and Operating Systems (ASPLOS-IX), pages 93-104, Cambridge, MA, USA, November 2000.",
                "ACM. [15] Atmel Inc. 4-megabit 2.5-volt or 2.7-volt DataFlash AT45DB041B, 2005. [16] Samsung Semiconductor Inc. K9W8G08U1M, K9K4G08U0M: 512M x 8 bit / 1G x 8 bit NAND flash memory, 2003. [17] Chalermek Intanagonwiwat, Ramesh Govindan, and Deborah Estrin.",
                "Directed diffusion: A scalable and robust communication paradigm for sensor networks.",
                "In Proceedings of the Sixth Annual International Conference on Mobile Computing and Networking, pages 56-67, Boston, MA, August 2000.",
                "ACM Press. [18] Xin Li, Young-Jin Kim, Ramesh Govindan, and Wei Hong.",
                "Multi-dimensional range queries in sensor networks.",
                "In Proceedings of the First ACM Conference on Embedded Networked Sensor Systems (SenSys)., 2003. to appear. [19] Witold Litwin, Marie-Anne Neimat, and Donovan A. Schneider.",
                "RP*: A family of order preserving scalable distributed data structures.",
                "In VLDB 94: Proceedings of the 20th International Conference on Very Large Data Bases, pages 342-353, San Francisco, CA, USA, 1994. [20] Samuel Madden, Michael Franklin, Joseph Hellerstein, and Wei Hong.",
                "TAG: a tiny aggregation service for ad-hoc sensor networks.",
                "In OSDI, Boston, MA, 2002. [21] A. Mitra, A. Banerjee, W. Najjar, D. Zeinalipour-Yazti, D.Gunopulos, and V. Kalogeraki.",
                "High performance, low power sensor platforms featuring gigabyte scale storage.",
                "In SenMetrics 2005: Third International Workshop on Measurement, Modeling, and Performance Analysis of Wireless Sensor Networks, July 2005. [22] J. Polastre, J. Hill, and D. Culler.",
                "Versatile low power media access for wireless sensor networks.",
                "In Proceedings of the Second ACM Conference on Embedded Networked Sensor Systems (SenSys), November 2004. [23] William Pugh.",
                "Skip lists: a probabilistic alternative to balanced trees.",
                "Commun.",
                "ACM, 33(6):668-676, 1990. [24] S. Ratnasamy, D. Estrin, R. Govindan, B. Karp, L. Yin S. Shenker, and F. Yu.",
                "Data-centric storage in sensornets.",
                "In ACM First Workshop on Hot Topics in Networks, 2001. [25] S. Ratnasamy, P. Francis, M. Handley, R. Karp, and S. Shenker.",
                "A scalable content addressable network.",
                "In Proceedings of the 2001 ACM SIGCOMM Conference, 2001. [26] S. Ratnasamy, B. Karp, L. Yin, F. Yu, D. Estrin, R. Govindan, and S. Shenker.",
                "GHT - a geographic hash-table for data-centric storage.",
                "In First ACM International Workshop on Wireless Sensor Networks and their Applications, 2002. [27] N. Xu, E. Osterweil, M. Hamilton, and D. Estrin. http://www.lecs.cs.ucla.edu/˜nxu/ess/.",
                "James Reserve Data. 50"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        }
    }
}