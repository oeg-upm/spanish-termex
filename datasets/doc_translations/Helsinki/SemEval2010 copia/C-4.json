{
    "original_text": "Intra-flow Loss Recovery and Control for VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlin, Germany D-l 0589 Berlin, Germany sanneck@fokus.gmd.de le@fokus.gmd.de Adam Wolisz Technical University Berlin, Telecommunication Networks Group, Sekr. FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de ABSTRACT Best effort packet-switched networks, like the Internet, do not offer a reliable transmission of packets to applications with real-time constraints such as voice. Thus, the loss of packets impairs the application-level utility. For voice this utility impairment is twofold: on one hand, even short bursts of lost packets may decrease significantly the ability of the receiver to conceal the packet loss and the speech signal playout is interrupted. On the other hand, some packets may be particular sensitive to loss as they carry more important information in terms of user perception than other packets. We first develop an end-to-end model based on loss runlengths with which we can describe the loss distribution within a flow. These packet-level metrics are then linked to user-level objective speech quality metrics. Using this framework, we find that for low-compressing sample-based codecs (PCM) with loss concealment isolated packet losses can be concealed well, whereas burst losses have a higher perceptual impact. For high-compressing frame-based codecs (G.729) on one hand the impact of loss is amplified through error propagation caused by the decoder filter memories, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state. Contrary to sample-based codecs we show that the concealment performance may break at transitions within the speech signal however. We then propose mechanisms which differentiate between packets within a voice data flow to minimize the impact of packet loss. We designate these methods as intra-flow loss recovery and control. At the end-to-end level, identification of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place. Hop-by-hop support schemes then allow to (statistically) trade the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance. As both packets require the same cost in terms of network transmission, a gain in user perception is obtainable. We show that significant speech quality improvements can be achieved and additional data and delay overhead can be avoided while still maintaining a network service which is virtually identical to best effort in the long term. Categories and Subject Descriptors C.2.4 [Computer Communication Networks]: Distributed Systems-Distributed applications; (3.2.6 [Computer Communication Networks]: Internetworking-Routers; C.4 [Computer Systems Organization]: Performance of Systems-itJeasun3nent techniques; C.4 [Computer Systems Organization]: Performance of Systems--Modeling techniques General Terms Design, Measurement, Performance, Reliability 1. INTRODUCTION Considering that a real-time flow may experience some packet loss, the impact of loss may vary significantly dependent on which packets are lost within a flow. In the following we distinguish two reasons for such a variable loss sensitivity: Temporal sensitivity: Loss of ADUs which is correlated in time may lead to disruptions in the service. Note that this effect is further aggravated by some interdependence between ADUs (i.e., that one ADU can only be decoded when a previous ADU before has successfully been received and decoded). For voice, as a single packet contains typically several ADUs (voice frames) this effect is thus more significant than e.g. for video. It translates basically to isolated packet losses versus losses that occur in bursts. Sensitivity due to ADU heterogeneity: Certain ADUs might contain parts of the encoded signal which are Application Data Unit: the unit of data emitted by a source coder such as a video or voice frame. 441 Figure 1: Schematic utility functions dependent on the loss of more (+l) and less (-1) important packets more important with regard to user perception than others of the same flow. Let us consider a flow with two frame types of largely different perceptual importance (we assume same size, frequency and no interdependence between the frames). Under the loss of 50% of the packets, the perceptual quality varies hugely between the case where the 50% of the frames with high perceptual importance are received and the tax where the 50% less important frames are received. Network support for real-time multimedia flows can on one hand aim at offering a lossless service, which, however, to be implemented within a pa&et-switched network, will be costly for the network provider and thus for the user. On the other hand, within a lossy service, the above sensitivity constraints must be taken into account. It is our strong belief that this needs to be done in a generic way, i.e., no application-specific knowledge (about particular coding schemes e.g.) should be necessary within the network and, vice versa, no knowledge about network specifics should be necessary within an application. Let us now consider the case that 50% of packets of a flow are identified as more important (designated by +l) or less important (-1) due to any of the above sensitivity constraints. Figure 1 a) shows a generic utility function describing the applicationlevel Quality of Service (QoS) dependent on the percentage of packets lost. For real-time multimedia traffic, such utility should correspond to perceived video/voice quality. If the relative importance of the packets is not known by the transmission system, the loss rates for the +l and -1 packets are equal. Due to the over-proportional sensitivity of the +l packets to loss as well as the dependence of the end-t* end loss recovery performance on the fl packets, the utility function is decreasing significantly in a non-linear way (approximated in the figure by piece-wise linear functions) with an increasing loss rate. Figure 1 b) presents the CBS~ where all +l packets are protected at the expense of -1 pa&&. The decay of the utility function (for loss rates < 50%) is reduced, because the +l packets are protected and the endto-end loss recovery can thus operate properly over a wider range of loss rates indicated by the shaded area. This results in a graceful degradation of the applications utility. Note that the higher the non-linearity of the utility contribution of the fl packets is (deviation from the dotted curve in Fig. 1 a), the higher is the potential gain in utility when the protection for +l packets is enabled. Results for actual perceived quality as utility for multimedia applications exhibit such a non-linear behavior*. To describe this effect and provide a taxonomy for different QoS enhancement approaches, we introduce a novel terminology: we designate mechanisms which influence QoS parameters between Bows (thus decrease the loss rate of one flow at the expense of other flows) as inter-flow QoS. Schemes which, in the presence of loss, differentiate between pa&& within a flow as demonstrated in Figure 1 above, provide intra-flow QoS enhancement. As QoS mechanisms have to be implemented within the network (hopby-hop) and/or in the end systems (end-to-end), we have another axis of classification. The adaptation of the senders bitrate to the current network congestion state as an intraflow QoS scheme (loss avoidance, [IS]) is difficult to apply to voice. Considering that voice flows have a very low bitrate, the relative cost of transmitting the feedback information is high (when compared e.g. to a video flow). To reduce this cost the feedback interval would need to be increased, then leading to a higher probability of wrong adaptation decisions. The major di6culty, however, is the lack of a codec which is truly scalable in terms of its output bitrate and corresponding perceptual quality. Currently standardized voice codecs ([17]) usually only have a 6xed output bitrate. While it has been proposed to switch between voice codeca ([2]), the MOS (subjective quality) values for the codecs employed do not differ much: e.g., theITU codecs G.723.1, G.729, G.728, G.726and G.711 cover a bitrate range from 5.3 kbitjs to 64 kbitjs while the subjective quality differs by less than 0.25 on a l-to-5 MOS scale ([4], 1: bad, 5: excellent quality). So when the availability of sutticient computing power is assumed, the lowest bitrate codec can be chosen permanently without actually decreasing the perceptual quality. For loss recovery on an end-to-end basis, due to the realtime delay constraints, open-loop schemes like Forward Error Correction (FEC) have been proposed ([2]). While such schemes are attractive because they can be used on the Internet today, they also have several drawbacks. The amount of redundant information needs to be adaptive to avoid taking bandwidth away from other flows. This adaptation is crucial especially when the fraction of traflic using redundancy schemes is large (181). If the redundancy is a source coding itself, like it has often been proposed ([7]), the comments from above on adaptation also apply. Using redundancy has also implications to the playout delay adaptation ([lo]) employed to de-jitter the packets at the receiver. Note that the presented types of loss sensitivity also apply to apWhile we have obtained results which confirm the shape of the overall utility curve shown in Fig. 1, clearly the utility functions of the +1/-l sub.flows and their relationship are more complex and only approximately additive. 442 Table 1: State and transition probabilities computed for an end-to-end Internet trace using a general Markov model (third order) by Yajnik et. al. [9] state 000 001 010 011 100 101 110 111 Probability of Probability Probability being in the state of I(s)=0 of l(s)=1 0.8721 0 . 9 7 7 9 0.0221 0 . 0 2 0 8 0 . 6 1 1 2 0 . 3 8 8 8 0 . 0 1 4 2 0 . 8 8 1 9 0.1181 0 . 0 1 0 2 0 . 2 7 1 0 0 . 7 2 9 0 0 . 0 2 0 8 0 . 9 2 7 8 0 . 0 7 2 2 0 . 0 0 3 6 0 . 4 1 9 8 0 . 5 8 0 2 0 . 0 1 0 2 0 . 8 1 0 9 0.1891 0.0481 0 . 1 5 3 9 0.8461 plications which are enhanced by end-to-end loss recovery mechanisms. End-to-end mechanisms can reduce and shift such sensitivities but cannot come close to eliminate them. Therefore in this work we assume that the lowest possible bitrate which provides the desired quality is chosen. Neither feedback/adaptation nor redundancy is used, however, at the end-to-end level, identification/marking of packets sensitive to loss (sender) as well as loss concealment (receiver) takes place. Hop-by-hop support schemes then allow trading the loss of one packet, which is considered more important, against another one of the same flow which is of lower importance. We employ actual codecs and measure their utility in the presence of packet loss using objective speech quality measurement. The paper is structured as follows: Section 2 introduces packet- and user-level metrics. We employ these metrics to describe the sensitivity of VoIP traffic to packet loss in section 3. Section 4 briefly introduces a queue management algorithm which can be used for intra-flow loss control. In section 5, we present results documenting the performance of the proposed mechanisms at both the end-to-end and hopby-hop level. Section 6 concludes the paper. 2. METRICS 2.1 Packet-level metrics A general Markov model ([19, S]) which describes the loss process is defined as follows: Let P( Z(s) ] Z(s - m),... ,Z(s - 2),Z(s - 1) ) be the state transition probability of a general Markov model of order m, where Z(s) is the loss indicator function for the packet with the sequence number s. All combinations for the values (0 and 1) of the sequence Z(s-m), . . . , Z(s-2),Z(s-1) appear in the state space. As an example P( Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) gives the state transition probability when the current packet s is lost, the previous packet s - 1 has also been lost and packet s - 2 has not been lost. The number of states of the model is 2. Two state transitions can take place from any of the states. Thus, the number of parameters which have to be computed is 2m+1. Even for relatively small m this amount of parameters is difficult to be evaluated and compared. Table 1 shows some values for the state and transition probabilities for a general Markov model of third order measured end-to-end in the Internet by Yajnik et. al. ([19]). It is interesting to note that for all states with Z(s - 1) = 0 the probability for the next packet not to be lost (Z(s) = 0) is generally very high (> 0.8, in bold typeface) whereas when Z(s- 1) = 1 the state transition probabilities to that event cover the range of 0.15 to 0.61. That means that past no loss events do not affect the loss process as much as past loss events. Intuitively this seems to make sense, because a successfully arriving packet can be seen as a indicator for congestion relief. Andren et. al. ([l]) as well as Yajnik et. al. ([20]) both confirmed this by measuring the cross correlation of the loss- and no-loss-runlengths. They came to the result that such correlation is very weak. This implies that patterns of short loss bursts interspersed with short periods of successful packet arrivals occur rarely (note in this context that in &able 1 the pattern 101 has by far the lowest state probability). Thus, in the following we employ a model ([12]) which only considers the past loss events for the state transition probability. The number of states of the model can be reduced from 2m to m + 1. This means that we only consider the state transition probability P( Z(s) ] Z(s - k), . . . ,Z(s - 1) ) with Z(s - Ic + i) = 1 V i E [0, Ic - 11, where Ic (0 < k 5 m) is a variable parameter. We define a loss run length lc for a sequence of Ic consecutively lost packets detected at sj (sj > Ic > 0) with Z(sj - k - 1) = O,Z(sj) = 0 and Z(sj - k + i) = 1 V i E [0, Ic - 11, j being the j-th <burst loss event. Note that the parameters of the model become independent of the sequence number s and can now rather be described by the occurence ok of a loss run length k. We define the random variable X as follows: X = 0: no packet lost, X = k (0 < lc < m): ezactly lc consecutive packets lost, and X 2 k (0 < k < m): at least k consecutive packets lost. With this definition, we establish a loss run-length model with a finite number of states (m + 1) which gives loss probabilities dependent on the burst length. In the model, for every additional lost packet which adds to the length of a loss burst a state transition takes place. If a packet is successfully received, the state returns to X = 0. Thus, the state probability of the system for 0 < Ic < m is P(X 2 Zc). Due to the limited memory of the system, the last state X = m is just defined as crm consecutive packets lost, with P(X = m) being the state probability. Given the case of a finite number of packets a for a flow, which experiences d = cpC1 ]cok packet drops, we have the relative frequency pL,k = 2 (P(X = k) for a + 00) for the occurence of a loss burst of length lc. An approximation for the expectation of the random variable X can be computed as pi = cr==, #+L,k and identified with the mean loss rate. We can also approximate the state probabilities of the model by the cumulative loss rate p~,~,,~(k) = CrSkp~,,, (0 < k < m) and p~,~ = Cr.p=, (n--mzl)ot (k = m). The transition probabilities for 1 < lc < m can be computed easily as: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) These conditional loss probabilities again can be approxPzl,cum(k) _ Cnm,k on i m a t e d by PL,cond@) = PL,cum(k-l) - C;Ek--l 0,. For 443 Figure 2: Loss run-length model with m + 1 states P(X = m]X = m) we have: PL,,,d(rn) = %Lf;:P Fig. 2 shows the Markov chain for the model. (1) Additionally, we also define a random variable Y which de scribes the distribution of burst loss lengths with respect to the bunt loss events j (and not to packet events like in the definition of X). We have the burst loss length rate ga = * as an estimate for P(Y = k). Thus, the mean burst loss length is g = h = e = CT==, kgb corresponding to E[Y] (average loss gap, [5]). The run-length model implies a geometric distribution for residing in state X = m. For the probability of a burst loss length of k packets we thus can compute estimates for performance parameters in a higher order model representation (note that here Y represent the random variable used in the higher-order models). For a three state model we have e.g. for P(Y = k): P(Y = k) = P(Y=k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 For the special case of a system with a memory of only the previous packet (m = l), we can use the runlength distribution for a simple computation of the parameters of the commonly-used Gilbert model (Fig. 3) to characterize the loss process (X being the associated random variable with X = 0: no packet lost, X = 1 a packet lost). Then the probability of being in state m can be seen BS the uncow ditional loss probability ulp and approximated by the mean loss (pr. = pi,,,,). Only one conditional loss probability clp for the transition 1 --t 1 exists: p~,E-d = CFL(~ - lbd (3) If losses of one flow are correlated (i.e., the loss probability of an arriving packet is itiuenced by the contribution to the state of the queue by a previous packet of the same flow and/or both the previous and the current packet see busty arrivals of other traffic, [15]) we have pal < clp and thus ulp 5 clp. For pal = elp the Gilbert model is equivalent to a l-state (Bernotilli) model with zllp = elp (no loss correlation). As in equation 2 we can compute an estimate for the probability of a burst loss length of k packets for a higher order model representation: B(Y = k) = clpk-(1 - clp) (4) Figure 3: Loss run-length (Gilbert model) model with two states Figure 4: Components of the end-to-end loss recovery/control measurement setup. 2.2 Objective Speech Quality Metrics Unlike the conventional methods like the Signal-t-Noise Ratio (SNR), novel objective quality measures attempt to estimate the subjective quality as closely as possible by modeling the human auditory system. In our evaluation we use two objective quality measures: the Enhanced Mod&d Bark Spectral Distortion (EMBSD, [21]) and the Measw ing Normalizing Blocks (MNB) described in the Appendix II of the ITU-T Recommendation P.861 ([18]). These two objective quality measure.~ are reported to have a very high correlation with subjective tests, their relation to the range of subjective test result values (MOS) is close to being linear and they are recommended as being suitable for the evaluation of speech degraded by transmission errors in real network environments such as bit errors and frame erasures ([18, 211). Both metrics are distance measures, i.e., a IB suit value of 0 implies perfect quality, the larger the value, the worse the speech quality is (in Fig. 5 we show an axis with approximate corresponding MOS values). For all simulations in this paper we employed both schemes. As they yielded very similar results (though MNB results generally exhibited less variability) we only present EMBSD results. 3. VOIP LOSS SENSITIVITY Figure 4 shows the components of the measurement setup which we will use to evaluate our approach to combined end-t-end and hopby-hop loss recovery and control. The 444 shaded boxes show the components in the data path where mechanisms of loss recovery are located. Together with the parameters of the network model (section 2.1) and the perceptual model we obtain a measurement setup which allows us to map a specific PCM signal input to a speech quality measure. While using a simple end-to-end loss characterization, we generate a large number of loss patterns by using different seeds for the pseudcerandom number generator (for the results presented here we used 300 patterns for each simulated condition for a single speech sample). This procedure takes thus into account that the impact of loss on an input signal may not be homogenous (i.e., a loss burst within one segment of that signal can have a different perceptual impact than a loss burst of the same size within another segment). By averaging the result of the objective quality measure for several loss patterns, we have a reliable indication for the performance of the codec operating under a certain network loss condition. We employed a Gilbert model (Fig. 3) as the network model for the simulations, as we have found that here higher order models do not provide much additional information. 3.1 Temporal sensitivity 3.1.1 Pa4 We first analyze the behaviour for ~-law PCM flows (64 kbit/s) with and without loss concealment, where the loss concealment repairs isolated losses only (speech stationarity can only be assumed for small time intervals). Results are shown for the AP/C concealment algorithm ([ll]). Similar results were obtained with other concealment algorithms. Figure 5 shows the case without loss concealment enabled where Gilbert model parameters are varied. The resulting speech quality is insensitive to the loss distribution parameter (elp). The results are even slightly decressing for an increasing clp, pointing to a significant variability of theresuits. In Figure 6 the results with loss concealment are depicted. When the loss correlation (dp) is low, loss concealment provides a significant performance improvement. The relative improvement increases with increasing loss (pulp). For higher clp values the cases with and without concealment become increasingly similar and show the same performance at clp x 0.3. Figures 5 and 6 respectively also contain a curve showing the performance under the assumption of random losses (Bernouilli model, ulp = elp). Thus, considering a given ulp, a worst case loss pattern of alternating losses (I(s mod 2) = l,l([s + l] mod 2) = 0) would enable a considerable performance improvement (with ok = OVk > 1: p~,cond = 0, Eq. 3). As we found by visual inspection that the distributions of the perceptual distortion values for one loss condition seem to approximately follow a normal distribution we employ mean and standard deviation to describe the statistical variability of the measured values. Figure 7 presents the perceptual distortion as in the previous figure but also give the standard deviation as error bars for the respective loss condition. It shows the increasing variability of the results with increasing loss correlation (clp), while the variability does not seem to change much with an increasing amount of loss (alp). On one hand this points to some, though weak, sensitivity with regard to heterogeneity (i.e., it matters which area of the speech signal (voiced/unvoiced) experiences a burst loss). On the other hand it shows, that a large number of different Figure 5: Utility curve for PCM without loss conc e a l m e n t (EMBSD) Figure 6: Utility curve for PCM with loss concealment (EMBSD) Figure 7: Variability of the perceptual distortion with 10s~ concealment (EMBSD) 445 Figure 8: Utility curve for the G.729 codec (EMBSD) loss patterns is necessary for a certain speech sample when using objective speech quality measurement to assess the impact of loss corwlation on user perception. 3.1.2 G.729 G.729 ([17]) uses the Conjugate Structure Algebraic Code Excited Linear Prediction (CS-ACELP) coding scheme and ooerates at 8 kbit/s. In G.729. a speech fmme is 10 ms in d&ion. For each frame, theG.7i9 encoder analyzes the input data and extracts the parameters of the Code Excited Linear Prediction (CELP) model such as linear prediction filter coefficients and excitation vectors. When a frame is lost or corrupted, the G.729 decoder uses the parameters of the previous frame to interpolate those of the lost frame. The line spectral pair coefficients (LSP3) of the last good frame are repeated and the gain coefficients are taken from the previous frame but they are damped to gradually reduce their impact. When a frame loss occurs, the decoder cannot update its state, resulting in a divergence of encoder and decoder state. Thus, errors are not only introduced during the time period represented by the current frame but also in the following ones. In addition to the impact of the missing codewords, distortion is increased by the missing update of the predictor filter memories for the line speo tral pairs and the linear prediction synthesis filter memo ries. Figure 8 shows that for similar network conditions the output quality of the G.729* is worse than PCM with loss concealment, demonstrating the compression versus quality tradeoff under packet loss. Interestingly the loss correlation (dp parameter) has some impact on the speech quality, however, the effect is weak pointing to a certain robustness of the G.729 codec with regard to the resiliency to consecutive packet losses due to the internal loss concealment. Rosenberg has done a similar experiment ([9]), showing that the difference between the original and the concealed signal with increasing loss burstiness in terms of a mean-squared error is significant, however. This demonstrates the importance of perceptual metrics which are able to include concealment LSPs are another representation of the linear prediction coefficients. Two G.729 frames are contained in a packet. Figure 9: Resynchronization time (in frames) of the G.729 decoder after the loss of k consecutive frames (k E [1,4]) as a function of frame position. (and not only reconstruction) operations in the quality assessment. 3.2 Sensitivity due to ADU heterogeneity PCM is a memoryless encoding. Therefore the ADU content is only weakly heterogeneous (Figure 7). Thus, in this section we concentrate on the G.729 coda. The experiment we carry out is to meawre the resynchronization time of the d* coder after k consecutive frames are lost. The G.729 decoder is said to have resynchronized with the encoder when the energy of the error signal falls below one percent of the energy of the decoded signal without frame loss (this is equivalent to a signal-t-noise ratio (SNR) threshold of 2OdB). The error signal energy (and thus the SNR) is computed on a per-frame basis. Figure 9 shows the resynchronization time (expressed in the number of frames needed until the threshold is exceeded) plotted against the position of the loss (i.e., the index of the first lost frame) for d&rent values of k. The speech sample is produced by a male speaker where an unvoiced/voiced (au) transition occurs in the eighth frame. We can see from Figure 9 that the position of a frame loss has a signilicant inlluence cm the resulting signal degradation, while the degradation is not that sensitive to the length of the frame loss burst k. The loss of unvoiced frames seems to have a rather small impact on the signal degradation and the decoder recovers the state information fast thereafter. The loss of voiced frames causes a larger degradation of the speech signal and the decoder needs more time to resyncbronize with the sender. However, the loss of voiced frames at an unvoiced/voiced transition leads to a significant degradation of the signal. We have repeated the experiment for different male and female speakers and obtained similar results. lsking into account the wed coding scheme, the above phenomenon could be explained as follows: Because voiced sounds have a higher energy than unvoiced sounds, the loss of voiced frames causes a larger signal degradation than the loss of unvoiced frames. However, due to the periodic property of voiced sounds, the decoder can conceal While on one hand we see that SNR n~easu~es often do not correlate well with subjective speech quality, on the other hand the large differences in the SNR-threshold-based resynchronization time clearly point to a significant impact on subjective speech quality. 446 Figure 10: Differential RED drop probabilities as a function of average queue sizes the loss of voiced frames well once it has obtained suflicient information on them. The decoder fails to conceal the loss of voiced frames at an unvoiced/voiced transition because it attempts to conceal the loss of voiced frames using the filter coefficients and the excitation for an unvoiced sound. Moreover, because the G.729 encoder uses a moving average filter to predict the values of the line spectral pairs and only transmits the difference between the real and predicted vaues, it takes a lot of time for the decoder to resynchronize with the encoder once it has failed to build the appropriate linear prediction filter. 4. QUEUE MANAGEMENT FOR INTRAFLOW LOSS CONTROL While we have highlighted the sensitivity of VoIP traffic to the distribution of loss in the last sections, we now want to briefly introduce a queue management mechanism ([13]) which is able to enforce the relative preferences of the ap plication with regard to loss. We consider flows with packets marked with +l and I1 (as described in the introduction) BS foreground traffic (FT) and other (best effort) flows as backaound traffic (BT). Packet marking, in addition to keeping the desirable property of state aggregration within the network core as proposed by the IETF Differentiated Services architecture, is exploited here to convey the intrbflow requirements of a llow. As it should be avoided to introduce reordering of the packets of a flow in the network we consider mechanisms for the management of a single queue with different priority levels. One approach to realize inter-flow service differentiation using a single queue is RIO (RED with IN and OUT, [3]). With RIO, two average queue sizes as congestion indicators are computed: one just for the IN (high priority) packets and another for both IN and OUT (low priority) packets. Packets marked as OUT are dropped earlier (in terms of the average queue size) than IN packets. RIO has been designed to decrease the clip seen by particular Bows at the expense of other flows. In this work, however, we want to keep the ulp as given by other parameters while modifying the loss distribution for the foreground traffic (FT). This amounts to trading the loss of a +l packet against a -1 packet of the same flow (in a statistical sense). Fig. 10 shows the conventional RED drop probability curve (po as a function of the average queue size for all arrivals avg), which is applied to all unmarked (0) traffic (background traffic: BT). The necessary relationship between the drop probabilities for packets marked as -1 and +l can be derived 85 follows (note that this relationship is valid both at the end-tend level and every individual hop): Let a = a0 + a+, +a-~ be the overall number of emitted packets by an FT flow and a,, + E [-l,O, +l] be the number of packets belonging to a certain class (where the 0 class corresponds to (unmarked) best effort traflic). Then, with a+, = a-1 = a,~, and considering that the resulting service has to be best effort in the long term, we have: aopo + a+lp+l + LIP-1 A ape Qlll@+l fP-1) = (a--oo)m P - l = zpo-p+1 (5) Due to this relationship between the drop probability for +l and -1 packets, we designate this queue management algorithm as Differential RED (DiERED). Figure 10 shows the corresponding drop probability curves. Due to the condition of a+, = (I-L = all, in addition to the conventional RED behaviour, the DiffRED implementation should also monitor the +l and -1 arrival processes. If the ratio of +l to -1 packets at a gateway is not 1 (either due to misbehaving flows or a significant number of flows which have already experienced loss at earlier hops) the -1 loss prob ability is decreased and the +l probability is increased at the same time thus degrading the service for all users. The shaded areas above and below the po(avg) curve (Fig. 10) show the operating area when this correction is added. In [13] it has been shown that using only the conventional RED average queue size avg for DSRED operation is not sufficient. This is due to the potentially missing correlation of the computed aug value between consecutive +l and -1 arrivals, especially when the share of the FT traftic is low. As this might result in a unfair distribution of losses between the FT and BT fractions, a specific avgl value is computed by sampling the queue size only at FT arrival instants. Thus, a service differentiation for foreground traffic is possible which does not differ from conventional RED behaviour in the long term average (i.e., in the ulp). 5. INTRA-FLOW LOSS RECOVERY AND CONTROL 5.1 Temporal sensitivity Considering a flow with temporal loss sensitivity, paragraph 3.1.1 has shown that a simple, periodic loss pattern enhances the performance of the end-to-end loss recovery. The pattern is not tied to particular packets, therefore a per-flow characterization with the introduced metrics is applicable. In this paragraph we assume that a flow expressed its temporal se*sitivity by marking its flow with an alternating pattern of ,c+l,>,c~l,,, 447 Figure 11: Comparison of actual and estimated Figure 12: Comparison of actual and estimated burst loss length rates as a function of burst length burst, loss length rates as a function of burst length k: three state run-length-based model k: two state run-length-based model (Gilbert.) Figures 11 and 12 show the rates for the actual and the estimated burst loss lengths for a three-state (m = 2) and a two=state (m = 1, Gilbert) model respectively6. We can observe that DiffRED shapes the burst probability curve in the desired way. Most of the probability mass is concentrated at, isolated losses (the ideal behaviour would be the occurence of only isolated losses (Ic = 1) which can be expressed with clp = 0 in terms of Gilbert model parameters). With Drop Tail an approximately geometrically decreasing burst loss probability with increasing burst length (Eq. 4) is obtainable, where the clp parameter is relatively large though. Thus, considering voice with temporal loss sensitivity as the foreground traffic of interest, with DifFRED a large number of short annoying bursts can be traded against a larger number of isolated losses and few long loss bursts (which occur when the queue is under temporary overload, i.e., awg > maxth, Fig. 10). We can see that the three-state model estimation (Eq. 2) reflects the two areas of the DifFRED operation (the sharp drop of the burst loss length rate for k = 2 and the decrease along a geometrically decreasing asymptote for k > 2). This effect cannot be captured by the two state model (Eq. 4) which thus overestimates the burst loss length rate for Ic = 2 and then hugely underestimates it for k > 2. Interestingly, for Drop Tail, while both models capture the shape of the actual curve, the lower order model is more accurate in the estimation. This can be explained as follows: if the burst loss length probabilities are in fact close to a geometrical distribution, the estimate is more robust if all data is included (note that the run-length based approximation of the conditional loss probability P(X = mlX = m) only includes loss run-length occurences larger or equal to m: Eq. 1). sWe only discuss the results qualitatively here to give an example how an intra-flow loss control algorithm performs and to show how loss models can capture this performance. Details on the simulation scenario and parameters can be found in [12]. 5.2 Sensitivity due to ADU heterogeneity In paragraph 3.1.2 we have seen that sensitivity to ADU heterogeneity results in a certain non-periodic loss pattern. Thus, a mechanism at (or near) the sender is necessary which derives that pattern from the voice data. Furthermore, an explicit cooperation between end-to-end and hop by-hop mechanisms is necessary (Fig. 4). We use the result of paragraph 3.2 to develop a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking (SPB-DIFFMARK). The DIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames. Figure 13 shows the simple algorithm written in a pseudocode that is used to detect an unvoiced/voiced (uw) transition and protect the voiced frames at, the beginning of a voiced signal. The procedure analysis0 is used to classify a block of Ic frames as voiced, unvoiced, or uv transition. send0 is used to send a block of Ic frames as a single packet with the appropriate priority (either fl, 0 or -1). As the core algorithm gives only a binary marking decision (protect the packet or not), we employ a simple algorithm to send the necessary -1 packets for compensation (Eq. 5): after a burst of +l packets has been sent, a corresponding number of -1 packets is sent immediately. State about the necessary number of to-be-sent -1 packets is kept in the event that the SPB algorithm triggers the next +l burst before all -1 packets necessary for compensation are sent. Thus, seen over time intervals which are long compared to the +1/-l burst times, the mean loss for the flow will be equal to the best effort case (Eq. 5). N is a pre-defined value and defines how many frames at the beginning of a voiced signal are to be protected. Our simulations (Fig. 9) have shown that the range from 10 to 20 are appropriate values for N (depending on the network loss condition). In the simulations presented below, we choose Ic = 2, a typical 448 protect = 0 fcm?ach (k frames) classify = analysis(k frames)] if (protect > 0) if (classify == unvoiced) protect = 0 if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif else send(k frames, +l) protect = protect-k compensation = compensation+k endif else if (classify == uvfransition) send(k frames, +l) protect = N - k compensation = compensation+k else if (compensation > 0) compensation = compensation-k send(k frames, -1) else send(k frames, 0) endif endif endif endfor Figure 13: SPB-DIFFMARK Pseudo Code value for interactive speech transmissions over the Internet (20ms of audio data per packet). A larger number of Ic would help to reduce the relative overhead of the protocol header but also increases the packetization delay and makes sender classification and receiver concealment in case of packet loss (due to a larger loss gap) more difficult. 5.2.1 En.d-to-end simulation description Due to the non-periodic loss pattern, we need to explicitly associate a drop probability with a single packet within an end-to-end model. Therefore we use a separate one-state Markov model (Bernouilli model) to describe the network behaviour as seen by each class of packets. Best effort packets (designated by 0 in Fig. 14) are dropped with the probability pc, whereas packets marked with +l and -1 are dropped with probabilities of p+i and p-1 respectively. This is a reasonable assumption with regard to the interdependence of the different classes in fact, as it has been shown that DiffRED (Figs. 11 and 12) achieves a fair amount of decorrelation of +l and -1 packet losses. Nevertheless to include some correlation between the classes we have set p+i = 10m3 pc for the subsequent simulations. This should The appropriateness of the simple end-to-end modeling used has been investigated in [12] with discrete event simulation using a multi-hop topology and detailed modeling of foreground and background traffic sources. Marking Scheme Network Model N O M A R K lolo/ 0~0~0~ 01 F U L L M A R K +I +I +I +I +l +I SPB MARK 1 0 1+I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P B D I F F M A R K 1 IJ / +l I +l I -1 j-1 / 0 I ALT DIFFMARK I-1 / +I 1-1 1+I /-I 1+I 1 Figure 14: Marking schemes and corresponding network models. also allow a reasonable evaluation of how losses in the fl class affect the performance of the SPB-algorithms. For a direct comparison with SPB-DIFFMARK, we evaluate a scheme where packets are alternatingly marked as being either -1 or +l (ALT-DIFFMARK, Figure 14). We furthermore include related inter-flow loss protection schemes. The first scheme uses full protection (FULL MARK, all packets are marked as +l). The SPB-MARK scheme operates similarly to SPB-DIFFMARK, but no -1 packets are sent for compensation (those packets are also marked as 0). For comparison we again use a scheme where packets are alternatingly marked as being either 0 or +l (ALT-MARK). Finally, packets of pure best effort flows are dropped with the probability po (NO MARK case in Fig. 14). For the SPB marking schemes the percentage of +l- and -l-marked packets respectively is 40.4% for the speech material used. We obtained similar marking percentages for other speech samples. The ALT marking schemes mark exactly 50% of their packets as being fl. 5.2.2 Results Figure 15 shows the perceptual distortion for the marking schemes dependent on the drop probability pc. The unprotected case (NO MARK) has the highest perceptual distortion and thus the worst speech quality*. The differential marking scheme (SPB-DIFFMARK) offers a significantly better speech quality even when only using a network service which amounts to best effort in the long term. Note that the ALT-DIFFMARK marking strategy does not differ from the best effort case (which confirms the result of paragraph 3.1.2). SPB-DIFFMARK is also even better than the inter-flow QoS ALT-MARK scheme, especially for higher values of pe. These results validate the strategy of our SPB marking schemes that do not equally mark all packets with a higher priority but rather protect a subset of frames that are essential to the speech quality. The SPB-FEC scheme ([12]), *We have also perfo rmed informal listening tests which confirmed the results using the objective metrics. 449 Figure 15: Perceptual Distortion (EMBSD) for the marking schemes and SPB-FEC which uses redundancy9 piggybacked on the main payload packets (RFC 2198, [7]) to protect a subset of the packets, enables a very good output speech quality for low loss rates. However, it should be noted that the amount of data sent over the network is increased by 40.4%. Note that the simulation presumes that this additionally consumed bandwidth itself does not contribute significantly to congestion. This assumption is only valid if a small fraction of trafhc is voice ([S]). The SPB-FEC curve is convex with increasing po, as due to the increasing loss correlation an increasing number of consecutive packets carrying redundancy are lost leading to unrecoverable losses. The curve for SPB-DIFFMARK is concave, however, yielding better performance for pe & 0.22. The inter-flow QoS ALT-MARK scheme (50% of the packets are marked) enhances the perceptual quality. However, the auditory distance and the perceptual distortion of the SPB-MARK scheme (with 40.4% of all packets marked) is significantly lower and very close to the quality of the decoded signal when all packets are marked (FULL MARK). This also shows that by protecting the entire flow only a minor improvement in the perceptual quality is obtained. The results for the FULL MARK scheme also show that, while the loss of some of the +l packets has some measurable impact, the impact on perceptual quality can still be considered to be very low. 6. CONCLUSIONS In this paper we have characterized the behaviour of a samplebased codec (PCM) and a frame-based codec (G.729) in the presence of packet loss. We have then developed intraflow loss recovery and control mechanisms to increase the perceptual quality. While we have tested other codecs only informally, we think that our results reflect the fundamental difference between codecs which either encode the speech waveWe also used the G.729 encoder for the redundant source coding. form directly or which are based on linear prediction. For PCM without loss concealment we have found that it neither exhibits significant temporal sensitivity nor sensitivity to payload heterogeneity. With loss concealment, however, the speech quality is increased but the amount of increase exhibits strong temporal sensitivity. Frame-based codecs amplify on one hand the impact of loss by error propagation, though on the other hand such coding schemes help to perform loss concealment by extrapolation of decoder state. Contrary to sample-based codecs we have shown that the concealment performance of the G.729 decoder may break at transitions within the speech signal however, thus showing strong sensitivity to payload heterogeneity. We have briefly introduced a queue management algorithm which is able to control loss patterns without changing the amount of loss and characterized its performance for the loss control of a flow exhibiting temporal sensitivity. Then we developed a new packet marking scheme called Speech Property-Based Selective Differential Packet Marking for an efficient protection of frame-based codecs. The SPBDIFFMARK scheme concentrates the higher priority packets on the frames essential to the speech signal and relies on the decoders concealment for other frames. We have also evaluated the mapping of an end-to-end algorithm to interflow protection. We have found that the selective marking scheme performs almost as good as the protection of the entire flow at a significantly lower number of necessary highpriority packets. Thus, combined intra-flow end-to-end / hopby-hop schemes seem to be well-suited for heavily-loaded networks with a relatively large fraction of voice traffic. This is the case because they neither need the addition of redundancy nor feedback (which would incur additional data and delay overhead) and thus yield stable voice quality also for higher loss rates due to absence of FEC and feedback loss. Such schemes can better accomodate codecs with fixed output bitrates, which are difficult to integrate into FEC schemes requiring adaptivity of both the codec and the redundancy generator. Also, it is useful for adaptive codecs running at the lowest possible bitrate. Avoiding redundancy and feedback is also interesting in multicast conferencing scenarios where the end-to-end loss characteristics of the different paths leading to members of the session are largely different. Our work has clearly focused on linking simple end-to-end models which can be easily parametrized with the known characteristic of hopby-hop loss control to user-level metrics. An analysis of a large scale deployment of non-adaptive or adaptive FEC as compared to a deployment of our combined scheme requires clearly further study. 7. ACKNOWLEDGMENTS We would like to thank Wonho Yang and Robert Yantorno, Temple University, for providing the EMBSD software for the objective speech quality measurements. Michael Zander, GMD Fokus, helped with the simulations of the queue management schemes. 8. ADDITIONAL AUTHORS Additional author: Georg Carle (GMD Fokus, email: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI w REFERENCES J. Andren, M. Hilding, and D. Veitch. Understanding end-to-end internet traffic dynamics. In Proceedings IEEE GLOBECOM, Sydney, Australia, November 1998. J.-C. Bolot, S. Fosse-Parisis, and D. Towsley. Adaptive FEC-based error control for interactive audio in the Internet. In Proceedings IEEE INFOCOM, New York, NY, March 1999. D. Clark and W. Fang. Explicit allocation of best effort packet delivery service. Technical Report, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox and P. Kroon. Low bit-rate speech coders for multimedia communication. IEEE Communications Magazine, pages 34-41, December 1996. J. Ferrandiz and A. Lazar. Consecutive packet loss in real-time packet traffic. In Proceedings of the Fourth International Conference on Data Communications Systems, IFIP TC6, pages 306-324, Barcelona, June 1990. W. Jiang and H. Schulzrinne. QoS measurement of Internet real-time multimedia services. In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley, and J. Bolot. RTP payload for redundant audio data. RFC 2198, IETF, September 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, and S. McCanne. Simulation of FEC-based error control for packet audio on the Internet. In Proceedings IEEE INFOCOM, pages 48-52, San Francisco, CA, March 1998. J. Rosenberg. G. 729 error recovery for Internet Telephony. Project report, Columbia University, 1997. J. Rosenberg, L. Qiu, and H. Schulzrinne. Integrating packet FEC into adaptive voice playout buffer algorithms on the Internet. In Proceedings IEEE INFOCOM, Tel Aviv, Israel, March 2000. H. Sanneck. Concealment of lost speech packets using adaptive packetization. In Proceedings IEEE Multimedia Systems, pages 140-149, Austin, TX, June 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. Packet Loss Recovery and Control for Voice tinsmission over the Internet. PhD thesis, GMD Fokus / Telecommunication Networks Group, Technical University of Berlin, October 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ SannOOlOLoss.pdf. H. Sanneck and G. Carle. A queue management algorithm for intracflow service differentiation in the best effort Internet. In Proceedings of the Eighth Conference on Computer Communications and Networks (ICCCN), pages 419426, Natick, MA, October 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le, and A. Wolisz. Efficient QoS support for Voice-over-IP applications using selective packet marking. In Special Session on Error Control Techniques for Real-time Delivery of Multimedia data, First Intenzational Workshop on Intelligent Multimedia Computing (IMMCN), pages 553-556, Atlantic City, NJ, February 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose, and D. Towsley. Loss correlation for queues with bursty input streams. In Proceedings ICC, pages 219-224, Chicago, IL, 1992. D. Sisalem and A. Wolisz. LDAf TCP-friendly adaptation: A measurement and comparison study. In Proceedings NOSSDAV, Chapel Hill, NC, June 2000. International Telecommunication Union. Coding of speech at 8 kbit/s using conjugate-structure algebraic-code-excited linear-prediction (CS-ACELP). Recommendation G.729, ITU-T, March 1996. International Telecommunication Union. Objective oualitv measurement of telephone-band (300-3400 Hz) speech codecs. Recommendation P.861, ITU-T, February 1998. M. Yajnik, J. Kurose, and D. Towsley. Packet loss correlation in the MBone multicast network: Experimental measurements and markov chain models. Technical Report 95-115, Department of Computer Science, University of Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose, and D. Towsley. Measurement and modelling of the temporal dependence in packet loss. Technical Report 98-78, Department of Computer Science, University of Massachusetts, Amherst, 1998. W. Yang and R. Yantorno. Improvement of MBSD scaling noise masking threshold and correlation analysis with MOS difference instead of MOS. In Proceedings ICASSP, pages 673-676, Phoenix, AZ, March 1999. by 451",
    "original_translation": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999.",
    "error_count": 17,
    "keys": {
        "end-to-end model": {
            "translated_key": "modelo de extremo a extremo",
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un \"modelo de extremo a extremo\" basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un \"modelo de extremo a extremo\". Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                ""
            ]
        },
        "sample-based codec": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "loss recovery and control": {
            "translated_key": "recuperación y control de pérdidas",
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como \"recuperación y control de pérdidas\" intraflujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de la \"recuperación y control de pérdidas\" combinada de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de \"recuperación y control de pérdidas\" intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                ""
            ]
        },
        "loss sensitivity": {
            "translated_key": [
                "sensibilidad a la pérdida",
                "sensibilidad a la pérdida",
                "sensibilidad a pérdidas",
                "sensibilidad de pérdida"
            ],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal variable \"sensibilidad a la pérdida\": Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de \"sensibilidad a la pérdida\" también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con \"sensibilidad a pérdidas\" temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de pérdidas de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con \"sensibilidad de pérdida\" temporal como el tráfico de primer plano de interés, con DifFRED un gran número de estallidos molestos cortos se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                "sensibilidad a la pérdida",
                "sensibilidad a la pérdida",
                "sensibilidad a pérdidas",
                "sensibilidad de pérdida"
            ]
        },
        "network support for real-time multimedia": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "quality of service": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "service quality": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "end-to-end loss recovery": {
            "translated_key": [
                "recuperación de pérdidas de extremo a extremo",
                "recuperación de pérdida de extremo a extremo",
                "recuperación de pérdida de extremo a extremo"
            ],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0.8461 aplicaciones mejoradas por mecanismos de \"recuperación de pérdidas de extremo a extremo\". Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la \"recuperación de pérdida de extremo a extremo\" / configuración de medición de control. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la \"recuperación de pérdida de extremo a extremo\". El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                "recuperación de pérdidas de extremo a extremo",
                "recuperación de pérdida de extremo a extremo",
                "recuperación de pérdida de extremo a extremo"
            ]
        },
        "voip traffic": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "intra-flow loss control": {
            "translated_key": "control de pérdida de flujo interno",
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. En la sección 4 se introduce brevemente un algoritmo de gestión de colas que puede utilizarse para \"control de pérdida de flujo interno\". En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de \"control de pérdida de flujo interno\" y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                ""
            ]
        },
        "packet-level metric": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "general markov model": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "sensitivity of voip traffic": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "voip traffic sensitivity": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "queue management algorithm": {
            "translated_key": [
                "algoritmo de gestión de la cola",
                "algoritmo de gestión de la cola",
                "algoritmo de gestión de colas"
            ],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. En la sección 4 se introduce brevemente un \"algoritmo de gestión de la cola\" que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para +l y La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un \"algoritmo de gestión de la cola\" que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un \"algoritmo de gestión de colas\" para la diferenciación de servicios intraflujos en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                "algoritmo de gestión de la cola",
                "algoritmo de gestión de la cola",
                "algoritmo de gestión de colas"
            ]
        },
        "frame-based codec": {
            "translated_key": "codec basado en marcos",
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un codec basado en muestras (PCM) y un \"codec basado en marcos\" (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                ""
            ]
        },
        "voice over ip": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "loss concealment": {
            "translated_key": [
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "ocultación de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "ocultación de pérdida",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas"
            ],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con pérdidas de \"encubrimiento de pérdidas\" se pueden ocultar bien las pérdidas aisladas de paquetes, mientras que las pérdidas de ráfagas tienen un impacto perceptual mayor. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar \"encubrimiento de pérdidas\" mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, tiene lugar la identificación de paquetes sensibles a la pérdida (prestador) así como \"encubrimiento de pérdidas\" (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan a nivel de extremo a extremo, se lleva a cabo la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la \"encubrimiento de pérdidas\" (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin \"encubrimiento de pérdidas\", donde la \"encubrimiento de pérdidas\" repara las pérdidas aisladas solamente (la estacionidad del habla sólo puede ser asumida por intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin \"ocultación de pérdidas\" habilitada donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con \"encubrimiento de pérdidas\". Cuando la correlación de pérdidas (dp) es baja, la \"encubrimiento de pérdidas\" proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con \"ocultación de pérdida\" (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) 445 Figura 8: Curva de utilidad para los patrones de pérdida del códec 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con \"encubrimiento de pérdidas\", demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la \"encubrimiento de pérdidas\" interna. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin \"encubrimiento de pérdidas\" hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con el \"encubrimiento de pérdidas\", la calidad del habla aumenta, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar \"encubrimiento de pérdidas\" por extrapolación de estado decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "ocultación de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "ocultación de pérdida",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas",
                "encubrimiento de pérdidas"
            ]
        },
        "loss metric": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        },
        "objective speech quality measurement": {
            "translated_key": "medición objetiva de calidad del habla",
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes usando \"medición objetiva de calidad del habla\". El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                ""
            ]
        },
        "queue management": {
            "translated_key": [
                "gestión de la cola",
                "gestión de las quejas",
                "gestión de la cola",
                "gestión de la cola",
                "gestión de colas"
            ],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. En la sección 4 se introduce brevemente un algoritmo de \"gestión de la cola\" que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE LAS QUETAS PARA EL CONTROL DE LAS PÉRDIDAS DE INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de las pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de \"gestión de las quejas\" ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a las pérdidas. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para +l y La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de \"gestión de la cola\" que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de \"gestión de la cola\". 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de \"gestión de colas\" para la diferenciación de servicios de intraflujo en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": [
                "gestión de la cola",
                "gestión de las quejas",
                "gestión de la cola",
                "gestión de la cola",
                "gestión de colas"
            ]
        },
        "differentiate service": {
            "translated_key": [],
            "translated_annotated_text": "Recuperación y control de pérdida de flujo interno para VolP Henning Sanneck GMD Fokus Nguyen Tuong Long Le GMD Fokus Kaiserin-Augusta-Allee 31 Kaiserin-Augusta-Allee 31 D-l 0589 Berlín, Alemania D-l 0589 Berlín, Alemania sanneck@fokus.gmd.de le@fokus.gmd.de FT 5-2 Einsteinufer 25 D-l 0587 Berlin, Germany wolisz@ee.tu-berlin.de RESUMEN Las redes con conmutación de paquetes de mayor esfuerzo, como Internet, no ofrecen una transmisión fiable de paquetes a aplicaciones con limitaciones en tiempo real como la voz. Por lo tanto, la pérdida de paquetes perjudica la utilidad a nivel de aplicación. Para la voz este deterioro de la utilidad es doble: por un lado, incluso ráfagas cortas de paquetes perdidos pueden disminuir significativamente la capacidad del receptor para ocultar la pérdida de paquetes y la señal de voz se interrumpe. Por otro lado, algunos paquetes pueden ser particularmente sensibles a la pérdida ya que llevan información más importante en términos de percepción del usuario que otros paquetes. Primero desarrollamos un modelo de extremo a extremo basado en longitudes de ejecución de pérdidas con las que podemos describir la distribución de pérdidas dentro de un flujo. Estas métricas a nivel de paquete se vinculan a métricas de calidad de voz objetivas a nivel de usuario. Utilizando este marco, encontramos que para los códecs basados en muestras de baja compresión (PCM) con ocultamiento de pérdidas, las pérdidas aisladas de paquetes se pueden ocultar bien, mientras que las pérdidas de ráfagas tienen un mayor impacto perceptual. Para los códecs basados en marcos de alta compresión (G.729) por un lado, el impacto de la pérdida se amplifica a través de la propagación de errores causados por las memorias del filtro decodificador, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas mediante la extrapolación del estado del decodificador. Contrariamente a los códecs basados en muestras mostramos que el rendimiento de ocultación puede romperse en transiciones dentro de la señal de voz sin embargo. Luego proponemos mecanismos que diferencian entre paquetes dentro de un flujo de datos de voz para minimizar el impacto de la pérdida de paquetes. Designamos estos métodos como recuperación y control de la pérdida intra-flujo. En el nivel de extremo a extremo, se lleva a cabo la identificación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los sistemas de apoyo Hop-by-hop permiten luego (estadísticamente) negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Como ambos paquetes requieren el mismo costo en términos de transmisión de red, se puede obtener una ganancia en la percepción del usuario. Demostramos que se pueden lograr mejoras significativas en la calidad del habla y evitar datos adicionales y retrasos en los gastos generales, manteniendo al mismo tiempo un servicio de red que es prácticamente idéntico al mejor esfuerzo a largo plazo. Categorías y Descriptores sujetos C.2.4 [Redes de comunicación informática]: Aplicaciones distribuidas por sistemas; (3.2.6 [Redes de comunicación informática]: Internetworking-Routers; C.4 [Organización de sistemas informáticos]: Desempeño de las técnicas Systems-itJeasun3nent; C.4 [Organización de sistemas informáticos]: Desempeño de los sistemas--Técnicas de modelado Términos generales Diseño, medición, rendimiento, fiabilidad 1. INTRODUCCIÓN Teniendo en cuenta que un flujo en tiempo real puede experimentar alguna pérdida de paquetes, el impacto de la pérdida puede variar significativamente dependiendo de qué paquetes se pierden dentro de un flujo. En lo siguiente se distinguen dos razones para tal sensibilidad de pérdida variable: Sensibilidad temporal: La pérdida de ADUs que se correlaciona en el tiempo puede conducir a interrupciones en el servicio. Tenga en cuenta que este efecto se ve agravado por alguna interdependencia entre los ADU (es decir, que un ADU sólo puede ser decodificado cuando un ADU anterior ha sido recibido y decodificado con éxito). Para voz, como un solo paquete contiene típicamente varios ADUs (marcos de voz) este efecto es por lo tanto más significativo que e.g. para el vídeo. Se traduce básicamente en pérdidas aisladas de paquetes versus pérdidas que ocurren en ráfagas. Sensibilidad debido a la heterogeneidad ADU: Algunos ADUs pueden contener partes de la señal codificada que son Unidad de Datos de Aplicación: la unidad de datos emitida por un codificador fuente como un video o un marco de voz. 441 Figura 1: Funciones de utilidad esquemáticas dependientes de la pérdida de más (+l) y menos (-1) paquetes importantes más importantes con respecto a la percepción del usuario que otros del mismo flujo. Consideremos un flujo con dos tipos de marco de gran importancia perceptual diferente (asumimos el mismo tamaño, frecuencia y no hay interdependencia entre los marcos). Bajo la pérdida del 50% de los paquetes, la calidad perceptual varía enormemente entre el caso donde se reciben el 50% de los marcos con alta importancia perceptiva y el impuesto donde se reciben los marcos menos importantes del 50%. El soporte de red para flujos multimedia en tiempo real puede, por un lado, tener como objetivo ofrecer un servicio sin pérdidas, que, sin embargo, se implementará dentro de una red conmutada por pa&et, será costoso para el proveedor de la red y, por lo tanto, para el usuario. Por otra parte, dentro de un servicio con pérdidas, deben tenerse en cuenta las limitaciones de sensibilidad mencionadas anteriormente. Creemos firmemente que esto debe hacerse de manera genérica, es decir, sin conocimientos específicos de las aplicaciones (sobre determinados sistemas de codificación, por ejemplo). debe ser necesario dentro de la red y, viceversa, no debe ser necesario ningún conocimiento sobre las especificidades de la red dentro de una aplicación. Consideremos ahora el caso de que el 50% de los paquetes de un flujo se identifican como más importantes (designados por +l) o menos importantes (-1) debido a cualquiera de las restricciones de sensibilidad anteriores. La Figura 1 a) muestra una función de utilidad genérica que describe el nivel de aplicación Calidad de servicio (QoS) dependiente del porcentaje de paquetes perdidos. Para el tráfico multimedia en tiempo real, dicha utilidad debe corresponder a la calidad percibida de vídeo/voz. Si el sistema de transmisión no conoce la importancia relativa de los paquetes, las tasas de pérdida de los paquetes +l y -1 son iguales. Debido a la sensibilidad sobreproporcional de los paquetes +l a la pérdida, así como a la dependencia del rendimiento de recuperación de la pérdida final en los paquetes fl, la función de utilidad está disminuyendo significativamente de una manera no lineal (aproximada en la figura por funciones lineales por pieza) con una tasa de pérdida creciente. Figura 1 b) presenta el CBS~ donde todos los paquetes +l están protegidos a expensas de -1 pa&&. El deterioro de la función de utilidad (para tasas de pérdida < 50%) se reduce, ya que los paquetes +l están protegidos y la recuperación de pérdida de extremo a extremo puede funcionar correctamente en un rango más amplio de tasas de pérdida indicadas por el área sombreada. Esto resulta en una degradación elegante de la utilidad de aplicaciones. Tenga en cuenta que cuanto mayor sea la no linealidad de la contribución de utilidad de los paquetes fl (desviación de la curva punteada en la Fig. 1 a), cuanto mayor es la ganancia potencial en utilidad cuando la protección para paquetes +l está habilitada. Los resultados de la calidad percibida real como utilidad para aplicaciones multimedia muestran tal comportamiento no lineal*. Para describir este efecto y proporcionar una taxonomía para diferentes enfoques de mejora de QoS, introducimos una terminología novedosa: designamos mecanismos que influyen en los parámetros de QoS entre arcos (de modo que disminuyen la tasa de pérdida de un flujo a expensas de otros flujos) como QoS de flujo inter. Los esquemas que, en presencia de pérdida, diferencian entre pa&& dentro de un flujo, como se demuestra en la figura 1 anterior, proporcionan mejora de QoS intraflujo. Como los mecanismos de QoS tienen que ser implementados dentro de la red (hopby-hop) y/o en los sistemas finales (de extremo a extremo), tenemos otro eje de clasificación. La adaptación de la tasa de bits de los emisores al estado actual de congestión de la red como esquema de QoS intraflujo (evitación de pérdidas, [IS]) es difícil de aplicar a la voz. Teniendo en cuenta que los flujos de voz tienen una tasa de bits muy baja, el costo relativo de transmitir la información de retroalimentación es alto (cuando se compara, por ejemplo. a un flujo de vídeo). Para reducir este costo sería necesario aumentar el intervalo de retroalimentación, lo que llevaría a una mayor probabilidad de decisiones de adaptación erróneas. La principal dificultad, sin embargo, es la falta de un códec que sea verdaderamente escalable en términos de su tasa de bits de salida y la correspondiente calidad perceptual. Actualmente, los códecs de voz estandarizados ([17]) por lo general sólo tienen una tasa de bits de salida de 6xed. Si bien se ha propuesto cambiar entre códecs de voz ([2]), los valores de MOS (calidad subjetiva) para los códecs empleados no difieren mucho: por ejemplo, los códecs de la UIT G.723.1, G.729, G.728, G.726 y G.711 cubren un rango de bitrate de 5.3 kbitjs a 64 kbitjs, mientras que la calidad subjetiva difiere en menos de 0,25 en una escala Así que cuando se asume la disponibilidad de una potencia de computación sutticient, el codec de bitrate más bajo puede ser elegido permanentemente sin realmente disminuir la calidad perceptual. Para la recuperación de pérdidas de extremo a extremo, debido a las restricciones de retardo en tiempo real, se han propuesto esquemas de lazo abierto como corrección de errores de avance (FEC) ([2]). Si bien estos esquemas son atractivos porque se pueden utilizar en Internet hoy en día, también tienen varios inconvenientes. La cantidad de información redundante tiene que ser adaptable para evitar quitar el ancho de banda a otros flujos. Esta adaptación es crucial especialmente cuando la fracción del traflico que utiliza esquemas de redundancia es grande (181). Si la redundancia es un código fuente en sí mismo, como a menudo se ha propuesto ([7]), los comentarios de arriba sobre la adaptación también se aplican. El uso de redundancia también tiene implicaciones en la adaptación de retardo de playout ([lo]) empleado para destemplar los paquetes en el receptor. Tenga en cuenta que los tipos presentados de sensibilidad a la pérdida también se aplican a apMientras que hemos obtenido resultados que confirman la forma de la curva de utilidad general que se muestra en la Fig. 1, claramente las funciones de utilidad de los +1/-l sub.flows y su relación son más complejas y sólo aproximadamente aditivo. 442 Cuadro 1: Probabilidades de estado y transición calculadas para un rastreo de Internet de extremo a extremo utilizando un modelo general Markov (tercer orden) de Yajnik et. al. [9] estado 000 001 010 011 100 101 110 111 Probabilidad de probabilidad de encontrarse en el estado de I(s)=0 de l(s)=1 0,8721 0. 9 7 7 9 0,0221 0. 0 2 0 8 0. 6 1 1 2 0. 3 8 8 8 0. 0 1 4 2 0. 8 8 1 9 0,1181 0. 0 1 0 2 0. 2 7 1 0 0. 2 9 0 0. 0 2 0 8 0. 9 2 7 8 0. 0 7 2 2 0. 0 3 6 0. 4 1 9 8 0. 5 8 0 2 0. 0 1 0 2 0. 8 1 0 9 0,1891 0,0481 0. 1 5 3 9 0,8461 aplicaciones mejoradas por mecanismos de recuperación de pérdidas de extremo a extremo. Los mecanismos de extremo a extremo pueden reducir y cambiar esas sensibilidades, pero no pueden acercarse a eliminarlas. Por lo tanto, en este trabajo suponemos que se elige la tasa de bits más baja posible que proporciona la calidad deseada. Sin embargo, ni la retroalimentación/adaptación ni la redundancia se utilizan, en el nivel extremo a extremo, la identificación/marcación de paquetes sensibles a la pérdida (prestador) así como la ocultación de pérdidas (receptor). Los esquemas de apoyo Hop-by-hop permiten entonces negociar la pérdida de un paquete, que se considera más importante, contra otro del mismo flujo que es de menor importancia. Empleamos códecs reales y medimos su utilidad en presencia de pérdida de paquetes mediante medición objetiva de la calidad del habla. El documento está estructurado de la siguiente manera: La sección 2 introduce métricas a nivel de paquetes y usuarios. Empleamos estas métricas para describir la sensibilidad del tráfico de VoIP a la pérdida de paquetes en la sección 3. La sección 4 presenta brevemente un algoritmo de gestión de colas que puede utilizarse para el control de pérdidas intraflujo. En la sección 5, presentamos los resultados que documentan el desempeño de los mecanismos propuestos tanto a nivel de extremo a extremo como de hop-hop. La sección 6 concluye el documento. 2. METRICS 2.1 métricas a nivel de paquete Un modelo general de Markov ([19, S]) que describe el proceso de pérdida se define de la siguiente manera: Let P( Z(s) ] Z(s - m),...,Z(s - 2),Z(s - 1) ) ser la probabilidad de transición de estado de un modelo general de Markov de orden m, donde Z(s) es la función indicador de pérdida para . . , Z(s-2), Z(s-1) aparecen en el espacio de estado. Como ejemplo P(Z(s) = 1 ] Z(s - 2),Z(s1) = 01 ) da la probabilidad de transición de estado cuando se pierde el paquete actual s, el paquete anterior s - 1 también se ha perdido y el paquete s - 2 no se ha perdido. El número de estados del modelo es 2. Dos transiciones estatales pueden tener lugar desde cualquiera de los estados. Por lo tanto, el número de parámetros que tienen que ser computados es 2m+1. Incluso para m relativamente pequeño esta cantidad de parámetros es difícil de evaluar y comparar. La Tabla 1 muestra algunos valores para el estado y las probabilidades de transición para un modelo general de Markov de tercer orden medido de extremo a extremo en Internet por Yajnik et. al. ([19]). Es interesante notar que para todos los estados con Z(s - 1) = 0 la probabilidad de que el siguiente paquete no se pierda (Z(s) = 0) es generalmente muy alta (> 0.8, en negrita) mientras que cuando Z(s- 1) = 1 las probabilidades de transición de estado a ese evento cubren el rango de 0,15 a 0,61. Esto significa que en el pasado ningún evento de pérdida no afecta tanto al proceso de pérdida como los eventos de pérdida anteriores. Intuitivamente esto parece tener sentido, porque un paquete que llega con éxito puede ser visto como un indicador para el alivio de la congestión. Andren et. al. ([l]), así como Yajnik et. al. ([20]) ambos confirmaron esto midiendo la correlación cruzada de la duración de la pérdida y sin pérdida. Llegaron al resultado de que tal correlación es muy débil. Esto implica que los patrones de estallidos de pérdidas cortas intercalados con períodos cortos de llegadas exitosas de paquetes ocurren raramente (obsérvese en este contexto que en &able 1 el patrón 101 tiene la probabilidad de estado más baja). Por lo tanto, en el siguiente se emplea un modelo ([12]) que sólo considera los eventos de pérdida pasados para la probabilidad de transición del estado. El número de estados del modelo se puede reducir de 2m a m + 1. Esto significa que sólo consideramos la probabilidad de transición de estado P( Z(s) ] Z(s - k),. . . ,Z(s - 1) ) con Z(s - Ic + i) = 1 V i E [0, Ic - 11, donde Ic (0 < k 5 m) es un parámetro variable. Definimos una longitud de ejecución de pérdida lc para una secuencia de paquetes Ic perdidos consecutivamente detectados en sj (sj > Ic > 0) con Z(sj - k - 1) = O,Z(sj) = 0 y Z(sj - k + i) = 1 V i E [0, Ic - 11, j siendo el evento de pérdida j-th <burst. Tenga en cuenta que los parámetros del modelo se vuelven independientes del número de secuencia s y ahora puede ser descrito por la ocurrencia ok de una longitud de ejecución de pérdida k. Definimos la variable aleatoria X como sigue: X = 0: ningún paquete perdido, X = k (0 < lc < m): ezactly lc paquetes consecutivos perdidos, y X 2 k (0 < k < m): al menos k paquetes consecutivos perdidos. Con esta definición, establecemos un modelo de larga duración de pérdida con un número finito de estados (m + 1) que da probabilidades de pérdida dependiente de la longitud de explosión. En el modelo, por cada paquete perdido adicional que se suma a la longitud de una explosión de pérdida se lleva a cabo una transición de estado. Si un paquete se recibe con éxito, el estado vuelve a X = 0. Así, la probabilidad de estado del sistema para 0 < Ic < m es P(X 2 Zc). Debido a la memoria limitada del sistema, el último estado X = m se acaba de definir como crm paquetes consecutivos perdidos, siendo P(X = m) la probabilidad de estado. Dado el caso de un número finito de paquetes a para un flujo, que experimenta d = cpC1 ]cok paquetes gotas, tenemos la frecuencia relativa pL,k = 2 (P(X = k) para un + 00) para la ocurrencia de una explosión de pérdida de longitud lc. Una aproximación para la expectativa de la variable aleatoria X puede ser computada como pi = cr==, L,k e identificada con la tasa media de pérdida. También podemos aproximar las probabilidades de estado del modelo por la tasa de pérdida acumulada p~,~,~(k) = CrSkp~,,, (0 < k < m) y p~,~ = Cr.p=, (n--mzl)ot (k = m). Las probabilidades de transición para 1 < lc < m se pueden calcular fácilmente como: p(k--l)(k) = P(X>klX>k-l)= P(X>knX>k-1) P(X>k-1) ZZ P ( X > k ) P(X>k-1) Estas probabilidades de pérdida condicional de nuevo pueden ser aproxPzl,cum(k) _ C Para 443 Figura 2: Modelo de longitud de ejecución con m + 1 estados P(X = m]X = m) tenemos: PL,,,d(rn) = %Lf;:P Fig. 2 muestra la cadena Markov para el modelo. (1) Además, también definimos una variable aleatoria Y que describe la distribución de longitudes de pérdida de explosión con respecto a los eventos de pérdida de bunt j (y no a eventos de paquetes como en la definición de X). Tenemos la velocidad de pérdida de rotura ga = * como estimación para P(Y = k). Así, la longitud media de la pérdida de rotura es g = h = e = CT==, kgb correspondiente a E[Y] (brecha media de pérdida, [5]). El modelo de longitud de ejecución implica una distribución geométrica para residir en el estado X = m. Para la probabilidad de una longitud de pérdida de rotura de k paquetes podemos calcular estimaciones para parámetros de rendimiento en una representación de modelo de orden superior (note que aquí Y representa la variable aleatoria utilizada en los modelos de orden superior). Para un modelo de tres estados tenemos e.g. Para P(Y = k): P(Y = k) = P(Y = k)=l-pm: k=l pn p;; (1 -pm): k 2 2 c-4 Para el caso especial de un sistema con una memoria de sólo el paquete anterior (m = l), podemos utilizar la distribución de longitud de ejecución para un cálculo simple de los parámetros del modelo Gilbert comúnmente utilizado (fig. 3) caracterizar el proceso de pérdida (X es la variable aleatoria asociada con X = 0: ningún paquete perdido, X = 1 paquete perdido). Entonces la probabilidad de estar en estado m se puede ver BS la probabilidad de pérdida ditional uncow ulp y aproximado por la pérdida media (pr. = pi,,,). Sólo existe un factor de probabilidad de pérdida condicional para la transición 1 --t 1: p~,E-d = CFL(~ - lbd (3) Si las pérdidas de un flujo están correlacionadas (es decir, la probabilidad de pérdida de un paquete que llega es iutienced por la contribución al estado de la cola por un paquete anterior del mismo flujo y/o el paquete anterior y el actual ver llegadas tetonas de otro tráfico, [15] Para pal = elp el modelo Gilbert es equivalente a un modelo de estado l (Bernotilli) con zllp = elp (sin correlación de pérdida). Al igual que en la ecuación 2, podemos calcular una estimación para la probabilidad de una longitud de pérdida de rotura de k paquetes para una representación de modelo de orden superior: B(Y = k) = clpk-(1 - clp) (4) Figura 3: Modelo de pérdida de longitud de ejecución (modelo Gilbert) con dos estados Figura 4: Componentes de la configuración de medición de recuperación de pérdida de extremo a extremo. 2.2 Métricas objetivas de calidad del habla A diferencia de los métodos convencionales como la relación de señal-t-ruido (SNR), las nuevas medidas objetivas de calidad intentan estimar la calidad subjetiva lo más cerca posible modelando el sistema auditivo humano. En nuestra evaluación utilizamos dos medidas objetivas de calidad: la distorsión espectral de la corteza Mod&d mejorada (EMBSD, [21]) y los bloques normalizadores de medición (MNB) descritos en el Apéndice II de la Recomendación UIT-T P.861 ([18]). Estas dos medidas de calidad objetivas.~ se reportan que tienen una correlación muy alta con pruebas subjetivas, su relación con el rango de valores de resultados de pruebas subjetivas (MOS) está cerca de ser lineales y se recomiendan como adecuados para la evaluación del habla degradada por errores de transmisión en entornos de red reales tales como errores de bits y borraduras del marco ([18, 211). Ambas métricas son medidas de distancia, es decir, un valor de traje IB de 0 implica calidad perfecta, cuanto mayor es el valor, peor es la calidad del habla (en la Fig. 5 se muestra un eje con valores MOS aproximados correspondientes). Para todas las simulaciones en este artículo empleamos ambos esquemas. Como produjeron resultados muy similares (aunque los resultados del MNB mostraron generalmente menos variabilidad) sólo presentamos resultados del EMBSD. 3. VOIP SENSITIVIDAD DE PÉRDIDA La figura 4 muestra los componentes de la configuración de medición que utilizaremos para evaluar nuestro enfoque de recuperación y control de pérdidas combinadas de extremo y hop. Las cajas sombreadas 444 muestran los componentes en la ruta de datos donde se encuentran los mecanismos de recuperación de pérdidas. Junto con los parámetros del modelo de red (sección 2.1) y el modelo perceptual obtenemos una configuración de medición que nos permite mapear una entrada de señal PCM específica a una medida de calidad de voz. Mientras usamos una simple caracterización de pérdida de extremo a extremo, generamos un gran número de patrones de pérdida mediante el uso de diferentes semillas para el generador de números pseudcerandom (para los resultados presentados aquí se utilizaron 300 patrones para cada condición simulada para una única muestra de habla). Este procedimiento tiene en cuenta que el impacto de la pérdida en una señal de entrada puede no ser homogéneo (es decir, una explosión de pérdida dentro de un segmento de esa señal puede tener un impacto perceptual diferente que una explosión de pérdida del mismo tamaño dentro de otro segmento). Al promediar el resultado de la medida de calidad objetiva para varios patrones de pérdida, tenemos una indicación fiable para el rendimiento del códec que opera bajo una determinada condición de pérdida de red. Empleamos un modelo Gilbert (Fig. 3) como el modelo de red para las simulaciones, ya que hemos encontrado que aquí los modelos de orden superior no proporcionan mucha información adicional. 3.1 Sensibilidad temporal 3.1.1 Pa4 Primero analizamos el comportamiento de los flujos PCM ~-law (64 kbit/s) con y sin ocultamiento de pérdidas, donde la ocultación de pérdidas repara pérdidas aisladas solamente (la estacionidad de voz sólo puede ser asumida para intervalos de tiempo pequeños). Los resultados se muestran para el algoritmo de ocultamiento AP/C ([ll]). Se obtuvieron resultados similares con otros algoritmos de ocultación. La Figura 5 muestra el caso sin ocultamiento de pérdidas activado donde los parámetros del modelo Gilbert son variados. La calidad del habla resultante es insensible al parámetro de distribución de pérdidas (elp). Los resultados son incluso ligeramente descressing para un clp creciente, apuntando a una variabilidad significativa de theresuits. En la Figura 6 se muestran los resultados con ocultamiento de pérdidas. Cuando la correlación de pérdidas (dp) es baja, la ocultación de pérdidas proporciona una mejora significativa del rendimiento. La mejora relativa aumenta con el aumento de la pérdida (pulp). Para valores más altos de clp, los casos con y sin ocultación se vuelven cada vez más similares y muestran el mismo rendimiento en clp x 0,3. Las figuras 5 y 6 respectivamente también contienen una curva que muestra el rendimiento bajo el supuesto de pérdidas aleatorias (modelo Bernouilli, ulp = elp). Así, considerando una ulp dada, un peor patrón de pérdida de caso de pérdidas alternas (I(s mod 2) = l,l([s + l] mod 2) = 0) permitiría una mejora considerable del rendimiento (con ok = OVk > 1: p~,cond = 0, Eq. 3). Como encontramos por inspección visual que las distribuciones de los valores de distorsión perceptual para una condición de pérdida parecen seguir aproximadamente una distribución normal empleamos media y desviación estándar para describir la variabilidad estadística de los valores medidos. La Figura 7 presenta la distorsión perceptual como en la figura anterior, pero también la desviación estándar como barras de error para la condición de pérdida respectiva. Muestra la variabilidad creciente de los resultados con una correlación de pérdida creciente (clp), mientras que la variabilidad no parece cambiar mucho con una cantidad creciente de pérdida (alp). Por un lado, esto señala a algunos, aunque débil, sensibilidad con respecto a la heterogeneidad (es decir, importa qué área de la señal del habla (voz/sin voz) experimenta una pérdida de explosión). Por otro lado, muestra que un gran número de diferentes Figura 5: Curva de utilidad para PCM sin pérdida conc e a l m e n t (EMBSD) Figura 6: Curva de utilidad para PCM con ocultamiento de pérdida (EMBSD) Figura 7: Variabilidad de la distorsión perceptual con 10s~ ocultación (EMBSD) Figura 445: Curva de utilidad para los patrones de pérdida de códec G.729 ( 3.1.2 G.729 G.729 ([17]) utiliza el esquema de codificación de la predicción lineal excitada del código algebraico de estructura conjugada (CS-ACELP) y ooera a 8 kbit/s. En G.729. Un discurso fmme es 10 ms en d&ion. Para cada marco, el codificador G.7i9 analiza los datos de entrada y extrae los parámetros del modelo de predicción lineal excitada del código (CELP), como los coeficientes de filtro de predicción lineal y los vectores de excitación. Cuando un marco se pierde o se corrompe, el decodificador G.729 utiliza los parámetros del marco anterior para interpolar los del marco perdido. Los coeficientes de pares espectrales de línea (LSP3) del último marco bueno se repiten y los coeficientes de ganancia se toman del marco anterior, pero se amortiguan para reducir gradualmente su impacto. Cuando se produce una pérdida de marco, el decodificador no puede actualizar su estado, lo que resulta en una divergencia de estado de codificador y decodificador. Por lo tanto, los errores no sólo se introducen durante el período de tiempo representado por el marco actual, sino también en los siguientes. Además del impacto de las palabras clave faltantes, la distorsión se incrementa por la falta de actualización de las memorias del filtro predictor para los pares speo tral de línea y las memorias de síntesis del filtro de predicción lineal. La Figura 8 muestra que para condiciones de red similares la calidad de salida del G.729* es peor que el PCM con ocultamiento de pérdidas, demostrando la compresión versus compensación de calidad bajo pérdida de paquetes. Curiosamente la correlación de pérdidas (parametro dp) tiene algún impacto en la calidad del habla, sin embargo, el efecto es débil apuntando a una cierta robustez del códec G.729 con respecto a la resiliencia a pérdidas consecutivas de paquetes debido a la ocultación de pérdidas internas. Rosenberg ha hecho un experimento similar ([9]), mostrando que la diferencia entre la señal original y la oculta con la creciente pérdida de explosión en términos de un error cuadrado medio es significativa, sin embargo. Esto demuestra la importancia de las métricas perceptuales que son capaces de incluir ocultamiento LSPs son otra representación de los coeficientes de predicción lineal. Dos marcos G.729 están contenidos en un paquete. Figura 9: Tiempo de resincronización (en marcos) del decodificador G.729 después de la pérdida de k marcos consecutivos (k E [1,4]) en función de la posición del marco. (y no sólo la reconstrucción) en la evaluación de la calidad. 3.2 Sensibilidad debido a la heterogeneidad ADU PCM es una codificación sin memoria. Por lo tanto, el contenido de ADU es débilmente heterogéneo (Figura 7). Así, en esta sección nos concentramos en la coda G.729. El experimento que llevamos a cabo es para reducir el tiempo de resincronización del codificador d* después de k cuadros consecutivos se pierden. Se dice que el decodificador G.729 se ha resincronizado con el codificador cuando la energía de la señal de error cae por debajo del uno por ciento de la energía de la señal decodificada sin pérdida de marco (esto equivale a un umbral de la relación señal-t-ruido (SNR) de 2OdB). La energía de la señal de error (y por lo tanto el SNR) se calcula sobre una base por fotograma. La Figura 9 muestra el tiempo de resincronización (expresado en el número de marcos necesarios hasta que se supere el umbral) trazado contra la posición de la pérdida (es decir, el índice del primer marco perdido) para los valores de d&rent de k. La muestra de habla es producida por un altavoz masculino donde ocurre una transición sin voz/voz (au) en el marco octavo. Podemos ver en la Figura 9 que la posición de una pérdida de marco tiene una iluminación signilicante cm la degradación de la señal resultante, mientras que la degradación no es tan sensible a la longitud de la pérdida de marco estalló k. La pérdida de marcos sin voz parece tener un impacto bastante pequeño en la degradación de la señal y el decodificador recupera la información de estado rápidamente después. La pérdida de marcos de voz causa una mayor degradación de la señal del habla y el decodificador necesita más tiempo para resincronizar con el remitente. Sin embargo, la pérdida de marcos de voz en una transición sin voz/sin voz conduce a una degradación significativa de la señal. Hemos repetido el experimento para diferentes hablantes masculinos y femeninos y hemos obtenido resultados similares. Teniendo en cuenta el esquema de codificación del matrimonio, el fenómeno anterior podría explicarse de la siguiente manera: Debido a que los sonidos de voz tienen una energía más alta que los sonidos sin voz, la pérdida de marcos de voz causa una mayor degradación de la señal que la pérdida de marcos sin voz. Sin embargo, debido a la propiedad periódica de los sonidos sonoros, el decodificador puede ocultar Mientras que por un lado vemos que los SNR n~easu~es a menudo no se correlacionan bien con la calidad subjetiva del habla, por otro lado las grandes diferencias en el tiempo de resincronización basado en el umbral SNR apuntan claramente a un impacto significativo en la calidad subjetiva del habla. 446 Figura 10: Probabilidades diferenciales de caída RED en función del tamaño medio de la cola la pérdida de marcos de voz bien una vez que ha obtenido información suficiente sobre ellos. El decodificador no oculta la pérdida de marcos de voz en una transición sin voz/voz porque intenta ocultar la pérdida de marcos de voz utilizando los coeficientes de filtro y la excitación para un sonido sin voz. Además, debido a que el codificador G.729 utiliza un filtro promedio móvil para predecir los valores de los pares espectrales de línea y sólo transmite la diferencia entre los vaues reales y predichos, toma mucho tiempo para que el decodificador resincronice con el codificador una vez que no ha construido el filtro de predicción lineal apropiado. 4. GESTIÓN DE QUEMAS PARA CONTROL DE PÉRDIDAS INTRAFLOW Si bien hemos destacado la sensibilidad del tráfico VoIP a la distribución de pérdidas en las últimas secciones, ahora queremos introducir brevemente un mecanismo de gestión de colas ([13]) que sea capaz de hacer cumplir las preferencias relativas de la aplicación con respecto a la pérdida. Consideramos flujos con paquetes marcados con +l e I1 (como se describe en la introducción) flujos de tráfico de primer plano BS (FT) y otros (mejor esfuerzo) como tráfico de retorno (BT). El marcado de paquetes, además de mantener la propiedad deseable de la agresión del estado dentro del núcleo de la red, como propone la arquitectura de Servicios Diferenciados del IETF, se explota aquí para transmitir los requisitos de flujo de entrada de un llow. Como se debe evitar introducir la reordenación de los paquetes de un flujo en la red, consideramos mecanismos para la gestión de una sola cola con diferentes niveles de prioridad. Un enfoque para realizar la diferenciación del servicio de interflujo usando una sola cola es RIO (RED with IN and OUT, [3]). Con RIO, se calculan dos tamaños medios de cola como indicadores de congestión: uno solo para los paquetes IN (alta prioridad) y otro para los paquetes IN y OUT (baja prioridad). Los paquetes marcados como OUT se dejan caer antes (en términos del tamaño medio de la cola) que los paquetes IN. RIO ha sido diseñado para disminuir el clip visto por Bows particulares a expensas de otros flujos. En este trabajo, sin embargo, queremos mantener el ulp dado por otros parámetros mientras modificamos la distribución de pérdidas para el tráfico de primer plano (FT). Esto equivale a negociar la pérdida de un paquete +l contra un paquete -1 del mismo flujo (en un sentido estadístico). Fig. 10 muestra la curva de probabilidad de caída convencional RED (po en función del tamaño medio de la cola para todas las llegadas avg), que se aplica a todo el tráfico sin marcar (0) (tráfico de fondo: BT). La relación necesaria entre las probabilidades de caída para paquetes marcados como -1 y +l se puede derivar 85 sigue (obsérvese que esta relación es válida tanto en el nivel de extremo como en cada salto individual): Que a = a0 + a+, +a-~ sea el número total de paquetes emitidos por un flujo FT y a, + E [-l,O, +l] sea el número de paquetes pertenecientes a Entonces, con a+, = a-1 = a,~, y considerando que el servicio resultante tiene que ser el mejor esfuerzo a largo plazo, tenemos: aopo + a+lp+l + LIP-1 A ape QlllÃ3l fP-1) = (a--ooo)m P - l = zpo-p+1 (5) Debido a esta relación entre la probabilidad de caída para paquetes +l La Figura 10 muestra las correspondientes curvas de probabilidad de caída. Debido a la condición de a+, = (I-L = todos, además del comportamiento RED convencional, la implementación DiffRED también debe monitorear los procesos de llegada +l y -1. Si la relación de paquetes de +l a -1 en una puerta de enlace no es 1 (ya sea debido a los flujos de comportamiento incorrecto o un número significativo de flujos que ya han experimentado pérdida en lúpulo anterior) la capacidad de pérdida de -1 prob se reduce y la probabilidad de +l se incrementa al mismo tiempo degradando el servicio para todos los usuarios. Las áreas sombreadas por encima y por debajo de la curva po(avg) (Fig. 10) mostrar el área de operación cuando se añade esta corrección. En [13] se ha demostrado que no basta con utilizar únicamente el tamaño medio de cola convencional RED avg para la operación DSRED. Esto se debe a la correlación potencialmente faltante del valor ag computado entre llegadas consecutivas +l y -1, especialmente cuando la participación del FT traftic es baja. Como esto podría dar lugar a una distribución injusta de las pérdidas entre las fracciones FT y BT, un valor específico de avgl se calcula tomando como muestra el tamaño de la cola sólo en los instantes de llegada de FT. Por lo tanto, es posible una diferenciación de servicio para el tráfico de primer plano que no difiera del comportamiento RED convencional en la media a largo plazo (es decir, en la ulp). 5. 5.1 Sensibilidad temporal Teniendo en cuenta un flujo con sensibilidad a la pérdida temporal, el punto 3.1.1 ha demostrado que un patrón de pérdida simple y periódico mejora el rendimiento de la recuperación de la pérdida de extremo a extremo. El patrón no está vinculado a paquetes particulares, por lo que es aplicable una caracterización por flujo con las métricas introducidas. En este párrafo suponemos que un flujo expresó su se*sitividad temporal marcando su flujo con un patrón alternativo de,c+l,>,c~l,,, 447 Figura 11: Comparación de la actual y estimada Figura 12: Comparación de las tasas de pérdida real y estimada de la longitud de la explosión en función de la longitud de la explosión, las tasas de longitud de la pérdida en función de la longitud de la explosión k: modelo basado en tres estados Las Figuras 11 y 12 muestran las tasas para las longitudes reales y estimadas de la pérdida de explosión para un modelo de tres estados (m = 2) y un modelo de dos estados (m = 1, Gilbert) respectivamente6. Podemos observar que DiffRED forma la curva de probabilidad de explosión de la manera deseada. La mayor parte de la masa de probabilidad se concentra en pérdidas aisladas (el comportamiento ideal sería la ocurrencia de pérdidas aisladas solamente (Ic = 1) que se pueden expresar con clp = 0 en términos de parámetros del modelo Gilbert). Con la cola de caída una probabilidad de pérdida de explosión aproximadamente geométricamente decreciente con longitud de explosión creciente (Eq. 4) es obtenible, donde el parámetro clp es relativamente grande. Así, considerando la voz con sensibilidad de pérdida temporal como el tráfico de primer plano de interés, con DifFRED un gran número de ráfagas cortas molestas se pueden negociar contra un mayor número de pérdidas aisladas y pocas ráfagas de pérdida largas (que ocurren cuando la cola está bajo sobrecarga temporal, es decir, awg > maxth, Fig. 10). Podemos ver que la estimación del modelo de tres estados (Eq. 2) refleja las dos áreas de la operación DifFRED (la caída brusca de la velocidad de pérdida de rotura para k = 2 y la disminución a lo largo de una asintutota geométricamente decreciente para k > 2). Este efecto no puede ser capturado por el modelo de dos estados (Eq. 4) que sobrestima así la tasa de pérdida de rotura para Ic = 2 y luego la subestima enormemente para k > 2. Curiosamente, para Drop Tail, mientras que ambos modelos capturan la forma de la curva real, el modelo de orden inferior es más preciso en la estimación. Esto puede explicarse de la siguiente manera: si las probabilidades de la longitud de la pérdida de rotura son de hecho cercanas a una distribución geométrica, la estimación es más robusta si se incluyen todos los datos (obsérvese que la aproximación basada en la longitud de ejecución de la probabilidad de pérdida condicional P(X = mlX = m) solo incluye las ocurrencias de la longitud de ejecución de pérdida mayores o iguales a m: Eq. 1). Sólo discutimos los resultados cualitativamente aquí para dar un ejemplo de cómo funciona un algoritmo de control de pérdidas intra-flujo y para mostrar cómo los modelos de pérdida pueden capturar este rendimiento. Los detalles sobre el escenario de simulación y los parámetros se pueden encontrar en [12]. 5.2 Sensibilidad debida a la heterogeneidad de la DU En el punto 3.1.2 hemos visto que la sensibilidad a la heterogeneidad de la DUA da lugar a un cierto patrón de pérdida no periódica. Por lo tanto, es necesario un mecanismo en (o cerca) el remitente que deriva ese patrón de los datos de voz. Además, es necesaria una cooperación explícita entre los mecanismos de extremo a extremo y el hop by-hop (Fig. 4). Utilizamos el resultado del párrafo 3.2 para desarrollar un nuevo esquema de marcado de paquetes llamado Marcado Selectivo Selectivo de la Propiedad del Habla (SPB-DIFFMARK). El esquema DIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. La Figura 13 muestra el algoritmo simple escrito en un pseudocódigo que se utiliza para detectar una transición sin voz/voz (uw) y proteger los marcos de voz en, el comienzo de una señal de voz. El análisis de procedimiento0 se utiliza para clasificar un bloque de marcos Ic como la transición de voz, sin voz, o uv. send0 se utiliza para enviar un bloque de marcos Ic como un solo paquete con la prioridad apropiada (fl, 0 o -1). Como el algoritmo del núcleo da sólo una decisión de marcado binario (proteger el paquete o no), empleamos un algoritmo simple para enviar los paquetes -1 necesarios para la compensación (Eq. 5): después de un estallido de paquetes +l ha sido enviado, un número correspondiente de paquetes -1 es enviado inmediatamente. Indique el número necesario de paquetes a enviar -1 se mantiene en el caso de que el algoritmo SPB active el siguiente estallido +l antes de enviar todos los paquetes -1 necesarios para la compensación. Por lo tanto, visto en intervalos de tiempo que son largos en comparación con los tiempos de explosión +1/-l, la pérdida media para el flujo será igual al mejor caso de esfuerzo (Eq. 5). N es un valor predefinido y define cuántos marcos al principio de una señal de voz deben protegerse. Nuestras simulaciones (Fig. 9) han demostrado que el rango de 10 a 20 son valores adecuados para N (dependiendo de la condición de pérdida de la red). En las simulaciones que se presentan a continuación, elegimos Ic = 2, una protección típica 448 = 0 fcm?ach (k frames) clasificar = análisis(k frames)] si (proteger > 0) si (clasificar == sin voz) proteger = 0 si (compensar > 0) compensación = compensación-k send(k frames, -1) other send(k fra Un mayor número de Ic ayudaría a reducir la sobrecarga relativa del encabezado del protocolo, pero también aumenta el retraso en la packagización y hace que la clasificación del remitente y el ocultamiento del receptor en caso de pérdida del paquete (debido a un mayor espacio de pérdida) más difícil. 5.2.1 Descripción de simulación d-to-end Debido al patrón de pérdida no periódica, necesitamos asociar explícitamente una probabilidad de caída con un solo paquete dentro de un modelo de extremo a extremo. Por lo tanto, utilizamos un modelo Markov de un solo estado (modelo Bernouilli) para describir el comportamiento de la red como se ve en cada clase de paquetes. Paquetes de mejor esfuerzo (designados por 0 en la Fig. 14) se bajan con la probabilidad pc, mientras que los paquetes marcados con +l y -1 se bajan con probabilidades de p+i y p-1 respectivamente. Esta es una suposición razonable con respecto a la interdependencia de las diferentes clases de hecho, como se ha demostrado que DiffRED (Figs. 11 y 12) logra una buena cantidad de decorrelación de pérdidas de paquetes +l y -1. Sin embargo, para incluir alguna correlación entre las clases hemos establecido p+i = 10m3 pc para las simulaciones posteriores. En caso de que la idoneidad del modelo simple de extremo a extremo utilizado se haya investigado en [12] con simulación discreta de eventos utilizando una topología multi-hop y un modelado detallado de fuentes de tráfico de primer plano y de fondo. Esquema de marcado Modelo de red N O M A R K lolo/ 0 ~ 0 ~ 01 F U L L M A R K +I +I +I +I +I +I +I SPB MARK 1 0 1 +I j +I I 0 I 0 / 0 ALT MARK o/+11 Ol+ll o/+1 +I Pcl 330 po S P También permiten una evaluación razonable de cómo las pérdidas en la clase fl afectan el rendimiento de los algoritmos SPB. Para una comparación directa con SPB-DIFFMARK, evaluamos un esquema donde los paquetes se marcan alternadamente como -1 o +l (ALT-DIFFMARK, Figura 14). Además, se incluyen los sistemas de protección de las pérdidas interfluentes relacionados. El primer esquema utiliza protección completa (FULL MARK, todos los paquetes están marcados como +l). El esquema SPB-MARK funciona de manera similar a SPB-DIFFMARK, pero no se envían paquetes -1 para compensación (estos paquetes también están marcados como 0). Para la comparación utilizamos de nuevo un esquema donde los paquetes se marcan alternadamente como 0 o +l (ALT-MARK). Por último, los paquetes de flujos de mejor esfuerzo puro se caen con la probabilidad po (NO MARK caso en la Fig. 14). Para los esquemas de marcado SPB, el porcentaje de paquetes marcados con +l y -l es del 40,4% para el material de habla utilizado. Obtuvimos porcentajes de marcado similares para otras muestras del habla. Los esquemas de marcado ALT marcan exactamente el 50% de sus paquetes como fl. 5.2.2 Resultados La figura 15 muestra la distorsión perceptual de los esquemas de marcado que dependen de la probabilidad de caída pc. El caso desprotegido (NO MARK) tiene la mayor distorsión perceptiva y por lo tanto la peor calidad del habla*. El esquema de marcado diferencial (SPB-DIFFMARK) ofrece una calidad de voz significativamente mejor incluso cuando sólo se utiliza un servicio de red que representa el mejor esfuerzo a largo plazo. Tenga en cuenta que la estrategia de marcado ALT-DIFFMARK no difiere del mejor caso de esfuerzo (que confirma el resultado del punto 3.1.2). SPB-DIFFMARK también es mejor que el esquema QoS ALT-MARK interflujo, especialmente para valores más altos de pe. Estos resultados validan la estrategia de nuestros esquemas de marcado SPB que no marcan por igual todos los paquetes con mayor prioridad, sino que protegen un subconjunto de marcos que son esenciales para la calidad del habla. El esquema SPB-FEC ([12]), *También tenemos pruebas de escucha informal perfo rmed que confirman los resultados utilizando las métricas objetivas. 449 Figura 15: Distorsión perceptual (EMBSD) para los esquemas de marcado y SPB-FEC que utiliza redundancia9 en los paquetes principales de carga útil (RFC 2198, [7]) para proteger un subconjunto de paquetes, permite una muy buena calidad de voz de salida para bajas tasas de pérdida. Sin embargo, cabe señalar que la cantidad de datos enviados a través de la red se incrementa en un 40,4%. Tenga en cuenta que la simulación supone que este propio ancho de banda consumido no contribuye significativamente a la congestión. Esta suposición sólo es válida si una pequeña fracción de trafhc es voz ([S]). La curva SPB-FEC es convexa con el aumento de po, ya que debido a la correlación de pérdida creciente un número creciente de paquetes consecutivos que transportan redundancia se pierden dando lugar a pérdidas irrecuperables. La curva para SPB-DIFFMARK es cóncava, sin embargo, dando un mejor rendimiento para pe y 0,22. El esquema QoS ALT-MARK inter-flow (50% de los paquetes están marcados) mejora la calidad perceptiva. Sin embargo, la distancia auditiva y la distorsión perceptual del esquema SPB-MARK (con 40,4% de todos los paquetes marcados) es significativamente menor y muy cercana a la calidad de la señal decodificada cuando todos los paquetes están marcados (FULL MARK). Esto también demuestra que al proteger todo el flujo sólo se obtiene una pequeña mejora en la calidad perceptual. Los resultados del esquema FULL MARK también muestran que, si bien la pérdida de algunos de los paquetes +l tiene algún impacto medible, el impacto en la calidad perceptual puede ser considerado muy bajo. 6. CONCLUSIONES En este trabajo hemos caracterizado el comportamiento de un códec basado en muestras (PCM) y un códec basado en marcos (G.729) en presencia de pérdida de paquetes. Luego hemos desarrollado mecanismos de recuperación y control de pérdidas intraflujo para aumentar la calidad perceptiva. Si bien hemos probado otros códecs sólo de forma informal, creemos que nuestros resultados reflejan la diferencia fundamental entre códecs que codifican la onda de vozTambién utilizamos el codificador G.729 para la codificación fuente redundante. forma directamente o que se basan en la predicción lineal. Para PCM sin ocultamiento de pérdida hemos encontrado que no presenta sensibilidad temporal significativa ni sensibilidad a la heterogeneidad de carga útil. Sin embargo, con la pérdida de ocultación, la calidad del habla se incrementa, pero la cantidad de aumento presenta una fuerte sensibilidad temporal. Los códecs basados en marcos amplifican por un lado el impacto de la pérdida por propagación de errores, aunque por otro lado estos esquemas de codificación ayudan a realizar la ocultación de pérdidas por extrapolación del estado de decodificador. Contrariamente a los códecs basados en muestras, hemos demostrado que el rendimiento de ocultación del decodificador G.729 puede romperse en transiciones dentro de la señal del habla, mostrando así una fuerte sensibilidad a la heterogeneidad de carga útil. Hemos introducido brevemente un algoritmo de gestión de colas que es capaz de controlar los patrones de pérdida sin cambiar la cantidad de pérdida y caracterizó su rendimiento para el control de pérdida de un flujo que muestra sensibilidad temporal. A continuación, desarrollamos un nuevo esquema de marcado de paquetes llamado Speech Property Selective Differential Packet Marking para una protección eficiente de los códecs basados en marcos. El esquema SPBDIFFMARK concentra los paquetes de mayor prioridad en los marcos esenciales para la señal de voz y se basa en el ocultamiento de decodificadores para otros marcos. También hemos evaluado la asignación de un algoritmo de extremo a extremo a la protección de interflujo. Hemos encontrado que el esquema de marcado selectivo funciona casi tan bien como la protección de todo el flujo en un número significativamente menor de paquetes de alta prioridad necesarios. Por lo tanto, los esquemas combinados de extremo a extremo/hop de flujo interno parecen ser adecuados para redes de gran carga con una fracción relativamente grande de tráfico de voz. Este es el caso porque no necesitan la adición de redundancia ni retroalimentación (lo que implicaría datos adicionales y retrasos en los gastos generales) y, por lo tanto, proporcionan una calidad de voz estable también para mayores tasas de pérdida debido a la ausencia de FEC y la pérdida de retroalimentación. Estos sistemas pueden acomodar mejor los códecs con tasas de bits de salida fijas, que son difíciles de integrar en los esquemas de FEC que requieren la adaptabilidad tanto del códec como del generador de redundancia. Además, es útil para códecs adaptativos que se ejecutan en la tasa de bits más baja posible. Evitar la redundancia y la retroalimentación también es interesante en escenarios de conferencias multicast donde las características de pérdida de extremo a extremo de los diferentes caminos que conducen a los miembros de la sesión son en gran medida diferentes. Nuestro trabajo se ha centrado claramente en vincular modelos simples de extremo a extremo que se pueden parametrizar fácilmente con la característica conocida del control de pérdida de hop a nivel de usuario. Un análisis de un despliegue a gran escala de FEC no adaptativo o adaptativo en comparación con un despliegue de nuestro esquema combinado requiere un estudio claramente más profundo. 7. AGRADECIMIENTOS Nos gustaría dar las gracias a Wonho Yang y Robert Yantorno, Universidad Temple, por proporcionar el software EMBSD para las mediciones objetivas de calidad del habla. Michael Zander, GMD Fokus, ayudó con las simulaciones de los esquemas de gestión de colas. 8. Autor adicional: Georg Carle (GMD Fokus, correo electrónico: carle@fokus.gmd.de). 450 9. PI PI [31 PI [51 PI [71 PI PI WI WI WI REFERENCIAS J. Andren, M. Hilding, y D. Veitch. Comprender la dinámica del tráfico de internet de extremo a extremo. En Actas IEEE GLOBECOM, Sydney, Australia, noviembre de 1998. J.-C. Bolot, S. Fosse-Parisis y D. Towsley. Control de error adaptativo basado en FEC para audio interactivo en Internet. En Actas IEEE INFOCOM, Nueva York, Nueva York, marzo de 1999. D. Clark y W. Fang. Asignación explícita del mejor servicio de entrega de paquetes de esfuerzo. Informe técnico, MIT LCS, 1997. http://diffserv.lcs.mit.edu/Papers/expallot-ddc-wf.pdf. R. Cox y P. Kroon. Codificadores de voz de baja velocidad de bits para comunicación multimedia. Revista de Comunicaciones IEEE, págs. 34 a 41, diciembre de 1996. J. Ferrandiz y A. Lazar. Pérdida consecutiva de paquetes en el tráfico de paquetes en tiempo real. En Actas de la Cuarta Conferencia Internacional sobre Sistemas de Comunicación de Datos, IFIP TC6, págs. 306 a 324, Barcelona, junio de 1990. W. Jiang y H. Schulzrinne. Medición QoS de los servicios multimedia de Internet en tiempo real. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000. C. Perkins, I. Kouvelas, 0. Hodson, M. Handley y J. Bolot. Carga útil RTP para datos de audio redundantes. RFC 2198, IETF, septiembre de 1997. ftp://ftp.ietf.org/rfc/rfc2198.txt. M. Podolsky, C. Romer, y S. McCanne. Simulación del control de error basado en FEC para el audio de paquetes en Internet. En Actas IEEE INFOCOM, páginas 48-52, San Francisco, CA, marzo de 1998. J. Rosenberg. G. 729 recuperación de errores para la telefonía de Internet. Informe del proyecto, Universidad de Columbia, 1997. J. Rosenberg, L. Qiu y H. Schulzrinne. Integrar el paquete FEC en algoritmos de búfer de reproducción de voz adaptables en Internet. En Actas IEEE INFOCOM, Tel Aviv, Israel, marzo de 2000. H. Sanneck. Ocultación de paquetes de voz perdidos utilizando la packagización adaptativa. En Proceedings IEEE Multimedia Systems, págs. 140 a 149, Austin, TX, junio de 1998. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9806: Adaptive.ps.gz. H. Sanneck. La pérdida de paquetes Recuperación y control para la tinsmisión de voz a través de Internet. Tesis doctoral, GMD Fokus / Grupo de Redes de Telecomunicaciones, Universidad Técnica de Berlín, octubre de 2000. P31 PI P51 WI P71 P31 w PI PI http://sanneck.net/research/publications/thesis/ Sannoololoss.pdf. H. Sanneck y G. Carle. Un algoritmo de gestión de colas para la diferenciación de servicios intracflow en el mejor esfuerzo de Internet. En Actas de la Octava Conferencia sobre Comunicaciones y Redes Informáticas (ICCCN), páginas 419426, Natick, MA, octubre de 1999. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann9910: Intra-Flow.ps.gz. H. Sanneck, N. Le y A. Wolisz. Compatibilidad eficiente con QoS para aplicaciones Voice-over-IP mediante marcado selectivo de paquetes. En sesión especial sobre técnicas de control de errores para la entrega en tiempo real de datos multimedia, primer taller intenzacional sobre computación multimedia inteligente (IMMCN), páginas 553 a 556, Atlantic City, NJ, febrero de 2000. ftp://ftp.fokus.gmd.de/pub/glone/papers/Sann0002: VoIP-marking.ps.gz. H. Schulzrinne, J. Kurose y D. Towsley. Correlación de pérdidas para colas con flujos de entrada arrullados. En Proceedings ICC, págs. 219 a 224, Chicago, IL, 1992. D. Sisalem y A. Wolisz. Adaptación favorable al TCP de LDAf: estudio de medición y comparación. En Actas NOSSDAV, Chapel Hill, NC, junio de 2000, Unión Internacional de Telecomunicaciones. Codificación del habla a 8 kbit/s utilizando conjugado-estructura algebraica-código-excitada-predicción lineal (CS-ACELP). Recomendación G.729, UIT-T, marzo de 1996. Unión Internacional de Telecomunicaciones. Objetivo oualitv medición de la banda telefónica (300-3400 Hz) códecs de habla. Recomendación P.861, UIT-T, febrero de 1998. M. Yajnik, J. Kurose y D. Towsley. Correlación de pérdida de paquetes en la red multicast de MBone: Mediciones experimentales y modelos de cadena de markov. Informe técnico 95-115, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1995. M. Yajnik, S. Moon, J. Kurose y D. Towsley. Medición y modelización de la dependencia temporal en la pérdida de paquetes. Informe técnico 98-78, Departamento de Ciencias de la Computación, Universidad de Massachusetts, Amherst, 1998. W. Yang y R. Yantorno. Mejora del umbral de enmascaramiento de ruido de escala de MBSD y análisis de correlación con la diferencia de MOS en lugar de MOS. En Proceedings ICASSP, págs. 673 a 676, Phoenix, AZ, marzo de 1999. ",
            "error": []
        }
    }
}