{
    "id": "J-34",
    "original_text": "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets. We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence. We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask). We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability. Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks. Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1. INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets. This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software. The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges. On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage). The vast majority of equity trading is done via the standard limit order market mechanism. In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered. Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.) While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange. With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics. It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature. The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals. In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics. Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence? To examine this question, we consider two stylized but natural models of the limit order arrival process. In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc. This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price. In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell). Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆. Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information. The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book. A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid. More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state. Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point. We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders. How do these two models differ? Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results. The differences arise when we consider the stability question introduced above. Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently. For the relative model this intuition is less clear. It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events. Our main results demonstrate that these two models do indeed have dramatically different stability properties. We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books. In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps. We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations. In contrast, we show that the relative model enjoys no such stability properties. After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical. Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two. The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments. In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data). They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model. Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs. Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past. The outline of the paper follows. In Section 2 we briefly review the large literature on market microstructure. In Section 3 we describe the limit order mechanism and our formal models. Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model. This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model. Section 6 presents specific examples establishing the worstcase instability of the relative model. Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2. RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature. Here we have space only to summarize the main themes of this literature and to provide pointers to further readings. To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets. These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors. Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers. An excellent and comprehensive survey of results in this area can be found in [2]. There is a similarly large body of empirical work on microstructure. Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4]. A good overview of the empirical work can be found in [7]. Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets. This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions. There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution. Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading. Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3. MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9]. The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order. Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock. In a limit order, we specify not only the desired volume (1000 shares), but also the desired price. Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower. We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid). If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book). In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours. Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top. Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders. The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread. By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction. Figure 1: Sample INET order books for MSFT. How then do orders get (partially) executed? If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books. For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08. This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed. The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08. It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed. Thus in this example, the 1700 executed shares would be at different prices. Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values. In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution. Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously. This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order. It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above. In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell). Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution. Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences. Definition 3.1. Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi . Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value. In the case that ti is a cancel, ni matches a previously placed order and vi is ignored. We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative). In the absolute model, we do indeed interpret vi as simply being the price of the limit order. In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.) Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics. For simplicity we consider only modifications to the limit order values, but our results generalize to any modification. Definition 3.2. A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij . For every = ij , j ∈ {1, . . . , k} σ = σ . We now define the various quantities whose stability properties we examine in the absolute and relative models. All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4. THE 1-MODIFICATION THEOREM In this section we provide our most important technical result. It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited. We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model. Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ. At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i. We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close. Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same. Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical. Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences. Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders. Definition 4.1. Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2. Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2. Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2. Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}. Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states. Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ. Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change. The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states. This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ. The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2. If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof. Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2. If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b. The analysis of an arriving buy order is similar. Following the arrival of their only differing order, Σ and Σ are identical. We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab. This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence. We first show that from state ¯ab we remain in S regardless the next order. The intuition of this lemma is demonstrated in Figure 3. Lemma 4.3. If the current state is in the set ¯ab, then for any order the state will remain in S. Proof. We first provide the analysis for the case of an arriving sell order. Note that in ¯ab the buy books are identical (B1 = B2). Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books. For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged. For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order). Next we provide an analysis of the more subtle case where the arriving item is a buy order. For this case we need to take care of several different scenarios. The first is when the top of both sell books (the ask) is identical. Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order). We are left to deal with case where ask(A1) and ask(A2) are different. Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a . Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price. For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price. For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b. Lemma 4.4. If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5. If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3. The next and final lemma deals with cancellations. Lemma 4.6. If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof. When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them. For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged. For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1. Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled. Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5. ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model. We begin with an examination of the executed volume. Lemma 5.1. Let Σ be any sequence and Σ be any 1modification of Σ. Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2. Proof. By Theorem 4.1 we know that at each stage the books differ by at most two orders. Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two. Corollary 5.2. Let Σ be any sequence and Σ be any kmodification of Σ. Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k. An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ . Lemma 5.3. Let Σ be any sequence and let Σ be any kextension of Σ. Then the set of the executed orders generated by Σ and Σ differ by at most 2k. This lemma is the key to obtain our main absolute model volume result below. We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ . Theorem 5.4. Let Σ and Σ be any absolute model order sequences. Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k. In particular, |volume(Σ) − volume(Σ )| ≤ 4k. Proof. We first define the sequence ˜Σ which is the intersection of Σ and Σ . Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each. Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model. We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ). For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur. This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers. We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5. There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x. Proof. Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell. Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x. This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x. Similar instability results can be shown to hold for the other price-based quantities. This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread). We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread. In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change. We define s2(Σ) to be the maximum second spread in the sequence Σ following the change. Theorem 5.6. Let Σ be a sequence and let Σ be any 1modification of Σ. Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification. Proof. We provide the proof for the last bid; the proof for the last ask is similar. The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical. Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X. Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order. Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ). Now it remains to bound bid(Σ). Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order. Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired. In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order. First suppose that the books containing the additional orders are the original sequence Σ. Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order. Now assume that the books with the additional orders are for the modified sequence Σ . We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order. Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order. We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times. Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence. Lemma 5.7. Let Σ be a sequence and let Σ be any 1modification of Σ. Then the spread of Σ is bounded by s2(Σ). Proof. By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell). Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence. We are now ready to state a stability result for the average execution price in the absolute model. It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable. Theorem 5.8. Let Σ be a sequence and let Σ be any 1modification of Σ. Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ. Proof. The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ . Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a. Without loss of generality we assume that the sequence with the additional orders is Σ. If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ . Suppose that it involves a; there are two possibilities. Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a. By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ). In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ). If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b. If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b. If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ). We next give a stability result for the closing price. We first provide a technical lemma regarding the prices of consecutive executions. Lemma 5.9. Let Σ be any sequence. Then the prices of two consecutive executions in Σ differ by at most s2(Σ). Proof. Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask. Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise. Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10. Let Σ be any sequence and let Σ be a 1modification of Σ. If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof. We first deal with case where the last execution occurs in both sequences simultaneously. By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done. Next we deal with the case where the last execution among the two sequences occurs only in Σ. In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9). Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t). If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9. Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified. Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.) We use sk(Σ) to denote the k-spread. As before, we assume that the k-spread is always defined after an initialization period. We first state the following generalization of Lemma 5.7. Lemma 5.11. Let Σ be a sequence and let Σ be any 1modification of Σ. For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ). The proof is similar to the proof of Lemma 5.7 and omitted. A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ. Then we have s2(Σ ) ≤ s +2(Σ). Now using the above lemma and by simple induction we can obtain the following theorem. Theorem 5.12. Let Σ be a sequence and let Σ be any k-modification of Σ. Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification. We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model. Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6. RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders. Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on. While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price. In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions. In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed. Theorem 6.1. There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ). Proof. For concreteness we assume that at the beginning the ask is 10 and the bid is 8. The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n. Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1. After the first 2n orders there are still no executions; however, the books are different. Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8. Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n. The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model. Before providing the proof, we give its intuition. At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price. Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price. Theorem 6.2. For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof. Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar. We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis. The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1. We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12. Next we analyze a modified sequence. We change the first buy order from ∆ = 0 to ∆ = +1. Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y. Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1. Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12). Setting y = x + 2, we obtain the lemma for every property. We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7. SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model. The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets. In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data. By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market. These simulations provide an empirical counterpart to the theory we have developed. We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation. Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation. We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks. Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds. It is data sufficient to recreate the precise INET order book in a given stock on a given day and time. We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM). These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties. We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data. The basic format of each experiment was the following: 1. Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2. Make a small modification to a single order, and recompute the resulting value of the quantity of interest. In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction. For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values. The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence. Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4. For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM. These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day. We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data. In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves). The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price. Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects. Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market. However, the results both from the raw data and the clean data are qualitatively similar. The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings. Each row of the tables below contains a ticker (e.g. AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed). For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence. For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion. The results confirm rather strikingly the qualitative conclusions of the theory we have developed. In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market. As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point. This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares. Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models. Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured. As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure). For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently. We conclude with an examination of experiments with a mixture model. Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both. We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α. Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA. Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders. Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis). The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004. Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect. Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis). Each curve corresponds to a single day of trading during a month of 2004. Curves represent averages over 1000 trials. For the executed volume in the mixture model, however, the findings are more curious. In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations. We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above. But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α. It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data. We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8. ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis). The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data. Each curve corresponds to a single day of trading during June 2004. Curves represent averages over 1000 trials. here. Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9. REFERENCES [1] D. Bertsimas and A. Lo. Optimal control of execution costs. Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt. Market microstructure: a survey of microfoundations, empirical results and policy implications. Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters. Statistical properties of stock order books: empirical results and models. Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang. The informational content of an open limit order book, 2004. AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken. Optimal trade execution of equities in a limit order market. In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi. The price dynamics of common trading strategies. Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck. Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004. Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz. Optimal Trading Strategies. Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz. Competitive algorithms for VWAP and limit order trading. In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns. Reinforcement learning for optimized trade execution, 2006. Preprint. 129",
    "original_translation": "(In) Propiedades de estabilidad de la dinámica de orden límite Eyal Even-dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § Resumen Estudiamos las propiedades de estabilidad de la dinámica del mecanismo de orden límite continuo estándar que se utiliza en los mercados de equidad modernos. Preguntamos si tales mecanismos son susceptibles a los efectos de la mariposa: la inflicción de grandes cambios en las medidas comunes de la actividad del mercado por solo pequeñas perturbaciones de la secuencia de pedidos. Mostramos que la respuesta depende en gran medida de si el mercado consta de comerciantes absolutos (que determinan sus precios independientemente del estado de la Libro de pedidos actual) o comerciantes relativos (que determinan sus precios en relación con la oferta actual y solicitan). Probamos que, si bien el modelo de comerciante absoluto disfruta de propiedades de estabilidad demostrablemente fuertes, el modelo de comerciante relativo es vulnerable a una gran inestabilidad. Nuestros resultados teóricos están respaldados por experimentos a gran escala utilizando datos de orden límite de INET, un gran intercambio electrónico para las acciones de NASDAQ. Categorías y descriptores de sujetos J.4 [Ciencias sociales y conductuales]: Economía Términos generales Economía, Teoría 1. Introducción En los últimos años ha habido un aumento explosivo en la automatización de los mercados de valores modernos. Este aumento ha tenido lugar tanto en los intercambios, que están cada vez más computarizados y ofrecen interfaces sofisticadas para la colocación y gestión de pedidos, como en la actividad comercial en sí, que el software emprende con mayor frecuencia. Las llamadas redes de comunicación electrónica (o ECN) que dominan el comercio en las acciones de NASDAQ son un ejemplo común de la automatización de los intercambios. Por el lado de la negociación, los programas de computadora ahora se confían no solo la ejecución cuidadosa de las operaciones de bloques grandes para los clientes (a veces mencionados en Wall Street como comercio de programas), sino con la selección autónoma de acciones, dirección (larga o corta) y volúmenespara comerciar con fines de lucro (comúnmente denominado arbitraje estadístico). La gran mayoría del comercio de capital se realiza a través del mecanismo de mercado de orden de límite estándar. En este mecanismo, el comercio continuo se lleva a cabo a través de la llegada de órdenes límite que especifican si la parte desea comprar o vender, el volumen deseado y el precio ofrecido. Las órdenes límite de llegada que son ejecutables de total o parcialmente con las mejores ofertas en el otro lado se ejecutan de inmediato, y cualquier volumen no es ejecutable inmediatamente en una cola (o libro) ordenada por precio en el lado apropiado (compra o venta).(Una descripción detallada del mecanismo de orden de límite se da en la Sección 3.) Si bien los comerciantes siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocido como la oferta y el solicitado), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de pedidos: la distribución completade pedidos, precios y volúmenes en ambos lados del intercambio. Con esta revelación ha llegado la oportunidad, y cada vez más, la necesidad de modelar y explotar los datos y la dinámica del orden límite. Es justo decir que la microestructura del mercado, como se conoce generalmente esta área, es un tema que mide un gran interés tanto en los mercados reales como en la literatura financiera académica. Las oportunidades y las necesidades abarcan el rango desde la ejecución optimizada de grandes oficios hasta la creación de estrategias propietarias independientes que intentan beneficiarse de señales de microestructura de alta frecuencia. En este artículo investigamos un aspecto previamente inexplorado pero fundamental de la microestructura de orden límite: las propiedades de estabilidad de la dinámica. Específicamente, estamos interesados en la siguiente pregunta natural: en qué medida son modelos simples de los mercados de pedidos límite susceptibles o inmunes a los efectos de la mariposa, es decir, la imposición de grandes cambios en las estadísticas de actividad importantes (como el número de 120 acciones negociadas¿O el precio promedio por acción) por solo perturbaciones menores de la secuencia de pedidos? Para examinar esta pregunta, consideramos dos modelos estilizados pero naturales del proceso de llegada del orden límite. En el modelo de precios absoluto, los compradores y los vendedores llegan con precios de pedido límite que se determinan independientemente del estado actual del mercado (como lo representa los libros de pedidos), aunque pueden depender de todo tipo de información o choques exógenos, como el tiempo, Eventos de noticias, anuncios de la compañía cuyas acciones se negocian, señales privadas o estado de los comerciantes individuales, etc. Este proceso modela el comercio basado en los fundamentos tradicionales, en el que los participantes del mercado tienen una valoración inherente pero posiblemente variable para el bien que a su vez determina su precio límite. En contraste, en el modelo de precios relativos, los comerciantes expresan sus precios de pedido límite en relación con el mejor precio ofrecido en su libro respectivo (compra o venta). Por lo tanto, un comprador codificaría el precio de su orden límite como un desplazamiento ∆ (que puede ser positivo, negativo o cero) de la BID actual Pb, que luego se traduce al precio límite Pb +∆. Nuevamente, además de ahora dependiendo del estado de los libros de pedidos, los precios también pueden depender de todo tipo de información exógena. El modelo de precio relativo puede verse como comerciantes de modelado que, además de incorporar información externa fundamental sobre las acciones, también pueden posicionar sus pedidos estratégicamente en relación con los otros pedidos en su lado del libro. Un ejemplo común de dicho comportamiento estratégico se conoce como pene-salto en Wall Street, en el que un comerciante que tiene interesado en comprar acciones rápidamente, pero aún con un descuento para realizar un pedido de mercado, posicionará deliberadamente su pedido justo por encima del actual actual.licitación. En términos más generales, toda el área de la optimización de ejecución moderna [9, 10, 8] ha llegado a depender en gran medida del cuidadoso posicionamiento de las órdenes límite en relación con el estado de la Libro de pedidos actual. Tenga en cuenta que dicho posicionamiento puede depender de características más complejas de los libros de pedidos que solo la oferta actual y la solicitud, pero el modelo relativo es un punto de partida natural y simplificado. Observamos que una visión alternativa de los dos modelos es que todos los comerciantes se comportan de manera relativa, pero con comerciantes absolutos capaces de actuar solo en una escala de tiempo considerablemente más lenta que los comerciantes relativos más rápidos. ¿Cómo difieren estos dos modelos? Claramente, dada cualquier secuencia fija de los precios del pedido de límite de llegada, podemos optar por expresar estos precios como sus valores originales (absolutos), o podemos ejecutar el proceso dinámico de la libro de pedidos y transformar cada pedido en una diferencia relativa con la parte superior de sulibro, y obtener resultados idénticos. Las diferencias surgen cuando consideramos la pregunta de estabilidad introducida anteriormente. Intuitivamente, en el modelo absoluto, una pequeña perturbación en la secuencia de precios del límite límite de llegada debería tener efectos limitados (pero aún algunos) en la evolución posterior de los libros de pedidos, ya que los precios se determinan de forma independiente. Para el modelo relativo, esta intuición es menos clara. Parece posible que una pequeña perturbación pueda (por ejemplo) modificar ligeramente la oferta actual, que a su vez podría modificar ligeramente el precio del siguiente orden de llegada, que luego podría modificar ligeramente el precio del orden posterior, y así sucesivamente, lo que lleva auna secuencia amplificadora de eventos. Nuestros principales resultados demuestran que estos dos modelos tienen propiedades de estabilidad dramáticamente diferentes. Primero mostramos que para cualquier secuencia fija de precios en el modelo absoluto, la modificación de un solo pedido tiene un impacto limitado y extremadamente limitado en la evolución posterior de los libros. En particular, definimos una noción natural de distancia entre los libros de pedidos y mostramos que pequeñas modificaciones pueden dar lugar a una distancia constante a los libros originales para todos los pasos de tiempo posteriores. Luego mostramos que esto implica que para casi cualquier estadística estándar de la actividad del mercado (el volumen ejecutado, el precio promedio de ejecución de precios y muchos otros, la estadística solo puede verse influenciada infinitesimalmente por pequeñas perturbaciones. En contraste, mostramos que el modelo relativo no disfruta de tales propiedades de estabilidad. Después de dar secuencias de precios relativas específicas (peor) en las que pequeñas perturbaciones generan grandes cambios en las estadísticas básicas (por ejemplo, alterando el número de acciones negociadas por un factor de dos), procedemos a demostrar que la diferencia en las propiedades de estabilidad de losDos modelos son más que meramente teóricos. Utilizando los datos de pedidos y el Código de Reconstrucción de la Libro de pedidos y el Código de Reconstrucción de la Libro de pedidos y el Código de Reconstrucción de la Libro de pedidos y el Código de Reconstrucción de Libro de Libro y la Libro de pedido, investigamos las propiedades de estabilidad empírica cuando los datos que contienen precios absolutos, precios relativos o mezclas de los dos. Las predicciones teóricas de estabilidad e inestabilidad están fuertemente confirmadas por los experimentos posteriores. Además de que la estabilidad es de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí proporcionan alimentos para el pensamiento sobre los temas del impacto del mercado y la prueba de respaldo de las estrategias comerciales cuantitativas (el intento de determinar el desempeño pasado hipotético utilizando datos históricos). Sugieren que la confianza de que el comercio en silencio y en pequeños volúmenes tendrán un impacto mínimo en el mercado están vinculados a una creencia implícita en un modelo de precios absoluto. Nuestros resultados y el hecho de que en los mercados reales hay una gran y creciente cantidad de comportamiento relativo, como el salto de centavo, parecerían dudas sobre tales creencias. Del mismo modo, en un mundo de precio puramente o en gran medida relativo, las estrategias de baja frecuencia de baja frecuencia y de bajo volumen podrían dar lugar a estimaciones históricas del rendimiento que no solo no están relacionadas con el rendimiento futuro (la preocupación habitual), sino que ni siquiera son medidas precisas de las medidas precisas deun pasado hipotético. Sigue el contorno del documento. En la Sección 2 revisamos brevemente la gran literatura sobre microestructura del mercado. En la Sección 3 describimos el mecanismo de orden límite y nuestros modelos formales. La Sección 4 presenta nuestros resultados teóricos más importantes, el teorema de 1 modificación para el modelo de precios absoluto. Este teorema se aplica en la Sección 5 para derivar una serie de fuertes propiedades de estabilidad en el modelo absoluto. La Sección 6 presenta ejemplos específicos que establecen la peor inestabilidad del modelo relativo. La Sección 7 contiene los estudios de simulación que confirman en gran medida nuestros hallazgos teóricos sobre los datos del mercado INET.2. El trabajo relacionado como se mencionó en la introducción, la microestructura del mercado es un tema importante y oportuno tanto en las finanzas académicas como en Wall Street, y en consecuencia tiene una literatura reciente grande y variada. Aquí tenemos espacio solo para resumir los temas principales de esta literatura y proporcionar consejos a lecturas adicionales. Hasta donde sabemos, las propiedades de estabilidad de la dinámica de microestructura de orden de límite detallado no se han considerado previamente.(Sin embargo, consulte Farmer y Joshi [6] para obtener un ejemplo y una encuesta de otros estudios de estabilidad dinámica de precios). 121 En el lado más teórico, hay una rica línea de trabajo que examina lo que podría considerarse las propiedades teóricas del juego del orden límitemercados. Estos trabajos modelos a comerciantes y fabricantes de mercado (que proporcionan liquidez al ofrecer cotizaciones de compra y venta, y ganancias en la diferencia) mediante funciones de servicios públicos que incorporan tolerancia a los riesgos de movimiento de precios, posiciones grandes y otros factores, y examinan los precios de equilibrio y el resultado resultantescomportamientos. Los hallazgos comunes predicen impactos negativos de los precios para grandes operaciones y efectos de precios para grandes tenencias de inventario por parte de los fabricantes de mercados. Se puede encontrar una encuesta excelente e completa de resultados en esta área en [2]. Hay un cuerpo de trabajo empírico similarmente grande en la microestructura. Los temas principales incluyen la medición de los impactos de precios, las propiedades estadísticas de los libros de pedidos límite e intentos de establecer el valor informativo de los libros de pedidos [4]. Una buena descripción del trabajo empírico se puede encontrar en [7]. De particular, para nuestros intereses, es [3], que estudia empíricamente la distribución de los precios de los pedidos límite de llegada en varios mercados prominentes. Este trabajo considera los precios de llegada análogos a nuestro modelo relativo y establece una forma de ley de potencia para las distribuciones resultantes. También hay un pequeño pero creciente número de obras que examinan los temas de microestructura del mercado desde una perspectiva de la informática, incluidos algunos centrados en el uso de microestructura en algoritmos para la ejecución comercial optimizada. Kakade et al.[9] introdujo la dinámica del orden límite en el análisis competitivo para el comercio de precio promedio ponderado unidireccional y ponderado por volumen (VWAP). Algunos documentos recientes han aplicado métodos de aprendizaje de refuerzo para la ejecución comercial utilizando las propiedades de la Libro de pedidos como variables de estado [1, 5, 10].3. Preliminares de microestructura El siguiente material de fondo expositivo está adaptado de [9]. El mecanismo de mercado que examinamos en este documento está impulsado por el concepto simple y estándar de un orden límite. Supongamos que deseamos comprar 1000 acciones de Microsoft (MSFT). En una orden límite, especificamos no solo el volumen deseado (1000 acciones), sino también el precio deseado. Suponga que MSFT actualmente se cotiza a aproximadamente $ 24.07 por acción (ver Figura 1, que muestra una instantánea real de una libro de pedidos de MSFT en INET), pero solo estamos dispuestos a comprar las 1000 acciones a $ 24.04 por acción o más bajo. Podemos elegir enviar una orden de límite con esta especificación, y nuestro pedido se realizará en una cola llamada Buy Order Libro, que está ordenado por Price, con el precio de compra sin ejecutación más alto ofrecido en la parte superior (a menudo denominada oferta). Si hay múltiples órdenes límite al mismo precio, se ordenan por tiempo de llegada (con pedidos más antiguos más altos en el libro). En el ejemplo proporcionado por la Figura 1, nuestro pedido se realizaría inmediatamente después del pedido existente para 5,503 acciones a $ 24.04;Aunque ofrecemos el mismo precio, este pedido ha llegado antes del nuestro. Del mismo modo, se mantiene un libro de pedidos de venta para pedidos de límite de venta, esta vez con el precio de venta más bajo ofrecido (a menudo denominado Ask) en su parte superior. Por lo tanto, los libros de pedidos se clasifican desde los pedidos límite más competitivos en la parte superior (altos precios de compra y bajos precios de venta) hasta pedidos límite menos competitivos. Los precios de oferta y solicitación juntos a veces se denominan el mercado interno y la diferencia entre ellos como el diferencial. Por definición, los libros de pedidos siempre consisten exclusivamente en órdenes no ejecutadas: son colas de pedidos, con suerte, que esperan que el precio se mueva en su dirección. Figura 1: Muestra de libros de pedidos inet para MSFT. ¿Cómo se ejecutan (parcialmente) los pedidos? Si una orden de límite de compra (vender, respectivamente) sale por encima del precio de solicitud (por debajo de la oferta, respectivamente), entonces el pedido se combina con pedidos en los libros opuestos hasta que se llene el volumen de pedidos entrantes, o no se puede completar más coincidencia., en cuyo caso el volumen entrante restante se coloca en los libros. Por ejemplo, supongamos que en el ejemplo de la Figura 1 una orden de compra para 2000 acciones llegó con un precio límite de $ 24.08. Esta orden estaría parcialmente llenada por las dos órdenes de venta de 500 compartir a $ 24.069 en los libros de venta, la pedido de venta de 500 compartir a $ 24.07 y la pedido de venta de 200 compartidos a $ 24.08, para un total de 1700 acciones ejecutadas. Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva oferta del libro de compra a $ 24.08. Es importante tener en cuenta que los precios de las ejecuciones son los precios especificados en los pedidos límite que ya están en los libros, no los precios de la orden entrante que se ejecuta inmediatamente. Por lo tanto, en este ejemplo, las 1700 acciones ejecutadas serían a precios diferentes. Tenga en cuenta que esto también significa que en un intercambio de pedidos de límite puro, como INET, los pedidos del mercado pueden simularse mediante pedidos límite con valores de precios extremos. En intercambios como INET, la parte puede retirar o cancelar cualquier pedido que lo colocara en cualquier momento antes de la ejecución. Cada orden límite llega atómica e instantáneamente: hay una secuencia temporal estricta en la que llegan las órdenes, y dos órdenes nunca pueden llegar simultáneamente. Esto da lugar a la definición del último precio del intercambio, que es simplemente el último precio al que el intercambio ejecutó un pedido. Es esta cantidad la que generalmente se entiende cuando las personas se refieren casualmente al precio (de ticker) de una acción.3.1 Definiciones formales ahora proporcionamos un modelo formal para el Cess PRO122 de orden límite descrito anteriormente. En este modelo, los pedidos límite llegan en una secuencia temporal, con cada pedido especificando su precio límite y una indicación de su tipo (compra o venta). Al igual que los intercambios reales, también permitimos la cancelación de una orden de pie (sin ejecutación) en los libros en cualquier momento antes de su ejecución. Sin pérdida de generalidad, limitamos la atención a un modelo en el que cada orden es para una sola acción;Los volúmenes de orden grande pueden representarse mediante secuencias de 1 acción. Definición 3.1. Sea σ = σ1, ... σn una secuencia de órdenes límite, donde cada σi tiene la forma ni, ti, vi. Aquí, NI es un identificador de pedido, TI es el tipo de pedido (comprar, vender o cancelar), y VI es el valor de pedido límite. En el caso de que TI sea una cancelación, Ni coincide con un pedido previamente realizado y se ignora VI. Hemos llamado deliberadamente VI en la definición por encima del valor del orden límite en lugar del precio, ya que nuestros dos modelos diferirán en su interpretación de VI (como absoluto o relativo). En el modelo absoluto, de hecho interpretamos que VI simplemente es el precio del orden límite. En el modelo relativo, si la configuración actual del libro de pedidos es (a, b) (donde a es la venta y b el libro de compra), el precio del pedido es solicitado (a) + vi si ti se vende y oferta (B) + VI Si se compra Ti, donde por preguntar (x) y oferta (x) denotamos el precio del pedido en la parte superior del libro X. (Nota VI puede ser negativo). Nuestro interés principal en este documento son los efectos que la modificación de un pequeño número de órdenes límite puede tener en la dinámica resultante. Para simplificar, consideramos solo modificaciones a los valores de orden límite, pero nuestros resultados se generalizan a cualquier modificación. Definición 3.2. Una modificación k de σ es una secuencia σ tal que para exactamente k índices i1, ..., ik vij = vij, tij = tij y nij = nij. Para cada = ij, j ∈ {1 ,..., k} σ = σ. Ahora definimos las diversas cantidades cuyas propiedades de estabilidad examinamos en los modelos absolutos y relativos. Todas estas son cantidades estándar de interés común en los mercados financieros.• Volumen (σ): número de acciones ejecutadas (negociadas) en la secuencia σ.• Promedio (σ): precio de ejecución promedio.• Cerrar (σ): precio de la última ejecución (cierre).• Lastbid (σ): oferta al final de la secuencia.• Lastask (σ): pregunte al final de la secuencia.4. El teorema de 1 modificación en esta sección proporcionamos nuestro resultado técnico más importante. Muestra que en el modelo absoluto, los efectos que la modificación de un solo orden tiene en la evolución resultante de los libros de pedidos es extremadamente limitado. Luego aplicamos este resultado para obtener fuertes resultados de estabilidad para todas las cantidades mencionadas en el modelo absoluto. A lo largo de esta sección, consideramos una secuencia de orden arbitraria σ en el modelo absoluto, y cualquier modificación 1 σ de σ. En cualquier momento (índice) i en las dos secuencias que usaremos (A1, B1) para denotar los libros de venta y compra (respectivamente) en σ, y (A2, B2) para denotar los libros de venta y compra en σ;Para una comodidad de notación omitimos explícitamente la superconjuntos por el índice actual i. En breve estableceremos que en todo momento I, (A1, B1) y (A2, B2) están muy cerca. Aunque los libros de pedidos están ordenados por precio, usaremos (por ejemplo) A1 ∪ {a2} = a2 para indicar que A2 contiene un pedido a algún precio A2 que no está presente en A1, pero que de lo contrario A1 y A2 son idénticos;Eliminar así la orden en A2 en A2 haría que los libros hicieran los mismos. Del mismo modo, B1 ∪ {B2} = B2 ∪ {B1} significa que B1 contiene un pedido al precio B1 no presente en B2, B2 contiene un pedido al precio B2 no presente en B1, y que de lo contrario B1 y B2 son idénticos. Usando esta notación, ahora definimos un conjunto de estados del sistema estable, donde cada estado se compone de los libros de pedidos de las secuencias originales y modificadas. En breve mostramos que si cambiamos solo un valor de pedido (precio), permanecemos en este conjunto para cualquier secuencia de pedidos límite. Definición 4.1. Sea AB el conjunto de todos los estados (A1, B1) y (A2, B2) de modo que A1 = A2 y B1 = B2. Sea ¯ab el conjunto de estados tal que a1 ∪ {a2} = a2 ∪ {a1}, donde a1 = a2 y b1 = b2. Sea A¯b el conjunto de estados tal que b1∪ {b2} = b2∪ {b1}, donde b1 = b2 y a1 = a2. Sea ¯a¯b el conjunto de estados en los que a1 = a2∪ {a1} y b1 = b2∪ {b1}, o en el que a2 = a1 ∪ {a2} y b2 = b1 ∪ {b2}. Finalmente definimos S = AB ∪ ¯ab ∪ ¯ba ∪ ¯a¯b como el conjunto de estados estables. Teorema 4.1.(Teorema de 1 modificación) Considere cualquier secuencia de órdenes σ y cualquier modificación 1 σ de σ. Luego, los libros de pedidos (A1, B1) y (A2, B2) determinados por σ y σ se encuentran en el conjunto de estados estables en todo momento.ab ¯a¯b a¯b¯ab Figura 2: Diagrama que representa el conjunto de estados estables y los posibles movimientos transiciones en él después del cambio. La idea de la prueba de este teorema está contenida en la Figura 2, que muestra un diagrama de transición de estado etiquetado por las categorías de estados estables. Este diagrama describe todas las transiciones que pueden tener lugar después de la llegada del orden en que σ y σ difieren. A continuación se establece que inmediatamente después de la llegada de este orden diferente, el estado se encuentra en S. Lemma 4.2. Si en algún momento los libros actuales (A1, B1) y (A2, B2) están en el conjunto AB (y, por lo tanto, idéntico), entonces la modificación del precio del siguiente pedido mantiene al estado en la prueba de S. Supongamos que la orden de llegada es una orden de venta y la cambiamos de A1 a A2;Suponga sin pérdida de generalidad que a1> a2. Si ninguno de los orden se ejecuta de inmediato, entonces nos movemos al estado ¯ab;Si ambos se ejecutan, entonces nos quedamos en el estado AB;y si solo se ejecuta A2, entonces nos movemos al estado ¯a¯b. El análisis de una orden de compra que llega es similar. Después de la llegada de su único orden diferente, σ y σ son idénticos. Ahora damos una secuencia de lemas que muestran 123 ejecutados con dos órdenes no ejecutadas en la orden de compra de la orden de compra que llega a la orden de compra que llega a la orden de venta de la orden de venta ¯ab ab ¯a¯b ejecutado solo con A1 (no A1 y A2) ejecutado con A1 yA2 Figura 3: El diagrama de estado al comenzar en el estado ¯ab. Este diagrama proporciona la intuición de Lemma 4.3 que, después de la diferencia inicial cubierta por Lemma 4.2, el estado permanece en S para siempre en la secuencia restante (idéntica). Primero mostramos que del estado ¯ab permanecemos en S independientemente del próximo orden. La intuición de este lema se demuestra en la Figura 3. Lema 4.3. Si el estado actual está en el conjunto ¯AB, entonces para cualquier orden, el estado permanecerá en S. Prueba. Primero proporcionamos el análisis para el caso de una orden de venta que llega. Tenga en cuenta que en ¯ab los libros de compra son idénticos (B1 = B2). Por lo tanto, la orden de venta de que llega se ejecuta con la misma orden de compra en ambos libros de compra, o no se ejecuta en ambos libros de compra. Para el primer caso, los libros de compra siguen siendo idénticos (la oferta se ejecuta en ambos) y los libros de venta permanecen sin cambios. Para el segundo caso, los libros de compra permanecen sin cambios e idénticos, y los libros de venta tienen la nueva orden de venta a ambos (y, por lo tanto, aún difieren en un orden). A continuación, proporcionamos un análisis del caso más sutil donde el artículo que llega es una orden de compra. Para este caso, debemos ocuparnos de varios escenarios diferentes. La primera es cuando la parte superior de ambos libros de venta (The Ask) es idéntico. Entonces, independientemente de si la nueva orden de compra se ejecuta o no, el estado permanece en ¯AB (el análisis es similar a una orden de venta de que llega). Tenemos que lidiar con el caso donde preguntar (A1) y preguntar (A2) son diferentes. Aquí discutimos dos subcases: (a) preguntar (a1) = a1 y preguntar (a2) = a2, y (b) preguntar (a1) = a1 y preguntar (a2) = a. Aquí A1 y A2 son como en la definición de ¯AB en la definición 4.1, y A es algún otro precio. Para el subcase (a), por nuestra suposición a1 <a2, entonces (1) ambos solicitan ser ejecutados, los libros de venta se vuelven idénticos y nos movemos al estado AB;(2) ni solicitar se ejecuta y permanecemos en el estado ¯ab;o (3) solo ask (a1) = a1 se ejecuta, en cuyo caso nos movemos al estado ¯a¯b con a2 = a1 ∪ ∪ {a2} y b2 = b1 ∪ {b2}, donde B2 es el precio de la orden de compra que llega. Para la subcase (b), ya sea (1) la orden de compra se ejecuta en ningún libro de venta, permanecemos en el estado ¯ab;o (2) la orden de compra se ejecuta en ambos libros de venta y permanece en el estado ¯ab con a1 ∪ {a} = a2 ∪ {a2};o (3) solo preguntar (a1) = a1 se ejecuta y nos movemos a estado ¯a¯b. Lema 4.4. Si el estado actual está en el conjunto A¯b, entonces para cualquier orden, el estado permanecerá en S. Lemma 4.5. Si la configuración actual está en el conjunto ¯a¯b, entonces para cualquier orden, el estado permanecerá en las pruebas de estos dos lemas se omiten, pero son similares en espíritu a los de Lemma 4.3. El siguiente y final Lemma trata con cancelaciones. Lema 4.6. Si el estado de libro de pedidos actual se encuentra en S, luego de la llegada de una cancelación permanece en S. Prueba. Cuando llega una orden de cancelación, una de las siguientes posibilidades se mantiene: (1) El orden todavía está en ambos conjuntos de libros, (2) no está en ninguna de ellas y (3) solo está en uno de ellos. Para los dos primeros casos, es fácil ver que el efecto de cancelación es idéntico en ambos conjuntos de libros y, por lo tanto, el estado permanece sin cambios. Para el caso en que el pedido aparece solo en un conjunto de libros, sin pérdida de generalidad, suponemos que la cancelación cancela un pedido de compra en B1. En lugar de eliminar B1 del libro, podemos cambiarlo para tener el precio 0, lo que significa que este pedido de compra nunca se ejecutará y se cancela de manera efectiva. Ahora, independientemente del estado en el que estábamos, B1 todavía está solo en un libro de compra (pero con un precio diferente), y por lo tanto permanecemos en el mismo estado en S. La prueba del Teorema 4.1 se deduce de los lemas anteriores.5. Estabilidad del modelo absoluto En esta sección Aplicamos el teorema de 1 modificación para mostrar fuertes propiedades de estabilidad para el modelo absoluto. Comenzamos con un examen del volumen ejecutado. Lema 5.1. Sea σ cualquier secuencia y σ sea cualquier 1 modificación de σ. Luego, el conjunto de órdenes ejecutados (números de identificación) generados por las dos secuencias difiere por 2 como máximo. Prueba. Por el Teorema 4.1 sabemos que en cada etapa los libros difieren como máximo dos órdenes. Ahora, dado que la unión de las ID de las órdenes ejecutadas y los libros de pedidos siempre es idéntica para ambas secuencias, esto implica que las órdenes ejecutadas pueden diferir como máximo dos. Corolario 5.2. Sea σ cualquier secuencia y σ cualquier kmodificación de σ. Luego, el conjunto de órdenes ejecutados (números de identificación) generados por las dos secuencias difiere por máximo 2K. Una secuencia de orden σ es una extensión k de σ si se puede obtener σ eliminando cualquier pedido k en σ. Lema 5.3. Sea σ cualquier secuencia y sea σ cualquier kextensión de σ. Luego, el conjunto de los órdenes ejecutados generados por σ y σ difieren en la mayoría de 2K. Este lema es la clave para obtener nuestro principal resultado del volumen del modelo absoluto a continuación. Usamos Editar (σ, σ) para denotar la distancia de edición estándar entre las secuencias σ y σ: el número mínimo de sustituciones, inserciones y deleciones u órdenes necesarias para cambiar σ a σ. Teorema 5.4. Sea σ y σ cualquier secuencia de orden de modelo absoluto. Entonces, si editar (σ, σ) ≤ k, el conjunto de los órdenes ejecutados generados por σ y σ difieren en la mayoría de 4K. En particular, | volumen (σ) - volumen (σ) |≤ 4K. Prueba. Primero definimos la secuencia ˜σ, que es la intersección de σ y σ. Dado que σ y σ están como máximo k separados, tenemos que por k inserciones cambiamos ˜σ a σ o σ, y por lema 5.3 Su conjunto de órdenes ejecutadas es como máximo 2k de cada uno. Por lo tanto, el conjunto de órdenes ejecutadas en σ y σ está como máximo a 4K separados.124 5.1 El teorema de límites de propagación 5.4 establece una fuerte estabilidad para el volumen ejecutado en el modelo absoluto. Ahora pasamos a las cantidades que implican precios de ejecución en lugar de volumen solo, a saber, promedio (σ), cierre (σ), LastBid (σ) y Lastask (σ). Para estos resultados, a diferencia del volumen ejecutado, una condición debe mantenerse en σ para que ocurra la estabilidad. Esta condición se expresa en términos de una medida natural de la propagación del mercado, o la brecha entre los compradores y los vendedores. Motivamos esta condición al mostrar primero que sin ella, al cambiar un orden, podemos cambiar el promedio (σ) por cualquier valor positivo x.Lema 5.5. Existe σ de tal manera que para cualquier x ≥ 0, hay una modificación 1 σ de σ tal que promedio (σ) = promedio (σ) + x. Prueba. Sea σ una secuencia de órdenes de venta y compra alternas en los que cada vendedor ofrece P y cada comprador P + X, y el primer pedido es una venta. Entonces todas las ejecuciones tienen lugar en la solicitud, que siempre es p, y por lo tanto promedio (σ) = p.Ahora supongamos que modificamos solo el primer pedido de venta para estar al precio P+1+x. Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones tienen lugar en la oferta, que siempre es p + x. Se puede demostrar que los resultados de inestabilidad similares se mantienen para las otras cantidades basadas en precios. Esto motiva la introducción de una cantidad que llamamos el segundo diferencial de los libros de pedidos, que se define como la diferencia entre los precios del segundo pedido en el libro de venta y el segundo pedido en el libro de compra (a diferencia de la oferta de ascensordiferencia, que comúnmente se llama la propagación). Observamos que en un stock líquido, como los que examinamos experimentalmente en la Sección 7, la segunda propagación generalmente será bastante pequeña y, de hecho, casi siempre es igual a la propagación. En esta subsección consideramos los cambios en la secuencia solo después de un período de inicialización, y las secuencias de tal manera que la segunda propagación siempre se define después del tiempo que hacemos un cambio. Definimos S2 (σ) como la segunda extensión máxima en la secuencia σ después del cambio. Teorema 5.6. Sea σ una secuencia y sea σ cualquier 1 modificación de σ. Entonces 1. | Lastbid (σ) - Lastbid (σ) |≤ S2 (σ) 2. | Lastask (σ) - Lastask (σ) |≤ S2 (σ) donde S2 (σ) es el máximo sobre el segundo dispersión en σ después de la modificación 1. Prueba. Proporcionamos la prueba para la última oferta;La prueba de la última solicitud es similar. La prueba se basa en el teorema 4.1 y considera a los estados en el conjunto estable S. para los estados AB y ¯ab, tenemos que la oferta es idéntica. Sea la oferta (x), sb (x), ask (x), la oferta, la segunda orden de compra más alta, y solicite una secuencia X. Ahora recuerde que en el estado a¯b tenemos que los libros de venta son idénticos, y que los dos libros de compra son idénticos, excepto un orden diferente. Por lo tanto, BID (σ)+S2 (σ) ≥ Sb (σ)+S2 (σ) ≥ Ask (σ) = Ask (σ) ≥ Bid (σ). Ahora sigue siendo la BID (σ). Aquí utilizamos el hecho de que la oferta de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido al hecho de que los libros son diferentes solo en un orden. Desde BID (σ) ≥ Sb (σ) ≥ Ask (σ) - S2 (σ) ≥ Bid (σ) - S2 (σ) Tenemos esa oferta (σ) - Bid (σ) |≤ S2 (σ) Como se desea. En el estado ¯a¯b tenemos que para una secuencia, los libros contienen una orden de compra adicional y una orden de venta adicional. Primero suponga que los libros que contienen los pedidos adicionales son la secuencia original σ. Ahora, si la oferta no es el orden adicional, se realizamos, de lo contrario tenemos lo siguiente: Bid (σ) ≤ Ask (σ) ≤ Sb (σ) + S2 (σ) = Bid (σ) + S2 (σ), dondeSB (σ) ≤ BID (σ) Dado que el libro de compra original tiene solo un pedido adicional. Ahora suponga que los libros con los pedidos adicionales son para la secuencia modificada σ. Tenemos BID (σ) + S2 (σ) ≥ Ask (σ) ≥ Ask (σ) ≥ Bid (σ), donde utilizamos el hecho de que preguntar (σ) ≥ ask (σ) ya que la secuencia modificada tiene un orden adicional. Del mismo modo, tenemos esa oferta (σ) ≤ BID (σ) ya que el libro de compra modificado contiene un pedido adicional. Observamos que la prueba del teorema 5.6 en realidad establece que la oferta y solicitar las secuencias originales y modificadas están dentro de S2 (σ) en todo momento. A continuación, proporcionamos un lema técnico que relaciona la (primera) dispersión de la secuencia modificada con la segunda propagación de la secuencia original. Lema 5.7. Sea σ una secuencia y sea σ cualquier 1 modificación de σ. Entonces la propagación de σ está limitada por S2 (σ). Prueba. Según el teorema de 1 modificación, sabemos que los libros de la secuencia modificada y la secuencia original pueden diferir como máximo un orden en cada libro (comprar y vender). Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es como máximo la oferta en la secuencia modificada, y el segundo orden de venta más bajo en la secuencia original siempre es al menos solicitar la secuencia modificada. Ahora estamos listos para establecer un resultado de estabilidad para el precio de ejecución promedio en el modelo absoluto. Establece que en los mercados altamente líquidos, donde el volumen ejecutado es grande y el diferencial pequeño, el precio promedio es altamente estable. Teorema 5.8. Sea σ una secuencia y sea σ cualquier 1 modificación de σ. Entonces | promedio (σ) - promedio (σ) |≤ 2 (PMAX + S2 (σ)) volumen (σ) + S2 (σ) donde PMAX es el precio de ejecución más alto en σ. Prueba. La prueba mostrará que cada ejecución en σ además de la ejecución del orden modificado y la última ejecución tiene una ejecución coincidente en σ con un precio diferente por la máximo de S2 (σ), y usará el hecho de que PMAX + S2 (σ)está unido al precio en σ. Refiriéndose a la prueba del teorema de 1 modificación, supongamos que estamos en estado ¯a¯b, donde tenemos en una secuencia (que puede ser σ o σ) una orden de compra adicional B y una orden de venta adicional a. Sin pérdida de generalidad, suponemos que la secuencia con las órdenes adicionales es σ. Si la próxima ejecución no involucra A o B, entonces claramente tenemos la misma ejecución tanto en σ como en σ. Supongamos que involucra a;Hay dos posibilidades. O es el orden modificado, en cuyo caso cambiamos la diferencia promedio de precio 125 por (pMax +s2 (σ))/volumen (σ), y esto puede suceder solo una vez;o A se ejecutó antes en σ y las ejecuciones involucran un orden cuyo precio límite es a. Por el lema 5.7 El diferencial de ambas secuencias está limitado por S2 (σ), lo que implica que el precio de la ejecución en σ era como máximo a + S2 (σ), mientras que la ejecución está en σ está al precio A, y por lo tanto los preciosson diferentes por la mayoría de S2 (σ). En los estados ¯ab, a¯b siempre que tengamos ejecuciones concurrentes en las dos secuencias, sabemos que los precios pueden diferir en la mayoría de S2 (σ). Si tenemos una ejecución solo en una secuencia, la combinamos en el estado ¯a¯b o la cargamos por (pMax + s2 (σ))/volumen (σ) si terminamos en el estado ¯a¯b. Si terminamos en el estado ab, ¯ab o a¯b, entonces cada ejecución en los estados ¯ab o a¯b se combinaron con una ejecución en el estado ¯a¯b. Si terminamos en el estado ¯a¯b, tenemos una ejecución única que no coincide y, por lo tanto, la cargamos (pMax +s2 (σ))/volumen (σ). Luego damos un resultado de estabilidad para el precio de cierre. Primero proporcionamos un lema técnico con respecto a los precios de las ejecuciones consecutivas. Lema 5.9. Sea σ cualquier secuencia. Entonces los precios de dos ejecuciones consecutivas en σ difieren en la mayoría de S2 (σ). Prueba. Supongamos que la primera ejecución se toma en el tiempo t;Su precio está limitado a continuación por la oferta actual y arriba por la solicitud actual. Ahora, después de esta ejecución, la oferta es al menos la segunda orden de compra más alta en el momento T, si se ejecutó la oferta anterior y no llegaron órdenes de compra más altas, y más alto. Del mismo modo, la solicitud es como máximo la segunda orden de venta más baja en el momento t.Por lo tanto, el siguiente precio de ejecución es al menos la segunda oferta en el momento t y, como máximo, la segunda solicitud en el momento t, que está como máximo S2 (σ) de la oferta/solicitar en el momento t.Lema 5.10. Sea σ cualquier secuencia y sea σ una modificación 1 de σ. Si el volumen (σ) ≥ 2, entonces | Cerrar (σ) - Cerrar (σ) |≤ s2 (σ) prueba. Primero tratamos con el caso donde la última ejecución ocurre en ambas secuencias simultáneamente. Por el Teorema 5.6, tanto la solicitud como la oferta de σ y σ están como máximo S2 (σ) separadas en cada vez t.Dado que el precio de la última ejecución es sus solicitantes (ofertas) en el momento en que terminamos. A continuación, tratamos con el caso donde la última ejecución entre las dos secuencias ocurre solo en σ. En este caso, sabemos que la ejecución anterior ocurrió simultáneamente en ambas secuencias en el momento t, y por lo tanto, las tres ejecuciones están dentro de la segunda propagación de σ en el tiempo t (la primera ejecución en σ por definición, la ejecución en σ de argumentos idénticoscomo en el primer caso, y el tercero por Lemma 5.9). De lo contrario, la ejecución anterior ocurrió solo en σ en el momento t, en cuyo caso las dos ejecuciones están dentro de la propagación de σ en el tiempo t (la ejecución de σ a partir de los mismos argumentos que antes, y la ejecución en σ debe estar dentro de su extensiónen el tiempo t). Si la última ejecución ocurre solo en σ sabemos que la próxima ejecución de σ estará como máximo S2 (σ) de su ejecución anterior por Lemma 5.9. Junto con el hecho de que si una ejecución ocurre solo en una secuencia implica que el orden está en la propagación de la segunda secuencia siempre que las secuencias sean 1 modificación, la prueba se completa.5.2 Límites de distribución para modificaciones K Como en el caso del volumen ejecutado, nos gustaría extender los resultados de estabilidad del modelo absoluto para las cantidades basadas en precios al caso donde se modifican múltiples pedidos. Aquí nuestros resultados son más débiles y dependen de la extensión de K, la distancia entre el orden de compra más alto de KTH y el orden de venta más bajo de KTH, en lugar de la segunda propagación.(Mirando hacia adelante a la Sección 7, observamos que en los datos reales del mercado para acciones líquidas, esta cantidad a menudo también es muy pequeña). Usamos SK (σ) para denotar el K-Spread. Como antes, suponemos que el K-difamado siempre se define después de un período de inicialización. Primero declaramos la siguiente generalización de Lemma 5.7. Lema 5.11. Sea σ una secuencia y sea σ cualquier 1 modificación de σ. Para ≥ 1, si S +1 (σ) siempre se define después del cambio, entonces S (σ) ≤ S +1 (σ). La prueba es similar a la prueba de Lemma 5.7 y se omite. Una aplicación simple de este lema es la siguiente: Sea σ cualquier secuencia que sea una modificación de σ. Luego tenemos S2 (σ) ≤ S +2 (σ). Ahora usando el lema anterior y por inducción simple podemos obtener el siguiente teorema. Teorema 5.12. Sea σ una secuencia y sea σ cualquier modificación k de σ. Entonces 1. | Lastbid (σ) - Lastbid (σ) |≤ Pk = 1 S +1 (σ) ≤ KSK +1 (σ) 2. | Lastask (σ) −lastask (σ) |≤ Pk = 1 S +1 (σ) ≤ KSK +1 (σ) 3. | Cerrar (σ) - Cerrar (σ) |≤ PK = 1 S +1 (σ) ≤ KSK +1 (σ) 4. | promedio (σ) - promedio (σ) |≤ PK = 1 2 (PMAX +S +1 (σ)) Volumen (σ) +S +1 (σ) donde S (σ) es el máximo sobre el -spresado en σ después de la primera modificación. Observamos que si bien estos límites dependen de medidas más profundas de propagación para más modificaciones, estamos trabajando en un modelo de orden de 1 acción. Por lo tanto, en un mercado real, donde los pedidos individuales contienen cientos o miles de acciones, la K-extirped incluso para K grande podría ser bastante pequeña y cercana al estándar 1-extendido en acciones líquidas.6. La inestabilidad del modelo relativo en el modelo relativo La suposición subyacente es que los comerciantes intentan explotar su conocimiento de los libros para hacer estratégicamente sus órdenes. Por lo tanto, si un comerciante quiere que su orden de compra se ejecute rápidamente, puede colocarla por encima de la oferta actual y ser la primera en la cola;Si el comerciante es paciente y cree que la tendencia de los precios será a la baja, ella realizará pedidos más profundos en el libro de compra, y así sucesivamente. Si bien en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última oferta, la última solicitud, el precio de ejecución promedio y el último precio de ejecución. En la Sección 7 proporcionamos muchas simulaciones sobre los datos reales del mercado que demuestran que esta inestabilidad es inherente al modelo relativo, y no debido a las construcciones artificiales. En el modelo relativo, suponemos que para cada secuencia, la solicitud y la oferta siempre se definen, por lo que los libros tienen una configuración inicial no vacía.126 Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas. Teorema 6.1. Hay una secuencia σ y una modificación 1 σ de σ tal que volumen (σ) ≥ 2volume (σ). Prueba. Para la concreción, suponemos que al principio la solicitud es 10 y la oferta es 8. La secuencia σ se compone de n órdenes de compra con ∆ = 0, seguido de N de venta de ∆ = 0, y finalmente una secuencia alterna de órdenes de compra con ∆ = +1 y vende órdenes con ∆ = −1 de longitud 2n. Dado que los libros antes de la secuencia alterna contienen órdenes de venta n + 1 a las órdenes de compra de 10 y n + 1 a las 8, tenemos que cada par de pedidos de venta de compra en la parte alterna se combina y ejecuta, pero ninguno de los pedidos 2N iniciales esejecutado, y por lo tanto volumen (σ) = n.Ahora cambiamos la primera orden de compra para tener ∆ = +1. Después de las primeras órdenes 2n todavía no hay ejecuciones;Sin embargo, los libros son diferentes. Ahora hay N + 1 órdenes de venta a las 10, n Comprar pedidos a las 9 y una pedido de compra a las 8. Ahora, cada orden en la secuencia alterna se ejecuta con una de las órdenes anteriores y tenemos volumen (σ) = 2n. El siguiente teorema muestra que los resultados de estabilidad basados en la propagación de la Sección 5.1 no se mantienen también en el modelo relativo. Antes de proporcionar la prueba, damos su intuición. Al principio, el libro de venta contiene solo dos precios que están muy separados y ambos contienen solo dos pedidos, ahora llegan varias órdenes de compra, a la secuencia original no se están ejecutando, mientras que en la secuencia modificada se ejecutarán y dejan la venta de la ventaReserve solo con los pedidos al alto precio. Ahora, llegarán muchas órdenes de venta seguidas de muchas órdenes de compra, de modo que en la secuencia original se ejecutarán solo al precio bajo y en la secuencia modificada que ejecutarán al alto precio. Teorema 6.2. Para cualquier número positivo sy x, hay secuencia σ tal que s2 (σ) = sy una modificación 1 σ de σ tal que • | cierre (σ)-cierre (σ) |≥ x • | promedio (σ) - promedio (σ) |≥ x • | Lastbid (σ) - Lastbid (σ) |≥ x • | Lastask (σ) - Lastask (σ) |≥ x prueba. Sin pérdida de generalidad, consideremos secuencias en las que todos los precios tienen valor enteros, en cuyo caso el valor más pequeño posible para el segundo diferencial es 1;Proporcionamos la prueba para el caso S2 (σ) = 2, pero el caso S2 (σ) = 1 es similar. Consideramos una secuencia σ de tal manera que después de un período de inicialización no ha habido ejecuciones, el libro de compra tiene 2 pedidos al precio 10, y el libro de venta tiene dos pedidos al precio 12 y 2 pedidos con valor 12+y, donde Y es unentero positivo que será determinado por el análisis. La secuencia original σ es una orden de compra con ∆ = 0, seguido de dos órdenes de compra con ∆ = +1, luego 2y vende órdenes con ∆ = 0, y luego 2y compra órdenes con ∆ = +1. Primero observamos que S2 (σ) = 2, hay 2y ejecuciones, todas al precio 12, la última oferta es 11 y la última solicitud es 12. A continuación, analizamos una secuencia modificada. Cambiamos el primer orden de compra de ∆ = 0 a ∆ = +1. Por lo tanto, las siguientes dos órdenes de compra con ∆ = +1 se ejecutan, y luego tenemos que la oferta es 11 y la solicitud es de 12 + y. Ahora las órdenes de venta de 2Y se acumulan a 12+y, y después de las próximas órdenes de compra de Y, la oferta es de 12+y - 1. Por lo tanto, al final tenemos que Lastbid (σ) = 12 + Y - 1, Lastask (σ) = 12 + y, Close (σ) = 12 + y, y promedio (σ) = y y + 2 (12 +y) + 2 y + 2 (12). Configuración y = x + 2, obtenemos el lema para cada propiedad. Observamos que si bien esta prueba se basó en el hecho de que hay dos órdenes consecutivas en los libros que están lejos (y), podemos proporcionar un ejemplo un poco más complicado en el que todos los pedidos están cerca (como máximo 2 separados), pero sin embargo.Aún así, un cambio da como resultado grandes diferencias.7. Estudios de simulación Los resultados presentados hasta ahora pintan un contraste sorprendente entre los modelos de precios absolutos y relativos: mientras que el modelo absoluto disfruta de una estabilidad demostrablemente fuerte en cualquier secuencia de eventos fijos, existen al menos secuencias específicas que demuestran una gran inestabilidad en el modelo relativo. La naturaleza peor de estos resultados plantea la cuestión de la medida en que tales diferencias podrían ocurrir en los mercados reales. En esta sección proporcionamos evidencia indirecta sobre esta pregunta presentando resultados de simulación que explota una rica fuente de datos de secuencia de orden de límite histórico de mercado real. Al interpretar los precios del pedido límite para llegar como valores absolutos, o al transformarlos en diferencias con la oferta actual y Ask (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo diferentes resultados (volumen negociado, precio promedio, etc..) sería de lo que realmente ocurrió en el mercado. Estas simulaciones proporcionan una contraparte empírica a la teoría que hemos desarrollado. Hacemos hincapié en que todas esas simulaciones interpretan que los datos históricos reales caen en el modelo absoluto o relativo, y son significativos solo dentro de los límites de dicha interpretación. Sin embargo, creemos que proporcionan una visión empírica valiosa sobre las propiedades de estabilidad potencial (in) de los mercados de orden de límite de capital moderno, y demuestran que las creencias o esperanzas en la estabilidad se basan en gran medida en una interpretación modelo absoluta. También investigamos el comportamiento empírico de las mezclas de precios absolutos y relativos.7.1 Datos Los datos históricos utilizados en nuestras simulaciones están disponibles comercialmente los datos de pedidos límite de INET, el intercambio electrónico mencionado anteriormente para las acciones de NASDAQ. En términos generales, estos datos consisten en prácticamente todos los eventos en INET con respecto al comercio de una orden de límite de llegada individual al estockevery (precio, volumen y número de identificación de secuencia), cada ejecución y cada cancelación de una orden permanente, todo imperdible en milisegundos. Son los datos suficientes para recrear el Libro de pedidos INET preciso en un stock determinado en un día y hora determinados. Reportaremos propiedades de estabilidad para tres acciones: Amazon, Nvidia y Qualcomm (identificadas en la secuela de sus tickers, AMZN, NVDA y QCOM). Estos tres proporcionan una gama de liquididades (con QCOM que tiene la mayor y la menor liquidez de NVDA en INET) y otras propiedades comerciales. Observamos que los resultados cualitativos de nuestras simulaciones fueron similares para varias otras acciones que examinamos.127 7.2 Metodología para nuestras simulaciones Empleamos el código de reconstrucción de libros de pedidos que operan en los datos sin procesar subyacentes. El formato básico de cada experimento fue el siguiente: 1. Ejecute el código de reconstrucción del libro de pedidos en los datos INET originales y calcule la cantidad de interés (volumen negociado, precio promedio, etc.) 2. Haga una pequeña modificación a un solo orden y recomputa el valor resultante de la cantidad de interés. En el caso del modelo absoluto, el paso 2 es tan simple como modificar el orden en los datos originales y volver a ejecutar la reconstrucción del libro de pedidos. Para el modelo relativo, primero debemos preprocesar los datos sin procesar y convertir sus precios en valores relativos, luego hacer la modificación y volver a ejecutar la reconstrucción del libro de pedidos en los valores relativos. El tipo de modificación que examinamos fue extremadamente pequeño en comparación con el volumen de pedidos colocados en estas acciones: a saber, la eliminación de un solo orden elegido al azar de la secuencia. Aunque una eliminación no es 1 modificación, su distancia de edición es 1 y podemos aplicar el teorema 5.4. Para cada día de negociación examinado, esta orden eliminada única se seleccionó entre las que llegaron entre las 10 a.m. y las 3 p.m., y las cantidades de interés se midieron y compararon a las 3 pm. Estos tiempos fueron elegidos para incluir la parte más concurrida del día de negociación, pero evite la media hora alrededor de la apertura y el cierre del mercado oficial de Nasdaq (9:30 a.m. y 3:30 p.m. respectivamente), que se sabe que tienen una dinámica diferente a laporción central del día. Ejecutamos las simulaciones de modelo absoluto y relativo tanto en los datos de INET sin procesar como en una versión limpia de estos datos. En la limpieza, eliminamos todos los pedidos límite que se cancelaron en el mercado real antes de su ejecución (junto con las cancelaciones en sí). La razón es que tales cancelaciones a menudo pueden ser el primer paso en el reposicionamiento de los pedidos, es decir, cancelaciones de la orden que siguen la presentación de un pedido de reemplazo a un precio diferente. No eliminar pedidos cancelados permite la posibilidad de simulaciones modificadas en las que el mismo pedido 1 se ejecuta dos veces, lo que puede ampliar los efectos de inestabilidad. Una vez más, está claro que ni los datos RAW ni los limpiados pueden reflejar perfectamente lo que habría sucedido bajo los pedidos eliminados en el mercado real. Sin embargo, los resultados tanto de los datos sin procesar como de los datos limpios son cualitativamente similares. Los resultados difieren principalmente, como se esperaba, en el volumen ejecutado, donde los resultados de inestabilidad para el modelo relativo son mucho más dramáticos en los datos sin procesar.7.3 Resultados Comenzamos con estadísticas resumidas que capturan nuestros hallazgos generales de estabilidad. Cada fila de las tablas a continuación contiene un ticker (p. AMZN) seguido de -r (para los datos no aclejados o sin aclazamiento) o -C (para los datos con pedidos cancelados eliminados). Para cada uno de los aproximadamente 250 días de negociación en 2003, se ejecutaron 1000 ensayos en los que se eliminó un orden seleccionado al azar de la secuencia del evento INET. Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última oferta), mostramos tanto para el absoluto como el 1 aquí lo mismo está en cotizaciones, ya que los dos pedidos realmente tendrán diferentes números de identificación de secuencia, que es lo que hace que tales talesReposicionamiento de actividad imposible de detectar de manera confiable en los datos.Modelo relativo El cambio porcentual promedio en la cantidad inducida por la eliminación. Los resultados confirman sorprendentemente las conclusiones cualitativas de la teoría que hemos desarrollado. En prácticamente todos los casos (stock, datos crudos o limpios y cantidad), el cambio porcentual inducido por una sola eliminación en el modelo relativo es muchos órdenes de magnitud mayores que en el modelo absoluto, y muestra que los efectos de mariposa pueden ocurrir en un relativomercado modelo. Como solo un ejemplo representativo específico, observe que para QCOM en los datos limpios, el efecto del modelo relativo de una sola eliminación en el precio de cierre es superior a un punto porcentual completo. Esta es una variedad de impacto del mercado completamente separado del tipo más tradicional y esperado generado al comerciar un gran volumen de acciones. Fecha de acción Volumen Promedio Promedio Rel Abs Rel ABS ABS AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05% 0.17% 0.0003% NVDA-C 2003 0.73%0.09% 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005 Fecha de acción Cierre Lastbid REL REL ABS ABS ABSN-R 2003 0.78% 0.0001% 0.78% 0.0007%AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002% 1.18% 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% Qcom-C 2003 1.05% 0.0006% 1.05% 0.06% En la Figura 4 Examinamos cómo el cambio a una de las cantidades, el precio de ejecución promedio, crece con la introducción de mayores perturbaciones de la secuencia de eventos en los dos modelos. En lugar de eliminar solo un pedido entre las 10 a.m. y las 3 pm, en estos experimentos se realizó un número creciente de deleciones elegidas al azar, y el cambio porcentual al precio promedio medido. Según lo sugerido por la teoría, hemos desarrollado, para el modelo absoluto, el cambio al precio promedio crece linealmente con el número de deleciones y sigue siendo muy pequeña (tenga en cuenta las escalas muy diferentes del eje y en los paneles para los modelos absolutos y relativosen la figura). Para el modelo relativo, es interesante observar que si bien los pequeños números de cambios tienen grandes efectos (a menudo causan cambios de precio de ejecución promedio en más de 0.1 por ciento), los efectos de grandes números de cambios nivelan de manera rápida y consistente. Concluimos con un examen de experimentos con un modelo de mezcla. Incluso si uno acepta un mundo en el que los comerciantes se comportan de manera absoluta o relativa, es probable que afirme que el mercado contiene una mezcla de ambos. Por lo tanto, ejecutamos simulaciones en las que cada orden de llegada en las corrientes de eventos INET se trató como un precio absoluto con probabilidad α, y como un precio relativo con probabilidad 1 -α. Los resultados representativos para el precio de ejecución promedio en este modelo de mezcla se muestran en la Figura 5 para AMZN y NVDA. Quizás como se esperaba, vemos una disminución monotónica en el cambio porcentual (inestabilidad) a medida que aumenta la fracción de los comerciantes absolutos, y la mayor parte de la reducción ya se realiza por la introducción de solo una pequeña población de comerciantes absolutos. Por lo tanto, incluso en un mundo en gran medida relativo, un 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 Qcom-R de junio de 2004: Número absoluto de cambios promedio de precio 0 10 20 30 40 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 5060 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM-R Junio de 2004: Número relativo de cambios promedio PRICE Figura 4: Cambio porcentual al precio de ejecución promedio (eje Y) en función del número de deleciones a la secuencia de la secuencia(eje x). El panel izquierdo es para el modelo absoluto, el panel derecho para el modelo relativo, y cada curva corresponde a un solo día de negociación de QCOM en junio de 2004. Las curvas representan promedios de más de 1000 ensayos.La pequeña minoría de comerciantes absolutos puede tener un efecto muy estabilizador. Se encuentra un comportamiento similar para el precio de cierre y la última oferta.0 0.1 0.2 0.3 0.4 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN - RBURARIO 2004 α promedio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA - R -R Junio 2004 αPrice Figura 5 Figura 5: Cambio porcentual al precio de ejecución promedio (eje Y) versus probabilidad de tratar los pedidos de INET como precios absolutos (eje x). Cada curva corresponde a un solo día de negociación durante un mes de 2004. Las curvas representan promedios de más de 1000 ensayos. Sin embargo, para el volumen ejecutado en el modelo de mezcla, los hallazgos son más curiosos. En la Figura 6, mostramos cómo el cambio porcentual al volumen ejecutado varía con la fracción del comerciante absoluto α, para los datos de NVDA que son crudos y limpios de cancelaciones. Primero vemos que para esta cantidad, a diferencia de los demás, la diferencia inducida por los datos limpios y sin aclaración es realmente dramático, como ya sugirió la tabla de estadísticas resumidas anteriores. Pero lo más intrigante es el hecho de que la estabilidad no está aumentando monotónicamente con α para el mercado de Datathe limpiado o sin aclaración con la máxima inestabilidad no es un mercado de precios relativo puro, sino que ocurre en algún valor distinto de cero para α. De hecho, no era obvio para nosotros que las secuencias con esta propiedad pudieran construirse artificialmente, y mucho menos que ocurrirían como datos reales del mercado. Todavía tenemos que encontrar una explicación satisfactoria para este fenómeno y dejarlo en futuras investigaciones.8. Agradecimientos que agradecemos a Yuriy Nevmyvaka de Lehman Brothers en Nueva York por el uso de su código de reconstrucción de libros de libros de orden de orden inet, y por sus valiosos comentarios sobre el trabajo presentados 0 0.1 0.2 0.3 0.4 0.4 0.5 0.6 0.7 0.7 0.8 0.9 1 0 0.5 1 1 1.5 2 2.5 3 a lopil 33.5 4 NVDA-C Junio 2004 Volumen α 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 6 8 10 12 14 18 NVDA-R Junio de 2004 Volumen α Figura 6: Cambio porcentual al volumen ejecutado (eje Y-eje Y) vs. probabilidad de tratar los pedidos de INET como precios absolutos (eje x). El panel izquierdo es para NVDA utilizando los datos sin procesar que incluyen cancelaciones, mientras que el panel derecho está en los datos limpios. Cada curva corresponde a un solo día de negociación durante junio de 2004. Las curvas representan promedios de más de 1000 ensayos.aquí. Yishay Mansour fue apoyado en parte por el Programa IST de la Comunidad Europea, bajo la Red de Excelencia Pascal, IST-2002-506778, por una subvención de la Israel Science Foundation y un Premio a la Facultad de IBM.9. Referencias [1] D. Bertsimas y A. De sí. Control óptimo de los costos de ejecución. Journal of Financial Markets, 1: 1-50, 1998. [2] B. Biais, L. Glosten y C. Spatt. Microestructura del mercado: una encuesta de microfundaciones, resultados empíricos e implicaciones políticas. Journal of Financial Markets, 8: 217-264, 2005. [3] J.-P.Bouchaud, M. Mezard y M. Potters. Propiedades estadísticas de los libros de pedidos de existencias: resultados y modelos empíricos. Finanzas cuantitativas, 2: 251-256, 2002. [4] C. Cao, O.Hansch y X. Wang. El contenido informativo de un libro de pedidos de límite abierto, 2004. AFA 2005 Reuniones de Filadelfia, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski y M. Aitken. Ejecución comercial óptima de acciones en un mercado de orden límite. En la Conferencia Internacional sobre Inteligencia Computacional para Ingeniería Financiera, páginas 371-378, marzo de 2003. [6] D. Farmer y S. Joshi. La dinámica de los precios de las estrategias comerciales comunes. Journal of Economic Behavior and Organization, 29: 149-171, 2002. [7] J. Hasbrouck. Microestructura del mercado empírico: perspectivas económicas y estadísticas sobre la dinámica del comercio en los mercados de valores, 2004. Notas del curso, Stern School of Business, Universidad de Nueva York.[8] R. Kissell y M. Glantz. Estrategias comerciales óptimas. Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour y L. Ortiz. Algoritmos competitivos para VWAP y limitar el comercio de pedidos. En Actas de la Conferencia ACM sobre Comercio Electrónico, páginas 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng y M. Kearns. Aprendizaje de refuerzo para la ejecución comercial optimizada, 2006. Preimpresión.129",
    "original_sentences": [
        "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
        "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
        "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
        "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
        "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
        "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
        "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
        "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
        "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
        "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
        "The vast majority of equity trading is done via the standard limit order market mechanism.",
        "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
        "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
        "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
        "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
        "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
        "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
        "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
        "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
        "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
        "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
        "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
        "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
        "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
        "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
        "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
        "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
        "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
        "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
        "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
        "How do these two models differ?",
        "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
        "The differences arise when we consider the stability question introduced above.",
        "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
        "For the relative model this intuition is less clear.",
        "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
        "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
        "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
        "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
        "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
        "In contrast, we show that the relative model enjoys no such stability properties.",
        "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
        "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
        "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
        "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
        "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
        "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
        "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
        "The outline of the paper follows.",
        "In Section 2 we briefly review the large literature on market microstructure.",
        "In Section 3 we describe the limit order mechanism and our formal models.",
        "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
        "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
        "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
        "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
        "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
        "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
        "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
        "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
        "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
        "An excellent and comprehensive survey of results in this area can be found in [2].",
        "There is a similarly large body of empirical work on microstructure.",
        "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
        "A good overview of the empirical work can be found in [7].",
        "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
        "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
        "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
        "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
        "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
        "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
        "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
        "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
        "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
        "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
        "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
        "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
        "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
        "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
        "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
        "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
        "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
        "Figure 1: Sample INET order books for MSFT.",
        "How then do orders get (partially) executed?",
        "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
        "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
        "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
        "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
        "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
        "Thus in this example, the 1700 executed shares would be at different prices.",
        "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
        "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
        "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
        "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
        "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
        "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
        "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
        "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
        "Definition 3.1.",
        "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
        "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
        "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
        "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
        "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
        "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
        "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
        "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
        "Definition 3.2.",
        "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
        "For every = ij , j ∈ {1, . . . , k} σ = σ .",
        "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
        "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
        "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
        "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
        "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
        "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
        "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
        "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
        "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
        "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
        "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
        "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
        "Definition 4.1.",
        "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
        "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
        "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
        "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
        "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
        "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
        "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
        "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
        "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
        "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
        "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
        "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
        "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
        "The analysis of an arriving buy order is similar.",
        "Following the arrival of their only differing order, Σ and Σ are identical.",
        "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
        "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
        "We first show that from state ¯ab we remain in S regardless the next order.",
        "The intuition of this lemma is demonstrated in Figure 3.",
        "Lemma 4.3.",
        "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
        "We first provide the analysis for the case of an arriving sell order.",
        "Note that in ¯ab the buy books are identical (B1 = B2).",
        "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
        "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
        "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
        "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
        "For this case we need to take care of several different scenarios.",
        "The first is when the top of both sell books (the ask) is identical.",
        "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
        "We are left to deal with case where ask(A1) and ask(A2) are different.",
        "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
        "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
        "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
        "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
        "Lemma 4.4.",
        "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
        "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
        "The next and final lemma deals with cancellations.",
        "Lemma 4.6.",
        "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
        "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
        "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
        "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
        "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
        "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
        "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
        "We begin with an examination of the executed volume.",
        "Lemma 5.1.",
        "Let Σ be any sequence and Σ be any 1modification of Σ.",
        "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
        "Proof.",
        "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
        "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
        "Corollary 5.2.",
        "Let Σ be any sequence and Σ be any kmodification of Σ.",
        "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
        "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
        "Lemma 5.3.",
        "Let Σ be any sequence and let Σ be any kextension of Σ.",
        "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
        "This lemma is the key to obtain our main absolute model volume result below.",
        "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
        "Theorem 5.4.",
        "Let Σ and Σ be any absolute model order sequences.",
        "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
        "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
        "Proof.",
        "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
        "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
        "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
        "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
        "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
        "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
        "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
        "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
        "Proof.",
        "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
        "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
        "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
        "Similar instability results can be shown to hold for the other price-based quantities.",
        "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
        "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
        "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
        "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
        "Theorem 5.6.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
        "Proof.",
        "We provide the proof for the last bid; the proof for the last ask is similar.",
        "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
        "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
        "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
        "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
        "Now it remains to bound bid(Σ).",
        "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
        "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
        "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
        "First suppose that the books containing the additional orders are the original sequence Σ.",
        "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
        "Now assume that the books with the additional orders are for the modified sequence Σ .",
        "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
        "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
        "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
        "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
        "Lemma 5.7.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "Then the spread of Σ is bounded by s2(Σ).",
        "Proof.",
        "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
        "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
        "We are now ready to state a stability result for the average execution price in the absolute model.",
        "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
        "Theorem 5.8.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
        "Proof.",
        "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
        "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
        "Without loss of generality we assume that the sequence with the additional orders is Σ.",
        "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
        "Suppose that it involves a; there are two possibilities.",
        "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
        "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
        "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
        "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
        "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
        "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
        "We next give a stability result for the closing price.",
        "We first provide a technical lemma regarding the prices of consecutive executions.",
        "Lemma 5.9.",
        "Let Σ be any sequence.",
        "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
        "Proof.",
        "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
        "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
        "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
        "Let Σ be any sequence and let Σ be a 1modification of Σ.",
        "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
        "We first deal with case where the last execution occurs in both sequences simultaneously.",
        "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
        "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
        "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
        "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
        "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
        "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
        "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
        "We use sk(Σ) to denote the k-spread.",
        "As before, we assume that the k-spread is always defined after an initialization period.",
        "We first state the following generalization of Lemma 5.7.",
        "Lemma 5.11.",
        "Let Σ be a sequence and let Σ be any 1modification of Σ.",
        "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
        "The proof is similar to the proof of Lemma 5.7 and omitted.",
        "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
        "Then we have s2(Σ ) ≤ s +2(Σ).",
        "Now using the above lemma and by simple induction we can obtain the following theorem.",
        "Theorem 5.12.",
        "Let Σ be a sequence and let Σ be any k-modification of Σ.",
        "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
        "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
        "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
        "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
        "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
        "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
        "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
        "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
        "Theorem 6.1.",
        "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
        "Proof.",
        "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
        "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
        "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
        "After the first 2n orders there are still no executions; however, the books are different.",
        "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
        "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
        "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
        "Before providing the proof, we give its intuition.",
        "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
        "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
        "Theorem 6.2.",
        "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
        "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
        "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
        "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
        "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
        "Next we analyze a modified sequence.",
        "We change the first buy order from ∆ = 0 to ∆ = +1.",
        "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
        "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
        "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
        "Setting y = x + 2, we obtain the lemma for every property.",
        "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
        "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
        "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
        "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
        "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
        "These simulations provide an empirical counterpart to the theory we have developed.",
        "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
        "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
        "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
        "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
        "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
        "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
        "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
        "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
        "The basic format of each experiment was the following: 1.",
        "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
        "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
        "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
        "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
        "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
        "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
        "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
        "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
        "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
        "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
        "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
        "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
        "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
        "However, the results both from the raw data and the clean data are qualitatively similar.",
        "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
        "Each row of the tables below contains a ticker (e.g.",
        "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
        "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
        "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
        "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
        "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
        "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
        "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
        "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
        "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
        "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
        "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
        "We conclude with an examination of experiments with a mixture model.",
        "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
        "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
        "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
        "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
        "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
        "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
        "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
        "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
        "Each curve corresponds to a single day of trading during a month of 2004.",
        "Curves represent averages over 1000 trials.",
        "For the executed volume in the mixture model, however, the findings are more curious.",
        "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
        "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
        "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
        "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
        "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
        "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
        "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
        "Each curve corresponds to a single day of trading during June 2004.",
        "Curves represent averages over 1000 trials. here.",
        "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
        "REFERENCES [1] D. Bertsimas and A.",
        "Lo.",
        "Optimal control of execution costs.",
        "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
        "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
        "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
        "Statistical properties of stock order books: empirical results and models.",
        "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
        "The informational content of an open limit order book, 2004.",
        "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
        "Optimal trade execution of equities in a limit order market.",
        "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
        "The price dynamics of common trading strategies.",
        "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
        "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
        "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
        "Optimal Trading Strategies.",
        "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
        "Competitive algorithms for VWAP and limit order trading.",
        "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
        "Reinforcement learning for optimized trade execution, 2006.",
        "Preprint. 129"
    ],
    "error_count": 0,
    "keys": {
        "standard continuous limit-order mechanism": {
            "translated_key": "Mecanismo estándar de orden límite continuo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the <br>standard continuous limit-order mechanism</br> that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "(In) Propiedades de estabilidad de la dinámica de orden límite Eyal Even-dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § Resumen Estudiamos las propiedades de estabilidad de la dinámica del \"mecanismo de orden limitoso continuo estándar\" que se usa en la equidad modernamercados."
            ],
            "translated_text": "",
            "candidates": [
                "Mecanismo estándar de orden límite continuo",
                "mecanismo de orden limitoso continuo estándar"
            ],
            "error": []
        },
        "modern equity market": {
            "translated_key": "mercado de valores moderno",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in <br>modern equity market</br>s.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of <br>modern equity market</br>s.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "(In) Propiedades de estabilidad de la dinámica de orden límite Eyal Even-dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § Resumen Estudiamos las propiedades de estabilidad de la dinámica del mecanismo de orden limítico continuo que se utiliza en el \"mercado de la equidad moderna\"s.",
                "Introducción En los últimos años ha habido un aumento explosivo en la automatización del \"mercado de capital moderno\"."
            ],
            "translated_text": "",
            "candidates": [
                "mercado de renta variable moderna",
                "mercado de la equidad moderna",
                "mercado de renta variable moderna",
                "mercado de capital moderno"
            ],
            "error": []
        },
        "absolute trader model": {
            "translated_key": "modelo de comerciante absoluto",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the <br>absolute trader model</br> enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Probamos que si bien el \"modelo de comerciante absoluto\" disfruta de propiedades de estabilidad probablemente fuertes, el modelo de comerciante relativo es vulnerable a una gran inestabilidad."
            ],
            "translated_text": "",
            "candidates": [
                "modelo de comerciante absoluto",
                "modelo de comerciante absoluto"
            ],
            "error": []
        },
        "relative trader model": {
            "translated_key": "modelo de comerciante relativo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the <br>relative trader model</br> is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Probamos que si bien el modelo de comerciante absoluto disfruta de propiedades de estabilidad probablemente fuertes, el \"modelo de comerciante relativo\" es vulnerable a una gran inestabilidad."
            ],
            "translated_text": "",
            "candidates": [
                "modelo de comerciante relativo",
                "modelo de comerciante relativo"
            ],
            "error": []
        },
        "electronic communication network": {
            "translated_key": "red de comunicación electrónica",
            "is_in_text": false,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        },
        "market microstructure": {
            "translated_key": "microestructura del mercado",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that <br>market microstructure</br>, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on <br>market microstructure</br>.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, <br>market microstructure</br> is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining <br>market microstructure</br> topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "<br>market microstructure</br>: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical <br>market microstructure</br>: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Es justo decir que la \"microestructura del mercado\", como se conoce esta área, es un tema que mide un gran interés tanto en los mercados reales como en la literatura financiera académica.",
                "En la Sección 2 revisamos brevemente la gran literatura sobre \"Microestructura del mercado\".",
                "El trabajo relacionado como se mencionó en la introducción, la \"microestructura del mercado\" es un tema importante y oportuno tanto en finanzas académicas como en Wall Street, y en consecuencia tiene una literatura reciente grande y variada.",
                "También hay un pequeño pero creciente número de trabajos que examinan temas de \"microestructura del mercado\" desde una perspectiva de informática, incluidos algunos centrados en el uso de microestructura en algoritmos para la ejecución comercial optimizada.",
                "\"Microestructura del mercado\": una encuesta de microfundaciones, resultados empíricos e implicaciones de políticas.",
                "\"Microestructura de mercado\" empírica: perspectivas económicas y estadísticas sobre la dinámica del comercio de los mercados de valores, 2004."
            ],
            "translated_text": "",
            "candidates": [
                "microestructura del mercado",
                "microestructura del mercado",
                "microestructura del mercado",
                "Microestructura del mercado",
                "microestructura del mercado",
                "microestructura del mercado",
                "microestructura del mercado",
                "microestructura del mercado",
                "microestructura del mercado",
                "Microestructura del mercado",
                "Microestructura del mercado",
                "Microestructura de mercado"
            ],
            "error": []
        },
        "high-frequency microstructure signal": {
            "translated_key": "señal de microestructura de alta frecuencia",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from <br>high-frequency microstructure signal</br>s.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Las oportunidades y las necesidades abarcan el rango desde la ejecución optimizada de grandes oficios hasta la creación de estrategias propietarias independientes que intentan beneficiarse de la \"señal de microestructura de alta frecuencia\" s."
            ],
            "translated_text": "",
            "candidates": [
                "señal de microestructura de alta frecuencia",
                "señal de microestructura de alta frecuencia"
            ],
            "error": []
        },
        "relative price model": {
            "translated_key": "modelo de precio relativo",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the <br>relative price model</br>, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The <br>relative price model</br> can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En contraste, en el \"modelo de precios relativos\", los comerciantes expresan sus precios de pedido límite en relación con el mejor precio ofrecido en su libro respectivo (compra o venta).",
                "El \"modelo de precio relativo\" puede verse como comerciantes de modelado que, además de incorporar información externa fundamental sobre las acciones, también pueden posicionar sus pedidos estratégicamente en relación con las otras órdenes de su lado del libro."
            ],
            "translated_text": "",
            "candidates": [
                "modelo de precio relativo",
                "modelo de precios relativos",
                "modelo de precio relativo",
                "modelo de precio relativo"
            ],
            "error": []
        },
        "modern execution optimization": {
            "translated_key": "Optimización de ejecución moderna",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of <br>modern execution optimization</br> [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "En términos más generales, toda el área de \"optimización de ejecución moderna\" [9, 10, 8] ha llegado a depender en gran medida del cuidadoso posicionamiento de las órdenes límite en relación con el estado de la Libro de pedidos actual."
            ],
            "translated_text": "",
            "candidates": [
                "Optimización de ejecución moderna",
                "optimización de ejecución moderna"
            ],
            "error": []
        },
        "bid": {
            "translated_key": "oferta",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current <br>bid</br> and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the <br>bid</br> and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current <br>bid</br> pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current <br>bid</br>.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current <br>bid</br> and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current <br>bid</br>, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the <br>bid</br>).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The <br>bid</br> and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the <br>bid</br>, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new <br>bid</br> of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and <br>bid</br>(B) + vi if ti is buy, where by ask(X) and <br>bid</br>(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): <br>bid</br> at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the <br>bid</br> is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the <br>bid</br>, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the <br>bid</br>-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last <br>bid</br>; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the <br>bid</br> is identical.",
                "Let <br>bid</br>(X), sb(X), ask(X), be the <br>bid</br>, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus <br>bid</br>(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ <br>bid</br>(Σ ).",
                "Now it remains to bound <br>bid</br>(Σ).",
                "Here we use the fact that the <br>bid</br> of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since <br>bid</br>(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ <br>bid</br>(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the <br>bid</br> is not the additional order we are done, otherwise we have the following: <br>bid</br>(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have <br>bid</br>(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ <br>bid</br>(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that <br>bid</br>(Σ) ≤ <br>bid</br>(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the <br>bid</br> and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the <br>bid</br> in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current <br>bid</br> and above by the current ask.",
                "Now after this execution the <br>bid</br> is at least the second highest buy order at time t, if the former <br>bid</br> was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second <br>bid</br> at time t and at most the second ask at time t, which is at most s2(Σ) away from the <br>bid</br>/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the <br>bid</br> of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current <br>bid</br> and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last <br>bid</br>, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and <br>bid</br> are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the <br>bid</br> is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last <br>bid</br> is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the <br>bid</br> is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the <br>bid</br> is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current <br>bid</br> and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last <br>bid</br>), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last <br>bid</br>. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Mostramos que la respuesta depende en gran medida de si el mercado consta de comerciantes absolutos (que determinan sus precios independientemente del estado de la Libro de pedidos actual) o los comerciantes relativos (que determinan sus precios en relación con la \"oferta\" actual y solicitan).",
                "Si bien los comerciantes siempre han podido ver los precios en la parte superior de los libros de compra y venta (conocido como la \"oferta\" y solicitar), un desarrollo relativamente reciente en ciertos intercambios es la revelación en tiempo real de todo el libro de pedidos, el Libro de pedidos, elDistribución completa de pedidos, precios y volúmenes en ambos lados del intercambio.",
                "Por lo tanto, un comprador codificaría el precio de su pedido límite como un desplazamiento ∆ (que puede ser positivo, negativo o cero) de la actual \"oferta\" Pb, que luego se traduce al precio límite Pb +∆.",
                "Un ejemplo común de dicho comportamiento estratégico se conoce como pene-salto en Wall Street, en el que un comerciante que tiene interesado en comprar acciones rápidamente, pero aún con un descuento para realizar un pedido de mercado, posicionará deliberadamente su pedido justo por encima del actual actual.\"licitación\".",
                "Tenga en cuenta que dicho posicionamiento puede depender de características más complejas de los libros de pedidos que solo la \"oferta\" actual y pregunta, pero el modelo relativo es un punto de partida natural y simplificado.",
                "Parece posible que una pequeña perturbación pueda (por ejemplo) modificar ligeramente la \"oferta\" actual, que a su vez podría modificar ligeramente el precio del siguiente orden de llegada, que luego podría modificar ligeramente el precio del orden posterior, y así sucesivamente,conduciendo a una secuencia amplificadora de eventos.",
                "Podemos elegir enviar una orden de límite con esta especificación, y nuestro pedido se realizará en una cola llamada Buy Order Libro, que está ordenado por Price, con el precio de compra sin necesidad de más ofrecido en la parte superior (a menudo denominado \"licitación\").",
                "Los precios de \"oferta\" y solicitar los precios a veces se denominan el mercado interno, y la diferencia entre ellos como el diferencial.",
                "Si una orden de límite de compra (vender, respectivamente) aparece por encima del precio solicitado (por debajo del \"oferta\", respectivamente), entonces el pedido coincide con los pedidos en los libros opuestos hasta que se llene el volumen de pedidos entrantes, o no hay más coincidencia.es posible, en cuyo caso el volumen entrante restante se coloca en los libros.",
                "Las 300 acciones restantes de la orden de compra entrante se convertirían en la nueva \"oferta\" del libro de compra a $ 24.08.",
                "",
                "Todas estas son cantidades estándar de interés común en los mercados financieros.• Volumen (σ): número de acciones ejecutadas (negociadas) en la secuencia σ.• Promedio (σ): precio de ejecución promedio.• Cerrar (σ): precio de la última ejecución (cierre).• Lastbid (σ): \"Bid\" al final de la secuencia.• Lastask (σ): pregunte al final de la secuencia.4.",
                "Para el primer caso, los libros de compra siguen siendo idénticos (la \"oferta\" se ejecuta en ambos) y los libros de venta permanecen sin cambios.",
                "Esta orden de venta inicial nunca se ejecutará, y ahora todas las ejecuciones tienen lugar en la \"oferta\", que siempre es p + x.",
                "Esto motiva la introducción de una cantidad que llamamos el segundo diferencial de los libros de pedidos, que se define como la diferencia entre los precios del segundo pedido en el libro de venta y el segundo pedido en el libro de compra (en oposición a la \"oferta\"-La diferencia de trabajo, que comúnmente se llama la propagación).",
                "Proporcionamos la prueba de la última \"oferta\";La prueba de la última solicitud es similar.",
                "La prueba se basa en el teorema 4.1 y considera a los estados en el conjunto estable S. para los estados AB y ¯ab, tenemos que la \"oferta\" es idéntica.",
                "Deje que \"oferta\" (x), sb (x), pregunte (x), sea la \"oferta\", la segunda orden de compra más alta, y la solicitud de una secuencia X.",
                "Así \"Bid\" (σ)+S2 (σ) ≥ Sb (σ)+S2 (σ) ≥ Ask (σ) = Ask (σ) ≥ \"Bid\" (σ).",
                "Ahora sigue siendo para vincular \"BID\" (σ).",
                "Aquí usamos el hecho de que la \"oferta\" de la secuencia modificada es al menos la segunda orden de compra más alta en la secuencia original, debido al hecho de que los libros son diferentes solo en un orden.",
                "Desde \"bid\" (σ) ≥ sb (σ) ≥ ask (σ) - s2 (σ) ≥ \"bid\" (σ) - s2 (σ) Tenemos esa oferta (σ) - bid (σ) |≤ S2 (σ) Como se desea.",
                "Ahora, si la \"oferta\" no es el orden adicional, se realizamos, de lo contrario tenemos lo siguiente: \"Bid\" (σ) ≤ Ask (σ) ≤ Sb (σ) + S2 (σ) = BID (σ) + S2 (Σ), donde Sb (σ) ≤ Bid (σ) ya que el libro de compra original tiene solo un pedido adicional.",
                "Tenemos \"Bid\" (σ) + S2 (σ) ≥ Ask (σ) ≥ Ask (σ) ≥ \"Bid\" (σ), donde utilizamos el hecho de que preguntar (σ) ≥ ask (σ) ya que la secuencia modificadatiene un pedido adicional.",
                "Del mismo modo, tenemos esa \"oferta\" (σ) ≤ \"oferta\" (σ) ya que el libro de compra modificado contiene un pedido adicional.",
                "Observamos que la prueba del teorema 5.6 en realidad establece que la \"oferta\" y solicitar las secuencias originales y modificadas se encuentran dentro de S2 (σ) en todo momento.",
                "Por lo tanto, la segunda orden de compra más alta en la secuencia original siempre es como máximo la \"oferta\" en la secuencia modificada, y el segundo orden de venta más bajo en la secuencia original siempre es al menos la solicitud de la secuencia modificada.",
                "Supongamos que la primera ejecución se toma en el tiempo t;Su precio está limitado a continuación por la \"oferta\" actual y arriba por la solicitud actual.",
                "Ahora, después de esta ejecución, la \"oferta\" es al menos la segunda orden de compra más alta en el momento T, si se ejecutó la \"oferta\" anterior y no llegaron órdenes de compra más altas, y más alto.",
                "Del mismo modo, la solicitud es como máximo la segunda orden de venta más baja en el momento t.Por lo tanto, el siguiente precio de ejecución es al menos la segunda \"oferta\" en el momento t y, como máximo, la segunda solicitud en el momento t, que está como máximo S2 (σ) lejos de la \"oferta\"/preguntar en el momento t.Lema 5.10.",
                "Por el Teorema 5.6, tanto el solicitado como la \"oferta\" de σ y σ están como máximo S2 (σ) en cada tiempo t.Dado que el precio de la última ejecución es sus solicitantes (ofertas) en el momento en que terminamos.",
                "Por lo tanto, si un comerciante quiere que su orden de compra se ejecute rápidamente, puede colocarla por encima de la \"oferta\" actual y ser la primera en la cola;Si el comerciante es paciente y cree que la tendencia de los precios será a la baja, ella realizará pedidos más profundos en el libro de compra, y así sucesivamente.",
                "Mientras que en las secciones anteriores mostramos resultados de estabilidad para el modelo absoluto, aquí proporcionamos ejemplos simples que muestran inestabilidad en el modelo relativo para el volumen ejecutado, la última \"oferta\", la última pregunta, el precio de ejecución promedio y el último precio de ejecución.",
                "En el modelo relativo, suponemos que para cada secuencia, la solicitud y la \"oferta\" siempre se definen, por lo que los libros tienen una configuración inicial no vacía.126 Comenzamos mostrando que en el modelo relativo, incluso una sola modificación puede duplicar el número de acciones ejecutadas.",
                "Para la concreción, suponemos que al principio la pregunta es 10 y la \"oferta\" es 8.",
                "Primero observamos que S2 (σ) = 2, hay 2y ejecuciones, todas al precio 12, la última \"oferta\" es 11 y la última solicitud es 12.",
                "Por lo tanto, las siguientes dos órdenes de compra con ∆ = +1 se ejecutan, y luego tenemos que la \"oferta\" es 11 y la solicitud es de 12 + y.",
                "Ahora las órdenes de venta de 2Y se acumulan a 12+y, y después de las próximas órdenes de compra de Y, la \"oferta\" es de 12+y - 1.",
                "Al interpretar los precios del pedido límite para llegar como valores absolutos, o al transformarlos en diferencias con la \"oferta\" actual y preguntar (modelo relativo), podemos realizar pequeñas modificaciones en las secuencias y examinar cómo diferentes resultados (precio negociado, precio promedio, etc.) sería de lo que realmente ocurrió en el mercado.",
                "Para cada cantidad de interés (volumen ejecutado, precio promedio, precio de cierre y última \"oferta\"), mostramos tanto para el absoluto como el 1 aquí lo mismo está en cotizaciones ya que los dos pedidos tendrán diferentes números de identificación de secuencia, que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo que es lo quehace que dicha actividad de reposicionamiento sea imposible de detectar de manera confiable en los datos.Modelo relativo El cambio porcentual promedio en la cantidad inducida por la eliminación.",
                "Se encuentra un comportamiento similar para el precio de cierre y la última \"oferta\".0 0.1 0.2 0.3 0.4 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN - RBURARIO 2004 α promedio promedio 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA - R -R Junio 2004 αPrice Figura 5 Figura 5: Cambio porcentual al precio de ejecución promedio (eje Y) versus probabilidad de tratar los pedidos de INET como precios absolutos (eje x)."
            ],
            "translated_text": "",
            "candidates": [
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "licitación",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "licitación",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "",
                "oferta",
                " oferta ",
                "Oferta",
                "Bid",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "Bid",
                "oferta",
                "oferta",
                "licitación",
                "Bid",
                "Bid",
                "licitación",
                "BID",
                "licitación",
                "oferta",
                "licitación",
                "bid",
                "bid",
                "licitación",
                "oferta",
                "Bid",
                "licitación",
                "Bid",
                "Bid",
                "licitación",
                "oferta",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "oferta",
                "licitación",
                "oferta",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "BID",
                "oferta",
                "BID",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta",
                "licitación",
                "oferta"
            ],
            "error": []
        },
        "quantitative trading strategies": {
            "translated_key": "Estrategias comerciales cuantitativas",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of <br>quantitative trading strategies</br> (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Además de que la estabilidad sea de interés fundamental en cualquier sistema dinámico importante, creemos que los resultados descritos aquí proporcionan alimentos para pensar sobre los temas del impacto del mercado y la toma de respaldo de las \"estrategias comerciales cuantitativas\" (el intento de determinar el rendimiento pasado hipotético utilizando histórico históricodatos)."
            ],
            "translated_text": "",
            "candidates": [
                "Estrategias comerciales cuantitativas",
                "estrategias comerciales cuantitativas"
            ],
            "error": []
        },
        "penny-jumping": {
            "translated_key": "penny-jumping",
            "is_in_text": true,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as <br>penny-jumping</br> on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as <br>penny-jumping</br> would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [
                "Un ejemplo común de dicho comportamiento estratégico se conoce como \"salto de centavo\" en Wall Street, en el que un comerciante que tiene interesado en comprar acciones rápidamente, pero aún con un descuento para realizar una orden de mercado, posicionará deliberadamente su pedido justo por encima dela oferta actual.",
                "Nuestros resultados y el hecho de que en los mercados reales hay una gran y creciente cantidad de comportamiento relativo, como el \"cañón de centavo\" parecerían dudas sobre tales creencias."
            ],
            "translated_text": "",
            "candidates": [
                "penny-saltre",
                "salto de centavo",
                "penny-saltre",
                "cañón de centavo"
            ],
            "error": []
        },
        "computational finance": {
            "translated_key": "finanzas computacionales",
            "is_in_text": false,
            "original_annotated_sentences": [
                "(In)Stability Properties of Limit Order Dynamics Eyal Even-Dar ∗ Sham M. Kakade † Michael Kearns ‡ Yishay Mansour § ABSTRACT We study the stability properties of the dynamics of the standard continuous limit-order mechanism that is used in modern equity markets.",
                "We ask whether such mechanisms are susceptible to butterfly effects - the infliction of large changes on common measures of market activity by only small perturbations of the order sequence.",
                "We show that the answer depends strongly on whether the market consists of absolute traders (who determine their prices independent of the current order book state) or relative traders (who determine their prices relative to the current bid and ask).",
                "We prove that while the absolute trader model enjoys provably strong stability properties, the relative trader model is vulnerable to great instability.",
                "Our theoretical results are supported by large-scale experiments using limit order data from INET, a large electronic exchange for NASDAQ stocks.",
                "Categories and Subject Descriptors J.4 [Social and Behavioral Sciences]: Economics General Terms Economics, Theory 1.",
                "INTRODUCTION In recent years there has been an explosive increase in the automation of modern equity markets.",
                "This increase has taken place both in the exchanges, which are increasingly computerized and offer sophisticated interfaces for order placement and management, and in the trading activity itself, which is ever more frequently undertaken by software.",
                "The so-called Electronic Communication Networks (or ECNs) that dominate trading in NASDAQ stocks are a common example of the automation of the exchanges.",
                "On the trading side, computer programs now are entrusted not only with the careful execution of large block trades for clients (sometimes referred to on Wall Street as program trading), but with the autonomous selection of stocks, direction (long or short) and volumes to trade for profit (commonly referred to as statistical arbitrage).",
                "The vast majority of equity trading is done via the standard limit order market mechanism.",
                "In this mechanism, continuous trading takes place via the arrival of limit orders specifying whether the party wishes to buy or sell, the volume desired, and the price offered.",
                "Arriving limit orders that are entirely or partially executable with the best offers on the other side are executed immediately, with any volume not immediately executable being placed in an queue (or book) ordered by price on the appropriate side (buy or sell). (A detailed description of the limit order mechanism is given in Section 3.)",
                "While traders have always been able to view the prices at the top of the buy and sell books (known as the bid and ask), a relatively recent development in certain exchanges is the real-time revelation of the entire order book - the complete distribution of orders, prices and volumes on both sides of the exchange.",
                "With this revelation has come the opportunity - and increasingly, the needfor modeling and exploiting limit order data and dynamics.",
                "It is fair to say that market microstructure, as this area is generally known, is a topic commanding great interest both in the real markets and in the academic finance literature.",
                "The opportunities and needs span the range from the optimized execution of large trades to the creation of stand-alone proprietary strategies that attempt to profit from high-frequency microstructure signals.",
                "In this paper we investigate a previously unexplored but fundamental aspect of limit order microstructure: the stability properties of the dynamics.",
                "Specifically, we are interested in the following natural question: To what extent are simple models of limit order markets either susceptible or immune to butterfly effects - that is, the infliction of large changes in important activity statistics (such as the 120 number of shares traded or the average price per share) by only minor perturbations of the order sequence?",
                "To examine this question, we consider two stylized but natural models of the limit order arrival process.",
                "In the absolute price model, buyers and sellers arrive with limit order prices that are determined independently of the current state of the market (as represented by the order books), though they may depend on all manner of exogenous information or shocks, such as time, news events, announcements from the company whose shares are being traded, private signals or state of the individual traders, etc.",
                "This process models traditional fundamentals-based trading, in which market participants each have some inherent but possibly varying valuation for the good that in turn determines their limit price.",
                "In contrast, in the relative price model, traders express their limit order prices relative to the best price offered in their respective book (buy or sell).",
                "Thus, a buyer would encode their limit order price as an offset ∆ (which may be positive, negative, or zero) from the current bid pb, which is then translated to the limit price pb +∆.",
                "Again, in addition to now depending on the state of the order books, prices may also depend on all manner of exogenous information.",
                "The relative price model can be viewed as modeling traders who, in addition to perhaps incorporating fundamental external information on the stock, may also position their orders strategically relative to the other orders on their side of the book.",
                "A common example of such strategic behavior is known as penny-jumping on Wall Street, in which a trader who has in interest in buying shares quickly, but still at a discount to placing a market order, will deliberately position their order just above the current bid.",
                "More generally, the entire area of modern execution optimization [9, 10, 8] has come to rely heavily on the careful positioning of limit orders relative to the current order book state.",
                "Note that such positioning may depend on more complex features of the order books than just the current bid and ask, but the relative model is a natural and simplified starting point.",
                "We remark that an alternate view of the two models is that all traders behave in a relative manner, but with absolute traders able to act only on a considerably slower time scale than the faster relative traders.",
                "How do these two models differ?",
                "Clearly, given any fixed sequence of arriving limit order prices, we can choose to express these prices either as their original (absolute) values, or we can run the order book dynamical process and transform each order into a relative difference with the top of its book, and obtain identical results.",
                "The differences arise when we consider the stability question introduced above.",
                "Intuitively, in the absolute model a small perturbation in the arriving limit price sequence should have limited (but still some) effects on the subsequent evolution of the order books, since prices are determined independently.",
                "For the relative model this intuition is less clear.",
                "It seems possible that a small perturbation could (for example) slightly modify the current bid, which in turn could slightly modify the price of the next arriving order, which could then slightly modify the price of the subsequent order, and so on, leading to an amplifying sequence of events.",
                "Our main results demonstrate that these two models do indeed have dramatically different stability properties.",
                "We first show that for any fixed sequence of prices in the absolute model, the modification of a single order has a bounded and extremely limited impact on the subsequent evolution of the books.",
                "In particular, we define a natural notion of distance between order books and show that small modifications can result in only constant distance to the original books for all subsequent time steps.",
                "We then show that this implies that for almost any standard statistic of market activity - the executed volume, the average price execution price, and many others - the statistic can be influenced only infinitesimally by small perturbations.",
                "In contrast, we show that the relative model enjoys no such stability properties.",
                "After giving specific (worst-case) relative price sequences in which small perturbations generate large changes in basic statistics (for example, altering the number of shares traded by a factor of two), we proceed to demonstrate that the difference in stability properties of the two models is more than merely theoretical.",
                "Using extensive INET (a major ECN for NASDAQ stocks) limit order data and order book reconstruction code, we investigate the empirical stability properties when the data is interpreted as containing either absolute prices, relative prices, or mixtures of the two.",
                "The theoretical predictions of stability and instability are strongly borne out by the subsequent experiments.",
                "In addition to stability being of fundamental interest in any important dynamical system, we believe that the results described here provide food for thought on the topics of market impact and the backtesting of quantitative trading strategies (the attempt to determine hypothetical past performance using historical data).",
                "They suggest that ones confidence that trading quietly and in small volumes will have minimal market impact is linked to an implicit belief in an absolute price model.",
                "Our results and the fact that in the real markets there is a large and increasing amount of relative behavior such as penny-jumping would seem to cast doubts on such beliefs.",
                "Similarly, in a purely or largely relative-price world, backtesting even low-frequency, low-volume strategies could result in historical estimates of performance that are not only unrelated to future performance (the usual concern), but are not even accurate measures of a hypothetical past.",
                "The outline of the paper follows.",
                "In Section 2 we briefly review the large literature on market microstructure.",
                "In Section 3 we describe the limit order mechanism and our formal models.",
                "Section 4 presents our most important theoretical results, the 1-Modification Theorem for the absolute price model.",
                "This theorem is applied in Section 5 to derive a number of strong stability properties in the absolute model.",
                "Section 6 presents specific examples establishing the worstcase instability of the relative model.",
                "Section 7 contains the simulation studies that largely confirm our theoretical findings on INET market data. 2.",
                "RELATED WORK As was mentioned in the Introduction, market microstructure is an important and timely topic both in academic finance and on Wall Street, and consequently has a large and varied recent literature.",
                "Here we have space only to summarize the main themes of this literature and to provide pointers to further readings.",
                "To our knowledge the stability properties of detailed limit order microstructure dynamics have not been previously considered. (However, see Farmer and Joshi [6] for an example and survey of other price dynamic stability studies.) 121 On the more theoretical side, there is a rich line of work examining what might be considered the game-theoretic properties of limit order markets.",
                "These works model traders and market-makers (who provide liquidity by offering both buy and sell quotes, and profit on the difference) by utility functions incorporating tolerance for risks of price movement, large positions and other factors, and examine the resulting equilibrium prices and behaviors.",
                "Common findings predict negative price impacts for large trades, and price effects for large inventory holdings by market-makers.",
                "An excellent and comprehensive survey of results in this area can be found in [2].",
                "There is a similarly large body of empirical work on microstructure.",
                "Major themes include the measurement of price impacts, statistical properties of limit order books, and attempts to establish the informational value of order books [4].",
                "A good overview of the empirical work can be found in [7].",
                "Of particular note for our interests is [3], which empirically studies the distribution of arriving limit order prices in several prominent markets.",
                "This work takes a view of arriving prices analogous to our relative model, and establishes a power-law form for the resulting distributions.",
                "There is also a small but growing number of works examining market microstructure topics from a computer science perspective, including some focused on the use of microstructure in algorithms for optimized trade execution.",
                "Kakade et al. [9] introduced limit order dynamics in competitive analysis for one-way and volume-weighted average price (VWAP) trading.",
                "Some recent papers have applied reinforcement learning methods to trade execution using order book properties as state variables [1, 5, 10]. 3.",
                "MICROSTRUCTURE PRELIMINARIES The following expository background material is adapted from [9].",
                "The market mechanism we examine in this paper is driven by the simple and standard concept of a limit order.",
                "Suppose we wish to purchase 1000 shares of Microsoft (MSFT) stock.",
                "In a limit order, we specify not only the desired volume (1000 shares), but also the desired price.",
                "Suppose that MSFT is currently trading at roughly $24.07 a share (see Figure 1, which shows an actual snapshot of an MSFT order book on INET), but we are only willing to buy the 1000 shares at $24.04 a share or lower.",
                "We can choose to submit a limit order with this specification, and our order will be placed in a queue called the buy order book, which is ordered by price, with the highest offered unexecuted buy price at the top (often referred to as the bid).",
                "If there are multiple limit orders at the same price, they are ordered by time of arrival (with older orders higher in the book).",
                "In the example provided by Figure 1, our order would be placed immediately after the extant order for 5,503 shares at $24.04; though we offer the same price, this order has arrived before ours.",
                "Similarly, a sell order book for sell limit orders is maintained, this time with the lowest sell price offered (often referred to as the ask) at its top.",
                "Thus, the order books are sorted from the most competitive limit orders at the top (high buy prices and low sell prices) down to less competitive limit orders.",
                "The bid and ask prices together are sometimes referred to as the inside market, and the difference between them as the spread.",
                "By definition, the order books always consist exclusively of unexecuted orders - they are queues of orders hopefully waiting for the price to move in their direction.",
                "Figure 1: Sample INET order books for MSFT.",
                "How then do orders get (partially) executed?",
                "If a buy (sell, respectively) limit order comes in above the ask (below the bid, respectively) price, then the order is matched with orders on the opposing books until either the incoming orders volume is filled, or no further matching is possible, in which case the remaining incoming volume is placed in the books.",
                "For instance, suppose in the example of Figure 1 a buy order for 2000 shares arrived with a limit price of $24.08.",
                "This order would be partially filled by the two 500-share sell orders at $24.069 in the sell books, the 500-share sell order at $24.07, and the 200-share sell order at $24.08, for a total of 1700 shares executed.",
                "The remaining 300 shares of the incoming buy order would become the new bid of the buy book at $24.08.",
                "It is important to note that the prices of executions are the prices specified in the limit orders already in the books, not the prices of the incoming order that is immediately executed.",
                "Thus in this example, the 1700 executed shares would be at different prices.",
                "Note that this also means that in a pure limit order exchange such as INET, market orders can be simulated by limit orders with extreme price values.",
                "In exchanges such as INET, any order can be withdrawn or canceled by the party that placed it any time prior to execution.",
                "Every limit order arrives atomically and instantaneously - there is a strict temporal sequence in which orders arrive, and two orders can never arrive simultaneously.",
                "This gives rise to the definition of the last price of the exchange, which is simply the last price at which the exchange executed an order.",
                "It is this quantity that is usually meant when people casually refer to the (ticker) price of a stock. 3.1 Formal Definitions We now provide a formal model for the limit order pro122 cess described above.",
                "In this model, limit orders arrive in a temporal sequence, with each order specifying its limit price and an indication of its type (buy or sell).",
                "Like the actual exchanges, we also allow cancellation of a standing (unexecuted) order in the books any time prior to its execution.",
                "Without loss of generality we limit attention to a model in which every order is for a single share; large order volumes can be represented by 1-share sequences.",
                "Definition 3.1.",
                "Let Σ = σ1, ...σn be a sequence of limit orders, where each σi has the form ni, ti, vi .",
                "Here ni is an order identifier, ti is the order type (buy, sell, or cancel), and vi is the limit order value.",
                "In the case that ti is a cancel, ni matches a previously placed order and vi is ignored.",
                "We have deliberately called vi in the definition above the limit order value rather than price, since our two models will differ in their interpretation of vi (as being absolute or relative).",
                "In the absolute model, we do indeed interpret vi as simply being the price of the limit order.",
                "In the relative model, if the current order book configuration is (A, B) (where A is the sell and B the buy book), the price of the order is ask(A) + vi if ti is sell, and bid(B) + vi if ti is buy, where by ask(X) and bid(X) we denote the price of the order at the top of the book X. (Note vi can be negative.)",
                "Our main interest in this paper is the effects that the modification of a small number of limit orders can have on the resulting dynamics.",
                "For simplicity we consider only modifications to the limit order values, but our results generalize to any modification.",
                "Definition 3.2.",
                "A k-modification of Σ is a sequence Σ such that for exactly k indices i1, ..., ik vij = vij , tij = tij , and nij = nij .",
                "For every = ij , j ∈ {1, . . . , k} σ = σ .",
                "We now define the various quantities whose stability properties we examine in the absolute and relative models.",
                "All of these are standard quantities of common interest in financial markets. • volume(Σ): Number of shares executed (traded) in the sequence Σ. • average(Σ): Average execution price. • close(Σ): Price of the last (closing) execution. • lastbid(Σ): Bid at the end of the sequence. • lastask(Σ): Ask at end of the sequence. 4.",
                "THE 1-MODIFICATION THEOREM In this section we provide our most important technical result.",
                "It shows that in the absolute model, the effects that the modification of a single order has on the resulting evolution of the order books is extremely limited.",
                "We then apply this result to derive strong stability results for all of the aforementioned quantities in the absolute model.",
                "Throughout this section, we consider an arbitrary order sequence Σ in the absolute model, and any 1-modification Σ of Σ.",
                "At any point (index) i in the two sequences we shall use (A1, B1) to denote the sell and buy books (respectively) in Σ, and (A2, B2) to denote the sell and buy books in Σ ; for notational convenience we omit explicitly superscripting by the current index i.",
                "We will shortly establish that at all times i, (A1, B1) and (A2, B2) are very close.",
                "Although the order books are sorted by price, we will use (for example) A1 ∪ {a2} = A2 to indicate that A2 contains an order at some price a2 that is not present in A1, but that otherwise A1 and A2 are identical; thus deleting the order at a2 in A2 would render the books the same.",
                "Similarly, B1 ∪ {b2} = B2 ∪ {b1} means B1 contains an order at price b1 not present in B2, B2 contains an order at price b2 not present in B1, and that otherwise B1 and B2 are identical.",
                "Using this notation, we now define a set of stable system states, where each state is composed from the order books of the original and the modified sequences.",
                "Shortly we show that if we change only one orders value (price), we remain in this set for any sequence of limit orders.",
                "Definition 4.1.",
                "Let ab be the set of all states (A1, B1) and (A2, B2) such that A1 = A2 and B1 = B2.",
                "Let ¯ab be the set of states such that A1 ∪ {a2} = A2 ∪ {a1}, where a1 = a2, and B1 = B2.",
                "Let a¯b be the set of states such that B1∪{b2} = B2∪{b1}, where b1 = b2, and A1 = A2.",
                "Let ¯a¯b be the set of states in which A1 = A2∪{a1} and B1 = B2∪{b1}, or in which A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}.",
                "Finally we define S = ab ∪ ¯ab ∪ ¯ba ∪ ¯a¯b as the set of stable states.",
                "Theorem 4.1. (1-Modification Theorem) Consider any sequence of orders Σ and any 1-modification Σ of Σ.",
                "Then the order books (A1, B1) and (A2, B2) determined by Σ and Σ lie in the set S of stable states at all times. ab ¯a¯b a¯b¯ab Figure 2: Diagram representing the set S of stable states and the possible movements transitions in it after the change.",
                "The idea of the proof of this theorem is contained in Figure 2, which shows a state transition diagram labeled by the categories of stable states.",
                "This diagram describes all transitions that can take place after the arrival of the order on which Σ and Σ differ.",
                "The following establishes that immediately after the arrival of this differing order, the state lies in S. Lemma 4.2.",
                "If at any time the current books (A1, B1) and (A2, B2) are in the set ab (and thus identical), then modifying the price of the next order keeps the state in S. Proof.",
                "Suppose the arriving order is a sell order and we change it from a1 to a2; assume without loss of generality that a1 > a2.",
                "If neither order is executed immediately, then we move to state ¯ab; if both of them are executed then we stay in state ab; and if only a2 is executed then we move to state ¯a¯b.",
                "The analysis of an arriving buy order is similar.",
                "Following the arrival of their only differing order, Σ and Σ are identical.",
                "We now give a sequence of lemmas showing 123 Executed with two orders Not executed in both Arrivng buy order Arriving buy order Arriving buy order Arriving sell order ¯ab ab ¯a¯b Executed only with a1 (not a1 and a2) Executed with a1 and a2 Figure 3: The state diagram when starting at state ¯ab.",
                "This diagram provides the intuition of Lemma 4.3 that following the initial difference covered by Lemma 4.2, the state remains in S forever on the remaining (identical) sequence.",
                "We first show that from state ¯ab we remain in S regardless the next order.",
                "The intuition of this lemma is demonstrated in Figure 3.",
                "Lemma 4.3.",
                "If the current state is in the set ¯ab, then for any order the state will remain in S. Proof.",
                "We first provide the analysis for the case of an arriving sell order.",
                "Note that in ¯ab the buy books are identical (B1 = B2).",
                "Thus either the arriving sell order is executed with the same buy order in both buy books, or it is not executed in both buy books.",
                "For the first case, the buy books remain identical (the bid is executed in both) and the sell books remain unchanged.",
                "For the second case, the buy books remain unchanged and identical, and the sell books have the new sell order added to both of them (and thus still differ by one order).",
                "Next we provide an analysis of the more subtle case where the arriving item is a buy order.",
                "For this case we need to take care of several different scenarios.",
                "The first is when the top of both sell books (the ask) is identical.",
                "Then regardless of whether the new buy order is executed or not, the state remains in ¯ab (the analysis is similar to an arriving sell order).",
                "We are left to deal with case where ask(A1) and ask(A2) are different.",
                "Here we discuss two subcases: (a) ask(A1) = a1 and ask(A2) = a2, and (b) ask(A1) = a1 and ask(A2) = a .",
                "Here a1 and a2 are as in the definition of ¯ab in Definition 4.1, and a is some other price.",
                "For subcase (a), by our assumption a1 < a2, then either (1) both asks get executed, the sell books become identical, and we move to state ab; (2) neither ask is executed and we remain in state ¯ab; or (3) only ask(A1) = a1 is executed, in which case we move to state ¯a¯b with A2 = A1 ∪ {a2} and B2 = B1 ∪ {b2}, where b2 is the arriving buy order price.",
                "For subcase (b), either (1) buy order is executed in neither sell book we remain in state ¯ab; or (2) the buy order is executed in both sell books and stay in state ¯ab with A1 ∪ {a } = A2 ∪ {a2}; or (3) only ask(A1) = a1 is executed and we move to state ¯a¯b.",
                "Lemma 4.4.",
                "If the current state is in the set a¯b, then for any order the state will remain in S. Lemma 4.5.",
                "If the current configuration is in the set ¯a¯b, then for any order the state will remain in S The proofs of these two lemmas are omitted, but are similar in spirit to that of Lemma 4.3.",
                "The next and final lemma deals with cancellations.",
                "Lemma 4.6.",
                "If the current order book state lies in S, then following the arrival of a cancellation it remains in S. Proof.",
                "When a cancellation order arrives, one of the following possibilities holds: (1) the order is still in both sets of books, (2) it is not in either of them and (3) it is only in one of them.",
                "For the first two cases it is easy to see that the cancellation effect is identical on both sets of books, and thus the state remains unchanged.",
                "For the case when the order appears only in one set of books, without loss of generality we assume that the cancellation cancels a buy order at b1.",
                "Rather than removing b1 from the book we can change it to have price 0, meaning this buy order will never be executed and is effectively canceled.",
                "Now regardless the state that we were in, b1 is still only in one buy book (but with a different price), and thus we remain in the same state in S. The proof of Theorem 4.1 follows from the above lemmas. 5.",
                "ABSOLUTE MODEL STABILITY In this section we apply the 1-Modification Theorem to show strong stability properties for the absolute model.",
                "We begin with an examination of the executed volume.",
                "Lemma 5.1.",
                "Let Σ be any sequence and Σ be any 1modification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2.",
                "Proof.",
                "By Theorem 4.1 we know that at each stage the books differ by at most two orders.",
                "Now since the union of the IDs of the executed orders and the order books is always identical for both sequences, this implies that the executed orders can differ by at most two.",
                "Corollary 5.2.",
                "Let Σ be any sequence and Σ be any kmodification of Σ.",
                "Then the set of the executed orders (ID numbers) generated by the two sequences differs by at most 2k.",
                "An order sequence Σ is a k-extension of Σ if Σ can be obtained by deleting any k orders in Σ .",
                "Lemma 5.3.",
                "Let Σ be any sequence and let Σ be any kextension of Σ.",
                "Then the set of the executed orders generated by Σ and Σ differ by at most 2k.",
                "This lemma is the key to obtain our main absolute model volume result below.",
                "We use edit(Σ, Σ ) to denote the standard edit distance between the sequences Σ and Σ - the minimal number of substitutions, insertions and deletions or orders needed to change Σ to Σ .",
                "Theorem 5.4.",
                "Let Σ and Σ be any absolute model order sequences.",
                "Then if edit(Σ, Σ ) ≤ k, the set of the executed orders generated by Σ and Σ differ by at most 4k.",
                "In particular, |volume(Σ) − volume(Σ )| ≤ 4k.",
                "Proof.",
                "We first define the sequence ˜Σ which is the intersection of Σ and Σ .",
                "Since Σ and Σ are at most k apart,we have that by k insertions we change ˜Σ to either Σ or Σ , and by Lemma 5.3 its set of executed orders is at most 2k from each.",
                "Thus the set of executed orders in Σ and Σ is at most 4k apart. 124 5.1 Spread Bounds Theorem 5.4 establishes strong stability for executed volume in the absolute model.",
                "We now turn to the quantities that involve execution prices as opposed to volume alone - namely, average(Σ), close(Σ), lastbid(Σ) and lastask(Σ).",
                "For these results, unlike executed volume, a condition must hold on Σ in order for stability to occur.",
                "This condition is expressed in terms of a natural measure of the spread of the market, or the gap between the buyers and sellers.",
                "We motivate this condition by first showing that without it, by changing one order, we can change average(Σ) by any positive value x. Lemma 5.5.",
                "There exists Σ such that for any x ≥ 0, there is a 1-modification Σ of Σ such that average(Σ ) = average(Σ) + x.",
                "Proof.",
                "Let Σ be a sequence of alternating sell and buy orders in which each seller offers p and each buyer p + x, and the first order is a sell.",
                "Then all executions take place at the ask, which is always p, and thus average(Σ) = p. Now suppose we modify only the first sell order to be at price p+1+x.",
                "This initial sell order will never be executed, and now all executions take place at the bid, which is always p + x.",
                "Similar instability results can be shown to hold for the other price-based quantities.",
                "This motivates the introduction of a quantity we call the second spread of the order books, which is defined as the difference between the prices of the second order in the sell book and the second order in the buy book (as opposed to the bid-ask difference, which is commonly called the spread).",
                "We note that in a liquid stock, such as those we examine experimentally in Section 7, the second spread will typically be quite small and in fact almost always equal to the spread.",
                "In this subsection we consider changes in the sequence only after an initialization period, and sequences such that the second spread is always defined after the time we make a change.",
                "We define s2(Σ) to be the maximum second spread in the sequence Σ following the change.",
                "Theorem 5.6.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ s2(Σ) 2. |lastask(Σ) − lastask(Σ )| ≤ s2(Σ) where s2(Σ) is the maximum over the second spread in Σ following the 1-modification.",
                "Proof.",
                "We provide the proof for the last bid; the proof for the last ask is similar.",
                "The proof relies on Theorem 4.1 and considers states in the stable set S. For states ab and ¯ab, we have that the bid is identical.",
                "Let bid(X), sb(X), ask(X), be the bid, the second highest buy order, and the ask of a sequence X.",
                "Now recall that in state a¯b we have that the sell books are identical, and that the two buy books are identical except one different order.",
                "Thus bid(Σ)+s2(Σ) ≥ sb(Σ)+s2(Σ) ≥ ask(Σ) = ask(Σ ) ≥ bid(Σ ).",
                "Now it remains to bound bid(Σ).",
                "Here we use the fact that the bid of the modified sequence is at least the second highest buy order in the original sequence, due to the fact that the books are different only in one order.",
                "Since bid(Σ ) ≥ sb(Σ) ≥ ask(Σ) − s2(Σ) ≥ bid(Σ) − s2(Σ) we have that |bid(Σ) − bid(Σ )| ≤ s2(Σ) as desired.",
                "In state ¯a¯b we have that for one sequence the books contain an additional buy order and an additional sell order.",
                "First suppose that the books containing the additional orders are the original sequence Σ.",
                "Now if the bid is not the additional order we are done, otherwise we have the following: bid(Σ) ≤ ask(Σ) ≤ sb(Σ) + s2(Σ) = bid(Σ ) + s2(Σ), where sb(Σ) ≤ bid(Σ ) since the original buy book has only one additional order.",
                "Now assume that the books with the additional orders are for the modified sequence Σ .",
                "We have bid(Σ) + s2(Σ) ≥ ask(Σ) ≥ ask(Σ ) ≥ bid(Σ ), where we used the fact that ask(Σ) ≥ ask(Σ ) since the modified sequence has an additional order.",
                "Similarly we have that bid(Σ) ≤ bid(Σ ) since the modified buy book contains an additional order.",
                "We note that the proof of Theorem 5.6 actually establishes that the bid and ask of the original and modified sequences are within s2(Σ) at all times.",
                "Next we provide a technical lemma which relates the (first) spread of the modified sequence to the second spread of the original sequence.",
                "Lemma 5.7.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then the spread of Σ is bounded by s2(Σ).",
                "Proof.",
                "By the 1-Modification Theorem, we know that the books of the modified sequence and the original sequence can differ by at most one order in each book (buy and sell).",
                "Therefore, the second-highest buy order in the original sequence is always at most the bid in the modified sequence, and the second-lowest sell order in the original sequence is always at least the ask of the modified sequence.",
                "We are now ready to state a stability result for the average execution price in the absolute model.",
                "It establishes that in highly liquid markets, where the executed volume is large and the spread small, the average price is highly stable.",
                "Theorem 5.8.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "Then |average(Σ) − average(Σ )| ≤ 2(pmax + s2(Σ)) volume(Σ) + s2(Σ) where pmax is the highest execution price in Σ.",
                "Proof.",
                "The proof will show that every execution in Σ besides the execution of the modified order and the last execution has a matching execution in Σ with a price different by at most s2(Σ), and will use the fact that pmax + s2(Σ) is a bound on the price in Σ .",
                "Referring to the proof of the 1-Modification Theorem, suppose we are in state ¯a¯b, where we have in one sequence (which can be either Σ or Σ ) an additional buy order b and an additional sell order a.",
                "Without loss of generality we assume that the sequence with the additional orders is Σ.",
                "If the next execution does not involve a or b then clearly we have the same execution in both Σ and Σ .",
                "Suppose that it involves a; there are two possibilities.",
                "Either a is the modified order, in which case we change the average price 125 difference by (pmax +s2(Σ))/volume(Σ), and this can happen only once; or a was executed before in Σ and the executions both involve an order whose limit price is a.",
                "By Lemma 5.7 the spread of both sequences is bounded by s2(Σ), which implies that the price of the execution in Σ was at most a + s2(Σ), while execution is in Σ is at price a, and thus the prices are different by at most s2(Σ).",
                "In states ¯ab, a¯b as long as we have concurrent executions in the two sequences, we know that the prices can differ by at most s2(Σ).",
                "If we have an execution only in one sequence, we either match it in state ¯a¯b, or charge it by (pmax + s2(Σ))/volume(Σ) if we end at state ¯a¯b.",
                "If we end in state ab, ¯ab or a¯b, then every execution in states ¯ab or a¯b were matched to an execution in state ¯a¯b.",
                "If we end up in state ¯a¯b, we have the one execution that is not matched and thus we charge it (pmax +s2(Σ))/volume(Σ).",
                "We next give a stability result for the closing price.",
                "We first provide a technical lemma regarding the prices of consecutive executions.",
                "Lemma 5.9.",
                "Let Σ be any sequence.",
                "Then the prices of two consecutive executions in Σ differ by at most s2(Σ).",
                "Proof.",
                "Suppose the first execution is taken at time t; its price is bounded below by the current bid and above by the current ask.",
                "Now after this execution the bid is at least the second highest buy order at time t, if the former bid was executed and no higher buy orders arrived, and higher otherwise.",
                "Similarly, the ask is at most the second lowest sell order at time t. Therefore, the next execution price is at least the second bid at time t and at most the second ask at time t, which is at most s2(Σ) away from the bid/ask at time t. Lemma 5.10.",
                "Let Σ be any sequence and let Σ be a 1modification of Σ.",
                "If the volume(Σ) ≥ 2, then |close(Σ) − close(Σ )| ≤ s2(Σ) Proof.",
                "We first deal with case where the last execution occurs in both sequences simultaneously.",
                "By Theorem 5.6, both the ask and the bid of Σ and Σ are at most s2(Σ) apart at every time t. Since the price of the last execution is their asks (bids) at time t we are done.",
                "Next we deal with the case where the last execution among the two sequences occurs only in Σ.",
                "In this case we know that either the previous execution happened simultaneously in both sequences at time t, and thus all three executions are within the second spread of Σ at time t (the first execution in Σ by definition, the execution at Σ from identical arguments as in the former case, and the third by Lemma 5.9).",
                "Otherwise the previous execution happened only in Σ at time t, in which case the two executions are within the the spread of Σ at time t (the execution of Σ from the same arguments as before, and the execution in Σ must be inside its spread in time t).",
                "If the last execution happens only in Σ we know that the next execution of Σ will be at most s2(Σ) away from its previous execution by Lemma 5.9.",
                "Together with the fact that if an execution happens only in one sequence it implies that the order is in the spread of the second sequence as long as the sequences are 1-modification, the proof is completed. 5.2 Spread Bounds for k-Modifications As in the case of executed volume, we would like to extend the absolute model stability results for price-based quantities to the case where multiple orders are modified.",
                "Here our results are weaker and depend on the k-spread, the distance between the kth highest buy order and the kth lowest sell order, instead of the second spread. (Looking ahead to Section 7, we note that in actual market data for liquid stocks, this quantity is often very small as well.)",
                "We use sk(Σ) to denote the k-spread.",
                "As before, we assume that the k-spread is always defined after an initialization period.",
                "We first state the following generalization of Lemma 5.7.",
                "Lemma 5.11.",
                "Let Σ be a sequence and let Σ be any 1modification of Σ.",
                "For ≥ 1, if s +1(Σ) is always defined after the change, then s (Σ ) ≤ s +1(Σ).",
                "The proof is similar to the proof of Lemma 5.7 and omitted.",
                "A simple application of this lemma is the following: Let Σ be any sequence which is an -modification of Σ.",
                "Then we have s2(Σ ) ≤ s +2(Σ).",
                "Now using the above lemma and by simple induction we can obtain the following theorem.",
                "Theorem 5.12.",
                "Let Σ be a sequence and let Σ be any k-modification of Σ.",
                "Then 1. |lastbid(Σ) − lastbid(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 2. |lastask(Σ)−lastask(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 3. |close(Σ) − close(Σ )| ≤ Pk =1 s +1(Σ) ≤ ksk+1(Σ) 4. |average(Σ) − average(Σ )| ≤ Pk =1 2(pmax +s +1(Σ)) volume(Σ) + s +1(Σ) where s (Σ) is the maximum over the -spread in Σ following the first modification.",
                "We note that while these bounds depend on deeper measures of spread for more modifications, we are working in a 1-share order model.",
                "Thus in an actual market, where single orders contain hundreds or thousands of shares, the k-spread even for large k might be quite small and close to the standard 1-spread in liquid stocks. 6.",
                "RELATIVE MODEL INSTABILITY In the relative model the underlying assumption is that traders try to exploit their knowledge of the books to strategically place their orders.",
                "Thus if a trader wants her buy order to be executed quickly, she may position it above the current bid and be the first in the queue; if the trader is patient and believes that the price trend is going to be downward she will place orders deeper in the buy book, and so on.",
                "While in the previous sections we showed stability results for the absolute model, here we provide simple examples which show instability in the relative model for the executed volume, last bid, last ask, average execution price and the last execution price.",
                "In Section 7 we provide many simulations on actual market data that demonstrate that this instability is inherent to the relative model, and not due to artificial constructions.",
                "In the relative model we assume that for every sequence the ask and bid are always defined, so the books have a non-empty initial configuration. 126 We begin by showing that in the relative model, even a single modification can double the number of shares executed.",
                "Theorem 6.1.",
                "There is a sequence Σ and a 1-modification Σ of Σ such that volume(Σ ) ≥ 2volume(Σ).",
                "Proof.",
                "For concreteness we assume that at the beginning the ask is 10 and the bid is 8.",
                "The sequence Σ is composed from n buy orders with ∆ = 0, followed by n sell orders with ∆ = 0, and finally an alternating sequence of buy orders with ∆ = +1 and sell orders with ∆ = −1 of length 2n.",
                "Since the books before the alternating sequence contain n + 1 sell orders at 10 and n + 1 buy orders at 8, we have that each pair of buy sell order in the alternating part is matched and executed, but none of the initial 2n orders is executed, and thus volume(Σ) = n. Now we change the first buy order to have ∆ = +1.",
                "After the first 2n orders there are still no executions; however, the books are different.",
                "Now there are n + 1 sell orders at 10, n buy orders at 9 and one buy order at 8.",
                "Now each order in the alternating sequence is executed with one of the former orders and we have volume(Σ ) = 2n.",
                "The next theorem shows that the spread-based stability results of Section 5.1 do not also hold in the relative model.",
                "Before providing the proof, we give its intuition.",
                "At the beginning the sell book contains only two prices which are far apart and both contain only two orders, now several buy orders arrive, at the original sequence they are not being executed, while in the modified sequence they will be executed and leave the sell book with only the orders at the high price.",
                "Now many sell orders followed by many buy orders will arrive, such that in the original sequence they will be executed only at the low price and in the modified sequence they will executed at the high price.",
                "Theorem 6.2.",
                "For any positive numbers s and x, there is sequence Σ such that s2(Σ) = s and a 1-modification Σ of Σ such that • |close(Σ) − close(Σ )| ≥ x • |average(Σ) − average(Σ )| ≥ x • |lastbid(Σ) − lastbid(Σ )| ≥ x • |lastask(Σ) − lastask(Σ )| ≥ x Proof.",
                "Without loss of generality let us consider sequences in which all prices are integer-valued, in which case the smallest possible value for the second spread is 1; we provide the proof for the case s2(Σ) = 2, but the s2(Σ) = 1 case is similar.",
                "We consider a sequence Σ such that after an initialization period there have been no executions, the buy book has 2 orders at price 10, and the sell book has two orders at price 12 and 2 orders with value 12+y, where y is a positive integer that will be determined by the analysis.",
                "The original sequence Σ is a buy order with ∆ = 0, followed by two buy orders with ∆ = +1, then 2y sell orders with ∆ = 0, and then 2y buy orders with ∆ = +1.",
                "We first note that s2(Σ) = 2, there are 2y executions, all at price 12, the last bid is 11 and the last ask is 12.",
                "Next we analyze a modified sequence.",
                "We change the first buy order from ∆ = 0 to ∆ = +1.",
                "Therefore, the next two buy orders with ∆ = +1 are executed, and afterwards we have that the bid is 11 and the ask is 12 + y.",
                "Now the 2y sell orders are accumulated at 12+y, and after the next y buy orders the bid is at 12+y−1.",
                "Therefore, at the end we have that lastbid(Σ ) = 12 + y − 1, lastask(Σ ) = 12 + y, close(Σ ) = 12 + y, and average(Σ ) = y y+2 (12 + y) + 2 y+2 (12).",
                "Setting y = x + 2, we obtain the lemma for every property.",
                "We note that while this proof was based on the fact that there are two consecutive orders in the books which are far (y) apart, we can provide a slightly more complicated example in which all orders are close (at most 2 apart), yet still one change results in large differences. 7.",
                "SIMULATION STUDIES The results presented so far paint a striking contrast between the absolute and relative price models: while the absolute model enjoys provably strong stability over any fixed event sequence, there exist at least specific sequences demonstrating great instability in the relative model.",
                "The worstcase nature of these results raises the question of the extent to which such differences could actually occur in real markets.",
                "In this section we provide indirect evidence on this question by presenting simulation results exploiting a rich source of real-market historical limit order sequence data.",
                "By interpreting arriving limit order prices as either absolute values, or by transforming them into differences with the current bid and ask (relative model), we can perform small modifications on the sequences and examine how different various outcomes (volume traded, average price, etc.) would be from what actually occurred in the market.",
                "These simulations provide an empirical counterpart to the theory we have developed.",
                "We emphasize that all such simulations interpret the actual historical data as falling into either the absolute or relative model, and are meaningful only within the confines of such an interpretation.",
                "Nevertheless, we feel they provide valuable empirical insight into the potential (in)stability properties of modern equity limit order markets, and demonstrate that ones belief or hope in stability largely relies on an absolute model interpretation.",
                "We also investigate the empirical behavior of mixtures of absolute and relative prices. 7.1 Data The historical data used in our simulations is commercially available limit order data from INET, the previously mentioned electronic exchange for NASDAQ stocks.",
                "Broadly speaking, this data consists of practically every single event on INET regarding the trading of an individual stockevery arriving limit order (price, volume, and sequence ID number), every execution, and every cancellation of a standing order - all timestamped in milliseconds.",
                "It is data sufficient to recreate the precise INET order book in a given stock on a given day and time.",
                "We will report stability properties for three stocks: Amazon, Nvidia, and Qualcomm (identified in the sequel by their tickers, AMZN, NVDA and QCOM).",
                "These three provide some range of liquidities (with QCOM having the greatest and NVDA the least liquidity on INET) and other trading properties.",
                "We note that the qualitative results of our simulations were similar for several other stocks we examined. 127 7.2 Methodology For our simulations we employed order-book reconstruction code operating on the underlying raw data.",
                "The basic format of each experiment was the following: 1.",
                "Run the order book reconstruction code on the original INET data and compute the quantity of interest (volume traded, average price, etc.) 2.",
                "Make a small modification to a single order, and recompute the resulting value of the quantity of interest.",
                "In the absolute model case, Step 2 is as simple as modifying the order in the original data and re-running the order book reconstruction.",
                "For the relative model, we must first pre-process the raw data and convert its prices to relative values, then make the modification and re-run the order book reconstruction on the relative values.",
                "The type of modification we examined was extremely small compared to the volume of orders placed in these stocks: namely, the deletion of a single randomly chosen order from the sequence.",
                "Although a deletion is not 1-modification, its edit distance is 1 and we can apply Theorem 5.4.",
                "For each trading day examined,this single deleted order was selected among those arriving between 10 AM and 3 PM, and the quantities of interest were measured and compared at 3 PM.",
                "These times were chosen to include the busiest part of the trading day but avoid the half hour around the opening and closing of the official NASDAQ market (9:30 AM and 3:30 PM respectively), which are known to have different dynamics than the central portion of the day.",
                "We run the absolute and relative model simulations on both the raw INET data and on a cleaned version of this data.",
                "In the cleaned we remove all limit orders that were canceled in the actual market prior to their execution (along with the cancellations themselves).",
                "The reason is that such cancellations may often be the first step in the repositioning of orders - that is, cancellations of the order that are followed by the submission of a replacement order at a different price.",
                "Not removing canceled orders allows the possibility of modified simulations in which the same order 1 is executed twice, which may magnify instability effects.",
                "Again, it is clear that neither the raw nor the cleaned data can perfectly reflect what would have happened under the deleted orders in the actual market.",
                "However, the results both from the raw data and the clean data are qualitatively similar.",
                "The results mainly differ, as expected, in the executed volume, where the instability results for the relative model are much more dramatic in the raw data. 7.3 Results We begin with summary statistics capturing our overall stability findings.",
                "Each row of the tables below contains a ticker (e.g.",
                "AMZN) followed by either -R (for the uncleaned or raw data) or -C (for the data with canceled orders removed).",
                "For each of the approximately 250 trading days in 2003, 1000 trials were run in which a randomly selected order was deleted from the INET event sequence.",
                "For each quantity of interest (volume executed, average price, closing price and last bid), we show for the both the absolute and 1 Here same is in quotes since the two orders will actually have different sequence ID numbers, which is what makes such repositioning activity impossible to reliably detect in the data. relative model the average percentage change in the quantity induced by the deletion.",
                "The results confirm rather strikingly the qualitative conclusions of the theory we have developed.",
                "In virtually every case (stock, raw or cleaned data, and quantity) the percentage change induced by a single deletion in the relative model is many orders of magnitude greater than in the absolute model, and shows that indeed butterfly effects may occur in a relative model market.",
                "As just one specific representative example, notice that for QCOM on the cleaned data, the relative model effect of just a single deletion on the closing price is in excess of a full percentage point.",
                "This is a variety of market impact entirely separate from the more traditional and expected kind generated by trading a large volume of shares.",
                "Stock Date volume average Rel Abs Rel Abs AMZN-R 2003 15.1% 0.04% 0.3% 0.0002% AMZN-C 2003 0.69% 0.087% 0.36% 0.0007% NVDA-R 2003 9.09% 0.05 % 0.17% 0.0003% NVDA-C 2003 0.73% 0.09 % 0.35% 0.001% QCOM-R 2003 16.94% 0.035% 0.21% 0.0002% QCOM-C 2003 0.58% 0.06% 0.35% 0.0005% Stock Date close lastbid Rel Abs Rel Abs AMZN-R 2003 0.78% 0.0001% 0.78% 0.0007% AMZN-C 2003 1.10% 0.077% 1.11% 0.001% NVDA-R 2003 1.17% 0.002 % 1.18 % 0.08% NVDA-C 2003 0.45% 0.0003% 0.45% 0.0006% QCOM-R 2003 0.58% 0.0001% 0.58% 0.0004% QCOM-C 2003 1.05% 0.0006% 1.05% 0.06% In Figure 4 we examine how the change to one the quantities, the average execution price, grows with the introduction of greater perturbations of the event sequence in the two models.",
                "Rather than deleting only a single order between 10 AM and 3 PM, in these experiments a growing number of randomly chosen deletions was performed, and the percentage change to the average price measured.",
                "As suggested by the theory we have developed, for the absolute model the change to the average price grows linearly with the number of deletions and remains very small (note the vastly different scales of the y-axis in the panels for the absolute and relative models in the figure).",
                "For the relative model, it is interesting to note that while small numbers of changes have large effects (often causing average execution price changes well in excess of 0.1 percent), the effects of large numbers of changes levels off quite rapidly and consistently.",
                "We conclude with an examination of experiments with a mixture model.",
                "Even if one accepts a world in which traders behave in either an absolute or relative manner, one would be likely to claim that the market contains a mixture of both.",
                "We thus ran simulations in which each arriving order in the INET event streams was treated as an absolute price with probability α, and as a relative price with probability 1−α.",
                "Representative results for the average execution price in this mixture model are shown in Figure 5 for AMZN and NVDA.",
                "Perhaps as expected, we see a monotonic decrease in the percentage change (instability) as the fraction of absolute traders increases, with most of the reduction already being realized by the introduction of just a small population of absolute traders.",
                "Thus even in a largely relative-price world, a 128 0 10 20 30 40 50 60 70 80 90 100 0 0.5 1 1.5 2 2.5 x 10 −3 QCOM−R June 2004: Absolute Number of changes Averageprice 0 10 20 30 40 50 60 70 80 90 100 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 QCOM−R June 2004: Relative Number of changes Averageprice Figure 4: Percentage change to the average execution price (y-axis) as a function of the number of deletions to the sequence (x-axis).",
                "The left panel is for the absolute model, the right panel for the relative model, and each curve corresponds to a single day of QCOM trading in June 2004.",
                "Curves represent averages over 1000 trials. small minority of absolute traders can have a greatly stabilizing effect.",
                "Similar behavior is found for closing price and last bid. 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 AMZN−R Feburary 2004 α Averageprice 0 0.2 0.4 0.6 0.8 1 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 NVDA−R June 2004 α Averageprice Figure 5: Percentage change to the average execution price (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "Each curve corresponds to a single day of trading during a month of 2004.",
                "Curves represent averages over 1000 trials.",
                "For the executed volume in the mixture model, however, the findings are more curious.",
                "In Figure 6, we show how the percentage change to the executed volume varies with the absolute trader fraction α, for NVDA data that is both raw and cleaned of cancellations.",
                "We first see that for this quantity, unlike the others, the difference induced by the cleaned and uncleaned data is indeed dramatic, as already suggested by the summary statistics table above.",
                "But most intriguing is the fact that the stability is not monotonically increasing with α for either the cleaned or uncleaned datathe market with maximum instability is not a pure relative price market, but occurs at some nonzero value for α.",
                "It was in fact not obvious to us that sequences with this property could even be artificially constructed, much less that they would occur as actual market data.",
                "We have yet to find a satisfying explanation for this phenomenon and leave it to future research. 8.",
                "ACKNOWLEDGMENTS We are grateful to Yuriy Nevmyvaka of Lehman Brothers in New York for the use of his INET order book reconstruction code, and for valuable comments on the work presented 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 0.5 1 1.5 2 2.5 3 3.5 4 NVDA−C June 2004 α Volume 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 0 2 4 6 8 10 12 14 16 18 NVDA−R June 2004 α Volume Figure 6: Percentage change to the executed volume (y-axis) vs. probability of treating arriving INET orders as absolute prices (x-axis).",
                "The left panel is for NVDA using the raw data that includes cancellations, while the right panel is on the cleaned data.",
                "Each curve corresponds to a single day of trading during June 2004.",
                "Curves represent averages over 1000 trials. here.",
                "Yishay Mansour was supported in part by the IST Programme of the European Community, under the PASCAL Network of Excellence, IST-2002-506778, by a grant from the Israel Science Foundation and an IBM faculty award. 9.",
                "REFERENCES [1] D. Bertsimas and A.",
                "Lo.",
                "Optimal control of execution costs.",
                "Journal of Financial Markets, 1:1-50, 1998. [2] B. Biais, L. Glosten, and C. Spatt.",
                "Market microstructure: a survey of microfoundations, empirical results and policy implications.",
                "Journal of Financial Markets, 8:217-264, 2005. [3] J.-P. Bouchaud, M. Mezard, and M. Potters.",
                "Statistical properties of stock order books: empirical results and models.",
                "Quantitative Finance, 2:251-256, 2002. [4] C. Cao, O.Hansch, and X. Wang.",
                "The informational content of an open limit order book, 2004.",
                "AFA 2005 Philadelphia Meetings, EFA Maastricht Meetings Paper No. 4311. [5] R. Coggins, A. Blazejewski, and M. Aitken.",
                "Optimal trade execution of equities in a limit order market.",
                "In International Conference on Computational Intelligence for Financial Engineering, pages 371-378, March 2003. [6] D. Farmer and S. Joshi.",
                "The price dynamics of common trading strategies.",
                "Journal of Economic Behavior and Organization, 29:149-171, 2002. [7] J. Hasbrouck.",
                "Empirical market microstructure: Economic and statistical perspectives on the dynamics of trade in securities markets, 2004.",
                "Course notes, Stern School of Business, New York University. [8] R. Kissell and M. Glantz.",
                "Optimal Trading Strategies.",
                "Amacom, 2003. [9] S.Kakade, M. Kearns, Y. Mansour, and L. Ortiz.",
                "Competitive algorithms for VWAP and limit order trading.",
                "In Proceedings of the ACM Conference on Electronic Commerce, pages 189-198, 2004. [10] Y.Nevmyvaka, Y. Feng, and M. Kearns.",
                "Reinforcement learning for optimized trade execution, 2006.",
                "Preprint. 129"
            ],
            "original_annotated_samples": [],
            "translated_annotated_samples": [],
            "translated_text": "",
            "candidates": [],
            "error": []
        }
    }
}